{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@redash/viz/node_modules/moment/locale sync en","webpack:///./client/app/assets/images/redash_icon_small.png","webpack:///./client/app/assets/images sync \\.(png|jpe","webpack:///./client/app/assets/images/db-logos/Cassandra.png","webpack:///./client/app/assets/images/db-logos/athena.png","webpack:///./client/app/assets/images/db-logos/aws_es.png","webpack:///./client/app/assets/images/db-logos/axibasetsd.png","webpack:///./client/app/assets/images/db-logos/azure_kusto.png","webpack:///./client/app/assets/images/db-logos/bigquery.png","webpack:///./client/app/assets/images/db-logos/bigquery_gce.png","webpack:///./client/app/assets/images/db-logos/clickhouse.png","webpack:///./client/app/assets/images/db-logos/cloudwatch.png","webpack:///./client/app/assets/images/db-logos/cloudwatch_insights.png","webpack:///./client/app/assets/images/db-logos/cockroach.png","webpack:///./client/app/assets/images/db-logos/couchbase.png","webpack:///./client/app/assets/images/db-logos/csv.png","webpack:///./client/app/assets/images/db-logos/databricks.png","webpack:///./client/app/assets/images/db-logos/db2.png","webpack:///./client/app/assets/images/db-logos/dgraph.png","webpack:///./client/app/assets/images/db-logos/drill.png","webpack:///./client/app/assets/images/db-logos/druid.png","webpack:///./client/app/assets/images/db-logos/dynamodb_sql.png","webpack:///./client/app/assets/images/db-logos/elasticsearch.png","webpack:///./client/app/assets/images/db-logos/exasol.png","webpack:///./client/app/assets/images/db-logos/google_analytics.png","webpack:///./client/app/assets/images/db-logos/google_spreadsheets.png","webpack:///./client/app/assets/images/db-logos/graphite.png","webpack:///./client/app/assets/images/db-logos/hive.png","webpack:///./client/app/assets/images/db-logos/hive_http.png","webpack:///./client/app/assets/images/db-logos/impala.png","webpack:///./client/app/assets/images/db-logos/influxdb.png","webpack:///./client/app/assets/images/db-logos/jirajql.png","webpack:///./client/app/assets/images/db-logos/json.png","webpack:///./client/app/assets/images/db-logos/kibana.png","webpack:///./client/app/assets/images/db-logos/kylin.png","webpack:///./client/app/assets/images/db-logos/mapd.png","webpack:///./client/app/assets/images/db-logos/memsql.png","webpack:///./client/app/assets/images/db-logos/mongodb.png","webpack:///./client/app/assets/images/db-logos/mssql.png","webpack:///./client/app/assets/images/db-logos/mssql_odbc.png","webpack:///./client/app/assets/images/db-logos/mysql.png","webpack:///./client/app/assets/images/db-logos/oracle.png","webpack:///./client/app/assets/images/db-logos/pg.png","webpack:///./client/app/assets/images/db-logos/phoenix.png","webpack:///./client/app/assets/images/db-logos/presto.png","webpack:///./client/app/assets/images/db-logos/prometheus.png","webpack:///./client/app/assets/images/db-logos/python.png","webpack:///./client/app/assets/images/db-logos/qubole.png","webpack:///./client/app/assets/images/db-logos/rds_mysql.png","webpack:///./client/app/assets/images/db-logos/redshift.png","webpack:///./client/app/assets/images/db-logos/redshift_iam.png","webpack:///./client/app/assets/images/db-logos/results.png","webpack:///./client/app/assets/images/db-logos/rockset.png","webpack:///./client/app/assets/images/db-logos/salesforce.png","webpack:///./client/app/assets/images/db-logos/scylla.png","webpack:///./client/app/assets/images/db-logos/snowflake.png","webpack:///./client/app/assets/images/db-logos/sqlite.png","webpack:///./client/app/assets/images/db-logos/treasuredata.png","webpack:///./client/app/assets/images/db-logos/uptycs.png","webpack:///./client/app/assets/images/db-logos/url.png","webpack:///./client/app/assets/images/db-logos/vertica.png","webpack:///./client/app/assets/images/db-logos/yandex_appmetrika.png","webpack:///./client/app/assets/images/db-logos/yandex_metrika.png","webpack:///./client/app/assets/images/destinations/chatwork.png","webpack:///./client/app/assets/images/destinations/email.png","webpack:///./client/app/assets/images/destinations/hangouts_chat.png","webpack:///./client/app/assets/images/destinations/hipchat.png","webpack:///./client/app/assets/images/destinations/mattermost.png","webpack:///./client/app/assets/images/destinations/pagerduty.png","webpack:///./client/app/assets/images/destinations/slack.png","webpack:///./client/app/assets/images/destinations/webhook.png","webpack:///./client/app/assets/images/favicon-16x16.png","webpack:///./client/app/assets/images/favicon-32x32.png","webpack:///./client/app/assets/images/favicon-96x96.png","webpack:///./client/app/assets/images/fixtures/map-tile.png","webpack:///./client/app/assets/images/google_logo.svg","webpack:///./client/app/assets/images/illustrations/alert.svg","webpack:///./client/app/assets/images/illustrations/dashboard.svg","webpack:///./client/app/assets/images/illustrations/no-query-results.svg","webpack:///./client/app/assets/images/illustrations/query.svg","webpack:///./client/app/assets/images/logo.png","webpack:///./client/app/assets/images/logo_white.png","webpack:///[\\\\/.]test[\\\\./]).)*\\.jsx","webpack:///./client/app/services/location.js","webpack:///./client/app/services/auth.js","webpack:///./client/app/services/axios.js","webpack:///./client/app/services/organizationStatus.js","webpack:///./client/app/components/BigMessage.jsx","webpack:///./client/app/components/DynamicComponent.jsx","webpack:///./client/app/components/HelpTrigger.jsx","webpack:///./client/app/components/DialogWrapper.jsx","webpack:///./client/app/services/url.js","webpack:///./client/app/components/ApplicationArea/ErrorMessage.jsx","webpack:///./client/app/components/ApplicationArea/Router.jsx","webpack:///./client/app/components/ApplicationArea/navigateTo.js","webpack:///./client/app/services/recordEvent.js","webpack:///./client/app/services/policy/index.js","webpack:///./client/app/services/policy/DefaultPolicy.js","webpack:///./client/app/components/dashboards/CreateDashboardDialog.jsx","webpack:///./client/app/config/dashboard-grid-options.js","webpack:///./client/app/services/parameters/Parameter.js","webpack:///./client/app/services/parameters/TextParameter.js","webpack:///./client/app/services/parameters/NumberParameter.js","webpack:///./client/app/services/parameters/EnumParameter.js","webpack:///./client/app/services/query-result.js","webpack:///./client/app/services/query.js","webpack:///./client/app/services/parameters/QueryBasedDropdownParameter.js","webpack:///./client/app/services/parameters/DateParameter.js","webpack:///./client/app/services/parameters/DateRangeParameter.js","webpack:///./client/app/services/parameters/index.js","webpack:///./client/app/services/widget.js","webpack:///./client/app/services/dashboard.js","webpack:///./client/app/components/ApplicationArea/ApplicationHeader/FavoritesDropdown.jsx","webpack:///./client/app/components/ApplicationArea/ApplicationHeader/index.jsx","webpack:///./client/app/components/ApplicationArea/routeWithUserSession.jsx","webpack:///./client/app/components/PageHeader.jsx","webpack:///./client/app/components/admin/Layout.jsx","webpack:///./client/app/components/FavoritesControl.jsx","webpack:///./client/app/components/proptypes.js","webpack:///./client/app/components/TimeAgo.jsx","webpack:///./client/app/lib/utils.js","webpack:///./client/app/components/items-list/components/ItemsTable.jsx","webpack:///./client/app/components/admin/RQStatus.jsx","webpack:///./client/app/pages/admin/Jobs.jsx","webpack:///./client/app/components/Paginator.jsx","webpack:///./client/app/components/tags-control/EditTagsDialog.jsx","webpack:///./client/app/components/tags-control/TagsControl.jsx","webpack:///./client/app/components/queries/SchedulePhrase.jsx","webpack:///./client/app/components/items-list/ItemsList.jsx","webpack:///./client/app/components/items-list/classes/Paginator.js","webpack:///./client/app/components/items-list/classes/Sorter.js","webpack:///./client/app/components/items-list/classes/ItemsFetcher.js","webpack:///./client/app/components/items-list/classes/ItemsSource.js","webpack:///./client/app/components/items-list/classes/StateStorage.js","webpack:///./client/app/components/items-list/components/LoadingState.jsx","webpack:///./client/app/services/getTags.js","webpack:///./client/app/components/TagsList.jsx","webpack:///./client/app/components/items-list/components/Sidebar.jsx","webpack:///./client/app/pages/admin/OutdatedQueries.jsx","webpack:///./client/app/components/admin/StatusBlock.jsx","webpack:///./client/app/pages/admin/SystemStatus.jsx","webpack:///./client/app/services/notification.js","webpack:///./client/app/services/alert.js","webpack:///./client/app/pages/alert/components/MenuButton.jsx","webpack:///./client/app/pages/alert/components/Title.jsx","webpack:///./client/app/pages/alert/components/Criteria.jsx","webpack:///./client/app/pages/alert/components/Rearm.jsx","webpack:///./client/app/lib/hooks/useSearchResults.js","webpack:///./client/app/components/QuerySelector.jsx","webpack:///./client/app/pages/alert/components/Query.jsx","webpack:///./client/app/components/SelectItemsDialog.jsx","webpack:///./client/app/services/destination.js","webpack:///./client/app/services/alert-subscription.js","webpack:///./client/app/components/groups/ListItemAddon.jsx","webpack:///./client/app/components/EmailSettingsWarning.jsx","webpack:///./client/app/pages/alert/components/AlertDestinations.jsx","webpack:///./client/app/pages/alert/components/HorizontalFormItem.jsx","webpack:///./client/app/components/empty-state/EmptyState.jsx","webpack:///./client/app/pages/alerts/AlertsList.jsx","webpack:///./client/app/pages/alert/AlertView.jsx","webpack:///./client/app/pages/alert/components/NotificationTemplate.jsx","webpack:///./client/app/pages/alert/AlertEdit.jsx","webpack:///./client/app/pages/alert/AlertNew.jsx","webpack:///./client/app/pages/alert/Alert.jsx","webpack:///./client/app/components/layouts/ContentWithSidebar.jsx","webpack:///./client/app/components/NoTaggedObjectsFound.jsx","webpack:///./client/app/pages/dashboards/components/DashboardListEmptyState.jsx","webpack:///./client/app/pages/dashboards/DashboardList.jsx","webpack:///./client/app/services/KeyboardShortcuts.js","webpack:///./client/app/components/ParameterApplyButton.jsx","webpack:///./client/app/components/DateInput.jsx","webpack:///./client/app/components/DateTimeInput.jsx","webpack:///./client/app/components/dynamic-parameters/DynamicButton.jsx","webpack:///./client/app/components/dynamic-parameters/DateParameter.jsx","webpack:///./client/app/components/DateRangeInput.jsx","webpack:///./client/app/components/DateTimeRangeInput.jsx","webpack:///./client/app/components/dynamic-parameters/DateRangeParameter.jsx","webpack:///./client/app/components/QueryBasedParameterInput.jsx","webpack:///./client/app/components/ParameterValueInput.jsx","webpack:///./client/app/components/EditParameterSettingsDialog.jsx","webpack:///./client/app/components/Parameters.jsx","webpack:///./client/app/components/Timer.jsx","webpack:///./client/app/components/visualizations/VisualizationName.jsx","webpack:///./client/app/components/QueryLink.jsx","webpack:///./client/app/components/Filters.jsx","webpack:///./client/app/lib/useQueryResultData.js","webpack:///./client/app/components/visualizations/visualizationComponents.jsx","webpack:///./client/app/components/visualizations/VisualizationRenderer.jsx","webpack:///./client/app/components/dashboards/ExpandedWidgetDialog.jsx","webpack:///./client/app/components/ParameterMappingInput.jsx","webpack:///./client/app/components/dashboards/EditParameterMappingsDialog.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/Widget.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/VisualizationWidget.jsx","webpack:///./client/app/components/dashboards/TextboxDialog.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/TextboxWidget.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/RestrictedWidget.jsx","webpack:///./client/app/components/dashboards/AutoHeightController.js","webpack:///./client/app/components/dashboards/DashboardGrid.jsx","webpack:///./client/app/components/dashboards/AddWidgetDialog.jsx","webpack:///./client/app/components/PreviewCard.jsx","webpack:///./client/app/services/sanitize.js","webpack:///./client/app/services/user.js","webpack:///./client/app/components/PermissionsEditorDialog/index.jsx","webpack:///./client/app/components/InputWithCopy.jsx","webpack:///./client/app/pages/dashboards/components/ShareDashboardDialog.jsx","webpack:///./client/app/lib/hooks/useFullscreenHandler.js","webpack:///./client/app/pages/dashboards/hooks/useRefreshRateHandler.js","webpack:///./client/app/pages/dashboards/hooks/useEditModeHandler.js","webpack:///./client/app/pages/dashboards/hooks/useDashboard.js","webpack:///./client/app/components/EditInPlace.jsx","webpack:///./client/app/pages/dashboards/components/DashboardHeader.jsx","webpack:///./client/app/pages/dashboards/DashboardPage.jsx","webpack:///./client/app/components/ApplicationArea/routeWithApiKeySession.jsx","webpack:///./client/app/pages/dashboards/PublicDashboardPage.jsx","webpack:///./client/app/services/data-source.js","webpack:///./client/app/components/items-list/components/EmptyState.jsx","webpack:///./client/app/components/cards-list/CardsList.jsx","webpack:///./client/app/components/Collapse.jsx","webpack:///./client/app/components/AceEditorInput.jsx","webpack:///./client/app/components/dynamic-form/dynamicFormHelper.js","webpack:///./client/app/components/dynamic-form/DynamicForm.jsx","webpack:///./client/app/components/CreateSourceDialog.jsx","webpack:///./client/app/services/settingsMenu.js","webpack:///./client/app/components/SettingsWrapper.jsx","webpack:///./client/app/pages/data-sources/DataSourcesList.jsx","webpack:///./client/app/pages/data-sources/EditDataSource.jsx","webpack:///./client/app/pages/destinations/DestinationsList.jsx","webpack:///./client/app/pages/destinations/EditDestination.jsx","webpack:///./client/app/components/groups/CreateGroupDialog.jsx","webpack:///./client/app/services/group.js","webpack:///./client/app/components/groups/DeleteGroupButton.jsx","webpack:///./client/app/pages/groups/GroupsList.jsx","webpack:///./client/app/components/groups/GroupName.jsx","webpack:///./client/app/components/groups/DetailsPageSidebar.jsx","webpack:///./client/app/pages/groups/GroupDataSources.jsx","webpack:///./client/app/pages/groups/GroupMembers.jsx","webpack:///./client/app/services/organizationSettings.js","webpack:///./client/app/components/BeaconConsent.jsx","webpack:///./client/app/pages/home/Home.jsx","webpack:///./client/app/components/Resizable/index.jsx","webpack:///./client/app/components/queries/QueryEditor/ace.js","webpack:///./client/app/services/resizeObserver.js","webpack:///./client/app/services/query-snippet.js","webpack:///./client/app/components/queries/QueryEditor/AutocompleteToggle.jsx","webpack:///./client/app/components/queries/QueryEditor/QueryEditorControls.jsx","webpack:///./client/app/components/queries/QueryEditor/index.jsx","webpack:///./client/app/pages/queries/hooks/useQueryFlags.js","webpack:///./client/app/pages/queries/hooks/useArchiveQuery.jsx","webpack:///./client/app/pages/queries/hooks/useUpdateQuery.jsx","webpack:///./client/app/components/CodeBlock.jsx","webpack:///./client/app/components/queries/ApiKeyDialog/index.jsx","webpack:///./client/app/pages/queries/components/QueryPageHeader.jsx","webpack:///./client/app/pages/queries/hooks/useRenameQuery.js","webpack:///./client/app/pages/queries/hooks/useUpdateQueryTags.js","webpack:///./client/app/pages/queries/hooks/usePublishQuery.js","webpack:///./client/app/pages/queries/hooks/useUnpublishQuery.js","webpack:///./client/app/pages/queries/hooks/useDuplicateQuery.js","webpack:///./client/app/pages/queries/hooks/useApiKeyDialog.js","webpack:///./client/app/pages/queries/hooks/usePermissionsEditorDialog.js","webpack:///./client/app/pages/queries/components/QueryMetadata.jsx","webpack:///./client/app/pages/queries/components/QueryVisualizationTabs.jsx","webpack:///./client/app/pages/queries/components/QueryExecutionStatus.jsx","webpack:///./client/app/pages/queries/components/SchemaBrowser.jsx","webpack:///./client/app/pages/queries/components/QuerySourceAlerts.jsx","webpack:///./client/app/pages/queries/components/wrapQueryPage.jsx","webpack:///./client/app/components/queries/AddToDashboardDialog.jsx","webpack:///./client/app/components/queries/EmbedQueryDialog.jsx","webpack:///./client/app/components/EditVisualizationButton/QueryResultsLink.jsx","webpack:///./client/app/components/EditVisualizationButton/QueryControlDropdown.jsx","webpack:///./client/app/components/EditVisualizationButton/index.jsx","webpack:///./client/app/pages/queries/components/QueryExecutionMetadata.jsx","webpack:///./client/app/pages/queries/hooks/useAddToDashboardDialog.js","webpack:///./client/app/pages/queries/hooks/useEmbedDialog.js","webpack:///./client/app/pages/queries/hooks/useVisualizationTabHandler.js","webpack:///./client/app/lib/localOptions.js","webpack:///./client/app/services/notifications.js","webpack:///./client/app/pages/queries/hooks/useQueryExecute.js","webpack:///./client/app/pages/queries/hooks/useQueryDataSources.js","webpack:///./client/app/pages/queries/hooks/useDataSourceSchema.js","webpack:///./client/app/pages/queries/hooks/useQueryParameters.js","webpack:///./client/app/components/queries/ScheduleDialog.jsx","webpack:///./client/app/pages/queries/hooks/useEditScheduleDialog.js","webpack:///./client/app/services/visualization.js","webpack:///./client/app/components/visualizations/EditVisualizationDialog.jsx","webpack:///./client/app/pages/queries/hooks/useEditVisualizationDialog.js","webpack:///./client/app/pages/queries/hooks/useDeleteVisualization.js","webpack:///./client/app/pages/queries/hooks/useUpdateQueryDescription.js","webpack:///./client/app/pages/queries/QuerySource.jsx","webpack:///./client/app/pages/queries/hooks/useQuery.js","webpack:///./client/app/pages/queries/hooks/useUnsavedChangesAlert.js","webpack:///./client/app/pages/queries/hooks/useAutocompleteFlags.js","webpack:///./client/app/pages/queries/hooks/useFormatQuery.js","webpack:///./client/app/pages/queries/hooks/useAddNewParameterDialog.js","webpack:///./client/app/pages/queries/hooks/useAddVisualizationDialog.js","webpack:///./client/app/pages/queries/components/QueryViewButton.jsx","webpack:///./client/app/pages/queries/QueryView.jsx","webpack:///./client/app/pages/queries/VisualizationEmbed.jsx","webpack:///./client/app/pages/queries-list/QueriesListEmptyState.jsx","webpack:///./client/app/pages/queries-list/QueriesList.jsx","webpack:///./client/app/components/query-snippets/QuerySnippetDialog.jsx","webpack:///./client/app/pages/query-snippets/QuerySnippetsList.jsx","webpack:///./client/app/pages/settings/OrganizationSettings.jsx","webpack:///./client/app/services/utils.js","webpack:///./client/app/components/users/ChangePasswordDialog.jsx","webpack:///./client/app/components/users/UserEdit.jsx","webpack:///./client/app/components/users/UserShow.jsx","webpack:///./client/app/pages/users/UserProfile.jsx","webpack:///./client/app/components/users/CreateUserDialog.jsx","webpack:///./client/app/pages/users/UsersList.jsx","webpack:///./client/app/pages/index.js","webpack:///./client/app/components/ApplicationArea/handleNavigationIntent.js","webpack:///./client/app/config/index.js","webpack:///./client/app/config/antd-spinner.jsx","webpack:///./client/app/services/offline-listener.js","webpack:///./client/app/index.js","webpack:///./client/app/components/ApplicationArea/index.jsx","webpack:///./client/app/assets/images/avatar.svg","webpack:///./node_modules/moment/locale sync en"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","./en-SG","./en-SG.js","./en-au","./en-au.js","./en-ca","./en-ca.js","./en-gb","./en-gb.js","./en-ie","./en-ie.js","./en-il","./en-il.js","./en-nz","./en-nz.js","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","./avatar.svg","./db-logos/Cassandra.png","./db-logos/athena.png","./db-logos/aws_es.png","./db-logos/axibasetsd.png","./db-logos/azure_kusto.png","./db-logos/bigquery.png","./db-logos/bigquery_gce.png","./db-logos/clickhouse.png","./db-logos/cloudwatch.png","./db-logos/cloudwatch_insights.png","./db-logos/cockroach.png","./db-logos/couchbase.png","./db-logos/csv.png","./db-logos/databricks.png","./db-logos/db2.png","./db-logos/dgraph.png","./db-logos/drill.png","./db-logos/druid.png","./db-logos/dynamodb_sql.png","./db-logos/elasticsearch.png","./db-logos/exasol.png","./db-logos/google_analytics.png","./db-logos/google_spreadsheets.png","./db-logos/graphite.png","./db-logos/hive.png","./db-logos/hive_http.png","./db-logos/impala.png","./db-logos/influxdb.png","./db-logos/jirajql.png","./db-logos/json.png","./db-logos/kibana.png","./db-logos/kylin.png","./db-logos/mapd.png","./db-logos/memsql.png","./db-logos/mongodb.png","./db-logos/mssql.png","./db-logos/mssql_odbc.png","./db-logos/mysql.png","./db-logos/oracle.png","./db-logos/pg.png","./db-logos/phoenix.png","./db-logos/presto.png","./db-logos/prometheus.png","./db-logos/python.png","./db-logos/qubole.png","./db-logos/rds_mysql.png","./db-logos/redshift.png","./db-logos/redshift_iam.png","./db-logos/results.png","./db-logos/rockset.png","./db-logos/salesforce.png","./db-logos/scylla.png","./db-logos/snowflake.png","./db-logos/sqlite.png","./db-logos/treasuredata.png","./db-logos/uptycs.png","./db-logos/url.png","./db-logos/vertica.png","./db-logos/yandex_appmetrika.png","./db-logos/yandex_metrika.png","./destinations/chatwork.png","./destinations/email.png","./destinations/hangouts_chat.png","./destinations/hipchat.png","./destinations/mattermost.png","./destinations/pagerduty.png","./destinations/slack.png","./destinations/webhook.png","./favicon-16x16.png","./favicon-32x32.png","./favicon-96x96.png","./fixtures/map-tile.png","./google_logo.svg","./illustrations/alert.svg","./illustrations/dashboard.svg","./illustrations/no-query-results.svg","./illustrations/query.svg","./logo.png","./logo_white.png","./redash_icon_small.png","webpackEmptyContext","history","createBrowserHistory","normalizeLocation","rawLocation","pathname","search","hash","path","mapValues","qs","parse","isNil","trimStart","url","concat","location","listen","handler","isFunction","unused","action","confirmChange","block","nextLocation","update","newLocation","replace","arguments","undefined","isObject","omitBy","isUndefined","extend","stringify","setPath","setSearch","setHash","locationChanged","currentUser","canEdit","userId","user_id","user","this","hasPermission","canCreate","permission","includes","permissions","isAdmin","clientConfig","messages","logger","debug","session","loaded","updateSession","sessionData","client_config","Auth","isAuthenticated","login","next","encodeURI","href","logout","loadSession","Promise","setApiKey","axios","then","loadConfig","apiKey","getApiKey","requireSession","catch","axiosLib","paramsSerializer","params","interceptors","response","use","_ref","request","config","headers","Authorization","organizationStatus","OrganizationStatus","_classCallCheck","objectCounters","object_counters","BigMessage","message","icon","children","className","react_default","a","createElement","propTypes","PropTypes","string","isRequired","node","defaultProps","componentsRegistry","Map","activeInstances","Set","DynamicComponent","React","Component","add","delete","_this$props","props","_objectWithoutProperties","RealComponent","DOMAIN","HELP_PATH","IFRAME_TIMEOUT","IFRAME_URL_UPDATE_MESSAGE","TYPES","HOME","VALUE_SOURCE_OPTIONS","SHARE_DASHBOARD","AUTHENTICATION_OPTIONS","USAGE_DATA_SHARING","DS_ATHENA","DS_BIGQUERY","DS_URL","DS_MONGODB","DS_GOOGLE_SPREADSHEETS","DS_GOOGLE_ANALYTICS","DS_AXIBASETSD","DS_RESULTS","ALERT_SETUP","MAIL_CONFIG","ALERT_NOTIF_TEMPLATE_GUIDE","FAVORITES","MANAGE_PERMISSIONS","NUMBER_FORMAT_SPECS","HelpTrigger","createRef","visible","loading","error","currentUrl","clearTimeout","_this","iframeLoadingTimeout","setState","iframeRef","current","src","setTimeout","event","startsWith","origin","type","helpTriggerType","loadIframe","getUrl","preventDefault","addEventListener","onPostMessageReceived","removeEventListener","tooltip","title","cx","state","isAllowedDomain","Fragment","tooltip_default","showTooltip","style","marginLeft","onClick","openDrawer","rel","target","drawer_default","placement","closable","onClose","closeDrawer","destroyOnClose","width","icon_default","ref","ready","onLoad","onIframeLoaded","components_BigMessage","DynamicComponent_DynamicComponent","onLeave","openPageUrl","oneOf","bool","DialogPropType","shape","onOk","func","onCancel","afterClose","close","dismiss","openDialog","DialogComponent","dialog","okButtonProps","cancelButtonProps","pendingCloseTask","handlers","onDismiss","container","document","render","ReactDOM","_extends","processDialogClose","setAdditionalDialogProps","disabled","finally","closeDialog","dismissDialog","body","appendChild","unmountComponentAtNode","removeChild","newProps","_objectSpread","wrap","showModal","link","display","fragmentProps","services_url","setAttribute","pick","fragments","normalize","getErrorMessageByStatus","status","defaultMessage","getErrorMessage","isAxiosError","errorData","errorMessage","ErrorMessage","console","data-test","stripBase","baseHref","trimEnd","substr","Router","routes","onRouteChange","_useState2","_slicedToArray","useState","currentRoute","setCurrentRoute","currentPathRef","useRef","errorHandlerRef","useEffect","isAbandoned","router","UniversalRouter","resolveRoute","_ref2","routeParams","route","Router_objectSpread","reset","Math","random","toString","unlisten","ErrorBoundary_default","renderError","navigateTo","arrayOf","objectOf","any","events","post","debounce","eventsToSend","recordEvent","objectType","objectId","additionalProperties","object_type","object_id","timestamp","Date","now","screen_resolution","screen","height","policy","dashboardRefreshIntervals","isArray","queryRefreshIntervals","CreateDashboardDialog","CreateDashboardDialog_slicedToArray","setName","_useState4","isValid","setIsValid","_useState6","saveInProgress","setSaveInProgress","isCreateDashboardEnabled","save","slug","modal_default","CreateDashboardDialog_extends","footer","okText","cancelText","maskClosable","wrapProps","input_default","defaultValue","onChange","trim","onPressEnter","placeholder","autoFocus","wrapDialog","dashboard_grid_options","columns","rowHeight","margins","mobileBreakPoint","defaultSizeX","defaultSizeY","minSizeX","maxSizeX","minSizeY","maxSizeY","Parameter","parameter","parentQueryId","Parameter_classCallCheck","global","locals","urlPrefix","param","extra","getExecutionValue","setValue","isNull","normalizeValue","each","local","normalizedValue","$$value","updateLocals","clearPendingValue","pendingValue","hasPendingValue","prefix","isEmpty","query","has","omit","isEqual","TextParameter","TextParameter_classCallCheck","TextParameter_possibleConstructorReturn","TextParameter_getPrototypeOf","NumberParameter","NumberParameter_classCallCheck","NumberParameter_possibleConstructorReturn","NumberParameter_getPrototypeOf","toNumber","isNaN","EnumParameter","EnumParameter_classCallCheck","EnumParameter_possibleConstructorReturn","EnumParameter_getPrototypeOf","enumOptions","multiValuesOptions","enumOptionsArray","split","intersection","joinListValues","separator","suffix","parameterValues","v","join","urlParam","JSON","valueFromJson","filterTypes","getColumnFriendlyName","column","typeSplit","indexOf","parts","getColumnNameWithoutType","toUpperCase","QueryResultResource","createOrSaveUrl","ExecutionStatus","WAITING","PROCESSING","DONE","FAILED","LOADING_RESULT","statuses","1","2","3","4","handleErrorResponse","queryResult","job","QueryResult","query_result_classCallCheck","deferred","onStatusChange","promise","reject","query_result","updatedAt","moment","isLoadingResult","queryId","parameters","maxAge","max_age","refreshStatus","dataSourceId","data_source_id","query_id","columnTypes","rows","row","forOwn","k","newType","isNumber","isString","match","utc","query_result_typeof","QueryResultError","log","retrieved_at","updated_at","runtime","getData","columnNames","getColumnNames","col","getColumns","filters","forEach","filter","friendlyName","values","multiple","getRawData","uniqBy","isMoment","unix","statusCallback","tryCount","query_result_id","loadResult","pow","tryNumber","loadLatestCachedResult","jobResponse","getStatus","fileType","getId","queryName","getUpdatedAt","format","Mustache","escape","identity","Query","query_classCallCheck","options","query_createClass","schedule","hour","minute","latest_query_data","latest_query_data_id","getParameters","getParametersDefs","execute","missingParams","getMissing","paramsWord","valuesWord","getById","prepareQueryResultExecution","getByQueryId","getExecutionValues","selectedQueryText","queryText","source","toUrlParams","encodeURIComponent","getQueryResult","toPromise","$parameters","Parameters","favorite","unfavorite","newQuery","clone","queryString","updateParameters","initFromQueryString","fallback","uniq","collectParams","part","union","cachedQueryText","parameterNames","parseQuery","parametersMap","createParameter","find","fromUrlParams","parameterDef","zipObject","some","applyPendingValue","query_extends","_toConsumableArray","getQuery","mapResults","query_objectSpread","results","QueryService","saveOrCreateUrl","recent","archive","myQueries","fork","resultById","asDropdown","associatedDropdown","dropdownQueryId","favorites","tags","can_edit","syntax","formatted","err","String","QueryBasedDropdownParameter","QueryBasedDropdownParameter_classCallCheck","QueryBasedDropdownParameter_possibleConstructorReturn","QueryBasedDropdownParameter_getPrototypeOf","DATETIME_FORMATS","date","datetime-local","datetime-with-seconds","DYNAMIC_PREFIX","DYNAMIC_DATES","yesterday","subtract","DynamicDateType","isDynamicDateString","substring","isDynamicDate","getDynamicDateFromString","DateParameter","DateParameter_classCallCheck","DateParameter_possibleConstructorReturn","DateParameter_getPrototypeOf","useCurrentDateTime","findKey","hasDynamicValue","date-range","datetime-range","datetime-range-with-seconds","DYNAMIC_DATE_RANGES","today","startOf","endOf","this_week","this_month","this_year","last_week","last_month","last_year","last_7_days","last_14_days","last_30_days","last_60_days","last_90_days","DynamicDateRangeType","isDynamicDateRangeString","isDynamicDateRange","getDynamicDateRangeFromString","DateRangeParameter","DateRangeParameter_classCallCheck","DateRangeParameter_possibleConstructorReturn","DateRangeParameter_getPrototypeOf","start","end","_this$normalizedValue2","DateRangeParameter_slicedToArray","_get","keyStart","keyEnd","dates","parameters_objectSpread","cloneParameter","WidgetTypeEnum","ParameterMappingType","DashboardLevel","WidgetLevel","StaticValue","Widget","widget_classCallCheck","visualizationOptions","widget","autoHeight","sizeX","round","dashboardGridOptions","sizeY","visualization","registeredVisualizations","minColumns","parseInt","isFinite","maxColumns","min","ceil","minRows","maxRows","defaultWidth","defaultColumns","defaultHeight","defaultRows","calculatePositionOptions","position","truncate","text","force","refreshStartedAt","merge","getParameterMappings","MappingType","mappings","queryParams","localTypes","mapping","parameterMappings","existingParams","mapTo","removedParams","difference","isStaticParam","restricted","prepareWidgetsForDashboard","widgets","defaultWidgetSizeY","max","_","chain","w","sortBy","groupBy","reduce","widgetsAtRow","Dashboard","dashboard","prepareDashboardWidgets","transformSingle","publicAccessEnabled","public_url","transformResponse","dashboard_objectSpread","DashboardService","getByToken","token","_ref3","_ref4","_ref5","globalParams","addWidget","textOrVisualization","dashboard_id","isHidden","visualization_id","existingWidgets","newWidget","bottomLine","left","top","right","bottom","item","from","to","Array","constant","range","first","dashboard_toConsumableArray","FavoritesDropdown","fetch","urlTemplate","FavoritesDropdown_slicedToArray","items","setItems","setLoading","noItems","urlCompiled","useMemo","template","fetchItems","useCallback","showLoadingState","menu","menu_default","Item","HelpTrigger_HelpTrigger","dropdown_default","trigger","onVisibleChange","overlay","spin","onSearch","q","DesktopNavbar","showCreateDashboardDialog","data-platform","selectable","button_default","onMouseUp","logoUrl","alt","Search","overlayStyle","minWidth","Divider","version","frontendVersion","newVersionAvailable","profile_image_url","MobileNavbar","getPopupContainer","ApplicationHeader","UserSessionWrapper","bodyClass","renderChildren","routeWithUserSession_slicedToArray","setIsAuthenticated","isCancelled","all","refresh","classList","toggle","ApplicationHeader_ApplicationHeader","ErrorBoundary","Consumer","handleError","routeWithUserSession_objectSpread","pageTitle","onError","routeWithUserSession","routeWithUserSession_objectWithoutProperties","PageHeader","Layout","activeTab","tabs_default","defaultActiveKey","animated","tabBarGutter","TabPane","tab","FavoritesControl","callback","is_favorite","savedIsFavorite","forceUpdate","toggleItem","aria-hidden","doc","doc_url","type_name","Table","RefreshScheduleType","interval","number","time","day_of_week","until","RefreshScheduleDefault","Field","initialValue","oneOfType","content","required","readOnly","minLength","contentAfter","Action","pullRight","disabledWhenDirty","AntdForm","validateFieldsAndScroll","UserProfile","email","profileImageUrl","isDisabled","Destination","description","created_at","queryHash","is_safe","is_draft","is_archived","api_key","AlertOptions","op","custom_subject","custom_body","Alert","last_triggered_at","rearm","checkMoment","propName","componentName","isRequiredValid","isOptionalValid","Moment","TimeAgo","autoUpdate","startDate","toMoment","TimeAgo_slicedToArray","dateTimeFormat","fromNow","timer","setInterval","clearInterval","instanceOf","IntervalEnum","NEVER","SECONDS","MINUTES","HOURS","DAYS","WEEKS","formatDateTime","parsed","formatDate","dateFormat","localizeTime","_time$split2","utils_slicedToArray","hrs","mins","secondsToInterval","count","pluralize","durationHumanize","duration","ret","_secondsToInterval","rounded","omitSingleValueNumber","toHuman","units","prettySize","bytes","parseFloat","unit","toFixed","formatColumnValue","columnType","sortable","sorter","Columns","overrides","FavoritesControl_FavoritesControl","avatar","formatTitle","dateTime","timeAgo","custom","ItemsTable","orderByField","orderByReverse","toggleSorting","orderByDirection","isAvailable","field","index","onHeaderCell","dataIndex","defaultSortOrder","prepareColumns","onTableRow","onRowClick","showHeader","table_default","classNames","ant-table-headerless","dataSource","rowKey","pagination","onRow","CounterCard","spin_default","spinning","card_default","queryJobsColumns","scheduled","otherJobsColumns","workersColumns","badge_default","busy","idle","started","suspended","toLowerCase","queuesColumns","TablePropTypes","WorkersTable","defaultPageSize","pageSizeOptions","showSizeChanger","QueuesTable","QueryJobsTable","OtherJobsTable","Jobs","isLoading","queueCounters","overallCounters","queued","startedJobs","workers","processQueues","_refreshTimer","queues","rest","Jobs_objectWithoutProperties","Jobs_objectSpread","flatMap","queue","enqueued_at","started_at","_this$state","_partition2","Jobs_slicedToArray","partition","startedQueryJobs","otherStartedJobs","alert_default","grid","gutter","span","activeKey","onTabClick","newTab","pageProps","Jobs_Jobs","Paginator","page","itemsPerPage","totalCount","pagination_default","defaultCurrent","total","EditTagsDialog","EditTagsDialog_classCallCheck","EditTagsDialog_possibleConstructorReturn","EditTagsDialog_getPrototypeOf","availableTags","getAvailableTags","compact","EditTagsDialog_extends","select_default","tag","Option","TagsControl","_React$Component","_getPrototypeOf2","TagsControl_classCallCheck","_len","args","_key","TagsControl_getPrototypeOf","TagsControl_defineProperty","TagsControl_assertThisInitialized","onEdit","TagsControl_inherits","role","editTags","renderEditButton","tagsExtra","modelTagsControl","archivedTooltip","ModelTagsControl","isDraft","isArchived","TagsControl_objectWithoutProperties","TagsControl_TagsControl","QueryTagsControl","DashboardTagsControl","SchedulePhrase","isNew","_this$content","SchedulePhrase_slicedToArray","short","full","isLink","seconds","humanized","_this$props$schedule","dayOfWeek","ControllerType","isLoaded","searchTerm","updateSearch","selectedTags","array","updateSelectedTags","totalItemsCount","pageItems","updatePagination","WrappedComponent","createItemsSource","createStateStorage","ItemsListWrapper","ItemsList_classCallCheck","ItemsList_possibleConstructorReturn","ItemsList_getPrototypeOf","stateStorage","itemsSource","_itemsSource","ItemsList_objectSpread","getState","validate","getCallbackContext","onBeforeUpdate","onAfterUpdate","initialState","ItemsList_inherits","ItemsList_objectWithoutProperties","ItemsList_extends","controller","ItemsList_defineProperty","hoistNonReactStatics","_ref$validate","Paginator_classCallCheck","Paginator_defineProperty","setItemsPerPage","setTotalCount","setPage","totalPages","last","ORDER_BY_REVERSE","compile","reverse","compiled","Sorter","Sorter_classCallCheck","Sorter_defineProperty","setField","setReverse","_parse","ItemsFetcher","getRequest","doRequest","processResults","ItemsFetcher_classCallCheck","_originalGetRequest","_originalDoRequest","_originalProcessResults","context","changes","_getRequest","_processResults","PlainListFetcher","_ItemsFetcher","ItemsFetcher_possibleConstructorReturn","ItemsFetcher_getPrototypeOf","ItemsFetcher_assertThisInitialized","ItemsFetcher_inherits","ItemsFetcher_createClass","paginator","_allItems","sort","getItemsForPage","allResults","sorting","ItemsFetcher_get","PaginatedListFetcher","_ItemsFetcher2","page_size","order","ItemsSource","_ref2$isPlainList","isPlainList","defaultState","ItemsSource_objectWithoutProperties","ItemsSource_classCallCheck","ItemsSource_defineProperty","_this$_paginator","_paginator","prevPage","prevItemsPerPage","_changed","_sorter","toggleField","_savedOrderByField","_searchTerm","_selectedTags","_fetcher","_pageItems","_params","ItemsSource_createClass","customParams","ItemsSource_objectSpread","setCustomParams","_beforeUpdate","_afterUpdate","allItems","ResourceItemsSource","_ItemsSource","getResource","getItemProcessor","ItemsSource_possibleConstructorReturn","ItemsSource_getPrototypeOf","processItem","ItemsSource_inherits","StateStorage","StateStorage_classCallCheck","_state","StateStorage_objectSpread","StateStorage_createClass","defaults","pageSize","UrlStateStorage","_StateStorage","StateStorage_possibleConstructorReturn","StateStorage_getPrototypeOf","StateStorage_inherits","StateStorage_get","defaultOrderBy","compileOrderBy","_parseOrderBy","parseOrderBy","LoadingState","LoadingState_extends","processTags","getTags","TagsList","TagsList_classCallCheck","TagsList_possibleConstructorReturn","TagsList_getPrototypeOf","allTags","tagsUrl","shiftKey","size","clear","onUpdate","TagsList_toConsumableArray","selectedKeys","toggleTag","SearchInput","showIcon","Sidebar_slicedToArray","currentValue","setCurrentValue","onInputChange","newValue","InputControl","Input","Menu","selected","MenuIcon","ProfileImage","Tags","TagsList_TagsList","PageSizeSelect","_ref6","Sidebar_objectWithoutProperties","option","OutdatedQueries","align","SchedulePhrase_SchedulePhrase","_updateTimer","currentPage","htmlFor","switch_default","checked","lastUpdatedAt","ItemsTable_ItemsTable","listColumns","Paginator_Paginator","OutdatedQueriesPage","itemsList","queries","OutdatedQueries_extends","General","info","toPairs","list_default","itemLayout","renderItem","StatusBlock_slicedToArray","DatabaseMetrics","Queues","_ref7","_ref8","_ref9","Manager","_ref10","lastRefreshAt","startedAt","outdatedQueriesCount","SystemStatus","manager","databaseMetrics","last_refresh_at","outdated_queries_count","database_metrics","metrics","SystemStatus_SystemStatus","notification","simpleNotification","notification_objectSpread","services_notification","normalizeCondition","greater than","less than","equals","newData","alert_extends","destination_id","destinations","transformRequest","mute","unmute","MenuButton","doDelete","muted","MenuButton_slicedToArray","confirmDelete","Modal","confirm","okType","autoFocusButton","rotate","Title","alert","editMode","defaultName","getDefaultName","AlertType","CONDITIONS",">",">=","<","<=","==","!=","VALID_STRING_CONDITIONS","DisabledInput","Criteria","resultValues","alertOptions","columnValue","head","invalidMessage","columnHint","dropdownMatchSelectWidth","optionLabelProp","label","divider_default","theme","AlertOptionsType","DURATIONS","RearmByDuration","Rearm_slicedToArray","durationIdx","setDurationIdx","setCount","durValue","plural","input_number_default","newCount","precision","newIdx","idx","toLower","RearmEditor","setSelected","newSelected","RearmViewer","phrase","Rearm","Rearm_objectWithoutProperties","useSearchResults","_ref$initialResults","initialResults","_ref$debounceTimeout","debounceTimeout","useSearchResults_slicedToArray","setResult","setIsLoading","currentSearchTerm","isDestroyed","doSearch","useDebouncedCallback","Select","term","QuerySelector","QuerySelector_slicedToArray","setSearchTerm","selectedQuery","setSelectedQuery","_useSearchResults2","searchResults","searching","clearIcon","selectQuery","spinIcon","hidden","suffixIcon","showSearch","notFoundContent","filterOption","defaultActiveFirstOption","QuerySelector_Option","maxHeight","marginTop","inactive","QueryFormItem","queryHint","ItemsList","onItemClick","renderListItem","_renderItem","clickable","SelectItemsDialog","dialogTitle","inputPlaceholder","itemKey","renderStagedItem","searchItems","selectedItemsTitle","showCount","extraFooterContent","SelectItemsDialog_slicedToArray","selectedItems","setSelectedItems","hasResults","isItemSelected","SelectItemsDialog_toConsumableArray","SelectItemsDialog_extends","textAlign","color","minHeight","isSelected","QueryType","IMG_ROOT","types","AlertSubscription","alertId","alert_id","ListItemAddon","isStaged","alreadyInGroup","deselectedIcon","EmailSettingsWarning","featureName","adminOnly","mailSettingsMissing","USER_EMAIL_DEST_ID","normalizeSub","sub","destination","ListItem","_ref$destination","unsubscribe","canUnsubscribe","mouseEnterDelay","DestinationType","UserType","AlertDestinations","dests","subs","promises","subscribe","success","dest","AlertDestinations_toConsumableArray","without","DestinationService","AlertDestinations_slicedToArray","currentUserEmailSub","filteredSubs","showAddAlertSubDialog","onUserEmailToggle","AlertDestinations_extends","HorizontalFormItem","HorizontalFormItem_objectWithoutProperties","wrapperCol","offset","form_default","HorizontalFormItem_extends","labelCol","Step","show","completed","urlText","done","EmptyState","header","illustration","helpLink","onboardingMode","showAlertStep","showDashboardStep","inviteUsers","showInviteStep","isCompleted","data_sources","alerts","dashboards","users","step","STATE_CLASS","unknown","ok","triggered","AlertsList","toUpper","empty_state_EmptyState","AlertsListPage","AlertsList_extends","AlertState","lastTriggered","AlertView","unmuting","menuButton","Title_Title","Criteria_Criteria","Rearm_Rearm","AlertDestinations_AlertDestinations","NotificationTemplate","subject","setSubject","setBody","hasContent","NotificationTemplate_slicedToArray","enabled","setEnabled","showPreview","setShowPreview","renderData","topValue","ALERT_STATUS","ALERT_CONDITION","ALERT_THRESHOLD","ALERT_NAME","ALERT_URL","QUERY_NAME","QUERY_URL","QUERY_RESULT_VALUE","QUERY_RESULT_ROWS","QUERY_RESULT_COLS","normalizeCustomTemplateData","tmpl","TextArea","autosize","AlertEdit","saving","_isMounted","cancel","pendingRearm","onNotificationTemplateChange","_this$props2","onQuerySelected","onNameChange","onRearmChange","onCriteriaChange","components_NotificationTemplate","AlertNew","MODES","NEW","VIEW","EDIT","defaultNameBuilder","AlertService","Alert_extends","getQueryResultPromise","setAlertOptions","obj","Alert_objectSpread","warn","_this$state2","commonProps","AlertNew_AlertNew","AlertView_AlertView","edit","AlertEdit_AlertEdit","pages_alert_Alert","Alert_Alert","Sidebar","ContentWithSidebar_objectWithoutProperties","ContentWithSidebar_extends","Content","NoTaggedObjectsFound","DashboardListEmptyState","DashboardList","ContentWithSidebar_Layout","sidebarMenu","DashboardListPage","dashboards_DashboardList","DashboardList_extends","modKey","test","navigator","platform","altKey","onShortcut","shortcut","retunValue","fn","KeyboardShortcuts","keymap","KeyboardShortcuts_toConsumableArray","Mousetrap","bindGlobal","unbind","ParameterApplyButton","paramCount","data-show","DateInput","forwardRef","onSelect","DateInput_objectWithoutProperties","additionalAttributes","date_picker_default","DateInput_extends","DateTimeInput","withSeconds","DateTimeInput_objectWithoutProperties","DateTimeInput_extends","showTime","Text","Typography","DynamicButton","selectedDynamicValue","findIndex","containerRef","stopPropagation","Button","DYNAMIC_DATE_OPTIONS","dynamic_parameters_DateParameter_classCallCheck","dynamic_parameters_DateParameter_getPrototypeOf","DateParameter_defineProperty","dynamic_parameters_DateParameter_assertThisInitialized","dynamicValue","parameterValue","dateComponentRef","focus","isDateTime","DateComponent","dynamicDate","DateParameter_extends","dynamic-value","dynamic_parameters_DynamicButton","onDynamicValueSelect","RangePicker","DatePicker","DateRangeInput","DateRangeInput_objectWithoutProperties","DateRangeInput_extends","DateTimeRangeInput","DateTimeRangeInput_objectWithoutProperties","DateTimeRangeInput_RangePicker","DateTimeRangeInput_extends","DYNAMIC_DATETIME_OPTIONS","widthByType","dynamic_parameters_DateRangeParameter_classCallCheck","dynamic_parameters_DateRangeParameter_getPrototypeOf","dynamic_parameters_DateRangeParameter_defineProperty","dynamic_parameters_DateRangeParameter_assertThisInitialized","dateRangeComponentRef","isDateTimeRange","DateRangeComponent","isValidDateRangeValue","DateRangeParameter_extends","QueryBasedParameterInput","QueryBasedParameterInput_classCallCheck","QueryBasedParameterInput_possibleConstructorReturn","QueryBasedParameterInput_getPrototypeOf","_loadOptions","prevProps","optionValues","validValues","loadDropdownValues","updatedValue","otherProps","QueryBasedParameterInput_objectWithoutProperties","QueryBasedParameterInput_extends","optionFilterProp","showArrow","QueryBasedParameterInput_Option","multipleValuesProps","maxTagCount","maxTagTextLength","maxTagPlaceholder","num","ParameterValueInput","ParameterValueInput_classCallCheck","ParameterValueInput_getPrototypeOf","ParameterValueInput_defineProperty","ParameterValueInput_assertThisInitialized","isDirty","dynamic_parameters_DateParameter","_this$props3","dynamic_parameters_DateRangeParameter","_this$props4","ParameterValueInput_extends","val","ParameterValueInput_Option","_this$props5","QueryBasedParameterInput_QueryBasedParameterInput","renderDateParameter","renderDateRangeParameter","renderEnumInput","renderQueryBasedInput","renderNumberInput","renderTextInput","data-dirty","renderInput","formItemProps","getDefaultTitle","capitalize","words","NameInput","existingNames","setValidation","helpText","validateStatus","isTypeDateRange","EditParameterSettingsDialog_extends","help","EditParameterSettingsDialog","EditParameterSettingsDialog_slicedToArray","setParam","isNameValid","setIsNameValid","initialQuery","setInitialQuery","htmlType","form","layout","onSubmit","EditParameterSettingsDialog_objectSpread","EditParameterSettingsDialog_Option","colon","checkbox_default","defaultChecked","quoteOption","updateUrl","Parameters_classCallCheck","Parameters_getPrototypeOf","Parameters_defineProperty","Parameters_assertThisInitialized","disableUrlUpdate","parametersChanged","disableUrlUpdateChanged","keyCode","ctrlKey","metaKey","applyChanges","onPendingValuesChange","setPendingValue","oldIndex","newIndex","onParametersEdit","onValuesChange","parametersWithPendingValues","updated","updatedParameter","editable","showParameterSettings","app_components_ParameterValueInput","dirtyParamCount","components_sortable","axis","useDragHandle","lockToContainerEdges","helperClass","updateBeforeSortStart","onBeforeSortStart","onSortEnd","moveParameter","containerProps","onKeyDown","handleKeyDown","data-editable","renderParameter","components_ParameterApplyButton","Timer","startTime","valueOf","Timer_slicedToArray","diff","VisualizationName","VisualizationType","QueryLink","visualizations_VisualizationName","ALL_VALUES","NONE_VALUES","FilterType","FiltersType","createFilterChangeHandler","_values","Filters_toConsumableArray","f","Filters_objectSpread","filterData","every","rowValue","filterValues","filterValue","isSame","Filters","labelInValue","allowClear","OptGroup","useQueryResultData","queryResultStatus","invoke","retrievedAt","metadata","getQueryResultData","wrapComponentWithSettings","updateVisualizationsSettings","visualizationComponents_objectSpread","HelpTriggerComponent","choroplethAvailableMaps","countries","countriesDataUrl","subdiv_japan","subdivJapanDataUrl","Renderer","VisRenderer","Editor","VisEditor","combineFilters","localFilters","globalFilters","localFilter","globalFilter","VisualizationRenderer_objectSpread","VisualizationRenderer","VisualizationRenderer_slicedToArray","setFilters","filtersRef","filteredData","showFilters","paginationSize","visualizationName","addonBefore","components_Filters","ExpandedWidgetDialog","ExpandedWidgetDialog_extends","DashboardAddNew","DashboardMapToExisting","editableMappingsToParameterMappings","fromPairs","synchronizeWidgetTitles","sourceMappings","affectedWidgets","sourceMapping","widgetMappings","widgetMapping","ParameterMappingInput","ParameterMappingInput_classCallCheck","ParameterMappingInput_defineProperty","ParameterMappingInput_assertThisInitialized","ParameterMappingInput_possibleConstructorReturn","ParameterMappingInput_getPrototypeOf","existingParamNames","updateParamMapping","newMapping","ParameterMappingInput_inherits","ParameterMappingInput_createClass","noExisting","radio_default","Group","updateSourceType","ParameterMappingInput_Option","renderDashboardAddNew","renderDashboardMapToExisting","renderStaticValue","inputError","_this$renderInputBloc2","ParameterMappingInput_slicedToArray","renderInputBlock","input","ParameterMappingInput_extends","renderMappingTypeSelector","visibility","MappingEditor","_this2","hide","ParameterMappingInput_ParameterMappingInput","popover_default","renderContent","TitleEditor","showPopup","_this3","getMappingTitle","paramTitle","onEditingTitleChange","maxLength","renderPopover","onPopupVisibleChange","ParameterMappingListInput","_React$Component4","oldMapping","ParameterMappingInput_toConsumableArray","record","Column","ParameterMappingInput_TitleEditor","constructor","getDefaultValue","existingParamsNames","react","getSourceTypeLabel","ParameterMappingInput_MappingEditor","ParameterMappingInput_typeof","getStringValue","mappedTo","tag_default","getParamValuesSnapshot","dashboardParameters","EditParameterMappingsDialog","EditParameterMappingsDialog_classCallCheck","EditParameterMappingsDialog_getPrototypeOf","EditParameterMappingsDialog_defineProperty","EditParameterMappingsDialog_assertThisInitialized","existingParameterNames","alreadyExists","parameterMappingsToEditableMappings","originalParamValuesSnapshot","newMappings","valuesChanged","isMatch","widgetsToSave","EditParameterMappingsDialog_toConsumableArray","EditParameterMappingsDialog_extends","saveWidget","ParameterMappingInput_ParameterMappingListInput","updateParamMappings","WidgetDropdownButton","extraOptions","showDeleteOption","onDelete","WidgetMenu","WidgetDeleteButton","isPublic","menuOptions","tileProps","showDropdownButton","Widget_extends","deleteWidget","visualizationWidgetMenuOptions","canEditDashboard","canViewQuery","canEditParameters","widgetQueryResult","isQueryResultEmpty","downloadLink","getLink","downloadName","getName","download","RefreshIndicator","VisualizationWidgetHeader","onParametersUpdate","components_QueryLink","HtmlContent_default","markdown","toHTML","Parameters_Parameters","VisualizationWidgetFooter","onRefresh","onExpand","VisualizationWidget_slicedToArray","refreshClickButtonId","setRefreshClickButtonId","refreshWidget","buttonId","zmdi-hc-spin","VisualizationWidget","VisualizationWidget_classCallCheck","VisualizationWidget_getPrototypeOf","VisualizationWidget_defineProperty","VisualizationWidget_assertThisInitialized","onParameterMappingsChange","localParameters","getLocalParameters","getError","isRefreshing","dashboards_dashboard_widget_Widget","VisualizationWidget_extends","editParameterMappings","expandWidget","data-refreshing","renderVisualization","TextboxDialog","TextboxDialog_objectWithoutProperties","TextboxDialog_slicedToArray","setText","preview","setPreview","updatePreview","handleInputChange","TextboxDialog_extends","dashed","TextboxWidget","TextboxWidget_slicedToArray","TextboxMenuOptions","newText","TextboxWidget_extends","RestrictedWidget","RestrictedWidget_extends","WIDGET_SELECTOR","WIDGET_CONTENT_SELECTOR","INTERVAL","AutoHeightController","AutoHeightController_classCallCheck","AutoHeightController_defineProperty","selector","widgetEl","querySelector","els","querySelectorAll","acc","el","getBoundingClientRect","exists","stop","_this$widgets$id","AutoHeightController_slicedToArray","getHeight","prevHeight","onHeightChange","checkHeightChanges","newWidgetIds","remove","ResponsiveGridLayout","WidthProvider","Responsive","WidgetType","SINGLE","MULTI","DashboardWidget","memo","onLoadWidget","onRefreshWidget","onRemoveWidget","dashboard_widget_VisualizationWidget","dashboard_widget_TextboxWidget","dashboard_widget_RestrictedWidget","nextProps","DashboardGrid","DashboardGrid_classCallCheck","DashboardGrid_getPrototypeOf","DashboardGrid_defineProperty","DashboardGrid_assertThisInitialized","layouts","offsetWidth","cfg","normalized","keyBy","normalizeTo","onLayoutChange","onBreakpointChange","widgetId","newHeight","cloneDeep","h","oldItem","newItem","autoHeightCtrl","Number","resume","x","y","disableAnimations","onWidgetHeightUpdated","pos","minW","maxW","minH","maxH","destroy","isEditing","disable-animations","cols","margin","isDraggable","isResizable","onResizeStart","onResizeStop","onWidgetResize","breakpoints","data-grid","normalizeFrom","data-widgetid","widget-auto-height-enabled","DashboardGrid_DashboardWidget","VisualizationSelect","visualizationGroups","visualizations","handleChange","visualizationId","selectedVisualization","groupKey","AddWidgetDialog","AddWidgetDialog_slicedToArray","setSelectedVisualization","setParameterMappings","AddWidgetDialog_extends","AddWidgetDialog_objectSpread","PreviewCard","imageUrl","roundedImage","PreviewCard_objectWithoutProperties","PreviewCard_extends","profile__image--settings","UserPreviewCard","withLink","DataSourcePreviewCard","DOMPurify","setConfig","ADD_ATTR","addHook","getAttribute","removeAttribute","disableResource","User","enableUser","userName","sanitize","is_disabled","disableUser","warning","deleteUser","convertUserInfo","groupIds","groups","isInvitationPending","is_invitation_pending","regenerateApiKey","sendPasswordReset","reset_link","resendInvitation","invite_link","DEBOUNCE_SEARCH_DURATION","searchUsers","PermissionsEditorDialogHeader","UserSelect","shouldShowUser","PermissionsEditorDialog_slicedToArray","loadingUsers","setLoadingUsers","setUsers","debouncedSearchUsers","parentNode","PermissionsEditorDialog_Option","PermissionsEditorDialog","author","aclUrl","_useState8","loadingGrantees","setLoadingGrantees","_useState10","grantees","setGrantees","_useGrantees","loadGrantees","resultGrantees","accessType","grantee","addPermission","access_type","removePermission","loadUsersWithPermissions","userHasPermission","PermissionsEditorDialog_extends","PermissionsEditorDialog_toConsumableArray","InputWithCopy","InputWithCopy_classCallCheck","InputWithCopy_getPrototypeOf","InputWithCopy_assertThisInitialized","select","execCommand","copied","resetCopyState","copyFeatureSupported","queryCommandSupported","copyButton","cursor","copy","InputWithCopy_extends","addonAfter","API_SHARE_URL","ShareDashboardDialog","ShareDashboardDialog_classCallCheck","ShareDashboardDialog_getPrototypeOf","ShareDashboardDialog_defineProperty","ShareDashboardDialog_assertThisInitialized","marginBottom","apiUrl","enableAccess","disableAccess","hasOnlySafeQueries","ShareDashboardDialog_extends","headerContent","InputWithCopy_InputWithCopy","useFullscreenHandler","useFullscreenHandler_slicedToArray","fullscreen","setFullscreen","getLimitedRefreshRate","refreshRate","allowedIntervals","getDashboardRefreshIntervals","useRefreshRateHandler","refreshDashboard","useRefreshRateHandler_slicedToArray","getRefreshRateFromUrl","setRefreshRate","refreshDashboardRef","refreshTimer","rate","DashboardStatusEnum","SAVED","SAVING","SAVING_FAILED","useEditModeHandler","useEditModeHandler_slicedToArray","editingLayout","setEditingLayout","dashboardStatus","setDashboardStatus","recentPositions","setRecentPositions","doneBtnClickedWhileSaving","setDoneBtnClickedWhileSaving","saveDashboardLayout","positions","changedPositions","nextPositions","pickBy","nextPos","prevPos","getChangedPositions","saveChangedWidgets","saveDashboardLayoutDebounced","retrySaveDashboardLayout","setEditing","editing","useDashboard","dashboardData","useDashboard_slicedToArray","setDashboard","refreshing","setRefreshing","gridDisabled","setGridDisabled","globalParameters","isDashboardOwnerOrAdmin","managePermissions","updateDashboard","includeVersion","currentDashboard","useDashboard_objectSpread","updatedDashboard","togglePublished","loadWidget","forceRefresh","load","removeWidget","dashboardRef","loadDashboard","updatedParameters","getAffectedWidgets","loadWidgetPromises","queryResults","updatedFilters","urlParams","queryFilters","getFilters","queryFilter","hasQueryStringValue","dashboard_filters_enabled","collectDashboardFilters","archiveDashboard","showShareDashboardDialog","handleDialogClose","showAddTextboxDialog","showAddWidgetDialog","useDashboard_toConsumableArray","_useRefreshRateHandle2","disableRefreshRate","_useFullscreenHandler2","toggleFullscreen","editModeHandler","EditInPlace","EditInPlace_classCallCheck","EditInPlace_getPrototypeOf","EditInPlace_defineProperty","EditInPlace_assertThisInitialized","isEditable","ignoreBlanks","onDone","stopEditing","onFocus","startEditing","multiline","editorProps","InputComponent","EditInPlace_extends","onBlur","defaultEditing","prevState","onStopEditing","active","renderEdit","renderNormal","getDashboardTags","buttonType","DashboardPageTitle","dashboardOptions","EditInPlace_EditInPlace","RefreshButton","refreshRateOptions","parsedRefreshRate","DashboardMoreOptionsButton","showPermissionsControl","DashboardControl","showPublishButton","showFullscreenButton","showShareButton","showMoreOptionsButton","DashboardEditControl","data-saving","data-error","DashboardHeader","DashboardControlComponent","DashboardSettings","AddWidgetContainer","DashboardComponent","DashboardHeader_DashboardHeader","dashboards_DashboardGrid","DashboardPage","dashboardSlug","DashboardPage_slicedToArray","onErrorRef","DashboardPage_DashboardPage","ApiKeySessionWrapper","routeWithApiKeySession_slicedToArray","useContext","ErrorBoundaryContext","routeWithApiKeySession_objectSpread","routeWithApiKeySession","routeWithApiKeySession_objectWithoutProperties","PublicDashboard","_useDashboard","PublicDashboardPage","PublicDashboardPage_PublicDashboardPage","SCHEMA_NOT_SUPPORTED","DataSource","fetchSchema","EmptyState_extends","CardsList","CardsList_classCallCheck","CardsList_getPrototypeOf","CardsList_defineProperty","CardsList_assertThisInitialized","searchText","itemId","CardsList_objectSpread","imgSrc","filteredItems","EmptyState_EmptyState","Collapse","collapsed","Collapse_objectWithoutProperties","collapse_default","Collapse_extends","Panel","react_ace_lib_default","AceEditorInput_extends","$blockScrolling","Infinity","showPrintMargin","dynamicFormHelper","getFields","configurationSchema","configuration_schema","properties","prop","endsWith","enum","extendedEnum","extra_options","normalizeSchema","default","setDefaultValueToFields","isNewTarget","dynamicFormHelper_toConsumableArray","targetOptions","inputs","orderedInputs","updateTargetWithValues","getBase64","file","reader","FileReader","readAsDataURL","onload","onerror","fieldRules","rule","DynamicForm","DynamicForm_classCallCheck","DynamicForm_getPrototypeOf","DynamicForm_defineProperty","DynamicForm_assertThisInitialized","actionName","inProgress","inProgressActions","DynamicForm_objectSpread","isSubmitting","entries","DynamicForm_slicedToArray","fields","msg","_this$props$form","setFieldsValue","getFieldsValue","dataset","setActionInProgress","actionCallbacks","fieldName","fileList","helper","hasFilledExtraField","isBoolean","actions","showExtraFields","cur","_this$props$form2","getFieldDecorator","getFieldValue","fileOptions","rules","getValueFromEvent","base64File","upload","upload_default","DynamicForm_extends","beforeUpload","fieldLabel","valuePropName","renderUpload","renderSelect","components_AceEditorInput","FormItem","Form","feedbackIcons","hasFeedback","fieldProps","renderField","isFieldsTouched","actionProps","disableWhenDirty","handleAction","data-action","submitProps","hideSubmitButton","saveText","saveButton","extraFields","regularFields","handleSubmit","renderFields","fa-caret-up","fa-caret-down","renderActions","Steps","StepEnum","SELECT_TYPE","CONFIGURE_IT","CreateSourceDialog","selectedType","savingSource","currentStep","successCallback","errorCallback","onCreate","filteredTypes","CreateSourceDialog_Search","imageFolder","helpTriggerPrefix","HELP_TRIGGER_TYPES","components_dynamic_form_DynamicForm","createSource","selectType","data-test-type","sourceType","CreateSourceDialog_extends","resetType","steps_default","progressDot","CreateSourceDialog_Step","renderTypeSelector","renderForm","SettingsMenuItem","menuItem","settingsMenu_classCallCheck","pathPrefix","isActive","settingsMenu","SettingsMenu","strippedPath","wrapSettingsTab","activeItem","getActiveItem","DataSourcesList","dataSourceTypes","dataSources","newDataSourceDialog","createDataSource","isNewDataSourcePage","canCreateDataSource","showCreateSourceDialog","isCreateDataSourceEnabled","CardsList_CardsList","newDataSourceProps","renderDataSources","DataSourcesListPage","data_sources_DataSourcesList","DataSourcesList_extends","EditDataSource","httpResponse","formProps","deleteDataSource","testConnection","saveDataSource","EditDataSourcePage","DestinationsList","destinationTypes","createDestination","isNewDestinationPage","canCreateDestination","isCreateDestinationEnabled","newDestinationProps","renderDestinations","DestinationsListPage","destinations_DestinationsList","DestinationsList_extends","EditDestination","destinationId","deleteDestination","saveDestination","EditDestinationPage","CreateGroupDialog","CreateGroupDialog_extends","members","addMember","removeMember","addDataSource","removeDataSource","updateDataSource","DeleteGroupButton","group","DeleteGroupButton_objectWithoutProperties","button","DeleteGroupButton_extends","onGroupDeleted","deleteGroup","mouseLeaveDelay","GroupsList","canRemove","newGroup","createGroup","GroupsListPage","GroupsList_extends","GroupName","GroupName_objectWithoutProperties","updateGroupName","DetailsPageSidebar","canAddMembers","onAddMembersClick","canAddDataSources","onAddDataSourcesClick","GroupDataSources","groupId","datasource","view_only","setDataSourcePermissions","removeGroupDataSource","viewOnly","allDataSources","alreadyAddedDataSources","ds","addDataSources","GroupDataSourcesPage","GroupDataSources_extends","GroupMembers","removeGroupMember","alreadyAddedUsers","u","addMembers","GroupMembersPage","GroupMembers_extends","organizationSettings","BeaconConsent","BeaconConsent_slicedToArray","setHide","showBeaconConsentMessage","hideConsentCard","confirmConsent","OrgSettings","beacon_consent","bordered","BeaconConsent_Text","DeprecatedEmbedFeatureAlert","EmailNotVerifiedAlert","FavoriteList","resource","itemUrl","emptyState","Home_slicedToArray","DashboardAndQueryFavoritesList","Home","components_BeaconConsent","Home_Home","Resizable","toggleShortcut","direction","sizeAttribute","Resizable_slicedToArray","setSize","elementRef","wasUsingTouchEventsRef","wasResizedRef","sizeProp","getElementSize","floor","savedSize","targetSize","element","d3","transition","ease","resizeHandle","shortcuts","Resizable_defineProperty","resizeEventHandlers","onResize","draggableCoreOptions","onMouseDown","Resizable_objectSpread","react_resizable","Resizable_extends","resizeHandles","handle","minConstraints","draggableOpts","langTools","ace","acequire","snippetsModule","defineDummySnippets","define","require","snippetText","scope","schemaCompleterKeywords","updateSchemaCompleter","editorKey","schema","tableKeywords","columnKeywords","tableColumnKeywords","table","score","meta","keywords","caption","buildTableColumnKeywords","tableColumn","buildKeywordsFromSchema","setCompleters","snippetCompleter","keyWordCompleter","textCompleter","identifierRegexps","getCompletions","editor","tableName","checkItems","bounds","QuerySnippet","querySnippet","query_snippet_classCallCheck","snippet","tabTrigger","getQuerySnippet","QuerySnippetService","AutocompleteToggle","available","onToggle","tooltipMessage","handleClick","ButtonTooltip","QueryEditorControls_objectWithoutProperties","limit","modifiers","mod","upperFirst","sc","humanReadableShortcut","QueryEditorControls_extends","EditorControl","addParameterButtonProps","formatButtonProps","saveButtonProps","executeButtonProps","autocompleteToggleProps","dataSourceSelectorProps","buttons","b","ButtonPropsPropType","QueryEditor","autocompleteEnabled","onSelectionChange","QueryEditor_objectWithoutProperties","QueryEditor_slicedToArray","setContainer","editorRef","setEditorRef","str","editorOptions","behavioursEnabled","enableSnippets","enableBasicAutocompletion","enableLiveAutocompletion","autoScrollEditorIntoView","editorId","resize","shouldTrigger","set","resizeObserver","handleSelectionChange","selection","rawSelectedQueryText","getTextRange","getRange","initEditor","commands","bindKey","win","mac","on","command","completer","snippets","snippetManager","parseSnippetFile","getSnippet","register","useImperativeHandle","paste","getValue","setRange","QueryEditor_extends","setOptions","wrapEnabled","Controls","QueryEditorControls","useQueryFlags","canView","canViewSource","canExecute","canFork","canSchedule","useArchiveQuery","onChangeRef","doArchiveQuery","updatedQuery","SaveQueryError","detailedMessage","useUpdateQuery_classCallCheck","useUpdateQuery_possibleConstructorReturn","useUpdateQuery_getPrototypeOf","SaveQueryConflictError","doSaveQuery","_ref$canOverwrite","canOverwrite","useUpdateQuery_objectSpread","toSaveableObject","useUpdateQuery","_ref2$successMessage","successMessage","useUpdateQuery_toConsumableArray","notificationOptions","CodeBlock","CodeBlock_classCallCheck","CodeBlock_getPrototypeOf","CodeBlock_defineProperty","CodeBlock_assertThisInitialized","getSelection","selectAllChildren","removeAllRanges","copyFeatureEnabled","copyable","CodeBlock_objectWithoutProperties","CodeBlock_extends","ApiKeyDialog","ApiKeyDialog_objectWithoutProperties","ApiKeyDialog_slicedToArray","setQuery","updatingApiKey","setUpdatingApiKey","regenerateQueryApiKey","_useMemo","csvUrl","basePath","jsonUrl","ApiKeyDialog_extends","CodeBlock_CodeBlock","getQueryTags","QueryPageHeader","sourceMode","headerExtra","isDesktop","useMedia","queryFlags","updateName","updateQuery","autoPublishNamedQueries","useRenameQuery","updateTags","useUpdateQueryTags","archiveQuery","publishQuery","usePublishQuery","unpublishQuery","useUnpublishQuery","_useDuplicateQuery2","QueryPageHeader_slicedToArray","useDuplicateQuery_slicedToArray","isDuplicating","setIsDuplicating","duplicateQuery","tabName","open","noop","useDuplicateQuery","openApiKeyDialog","useApiKeyDialog","openPermissionsEditorDialog","usePermissionsEditorDialog","moreActionsMenu","isEnabled","divider","QueryPageHeader_toConsumableArray","createMenu","publish","unpublish","showAPIKey","QueryMetadata","onEditSchedule","text-muted","last_modified_by","Tabs","refreshButton","TabWithDeleteButton","canDelete","QueryVisualizationTabs_objectWithoutProperties","handleDelete","defaultVisualizations","QueryVisualizationTabs","selectedTab","showNewVisualizationButton","canDeleteVisualizations","onChangeTab","onAddVisualization","onDeleteVisualization","tabsProps","tabBarExtraContent","orderedVisualizations","orderBy","isFirstVisualization","visId","isMobile","maxWidth","QueryVisualizationTabs_extends","destroyInactiveTabPane","QueryVisualizationTabs_EmptyState","QueryExecutionStatus","isCancelling","alertType","showTimer","isCancelButtonAvailable","SchemaItemType","schemaTableHeight","schemaColumnHeight","SchemaItem","expanded","SchemaBrowser_objectWithoutProperties","handleSelect","SchemaBrowser","onItemSelect","SchemaBrowser_slicedToArray","filterString","setFilterString","filteredSchema","nameFilter","columnFilter","SchemaBrowser_objectSpread","applyFilter","expandedFlags","setExpandedFlags","handleFilterChange","listRef","setListRef","recomputeRowHeights","SchemaBrowser_extends","AutoSizer_default","List_default","rowCount","columnCount","rowRenderer","SchemaBrowser_defineProperty","toggleTable","QuerySourceAlerts","dataSourcesAvailable","typography_default","level","wrapQueryPage","QueryPageWrapper","wrapQueryPage_objectWithoutProperties","wrapQueryPage_slicedToArray","wrapQueryPage_extends","AddToDashboardDialog","AddToDashboardDialog_slicedToArray","selectedDashboard","setSelectedDashboard","AddToDashboardDialog_extends","autoComplete","EmbedQueryDialog","EmbedQueryDialog_classCallCheck","EmbedQueryDialog_getPrototypeOf","EmbedQueryDialog_defineProperty","EmbedQueryDialog_assertThisInitialized","enableChangeIframeSize","iframeWidth","iframeHeight","embedUrl","snapshotUrlBuilder","snapshotUrl","EmbedQueryDialog_extends","QueryResultsLink","resultId","resultData","embed","QueryControlDropdown","openAddToDashboardForm","showEmbedDialog","queryExecuting","overlayClassName","EditVisualizationButton","openVisualizationEditor","QueryExecutionMetadata","isQueryExecuting","showEditVisualizationButton","onEditVisualization","extraActions","queryResultData","openAddToDashboardDialog","useAddToDashboardDialog","openEmbedDialog","unusedQuery","useEmbedDialog","data_scanned","useVisualizationTabHandler","firstVisualization","useVisualizationTabHandler_slicedToArray","setSelectedTab","hashValue","PREFIX","localOptions","fullKey","localStorage","getItem","setItem","Notification","notifications","getPermissions","requestPermission","showNotification","redashIconUrl","onclick","reducer","updatedProperty","useQueryExecute_objectSpread","useQueryExecute","_useReducer2","useQueryExecute_slicedToArray","useReducer","isExecuting","loadedInitialResults","executionStatus","cancelCallback","executionState","setExecutionState","queryResultInExecution","executeQuery","newQueryResult","queryExecutor","cancelExecution","queryRef","executeQueryRef","hasResult","paramsRequired","getMaxAge","useQueryDataSources","useQueryDataSources_slicedToArray","setAllDataSources","dataSourcesLoaded","setDataSourcesLoaded","cancelDataSourceLoading","getSchema","fetchSchemaFromJob","ms","sleep","prepareSchema","tokensCount","totalLength","useQueryParameters","useQueryParameters_slicedToArray","hasPendingValues","dirtyFlag","setDirtyFlag","updateDirtyFlag","flag","updatedDirtyParameters","WEEKDAYS_SHORT","weekdaysShort","WEEKDAYS_FULL","weekdays","DATE_FORMAT","HOUR_FORMAT","TimeEditor","ScheduleDialog_slicedToArray","setTime","showUtc","isUTC","time_picker_default","minuteStep","newTime","data-testid","ScheduleDialog","newSchedule","newSeconds","newInterval","setScheduleUntil","day","newCompact","oldCompact","hasChanged","ScheduleDialog_extends","ScheduleDialog_Option","intervals","int","cnt","secs","setWeekday","setUntilToggle","ScheduleDialog_defineProperty","refreshOptions","_secondsToInterval3","useEditScheduleDialog","getQueryRefreshIntervals","Visualization","EditVisualizationDialog","EditVisualizationDialog_slicedToArray","getDefaultVisualization","getOptions","originalOptions","setType","nameChanged","setNameChanged","_useState12","onOptionsChanged","newOptions","availableVisualizations","vis","isDeprecated","EditVisualizationDialog_extends","wrapClassName","saveVisualization","newVisualization","savedVisualization","EditVisualizationDialog_toConsumableArray","updateQueryVisualizations","optionsChanged","newName","onNameChanged","onOptionsChange","useEditVisualizationDialog","updatedVisualization","filteredVisualizations","useEditVisualizationDialog_toConsumableArray","useDeleteVisualization","useUpdateQueryDescription","QuerySource","_useQuery","originalQuery","useQuery_slicedToArray","originalQuerySource","setOriginalQuerySource","saveQuery","useQuery","_useQueryDataSources","_useDataSourceSchema2","QuerySource_slicedToArray","useDataSourceSchema_slicedToArray","setSchema","refreshSchemaTokenRef","reloadSchema","refreshToken","useDataSourceSchema","refreshSchema","_useQueryParameters2","areParametersDirty","updateParametersDirtyFlag","_useVisualizationTabH2","shouldShowAlert","shouldShowAlertRef","confirmMessage","savedOnBeforeUnload","onbeforeunload","currentLocation","useUnsavedChangesAlert","_useQueryExecute","executionError","isExecutionCancelling","_useAutocompleteFlags2","useAutocompleteFlags_slicedToArray","setIsEnabled","toggleAutocomplete","useAutocompleteFlags","autocompleteAvailable","handleQueryEditorChange","updateQueryDescription","formatQuery","useFormatQuery","handleDataSourceChange","updates","firstDataSourceId","dataSourceIds","availableDataSources","chooseDataSourceId","editSchedule","openAddNewParameterDialog","onParameterAdded","onParameterAddedRef","useAddNewParameterDialog","toQueryTextFragment","handleSchemaItemSelect","schemaItem","selectedText","setSelectedText","doExecuteQuery","skipParametersDirtyFlag","getQueryResultByText","isQuerySaving","setIsQuerySaving","addVisualization","editVisualization","useAddVisualizationDialog_slicedToArray","shouldOpenDialog","setShouldOpenDialog","useAddVisualizationDialog","deleteVisualization","query-fixed-layout","QuerySourceAlerts_QuerySourceAlerts","QueryPageHeader_QueryPageHeader","Resizable_Resizable","data-name","QueryMetadata_QueryMetadata","overflow","queries_QueryEditor","data-executing","hasParameters","line","QueryVisualizationTabs_QueryVisualizationTabs","QueryExecutionMetadata_QueryExecutionMetadata","QuerySourcePage","queries_QuerySource","QueryViewButton","QueryViewButton_objectWithoutProperties","QueryViewButton_slicedToArray","tooltipVisible","setTooltipVisible","eventHandlers","onMouseEnter","onMouseLeave","QueryViewButton_defineProperty","QueryViewButton_extends","pointerEvents","QueryView","QueryView_slicedToArray","isFixedLayout","addingDescription","setAddingDescription","query-view-fullscreen","QueryViewPage","VisualizationEmbedHeader","queryDescription","verticalAlign","VisualizationEmbedFooter","queryUrl","hideTimestamp","downloadMenu","VisualizationEmbed","VisualizationEmbed_slicedToArray","setError","setRefreshStartedAt","setQueryResults","refreshQueryResults","hideHeader","hideParametersUI","hideQueryLink","showQueryDescription","QueriesListEmptyState","QueriesList","unlistenLocationChanges","QueriesListPage","my","queries_list_QueriesList","QueriesList_extends","QuerySnippetDialog","querySnippetId","QuerySnippetDialog_objectSpread","formFields","QuerySnippetDialog_extends","canEditQuerySnippet","QuerySnippetsList","showSnippetDialog","deleteQuerySnippet","canSave","goToSnippetsList","saveQuerySnippet","_this$props$controlle","isNewOrEditPage","isCreateQuerySnippetEnabled","QuerySnippetsListPage","pages_query_snippets_QuerySnippetsList","QuerySnippetsList_extends","OrganizationSettings","settings","formValues","submitting","googleLoginEnabled","ldapLoginEnabled","auth_saml_enabled","OrganizationSettings_objectSpread","OrganizationSettings_extends","OrganizationSettings_defineProperty","disablePasswordLoginToggle","auth_password_login_enabled","auth_google_apps_domains","auth_saml_metadata_url","auth_saml_entity_id","auth_saml_nameid_format","date_format","dateFormatList","OrganizationSettings_Option","time_format","timeFormatList","timeFormat","hide_plotly_mode_bar","feature_show_permissions_control","send_email_on_failed_scheduled_queries","multi_byte_search_enabled","renderGoogleLoginOptions","renderSAMLOptions","renderGeneralSettings","renderAuthSettings","OrganizationSettingsPage","absoluteUrl","urlObj","URL","protocol","host","ChangePasswordDialog","ChangePasswordDialog_classCallCheck","ChangePasswordDialog_getPrototypeOf","ChangePasswordDialog_defineProperty","ChangePasswordDialog_assertThisInitialized","newPassword","currentPassword","repeatPassword","errors","fieldError","ChangePasswordDialog_objectSpread","updatingPassword","validateFields","touched","userData","old_password","password","_e$target","_this$state3","inputProps","updatePassword","ChangePasswordDialog_extends","Password","UserEdit","UserEdit_classCallCheck","UserEdit_getPrototypeOf","UserEdit_defineProperty","UserEdit_assertThisInitialized","sendingPasswordEmail","passwordLink","resendingInvitation","regeneratingApiKey","UserEdit_objectSpread","toggleUser","togglingUser","loadingGroups","renderUserGroups","saveUser","_this$state4","_this$state5","_this$state6","renderUserInfoForm","renderApiKey","changePassword","renderResendInvitation","renderSendPasswordReset","renderPasswordLinkAlert","rendertoggleUser","UserShow","UserShow_classCallCheck","UserShow_possibleConstructorReturn","UserShow_getPrototypeOf","_this$props$user","UserProfile_classCallCheck","UserProfile_possibleConstructorReturn","UserProfile_getPrototypeOf","UserComponent","UserProfilePage","users_UserProfile","CreateUserDialog","CreateUserDialog_slicedToArray","formRef","createUser","common","CreateUserDialog_objectSpread","CreateUserDialog_extends","UsersListActions","UsersList","canCreateUser","isCreateUserEnabled","goToUsersList","isNewUserPage","showCreateUserDialog","renderPageHeader","UsersListPage","pending","users_UsersList","UsersList_extends","flatten","adminJobsRoutes","adminOutdatedQueriesRoutes","adminSystemStatusRoutes","alertRoutes","alertsListRoutes","dashboardListRoutes","dashboardRoutes","publicDashboardRoutes","dataSourcesListRoutes","editDataSourceRoutes","destinationsListRoutes","editDestinationRoutes","groupsListRoutes","groupsDataSourcesRoutes","groupsMembersRoutes","homeRoutes","queriesListRoutes","queryViewRoutes","querySourceRoutes","visualizationEmbedRoutes","querySnippetsRoutes","organizationSettingsRoutes","usersListRoutes","userProfileRoutes","handleNavigationIntent","tagName","hasAttribute","ctx","Spin","setDefaultIndicator","Pace","shouldHandlePushState","prevUrl","newUrl","updateLocale","relativeTime","future","past","mm","hh","dd","M","MM","yy","init","offline_listener","notificationKey","onlineStateHandler","addOnlineListener","ApplicationArea_slicedToArray","unhandledError","setUnhandledError","globalErrorHandler","getElementById","offlineListener"],"mappings":"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oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,uDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,uDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,sDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,qDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,yDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,uDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,sDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,yDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,mDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8DCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,2DCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,yDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,sDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8DCAxCzB,E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","file":"app.dce0a3ceac9c472d6bc9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([678,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var map = {\n\t\"./en-SG\": 544,\n\t\"./en-SG.js\": 544,\n\t\"./en-au\": 545,\n\t\"./en-au.js\": 545,\n\t\"./en-ca\": 546,\n\t\"./en-ca.js\": 546,\n\t\"./en-gb\": 547,\n\t\"./en-gb.js\": 547,\n\t\"./en-ie\": 548,\n\t\"./en-ie.js\": 548,\n\t\"./en-il\": 549,\n\t\"./en-il.js\": 549,\n\t\"./en-nz\": 550,\n\t\"./en-nz.js\": 550\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1057;","module.exports = __webpack_public_path__ + \"images/redash_icon_small.png\";","var map = {\n\t\"./avatar.svg\": 662,\n\t\"./db-logos/Cassandra.png\": 1611,\n\t\"./db-logos/athena.png\": 1612,\n\t\"./db-logos/aws_es.png\": 1613,\n\t\"./db-logos/axibasetsd.png\": 1614,\n\t\"./db-logos/azure_kusto.png\": 1615,\n\t\"./db-logos/bigquery.png\": 1616,\n\t\"./db-logos/bigquery_gce.png\": 1617,\n\t\"./db-logos/clickhouse.png\": 1618,\n\t\"./db-logos/cloudwatch.png\": 1619,\n\t\"./db-logos/cloudwatch_insights.png\": 1620,\n\t\"./db-logos/cockroach.png\": 1621,\n\t\"./db-logos/couchbase.png\": 1622,\n\t\"./db-logos/csv.png\": 1623,\n\t\"./db-logos/databricks.png\": 1624,\n\t\"./db-logos/db2.png\": 1625,\n\t\"./db-logos/dgraph.png\": 1626,\n\t\"./db-logos/drill.png\": 1627,\n\t\"./db-logos/druid.png\": 1628,\n\t\"./db-logos/dynamodb_sql.png\": 1629,\n\t\"./db-logos/elasticsearch.png\": 1630,\n\t\"./db-logos/exasol.png\": 1631,\n\t\"./db-logos/google_analytics.png\": 1632,\n\t\"./db-logos/google_spreadsheets.png\": 1633,\n\t\"./db-logos/graphite.png\": 1634,\n\t\"./db-logos/hive.png\": 1635,\n\t\"./db-logos/hive_http.png\": 1636,\n\t\"./db-logos/impala.png\": 1637,\n\t\"./db-logos/influxdb.png\": 1638,\n\t\"./db-logos/jirajql.png\": 1639,\n\t\"./db-logos/json.png\": 1640,\n\t\"./db-logos/kibana.png\": 1641,\n\t\"./db-logos/kylin.png\": 1642,\n\t\"./db-logos/mapd.png\": 1643,\n\t\"./db-logos/memsql.png\": 1644,\n\t\"./db-logos/mongodb.png\": 1645,\n\t\"./db-logos/mssql.png\": 1646,\n\t\"./db-logos/mssql_odbc.png\": 1647,\n\t\"./db-logos/mysql.png\": 1648,\n\t\"./db-logos/oracle.png\": 1649,\n\t\"./db-logos/pg.png\": 1650,\n\t\"./db-logos/phoenix.png\": 1651,\n\t\"./db-logos/presto.png\": 1652,\n\t\"./db-logos/prometheus.png\": 1653,\n\t\"./db-logos/python.png\": 1654,\n\t\"./db-logos/qubole.png\": 1655,\n\t\"./db-logos/rds_mysql.png\": 1656,\n\t\"./db-logos/redshift.png\": 1657,\n\t\"./db-logos/redshift_iam.png\": 1658,\n\t\"./db-logos/results.png\": 1659,\n\t\"./db-logos/rockset.png\": 1660,\n\t\"./db-logos/salesforce.png\": 1661,\n\t\"./db-logos/scylla.png\": 1662,\n\t\"./db-logos/snowflake.png\": 1663,\n\t\"./db-logos/sqlite.png\": 1664,\n\t\"./db-logos/treasuredata.png\": 1665,\n\t\"./db-logos/uptycs.png\": 1666,\n\t\"./db-logos/url.png\": 1667,\n\t\"./db-logos/vertica.png\": 1668,\n\t\"./db-logos/yandex_appmetrika.png\": 1669,\n\t\"./db-logos/yandex_metrika.png\": 1670,\n\t\"./destinations/chatwork.png\": 1671,\n\t\"./destinations/email.png\": 1672,\n\t\"./destinations/hangouts_chat.png\": 1673,\n\t\"./destinations/hipchat.png\": 1674,\n\t\"./destinations/mattermost.png\": 1675,\n\t\"./destinations/pagerduty.png\": 1676,\n\t\"./destinations/slack.png\": 1677,\n\t\"./destinations/webhook.png\": 1678,\n\t\"./favicon-16x16.png\": 1679,\n\t\"./favicon-32x32.png\": 1680,\n\t\"./favicon-96x96.png\": 1681,\n\t\"./fixtures/map-tile.png\": 1682,\n\t\"./google_logo.svg\": 1683,\n\t\"./illustrations/alert.svg\": 1684,\n\t\"./illustrations/dashboard.svg\": 1685,\n\t\"./illustrations/no-query-results.svg\": 1686,\n\t\"./illustrations/query.svg\": 1687,\n\t\"./logo.png\": 1688,\n\t\"./logo_white.png\": 1689,\n\t\"./redash_icon_small.png\": 111\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1610;","module.exports = __webpack_public_path__ + \"images/db-logos/Cassandra.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/athena.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/aws_es.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/axibasetsd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/azure_kusto.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/bigquery.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/bigquery_gce.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/clickhouse.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cloudwatch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cloudwatch_insights.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cockroach.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/couchbase.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/csv.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/databricks.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/db2.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/dgraph.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/drill.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/druid.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/dynamodb_sql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/exasol.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_analytics.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_spreadsheets.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/graphite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive_http.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/impala.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/influxdb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/jirajql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/json.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kibana.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kylin.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mapd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/memsql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mongodb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mssql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mssql_odbc.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/oracle.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/pg.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/phoenix.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/presto.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/prometheus.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/python.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/qubole.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rds_mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/redshift.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/redshift_iam.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/results.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rockset.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/salesforce.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/scylla.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/snowflake.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/sqlite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/treasuredata.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/uptycs.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/url.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/vertica.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_appmetrika.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_metrika.png\";","module.exports = __webpack_public_path__ + \"images/destinations/chatwork.png\";","module.exports = __webpack_public_path__ + \"images/destinations/email.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hangouts_chat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hipchat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/mattermost.png\";","module.exports = __webpack_public_path__ + \"images/destinations/pagerduty.png\";","module.exports = __webpack_public_path__ + \"images/destinations/slack.png\";","module.exports = __webpack_public_path__ + \"images/destinations/webhook.png\";","module.exports = __webpack_public_path__ + \"images/favicon-16x16.png\";","module.exports = __webpack_public_path__ + \"images/favicon-32x32.png\";","module.exports = __webpack_public_path__ + \"images/favicon-96x96.png\";","module.exports = __webpack_public_path__ + \"images/fixtures/map-tile.png\";","module.exports = __webpack_public_path__ + \"images/google_logo.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/alert.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/dashboard.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/no-query-results.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/query.svg\";","module.exports = __webpack_public_path__ + \"images/logo.png\";","module.exports = __webpack_public_path__ + \"images/logo_white.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1690;","import { isNil, isUndefined, isFunction, isObject, trimStart, mapValues, omitBy, extend } from \"lodash\";\nimport qs from \"query-string\";\nimport { createBrowserHistory } from \"history\";\n\nconst history = createBrowserHistory();\n\nfunction normalizeLocation(rawLocation) {\n  const { pathname, search, hash } = rawLocation;\n  const result = {};\n\n  result.path = pathname;\n  result.search = mapValues(qs.parse(search), value => (isNil(value) ? true : value));\n  result.hash = trimStart(hash, \"#\");\n  result.url = `${pathname}${search}${hash}`;\n\n  return result;\n}\n\nconst location = {\n  listen(handler) {\n    if (isFunction(handler)) {\n      return history.listen((unused, action) => handler(location, action));\n    } else {\n      return () => {};\n    }\n  },\n\n  confirmChange(handler) {\n    if (isFunction(handler)) {\n      return history.block(nextLocation => {\n        return handler(normalizeLocation(nextLocation), location);\n      });\n    } else {\n      return () => {};\n    }\n  },\n\n  update(newLocation, replace = false) {\n    if (isObject(newLocation)) {\n      // remap fields and remove undefined ones\n      newLocation = omitBy(\n        {\n          pathname: newLocation.path,\n          search: newLocation.search,\n          hash: newLocation.hash,\n        },\n        isUndefined\n      );\n\n      // keep existing fields (!)\n      newLocation = extend(\n        {\n          pathname: location.path,\n          search: location.search,\n          hash: location.hash,\n        },\n        newLocation\n      );\n\n      // serialize search and keep existing search parameters (!)\n      if (isObject(newLocation.search)) {\n        newLocation.search = omitBy(extend({}, location.search, newLocation.search), isNil);\n        newLocation.search = mapValues(newLocation.search, value => (value === true ? null : value));\n        newLocation.search = qs.stringify(newLocation.search);\n      }\n    }\n    if (replace) {\n      history.replace(newLocation);\n    } else {\n      history.push(newLocation);\n    }\n  },\n\n  url: undefined,\n\n  path: undefined,\n  setPath(path, replace = false) {\n    location.update({ path }, replace);\n  },\n\n  search: undefined,\n  setSearch(search, replace = false) {\n    location.update({ search }, replace);\n  },\n\n  hash: undefined,\n  setHash(hash, replace = false) {\n    location.update({ hash }, replace);\n  },\n};\n\nfunction locationChanged() {\n  extend(location, normalizeLocation(history.location));\n}\n\nhistory.listen(locationChanged);\nlocationChanged(); // init service\n\nexport default location;\n","import debug from \"debug\";\nimport { includes, extend } from \"lodash\";\nimport location from \"@/services/location\";\nimport { axios } from \"@/services/axios\";\n\nexport const currentUser = {\n  canEdit(object) {\n    const userId = object.user_id || (object.user && object.user.id);\n    return this.hasPermission(\"admin\") || (userId && userId === this.id);\n  },\n\n  canCreate() {\n    return (\n      this.hasPermission(\"create_query\") || this.hasPermission(\"create_dashboard\") || this.hasPermission(\"list_alerts\")\n    );\n  },\n\n  hasPermission(permission) {\n    return includes(this.permissions, permission);\n  },\n\n  get isAdmin() {\n    return this.hasPermission(\"admin\");\n  },\n};\n\nexport const clientConfig = {};\nexport const messages = [];\n\nconst logger = debug(\"redash:auth\");\nconst session = { loaded: false };\n\nfunction updateSession(sessionData) {\n  logger(\"Updating session to be:\", sessionData);\n  extend(session, sessionData, { loaded: true });\n  extend(currentUser, session.user);\n  extend(clientConfig, session.client_config);\n  extend(messages, session.messages);\n}\n\nexport const Auth = {\n  isAuthenticated() {\n    return session.loaded && session.user.id;\n  },\n  login() {\n    const next = encodeURI(location.url);\n    logger(\"Calling login with next = %s\", next);\n    window.location.href = `login?next=${next}`;\n  },\n  logout() {\n    logger(\"Logout.\");\n    window.location.href = \"logout\";\n  },\n  loadSession() {\n    logger(\"Loading session\");\n    if (session.loaded && session.user.id) {\n      logger(\"Resolving with local value.\");\n      return Promise.resolve(session);\n    }\n\n    Auth.setApiKey(null);\n    return axios.get(\"api/session\").then(data => {\n      updateSession(data);\n      return session;\n    });\n  },\n  loadConfig() {\n    logger(\"Loading config\");\n    return axios.get(\"/api/config\").then(data => {\n      updateSession({ client_config: data.client_config, user: { permissions: [] }, messages: [] });\n      return data;\n    });\n  },\n  setApiKey(apiKey) {\n    logger(\"Set API key to: %s\", apiKey);\n    Auth.apiKey = apiKey;\n  },\n  getApiKey() {\n    return Auth.apiKey;\n  },\n  requireSession() {\n    logger(\"Requested authentication\");\n    if (Auth.isAuthenticated()) {\n      return Promise.resolve(session);\n    }\n    return Auth.loadSession()\n      .then(() => {\n        if (Auth.isAuthenticated()) {\n          logger(\"Loaded session\");\n          return session;\n        }\n        logger(\"Need to login, redirecting\");\n        Auth.login();\n      })\n      .catch(() => {\n        logger(\"Need to login, redirecting\");\n        Auth.login();\n      });\n  },\n};\n","import axiosLib from \"axios\";\nimport { Auth } from \"@/services/auth\";\nimport qs from \"query-string\";\n\nexport const axios = axiosLib.create({\n  paramsSerializer: params => qs.stringify(params),\n});\n\nconst getData = ({ data }) => data;\n\naxios.interceptors.response.use(getData);\n\naxios.interceptors.request.use(config => {\n  const apiKey = Auth.getApiKey();\n  if (apiKey) {\n    config.headers.Authorization = `Key ${apiKey}`;\n  }\n\n  return config;\n});\n","import { axios } from \"@/services/axios\";\n\nclass OrganizationStatus {\n  constructor() {\n    this.objectCounters = {};\n  }\n\n  refresh() {\n    return axios.get(\"api/organization/status\").then(data => {\n      this.objectCounters = data.object_counters;\n      return this;\n    });\n  }\n}\n\nexport default new OrganizationStatus();\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction BigMessage({ message, icon, children, className }) {\n  return (\n    <div className={\"p-15 text-center \" + className}>\n      <h3 className=\"m-t-0 m-b-0\">\n        <i className={\"fa \" + icon} />\n      </h3>\n      <br />\n      {message}\n      {children}\n    </div>\n  );\n}\n\nBigMessage.propTypes = {\n  message: PropTypes.string,\n  icon: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nBigMessage.defaultProps = {\n  message: \"\",\n  children: null,\n  className: \"tiled bg-white\",\n};\n\nexport default BigMessage;\n","import { isFunction, isString } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst componentsRegistry = new Map();\nconst activeInstances = new Set();\n\nexport function registerComponent(name, component) {\n  if (isString(name) && name !== \"\") {\n    componentsRegistry.set(name, isFunction(component) ? component : null);\n    // Refresh active DynamicComponent instances which use this component\n    activeInstances.forEach(dynamicComponent => {\n      if (dynamicComponent.props.name === name) {\n        dynamicComponent.forceUpdate();\n      }\n    });\n  }\n}\n\nexport function unregisterComponent(name) {\n  registerComponent(name, null);\n}\n\nexport default class DynamicComponent extends React.Component {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    children: null,\n  };\n\n  componentDidMount() {\n    activeInstances.add(this);\n  }\n\n  componentWillUnmount() {\n    activeInstances.delete(this);\n  }\n\n  render() {\n    const { name, children, ...props } = this.props;\n    const RealComponent = componentsRegistry.get(name);\n    if (!RealComponent) {\n      return children;\n    }\n    return <RealComponent {...props}>{children}</RealComponent>;\n  }\n}\n","import { startsWith, get } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Drawer from \"antd/lib/drawer\";\nimport Icon from \"antd/lib/icon\";\nimport BigMessage from \"@/components/BigMessage\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\n\nimport \"./HelpTrigger.less\";\n\nconst DOMAIN = \"https://redash.io\";\nconst HELP_PATH = \"/help\";\nconst IFRAME_TIMEOUT = 20000;\nconst IFRAME_URL_UPDATE_MESSAGE = \"iframe_url\";\n\nexport const TYPES = {\n  HOME: [\"\", \"Help\"],\n  VALUE_SOURCE_OPTIONS: [\"/user-guide/querying/query-parameters#Value-Source-Options\", \"Guide: Value Source Options\"],\n  SHARE_DASHBOARD: [\"/user-guide/dashboards/sharing-dashboards\", \"Guide: Sharing and Embedding Dashboards\"],\n  AUTHENTICATION_OPTIONS: [\"/user-guide/users/authentication-options\", \"Guide: Authentication Options\"],\n  USAGE_DATA_SHARING: [\"/open-source/admin-guide/usage-data\", \"Help: Anonymous Usage Data Sharing\"],\n  DS_ATHENA: [\"/data-sources/amazon-athena-setup\", \"Guide: Help Setting up Amazon Athena\"],\n  DS_BIGQUERY: [\"/data-sources/bigquery-setup\", \"Guide: Help Setting up BigQuery\"],\n  DS_URL: [\"/data-sources/querying-urls\", \"Guide: Help Setting up URL\"],\n  DS_MONGODB: [\"/data-sources/mongodb-setup\", \"Guide: Help Setting up MongoDB\"],\n  DS_GOOGLE_SPREADSHEETS: [\"/data-sources/querying-a-google-spreadsheet\", \"Guide: Help Setting up Google Spreadsheets\"],\n  DS_GOOGLE_ANALYTICS: [\"/data-sources/google-analytics-setup\", \"Guide: Help Setting up Google Analytics\"],\n  DS_AXIBASETSD: [\"/data-sources/axibase-time-series-database\", \"Guide: Help Setting up Axibase Time Series\"],\n  DS_RESULTS: [\"/user-guide/querying/query-results-data-source\", \"Guide: Help Setting up Query Results\"],\n  ALERT_SETUP: [\"/user-guide/alerts/setting-up-an-alert\", \"Guide: Setting Up a New Alert\"],\n  MAIL_CONFIG: [\"/open-source/setup/#Mail-Configuration\", \"Guide: Mail Configuration\"],\n  ALERT_NOTIF_TEMPLATE_GUIDE: [\"/user-guide/alerts/custom-alert-notifications\", \"Guide: Custom Alerts Notifications\"],\n  FAVORITES: [\"/user-guide/querying/favorites-tagging/#Favorites\", \"Guide: Favorites\"],\n  MANAGE_PERMISSIONS: [\n    \"/user-guide/querying/writing-queries#Managing-Query-Permissions\",\n    \"Guide: Managing Query Permissions\",\n  ],\n  NUMBER_FORMAT_SPECS: [\"/user-guide/visualizations/formatting-numbers\", \"Formatting Numbers\"],\n};\n\nexport default class HelpTrigger extends React.Component {\n  static propTypes = {\n    type: PropTypes.oneOf(Object.keys(TYPES)),\n    href: PropTypes.string,\n    title: PropTypes.node,\n    className: PropTypes.string,\n    showTooltip: PropTypes.bool,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    type: null,\n    href: null,\n    title: null,\n    className: null,\n    showTooltip: true,\n    children: <i className=\"fa fa-question-circle\" />,\n  };\n\n  iframeRef = React.createRef();\n\n  iframeLoadingTimeout = null;\n\n  state = {\n    visible: false,\n    loading: false,\n    error: false,\n    currentUrl: null,\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.onPostMessageReceived, false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.onPostMessageReceived);\n    clearTimeout(this.iframeLoadingTimeout);\n  }\n\n  loadIframe = url => {\n    clearTimeout(this.iframeLoadingTimeout);\n    this.setState({ loading: true, error: false });\n\n    this.iframeRef.current.src = url;\n    this.iframeLoadingTimeout = setTimeout(() => {\n      this.setState({ error: url, loading: false });\n    }, IFRAME_TIMEOUT); // safety\n  };\n\n  onIframeLoaded = () => {\n    this.setState({ loading: false });\n    clearTimeout(this.iframeLoadingTimeout);\n  };\n\n  onPostMessageReceived = event => {\n    if (!startsWith(event.origin, DOMAIN)) {\n      return;\n    }\n\n    const { type, message: currentUrl } = event.data || {};\n    if (type !== IFRAME_URL_UPDATE_MESSAGE) {\n      return;\n    }\n\n    this.setState({ currentUrl });\n  };\n\n  getUrl = () => {\n    const helpTriggerType = get(TYPES, this.props.type);\n    return helpTriggerType ? DOMAIN + HELP_PATH + helpTriggerType[0] : this.props.href;\n  };\n\n  openDrawer = () => {\n    this.setState({ visible: true });\n    // wait for drawer animation to complete so there's no animation jank\n    setTimeout(() => this.loadIframe(this.getUrl()), 300);\n  };\n\n  closeDrawer = event => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ visible: false });\n    this.setState({ visible: false, currentUrl: null });\n  };\n\n  render() {\n    const tooltip = get(TYPES, `${this.props.type}[1]`, this.props.title);\n    const className = cx(\"help-trigger\", this.props.className);\n    const url = this.state.currentUrl;\n\n    const isAllowedDomain = startsWith(url || this.getUrl(), DOMAIN);\n\n    return (\n      <React.Fragment>\n        <Tooltip\n          title={\n            this.props.showTooltip ? (\n              <>\n                {tooltip}\n                {!isAllowedDomain && <i className=\"fa fa-external-link\" style={{ marginLeft: 5 }} />}\n              </>\n            ) : null\n          }>\n          {isAllowedDomain ? (\n            <a onClick={this.openDrawer} className={className}>\n              {this.props.children}\n            </a>\n          ) : (\n            <a href={url || this.getUrl()} className={className} rel=\"noopener noreferrer\" target=\"_blank\">\n              {this.props.children}\n            </a>\n          )}\n        </Tooltip>\n        <Drawer\n          placement=\"right\"\n          closable={false}\n          onClose={this.closeDrawer}\n          visible={this.state.visible}\n          className=\"help-drawer\"\n          destroyOnClose\n          width={400}>\n          <div className=\"drawer-wrapper\">\n            <div className=\"drawer-menu\">\n              {url && (\n                <Tooltip title=\"Open page in a new window\" placement=\"left\">\n                  {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                  <a href={url} target=\"_blank\">\n                    <i className=\"fa fa-external-link\" />\n                  </a>\n                </Tooltip>\n              )}\n              <Tooltip title=\"Close\" placement=\"bottom\">\n                <a onClick={this.closeDrawer}>\n                  <Icon type=\"close\" />\n                </a>\n              </Tooltip>\n            </div>\n\n            {/* iframe */}\n            {!this.state.error && (\n              <iframe\n                ref={this.iframeRef}\n                title=\"Redash Help\"\n                src=\"about:blank\"\n                className={cx({ ready: !this.state.loading })}\n                onLoad={this.onIframeLoaded}\n              />\n            )}\n\n            {/* loading indicator */}\n            {this.state.loading && (\n              <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" className=\"help-message\" />\n            )}\n\n            {/* error message */}\n            {this.state.error && (\n              <BigMessage icon=\"fa-exclamation-circle\" className=\"help-message\">\n                Something went wrong.\n                <br />\n                {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                <a href={this.state.error} target=\"_blank\" rel=\"noopener\">\n                  Click here\n                </a>{\" \"}\n                to open the page in a new window.\n              </BigMessage>\n            )}\n          </div>\n\n          {/* extra content */}\n          <DynamicComponent name=\"HelpDrawerExtraContent\" onLeave={this.closeDrawer} openPageUrl={this.loadIframe} />\n        </Drawer>\n      </React.Fragment>\n    );\n  }\n}\n","import { isFunction } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactDOM from \"react-dom\";\n\n/**\n  Wrapper for dialogs based on Ant's <Modal> component.\n\n\n  Using wrapped dialogs\n  =====================\n\n  Wrapped component is an object with two fields:\n\n    {\n      showModal: (dialogProps) => object({\n          close: (result) => void,\n          dismiss: (reason) => void,\n          onClose: (handler) => this,\n          onDismiss: (handler) => this,\n        }),\n      Component: React.Component, // wrapped dialog component\n    }\n\n  To open dialog, use `showModal` method; optionally you can pass additional properties that\n  will be expanded on wrapped component:\n\n    const dialog = SomeWrappedDialog.showModal()\n\n    const dialog = SomeWrappedDialog.showModal({ greeting: 'Hello' })\n\n  To get result of modal, use `onClose`/`onDismiss` setters:\n\n    dialog\n      .onClose(result => { ... }) // pressed OK button or used `close` method\n      .onDismiss(result => { ... }) // pressed Cancel button or used `dismiss` method\n\n  If `onClose`/`onDismiss` returns a promise - dialog wrapper will stop handling further close/dismiss\n  requests and will show loader on a corresponding button until that promise is fulfilled (either resolved or\n  rejected). If that promise will be rejected - dialog close/dismiss will be abandoned. Use promise returned\n  from `close`/`dismiss` methods to handle errors (if needed).\n\n  Also, dialog has `close` and `dismiss` methods that allows to close dialog by caller. Passed arguments\n  will be passed to a corresponding handler. Both methods will return the promise returned from `onClose` and\n `onDismiss` callbacks. `update` method allows to pass new properties to dialog.\n\n\n  Creating a dialog\n  ================\n\n  1. Add imports:\n\n    import { wrap as wrapDialog, DialogPropType } from 'path/to/DialogWrapper';\n\n  2. define a `dialog` property on your component:\n\n    propTypes = {\n      dialog: DialogPropType.isRequired,\n    };\n\n  `dialog` property is an object:\n\n    {\n      props: object, // properties for <Modal> component;\n      close: (result) => void, // method to confirm dialog; `result` will be returned to caller\n      dismiss: (reason) => void, // method to reject dialog; `reason` will be returned to caller\n    }\n\n  3. expand additional properties on <Modal> component:\n\n    render() {\n      const { dialog } = this.props;\n      return (\n        <Modal {...dialog.props}>\n      );\n    }\n\n  4. wrap your component and export it:\n\n    export default wrapDialog(YourComponent).\n\n  Your component is ready to use. Wrapper will manage <Modal>'s visibility and events.\n  If you want to override behavior of `onOk`/`onCancel` - don't forget to close dialog:\n\n    customOkHandler() {\n      this.saveData().then(() => {\n         this.props.dialog.close({ success: true }); // or dismiss();\n      });\n    }\n\n    render() {\n      const { dialog } = this.props;\n        return (\n          <Modal {...dialog.props} onOk={() => this.customOkHandler()}>\n        );\n    }\n*/\n\nexport const DialogPropType = PropTypes.shape({\n  props: PropTypes.shape({\n    visible: PropTypes.bool,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    afterClose: PropTypes.func,\n  }).isRequired,\n  close: PropTypes.func.isRequired,\n  dismiss: PropTypes.func.isRequired,\n});\n\nfunction openDialog(DialogComponent, props) {\n  const dialog = {\n    props: {\n      visible: true,\n      okButtonProps: {},\n      cancelButtonProps: {},\n      onOk: () => {},\n      onCancel: () => {},\n      afterClose: () => {},\n    },\n    close: () => {},\n    dismiss: () => {},\n  };\n\n  let pendingCloseTask = null;\n\n  const handlers = {\n    onClose: () => {},\n    onDismiss: () => {},\n  };\n\n  const container = document.createElement(\"div\");\n  document.body.appendChild(container);\n\n  function render() {\n    ReactDOM.render(<DialogComponent {...props} dialog={dialog} />, container);\n  }\n\n  function destroyDialog() {\n    // Allow calling chain to roll up, and then destroy component\n    setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(container);\n      document.body.removeChild(container);\n    }, 10);\n  }\n\n  function processDialogClose(result, setAdditionalDialogProps) {\n    dialog.props.okButtonProps = { disabled: true };\n    dialog.props.cancelButtonProps = { disabled: true };\n    setAdditionalDialogProps();\n    render();\n\n    return Promise.resolve(result)\n      .then(() => {\n        dialog.props.visible = false;\n      })\n      .finally(() => {\n        dialog.props.okButtonProps = {};\n        dialog.props.cancelButtonProps = {};\n        render();\n      });\n  }\n\n  function closeDialog(result) {\n    if (!pendingCloseTask) {\n      pendingCloseTask = processDialogClose(handlers.onClose(result), () => {\n        dialog.props.okButtonProps.loading = true;\n      }).finally(() => {\n        pendingCloseTask = null;\n      });\n    }\n    return pendingCloseTask;\n  }\n\n  function dismissDialog(result) {\n    if (!pendingCloseTask) {\n      pendingCloseTask = processDialogClose(handlers.onDismiss(result), () => {\n        dialog.props.cancelButtonProps.loading = true;\n      }).finally(() => {\n        pendingCloseTask = null;\n      });\n    }\n    return pendingCloseTask;\n  }\n\n  dialog.props.onOk = closeDialog;\n  dialog.props.onCancel = dismissDialog;\n  dialog.props.afterClose = destroyDialog;\n  dialog.close = closeDialog;\n  dialog.dismiss = dismissDialog;\n\n  const result = {\n    close: closeDialog,\n    dismiss: dismissDialog,\n    update: newProps => {\n      props = { ...props, ...newProps };\n      render();\n    },\n    onClose: handler => {\n      if (isFunction(handler)) {\n        handlers.onClose = handler;\n      }\n      return result;\n    },\n    onDismiss: handler => {\n      if (isFunction(handler)) {\n        handlers.onDismiss = handler;\n      }\n      return result;\n    },\n  };\n\n  render(); // show it only when all structures initialized to avoid unnecessary re-rendering\n\n  return result;\n}\n\nexport function wrap(DialogComponent) {\n  return {\n    Component: DialogComponent,\n    showModal: props => openDialog(DialogComponent, props),\n  };\n}\n\nexport default {\n  DialogPropType,\n  wrap,\n};\n","import { pick, extend } from \"lodash\";\n\nconst link = document.createElement(\"a\"); // the only way to get an instance of Location class\n// add to document to apply <base> href\nlink.style.display = \"none\";\ndocument.body.appendChild(link);\n\nconst fragmentProps = [\"origin\", \"protocol\", \"host\", \"hostname\", \"port\", \"pathname\", \"search\", \"hash\", \"href\"];\n\nexport function parse(url) {\n  link.setAttribute(\"href\", url);\n  return pick(link, fragmentProps);\n}\n\nexport function stringify(fragments) {\n  extend(link, pick(fragments, fragmentProps));\n  return link.href; // absolute URL\n}\n\nexport function normalize(url) {\n  link.setAttribute(\"href\", url);\n  return link.href; // absolute URL\n}\n\nexport default { parse, stringify, normalize };\n","import { isObject, get } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction getErrorMessageByStatus(status, defaultMessage) {\n  switch (status) {\n    case 404:\n      return \"It seems like the page you're looking for cannot be found.\";\n    case 401:\n    case 403:\n      return \"It seems like you don’t have permission to see this page.\";\n    default:\n      return defaultMessage;\n  }\n}\n\nexport function getErrorMessage(\n  error,\n  defaultMessage = \"It seems like we encountered an error. Try refreshing this page or contact your administrator.\"\n) {\n  if (isObject(error)) {\n    // HTTP errors\n    if (error.isAxiosError && isObject(error.response)) {\n      const errorData = get(error, \"response.data\", {});\n\n      // handle cases where the message is an object as { \"message\": msg } or { \"error\": msg }\n      const errorMessage = errorData.message || errorData.error || defaultMessage;\n      return getErrorMessageByStatus(error.response.status, errorMessage);\n    }\n    // Router errors\n    if (error.status) {\n      return getErrorMessageByStatus(error.status, defaultMessage);\n    }\n    // Other Error instances\n    if (error.message) {\n      return error.message;\n    }\n  }\n  return defaultMessage;\n}\n\nexport default function ErrorMessage({ error }) {\n  if (!error) {\n    return null;\n  }\n\n  console.error(error);\n\n  return (\n    <div className=\"fixed-container\" data-test=\"ErrorMessage\">\n      <div className=\"container\">\n        <div className=\"col-md-8 col-md-push-2\">\n          <div className=\"error-state bg-white tiled\">\n            <div className=\"error-state__icon\">\n              <i className=\"zmdi zmdi-alert-circle-o\" />\n            </div>\n            <div className=\"error-state__details\">\n              <h4>{getErrorMessage(error)}</h4>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nErrorMessage.propTypes = {\n  error: PropTypes.object.isRequired,\n};\n","import { isFunction, startsWith, trimStart, trimEnd } from \"lodash\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport UniversalRouter from \"universal-router\";\nimport ErrorBoundary from \"@redash/viz/lib/components/ErrorBoundary\";\nimport location from \"@/services/location\";\nimport url from \"@/services/url\";\n\nimport ErrorMessage from \"./ErrorMessage\";\n\nfunction generateRouteKey() {\n  return Math.random()\n    .toString(32)\n    .substr(2);\n}\n\nexport function stripBase(href) {\n  // Resolve provided link and '' (root) relative to document's base.\n  // If provided href is not related to current document (does not\n  // start with resolved root) - return false. Otherwise\n  // strip root and return relative url.\n\n  const baseHref = trimEnd(url.normalize(\"\"), \"/\") + \"/\";\n  href = url.normalize(href);\n\n  if (startsWith(href, baseHref)) {\n    return \"/\" + trimStart(href.substr(baseHref.length), \"/\");\n  }\n\n  return false;\n}\n\nexport default function Router({ routes, onRouteChange }) {\n  const [currentRoute, setCurrentRoute] = useState(null);\n\n  const currentPathRef = useRef(null);\n  const errorHandlerRef = useRef();\n\n  useEffect(() => {\n    let isAbandoned = false;\n\n    const router = new UniversalRouter(routes, {\n      resolveRoute({ route }, routeParams) {\n        if (isFunction(route.render)) {\n          return { ...route, routeParams };\n        }\n      },\n    });\n\n    function resolve(action) {\n      if (!isAbandoned) {\n        if (errorHandlerRef.current) {\n          errorHandlerRef.current.reset();\n        }\n\n        const pathname = stripBase(location.path);\n\n        // This is a optimization for route resolver: if current route was already resolved\n        // from this path - do nothing. It also prevents router from using outdated route in a case\n        // when user navigated to another path while current one was still resolving.\n        // Note: this lock uses only `path` fragment of URL to distinguish routes because currently\n        // all pages depend only on this fragment and handle search/hash on their own. If router\n        // should reload page on search/hash change - this fragment (and few checks below) should be updated\n        if (pathname === currentPathRef.current) {\n          return;\n        }\n        currentPathRef.current = pathname;\n\n        // Don't reload controller if URL was replaced\n        if (action === \"REPLACE\") {\n          return;\n        }\n\n        router\n          .resolve({ pathname })\n          .then(route => {\n            if (!isAbandoned && currentPathRef.current === pathname) {\n              setCurrentRoute({ ...route, key: generateRouteKey() });\n            }\n          })\n          .catch(error => {\n            if (!isAbandoned && currentPathRef.current === pathname) {\n              setCurrentRoute({\n                render: currentRoute => <ErrorMessage {...currentRoute.routeParams} />,\n                routeParams: { error },\n              });\n            }\n          });\n      }\n    }\n\n    resolve(\"PUSH\");\n\n    const unlisten = location.listen((unused, action) => resolve(action));\n\n    return () => {\n      isAbandoned = true;\n      unlisten();\n    };\n  }, [routes]);\n\n  useEffect(() => {\n    onRouteChange(currentRoute);\n  }, [currentRoute, onRouteChange]);\n\n  if (!currentRoute) {\n    return null;\n  }\n\n  return (\n    <ErrorBoundary ref={errorHandlerRef} renderError={error => <ErrorMessage error={error} />}>\n      {currentRoute.render(currentRoute)}\n    </ErrorBoundary>\n  );\n}\n\nRouter.propTypes = {\n  routes: PropTypes.arrayOf(\n    PropTypes.shape({\n      path: PropTypes.string.isRequired,\n      render: PropTypes.func, // (routeParams: PropTypes.object; currentRoute; location) => PropTypes.node\n      // Additional props to be injected into route component.\n      // Object keys are props names. Object values will become prop values:\n      // - if value is a function - it will be called without arguments, and result will be used; otherwise value will be used;\n      // - after previous step, if value is a promise - router will wait for it to resolve; resolved value then will be used;\n      //   otherwise value will be used directly.\n      resolve: PropTypes.objectOf(PropTypes.any),\n    })\n  ),\n  onRouteChange: PropTypes.func,\n};\n\nRouter.defaultProps = {\n  routes: [],\n  onRouteChange: () => {},\n};\n","import location from \"@/services/location\";\nimport url from \"@/services/url\";\nimport { stripBase } from \"./Router\";\n\n// When `replace` is set to `true` - it will just replace current URL\n// without reloading current page (router will skip this location change)\nexport default function navigateTo(href, replace = false) {\n  // Allow calling chain to roll up, and then navigate\n  setTimeout(() => {\n    const isExternal = stripBase(href) === false;\n    if (isExternal) {\n      window.location = href;\n      return;\n    }\n    href = url.parse(href);\n    location.update(\n      {\n        path: href.pathname,\n        search: href.search,\n        hash: href.hash,\n      },\n      replace\n    );\n  }, 10);\n}\n","import { axios } from \"@/services/axios\";\nimport { debounce, extend } from \"lodash\";\n\nlet events = [];\n\nconst post = debounce(() => {\n  const eventsToSend = events;\n  events = [];\n\n  axios.post(\"api/events\", eventsToSend);\n}, 1000);\n\nexport default function recordEvent(action, objectType, objectId, additionalProperties) {\n  const event = {\n    action,\n    object_type: objectType,\n    object_id: objectId,\n    timestamp: Date.now() / 1000.0,\n    screen_resolution: `${window.screen.width}x${window.screen.height}`,\n  };\n  extend(event, additionalProperties);\n  events.push(event);\n\n  post();\n}\n","import DefaultPolicy from \"./DefaultPolicy\";\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let policy = new DefaultPolicy();\n\nexport function setPolicy(newPolicy) {\n  policy = newPolicy;\n}\n","import { isArray } from \"lodash\";\nimport { currentUser, clientConfig } from \"@/services/auth\";\n\n/* eslint-disable class-methods-use-this */\n\nexport default class DefaultPolicy {\n  refresh() {\n    return Promise.resolve(this);\n  }\n\n  canCreateDataSource() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDataSourceEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDestination() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDestinationEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDashboard() {\n    return currentUser.hasPermission(\"create_dashboard\");\n  }\n\n  isCreateDashboardEnabled() {\n    return currentUser.hasPermission(\"create_dashboard\");\n  }\n\n  canCreateAlert() {\n    return true;\n  }\n\n  canCreateUser() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateUserEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateQuerySnippetEnabled() {\n    return true;\n  }\n\n  getDashboardRefreshIntervals() {\n    const result = clientConfig.dashboardRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n\n  getQueryRefreshIntervals() {\n    const result = clientConfig.queryRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n}\n","import { trim } from \"lodash\";\nimport React, { useState } from \"react\";\nimport { axios } from \"@/services/axios\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { policy } from \"@/services/policy\";\n\nfunction CreateDashboardDialog({ dialog }) {\n  const [name, setName] = useState(\"\");\n  const [isValid, setIsValid] = useState(false);\n  const [saveInProgress, setSaveInProgress] = useState(false);\n  const isCreateDashboardEnabled = policy.isCreateDashboardEnabled();\n\n  function handleNameChange(event) {\n    const value = trim(event.target.value);\n    setName(value);\n    setIsValid(value !== \"\");\n  }\n\n  function save() {\n    if (name !== \"\") {\n      setSaveInProgress(true);\n\n      axios.post(\"api/dashboards\", { name }).then(data => {\n        dialog.close();\n        navigateTo(`dashboard/${data.slug}?edit`);\n      });\n      recordEvent(\"create\", \"dashboard\");\n    }\n  }\n\n  return (\n    <Modal\n      {...dialog.props}\n      {...(isCreateDashboardEnabled ? {} : { footer: null })}\n      title=\"New Dashboard\"\n      okText=\"Save\"\n      cancelText=\"Close\"\n      okButtonProps={{\n        disabled: !isValid || saveInProgress,\n        loading: saveInProgress,\n        \"data-test\": \"DashboardSaveButton\",\n      }}\n      cancelButtonProps={{\n        disabled: saveInProgress,\n      }}\n      onOk={save}\n      closable={!saveInProgress}\n      maskClosable={!saveInProgress}\n      wrapProps={{\n        \"data-test\": \"CreateDashboardDialog\",\n      }}>\n      <DynamicComponent name=\"CreateDashboardDialogExtra\" disabled={!isCreateDashboardEnabled}>\n        <Input\n          defaultValue={name}\n          onChange={handleNameChange}\n          onPressEnter={save}\n          placeholder=\"Dashboard Name\"\n          disabled={saveInProgress}\n          autoFocus\n        />\n      </DynamicComponent>\n    </Modal>\n  );\n}\n\nCreateDashboardDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n};\n\nexport default wrapDialog(CreateDashboardDialog);\n","export default {\n  columns: 6, // grid columns count\n  rowHeight: 50, // grid row height (incl. bottom padding)\n  margins: 15, // widget margins\n  mobileBreakPoint: 800,\n  // defaults for widgets\n  defaultSizeX: 3,\n  defaultSizeY: 3,\n  minSizeX: 1,\n  maxSizeX: 6,\n  minSizeY: 1,\n  maxSizeY: 1000,\n};\n","import { isNull, isObject, isFunction, isUndefined, isEqual, has, omit, isArray, each } from \"lodash\";\n\nclass Parameter {\n  constructor(parameter, parentQueryId) {\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.global = parameter.global; // backward compatibility in Widget service\n    this.parentQueryId = parentQueryId;\n\n    // Used for meta-parameters (i.e. dashboard-level params)\n    this.locals = [];\n\n    // Used for URL serialization\n    this.urlPrefix = \"p_\";\n  }\n\n  static getExecutionValue(param, extra = {}) {\n    if (!isObject(param) || !isFunction(param.getExecutionValue)) {\n      return null;\n    }\n\n    return param.getExecutionValue(extra);\n  }\n\n  static setValue(param, value) {\n    if (!isObject(param) || !isFunction(param.setValue)) {\n      return null;\n    }\n\n    return param.setValue(value);\n  }\n\n  get isEmpty() {\n    return isNull(this.normalizedValue);\n  }\n\n  get hasPendingValue() {\n    return this.pendingValue !== undefined && !isEqual(this.pendingValue, this.normalizedValue);\n  }\n\n  /** Get normalized value to be used in inputs */\n  get normalizedValue() {\n    return this.$$value;\n  }\n\n  isEmptyValue(value) {\n    return isNull(this.normalizeValue(value));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isUndefined(value)) {\n      return null;\n    }\n    return value;\n  }\n\n  updateLocals() {\n    if (isArray(this.locals)) {\n      each(this.locals, local => {\n        local.setValue(this.value);\n      });\n    }\n  }\n\n  setValue(value) {\n    const normalizedValue = this.normalizeValue(value);\n    this.value = normalizedValue;\n    this.$$value = normalizedValue;\n\n    this.updateLocals();\n    this.clearPendingValue();\n    return this;\n  }\n\n  /** Get execution value for a query */\n  getExecutionValue() {\n    return this.value;\n  }\n\n  setPendingValue(value) {\n    this.pendingValue = this.normalizeValue(value);\n  }\n\n  applyPendingValue() {\n    if (this.hasPendingValue) {\n      this.setValue(this.pendingValue);\n    }\n  }\n\n  clearPendingValue() {\n    this.pendingValue = undefined;\n  }\n\n  /** Update URL with Parameter value */\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n    // `null` removes the parameter from the URL in case it exists\n    return {\n      [`${prefix}${this.name}`]: !this.isEmpty ? this.value : null,\n    };\n  }\n\n  /** Set parameter value from the URL */\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n    if (has(query, key)) {\n      this.setValue(query[key]);\n    }\n  }\n\n  toQueryTextFragment() {\n    return `{{ ${this.name} }}`;\n  }\n\n  /** Get a saveable version of the Parameter by omitting unnecessary props */\n  toSaveableObject() {\n    return omit(this, [\"$$value\", \"urlPrefix\", \"pendingValue\", \"parentQueryId\"]);\n  }\n}\n\nexport default Parameter;\n","import { toString, isEmpty } from \"lodash\";\nimport Parameter from \"./Parameter\";\n\nclass TextParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.setValue(parameter.value);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    const normalizedValue = toString(value);\n    if (isEmpty(normalizedValue)) {\n      return null;\n    }\n    return normalizedValue;\n  }\n}\n\nexport default TextParameter;\n","import { toNumber, isNull } from \"lodash\";\nimport Parameter from \"./Parameter\";\n\nclass NumberParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.setValue(parameter.value);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isNull(value)) {\n      return null;\n    }\n    const normalizedValue = toNumber(value);\n    return !isNaN(normalizedValue) ? normalizedValue : null;\n  }\n}\n\nexport default NumberParameter;\n","import { isArray, isEmpty, includes, intersection, get, map, join, has } from \"lodash\";\nimport Parameter from \"./Parameter\";\n\nclass EnumParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.enumOptions = parameter.enumOptions;\n    this.multiValuesOptions = parameter.multiValuesOptions;\n    this.setValue(parameter.value);\n  }\n\n  normalizeValue(value) {\n    if (isEmpty(this.enumOptions)) {\n      return null;\n    }\n\n    const enumOptionsArray = this.enumOptions.split(\"\\n\") || [];\n    if (this.multiValuesOptions) {\n      if (!isArray(value)) {\n        value = [value];\n      }\n      value = intersection(value, enumOptionsArray);\n    } else if (!value || isArray(value) || !includes(enumOptionsArray, value)) {\n      value = enumOptionsArray[0];\n    }\n\n    if (isArray(value) && isEmpty(value)) {\n      return null;\n    }\n    return value;\n  }\n\n  getExecutionValue(extra = {}) {\n    const { joinListValues } = extra;\n    if (joinListValues && isArray(this.value)) {\n      const separator = get(this.multiValuesOptions, \"separator\", \",\");\n      const prefix = get(this.multiValuesOptions, \"prefix\", \"\");\n      const suffix = get(this.multiValuesOptions, \"suffix\", \"\");\n      const parameterValues = map(this.value, v => `${prefix}${v}${suffix}`);\n      return join(parameterValues, separator);\n    }\n    return this.value;\n  }\n\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n\n    let urlParam = this.value;\n    if (this.multiValuesOptions && isArray(this.value)) {\n      urlParam = JSON.stringify(this.value);\n    }\n\n    return {\n      [`${prefix}${this.name}`]: !this.isEmpty ? urlParam : null,\n    };\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n    if (has(query, key)) {\n      if (this.multiValuesOptions) {\n        try {\n          const valueFromJson = JSON.parse(query[key]);\n          this.setValue(isArray(valueFromJson) ? valueFromJson : query[key]);\n        } catch (e) {\n          this.setValue(query[key]);\n        }\n      } else {\n        this.setValue(query[key]);\n      }\n    }\n  }\n}\n\nexport default EnumParameter;\n","import debug from \"debug\";\nimport moment from \"moment\";\nimport { axios } from \"@/services/axios\";\nimport { QueryResultError } from \"@/services/query\";\nimport { Auth } from \"@/services/auth\";\nimport { isString, uniqBy, each, isNumber, includes, extend, forOwn, get } from \"lodash\";\n\nconst logger = debug(\"redash:services:QueryResult\");\nconst filterTypes = [\"filter\", \"multi-filter\", \"multiFilter\"];\n\nfunction defer() {\n  const result = { onStatusChange: status => {} };\n  result.promise = new Promise((resolve, reject) => {\n    result.resolve = resolve;\n    result.reject = reject;\n  });\n  return result;\n}\n\nfunction getColumnNameWithoutType(column) {\n  let typeSplit;\n  if (column.indexOf(\"::\") !== -1) {\n    typeSplit = \"::\";\n  } else if (column.indexOf(\"__\") !== -1) {\n    typeSplit = \"__\";\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === \"\" && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!includes(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nconst createOrSaveUrl = data => (data.id ? `api/query_results/${data.id}` : \"api/query_results\");\nconst QueryResultResource = {\n  get: ({ id }) => axios.get(`api/query_results/${id}`),\n  post: data => axios.post(createOrSaveUrl(data), data),\n};\n\nexport const ExecutionStatus = {\n  WAITING: \"waiting\",\n  PROCESSING: \"processing\",\n  DONE: \"done\",\n  FAILED: \"failed\",\n  LOADING_RESULT: \"loading-result\",\n};\n\nconst statuses = {\n  1: ExecutionStatus.WAITING,\n  2: ExecutionStatus.PROCESSING,\n  3: ExecutionStatus.DONE,\n  4: ExecutionStatus.FAILED,\n};\n\nfunction handleErrorResponse(queryResult, error) {\n  const status = get(error, \"response.status\");\n  switch (status) {\n    case 403:\n      queryResult.update(error.response.data);\n      return;\n    case 400:\n      if (\"job\" in error.response.data) {\n        queryResult.update(error.response.data);\n        return;\n      }\n      break;\n    case 404:\n      queryResult.update({\n        job: {\n          error: \"cached query result unavailable, please execute again.\",\n          status: 4,\n        },\n      });\n      return;\n    // no default\n  }\n\n  logger(\"Unknown error\", error);\n  queryResult.update({\n    job: {\n      error: get(error, \"response.data.message\", \"Unknown error occurred. Please try again later.\"),\n      status: 4,\n    },\n  });\n}\n\nclass QueryResult {\n  constructor(props) {\n    this.deferred = defer();\n    this.job = {};\n    this.query_result = {};\n    this.status = \"waiting\";\n\n    this.updatedAt = moment();\n\n    // extended status flags\n    this.isLoadingResult = false;\n\n    if (props) {\n      this.update(props);\n    }\n  }\n\n  update(props) {\n    extend(this, props);\n\n    if (\"query_result\" in props) {\n      this.status = ExecutionStatus.DONE;\n      this.deferred.onStatusChange(ExecutionStatus.DONE);\n\n      const columnTypes = {};\n\n      // TODO: we should stop manipulating incoming data, and switch to relaying\n      // on the column type set by the backend. This logic is prone to errors,\n      // and better be removed. Kept for now, for backward compatability.\n      each(this.query_result.data.rows, row => {\n        forOwn(row, (v, k) => {\n          let newType = null;\n          if (isNumber(v)) {\n            newType = \"float\";\n          } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n            row[k] = moment.utc(v);\n            newType = \"datetime\";\n          } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            row[k] = moment.utc(v);\n            newType = \"date\";\n          } else if (typeof v === \"object\" && v !== null) {\n            row[k] = JSON.stringify(v);\n          } else {\n            newType = \"string\";\n          }\n\n          if (newType !== null) {\n            if (columnTypes[k] !== undefined && columnTypes[k] !== newType) {\n              columnTypes[k] = \"string\";\n            } else {\n              columnTypes[k] = newType;\n            }\n          }\n        });\n      });\n\n      each(this.query_result.data.columns, column => {\n        column.name = \"\" + column.name;\n        if (columnTypes[column.name]) {\n          if (column.type == null || column.type === \"string\") {\n            column.type = columnTypes[column.name];\n          }\n        }\n      });\n\n      this.deferred.resolve(this);\n    } else if (this.job.status === 3 || this.job.status === 2) {\n      this.deferred.onStatusChange(ExecutionStatus.PROCESSING);\n      this.status = \"processing\";\n    } else if (this.job.status === 4) {\n      this.status = statuses[this.job.status];\n      this.deferred.reject(new QueryResultError(this.job.error));\n    } else {\n      this.deferred.onStatusChange(undefined);\n      this.status = undefined;\n    }\n  }\n\n  getId() {\n    let id = null;\n    if (\"query_result\" in this) {\n      id = this.query_result.id;\n    }\n    return id;\n  }\n\n  cancelExecution() {\n    axios.delete(`api/jobs/${this.job.id}`);\n  }\n\n  getStatus() {\n    if (this.isLoadingResult) {\n      return ExecutionStatus.LOADING_RESULT;\n    }\n    return this.status || statuses[this.job.status];\n  }\n\n  getError() {\n    // TODO: move this logic to the server...\n    if (this.job.error === \"None\") {\n      return undefined;\n    }\n\n    return this.job.error;\n  }\n\n  getLog() {\n    if (!this.query_result.data || !this.query_result.data.log || this.query_result.data.log.length === 0) {\n      return null;\n    }\n\n    return this.query_result.data.log;\n  }\n\n  getUpdatedAt() {\n    return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n  }\n\n  getRuntime() {\n    return this.query_result.runtime;\n  }\n\n  getRawData() {\n    if (!this.query_result.data) {\n      return null;\n    }\n\n    return this.query_result.data.rows;\n  }\n\n  getData() {\n    return this.query_result.data ? this.query_result.data.rows : null;\n  }\n\n  isEmpty() {\n    return this.getData() === null || this.getData().length === 0;\n  }\n\n  getColumns() {\n    if (this.columns === undefined && this.query_result.data) {\n      this.columns = this.query_result.data.columns;\n    }\n\n    return this.columns;\n  }\n\n  getColumnNames() {\n    if (this.columnNames === undefined && this.query_result.data) {\n      this.columnNames = this.query_result.data.columns.map(v => v.name);\n    }\n\n    return this.columnNames;\n  }\n\n  getColumnFriendlyNames() {\n    return this.getColumnNames().map(col => getColumnFriendlyName(col));\n  }\n\n  getFilters() {\n    if (!this.getColumns()) {\n      return [];\n    }\n\n    const filters = [];\n\n    this.getColumns().forEach(col => {\n      const name = col.name;\n      const type = name.split(\"::\")[1] || name.split(\"__\")[1];\n      if (includes(filterTypes, type)) {\n        // filter found\n        const filter = {\n          name,\n          friendlyName: getColumnFriendlyName(name),\n          column: col,\n          values: [],\n          multiple: type === \"multiFilter\" || type === \"multi-filter\",\n        };\n        filters.push(filter);\n      }\n    }, this);\n\n    this.getRawData().forEach(row => {\n      filters.forEach(filter => {\n        filter.values.push(row[filter.name]);\n        if (filter.values.length === 1) {\n          if (filter.multiple) {\n            filter.current = [row[filter.name]];\n          } else {\n            filter.current = row[filter.name];\n          }\n        }\n      });\n    });\n\n    filters.forEach(filter => {\n      filter.values = uniqBy(filter.values, v => {\n        if (moment.isMoment(v)) {\n          return v.unix();\n        }\n        return v;\n      });\n    });\n\n    return filters;\n  }\n\n  toPromise(statusCallback) {\n    if (statusCallback) {\n      this.deferred.onStatusChange = statusCallback;\n    }\n    return this.deferred.promise;\n  }\n\n  static getById(queryId, id) {\n    const queryResult = new QueryResult();\n\n    queryResult.isLoadingResult = true;\n    queryResult.deferred.onStatusChange(ExecutionStatus.LOADING_RESULT);\n\n    axios\n      .get(`api/queries/${queryId}/results/${id}.json`)\n      .then(response => {\n        // Success handler\n        queryResult.isLoadingResult = false;\n        queryResult.update(response);\n      })\n      .catch(error => {\n        // Error handler\n        queryResult.isLoadingResult = false;\n        handleErrorResponse(queryResult, error);\n      });\n\n    return queryResult;\n  }\n\n  loadLatestCachedResult(queryId, parameters) {\n    axios\n      .post(`api/queries/${queryId}/results`, { queryId, parameters })\n      .then(response => {\n        this.update(response);\n      })\n      .catch(error => {\n        handleErrorResponse(this, error);\n      });\n  }\n\n  loadResult(tryCount) {\n    this.isLoadingResult = true;\n    this.deferred.onStatusChange(ExecutionStatus.LOADING_RESULT);\n\n    QueryResultResource.get({ id: this.job.query_result_id })\n      .then(response => {\n        this.update(response);\n        this.isLoadingResult = false;\n      })\n      .catch(error => {\n        if (tryCount === undefined) {\n          tryCount = 0;\n        }\n\n        if (tryCount > 3) {\n          logger(\"Connection error while trying to load result\", error);\n          this.update({\n            job: {\n              error: \"failed communicating with server. Please check your Internet connection and try again.\",\n              status: 4,\n            },\n          });\n          this.isLoadingResult = false;\n        } else {\n          setTimeout(() => {\n            this.loadResult(tryCount + 1);\n          }, 1000 * Math.pow(2, tryCount));\n        }\n      });\n  }\n\n  refreshStatus(query, parameters, tryNumber = 1) {\n    const loadResult = () =>\n      Auth.isAuthenticated() ? this.loadResult() : this.loadLatestCachedResult(query, parameters);\n\n    const request = Auth.isAuthenticated()\n      ? axios.get(`api/jobs/${this.job.id}`)\n      : axios.get(`api/queries/${query}/jobs/${this.job.id}`);\n\n    request\n      .then(jobResponse => {\n        this.update(jobResponse);\n\n        if (this.getStatus() === \"processing\" && this.job.query_result_id && this.job.query_result_id !== \"None\") {\n          loadResult();\n        } else if (this.getStatus() !== \"failed\") {\n          const waitTime = tryNumber > 10 ? 3000 : 500;\n          setTimeout(() => {\n            this.refreshStatus(query, parameters, tryNumber + 1);\n          }, waitTime);\n        }\n      })\n      .catch(error => {\n        logger(\"Connection error\", error);\n        // TODO: use QueryResultError, or better yet: exception/reject of promise.\n        this.update({\n          job: {\n            error: \"failed communicating with server. Please check your Internet connection and try again.\",\n            status: 4,\n          },\n        });\n      });\n  }\n\n  getLink(queryId, fileType, apiKey) {\n    let link = `api/queries/${queryId}/results/${this.getId()}.${fileType}`;\n    if (apiKey) {\n      link = `${link}?api_key=${apiKey}`;\n    }\n    return link;\n  }\n\n  getName(queryName, fileType) {\n    return `${queryName.replace(/ /g, \"_\") + moment(this.getUpdatedAt()).format(\"_YYYY_MM_DD\")}.${fileType}`;\n  }\n\n  static getByQueryId(id, parameters, maxAge) {\n    const queryResult = new QueryResult();\n\n    axios\n      .post(`api/queries/${id}/results`, { id, parameters, max_age: maxAge })\n      .then(response => {\n        queryResult.update(response);\n\n        if (\"job\" in response) {\n          queryResult.refreshStatus(id, parameters);\n        }\n      })\n      .catch(error => {\n        handleErrorResponse(queryResult, error);\n      });\n\n    return queryResult;\n  }\n\n  static get(dataSourceId, query, parameters, maxAge, queryId) {\n    const queryResult = new QueryResult();\n\n    const params = {\n      data_source_id: dataSourceId,\n      parameters,\n      query,\n      max_age: maxAge,\n    };\n\n    if (queryId !== undefined) {\n      params.query_id = queryId;\n    }\n\n    QueryResultResource.post(params)\n      .then(response => {\n        queryResult.update(response);\n\n        if (\"job\" in response) {\n          queryResult.refreshStatus(query, parameters);\n        }\n      })\n      .catch(error => {\n        handleErrorResponse(queryResult, error);\n      });\n\n    return queryResult;\n  }\n}\n\nexport default QueryResult;\n","import moment from \"moment\";\nimport debug from \"debug\";\nimport Mustache from \"mustache\";\nimport { axios } from \"@/services/axios\";\nimport {\n  zipObject,\n  isEmpty,\n  isArray,\n  map,\n  filter,\n  includes,\n  union,\n  uniq,\n  has,\n  identity,\n  extend,\n  each,\n  some,\n  clone,\n  find,\n} from \"lodash\";\nimport location from \"@/services/location\";\n\nimport { Parameter, createParameter } from \"./parameters\";\nimport { currentUser } from \"./auth\";\nimport QueryResult from \"./query-result\";\n\nMustache.escape = identity; // do not html-escape values\n\nconst logger = debug(\"redash:services:query\");\n\nfunction collectParams(parts) {\n  let parameters = [];\n\n  parts.forEach(part => {\n    if (part[0] === \"name\" || part[0] === \"&\") {\n      parameters.push(part[1].split(\".\")[0]);\n    } else if (part[0] === \"#\") {\n      parameters = union(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nexport class Query {\n  constructor(query) {\n    extend(this, query);\n\n    if (!has(this, \"options\")) {\n      this.options = {};\n    }\n\n    if (!isArray(this.options.parameters)) {\n      this.options.parameters = [];\n    }\n  }\n\n  isNew() {\n    return this.id === undefined;\n  }\n\n  hasDailySchedule() {\n    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n  }\n\n  scheduleInLocalTime() {\n    const parts = this.schedule.split(\":\");\n    return moment\n      .utc()\n      .hour(parts[0])\n      .minute(parts[1])\n      .local()\n      .format(\"HH:mm\");\n  }\n\n  hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  }\n\n  paramsRequired() {\n    return this.getParameters().isRequired();\n  }\n\n  hasParameters() {\n    return this.getParametersDefs().length > 0;\n  }\n\n  prepareQueryResultExecution(execute, maxAge) {\n    const parameters = this.getParameters();\n    const missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      let paramsWord = \"parameter\";\n      let valuesWord = \"value\";\n      if (missingParams.length > 1) {\n        paramsWord = \"parameters\";\n        valuesWord = \"values\";\n      }\n\n      return new QueryResult({\n        job: {\n          error: `missing ${valuesWord} for ${missingParams.join(\", \")} ${paramsWord}.`,\n          status: 4,\n        },\n      });\n    }\n\n    if (parameters.isRequired()) {\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({\n          query_result: this.latest_query_data,\n        });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.id, this.latest_query_data_id);\n      }\n    } else {\n      this.queryResult = execute();\n    }\n\n    return this.queryResult;\n  }\n\n  getQueryResult(maxAge) {\n    const execute = () => QueryResult.getByQueryId(this.id, this.getParameters().getExecutionValues(), maxAge);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  }\n\n  getQueryResultByText(maxAge, selectedQueryText) {\n    const queryText = selectedQueryText || this.query;\n    if (!queryText) {\n      return new QueryResultError(\"Can't execute empty query.\");\n    }\n\n    const parameters = this.getParameters().getExecutionValues({ joinListValues: true });\n    const execute = () => QueryResult.get(this.data_source_id, queryText, parameters, maxAge, this.id);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  }\n\n  getUrl(source, hash) {\n    let url = `queries/${this.id}`;\n\n    if (source) {\n      url += \"/source\";\n    }\n\n    let params = {};\n    if (this.getParameters().isRequired()) {\n      this.getParametersDefs().forEach(param => {\n        extend(params, param.toUrlParams());\n      });\n    }\n    Object.keys(params).forEach(key => params[key] == null && delete params[key]);\n    params = map(params, (value, name) => `${encodeURIComponent(name)}=${encodeURIComponent(value)}`).join(\"&\");\n\n    if (params !== \"\") {\n      url += `?${params}`;\n    }\n\n    if (hash) {\n      url += `#${hash}`;\n    }\n\n    return url;\n  }\n\n  getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  }\n\n  getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, location.search);\n    }\n\n    return this.$parameters;\n  }\n\n  getParametersDefs(update = true) {\n    return this.getParameters().get(update);\n  }\n\n  favorite() {\n    return Query.favorite(this);\n  }\n\n  unfavorite() {\n    return Query.unfavorite(this);\n  }\n\n  clone() {\n    const newQuery = clone(this);\n    newQuery.$parameters = null;\n    newQuery.getParameters();\n    return newQuery;\n  }\n}\n\nclass Parameters {\n  constructor(query, queryString) {\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  parseQuery() {\n    const fallback = () => map(this.query.options.parameters, i => i.name);\n\n    let parameters = [];\n    if (this.query.query !== undefined) {\n      try {\n        const parts = Mustache.parse(this.query.query);\n        parameters = uniq(collectParams(parts));\n      } catch (e) {\n        logger(\"Failed parsing parameters: \", e);\n        // Return current parameters so we don't reset the list\n        parameters = fallback();\n      }\n    } else {\n      parameters = fallback();\n    }\n\n    return parameters;\n  }\n\n  updateParameters(update) {\n    if (this.query.query === this.cachedQueryText) {\n      const parameters = this.query.options.parameters;\n      const hasUnprocessedParameters = find(parameters, p => !(p instanceof Parameter));\n      if (hasUnprocessedParameters) {\n        this.query.options.parameters = map(parameters, p =>\n          p instanceof Parameter ? p : createParameter(p, this.query.id)\n        );\n      }\n      return;\n    }\n\n    this.cachedQueryText = this.query.query;\n    const parameterNames = update ? this.parseQuery() : map(this.query.options.parameters, p => p.name);\n\n    this.query.options.parameters = this.query.options.parameters || [];\n\n    const parametersMap = {};\n    this.query.options.parameters.forEach(param => {\n      parametersMap[param.name] = param;\n    });\n\n    parameterNames.forEach(param => {\n      if (!has(parametersMap, param)) {\n        this.query.options.parameters.push(\n          createParameter({\n            title: param,\n            name: param,\n            type: \"text\",\n            value: null,\n            global: false,\n          })\n        );\n      }\n    });\n\n    const parameterExists = p => includes(parameterNames, p.name);\n    const parameters = this.query.options.parameters;\n    this.query.options.parameters = parameters\n      .filter(parameterExists)\n      .map(p => (p instanceof Parameter ? p : createParameter(p, this.query.id)));\n  }\n\n  initFromQueryString(query) {\n    this.get().forEach(param => {\n      param.fromUrlParams(query);\n    });\n  }\n\n  get(update = true) {\n    this.updateParameters(update);\n    return this.query.options.parameters;\n  }\n\n  add(parameterDef) {\n    this.query.options.parameters = this.query.options.parameters.filter(p => p.name !== parameterDef.name);\n    const param = createParameter(parameterDef);\n    this.query.options.parameters.push(param);\n    return param;\n  }\n\n  getMissing() {\n    return map(\n      filter(this.get(), p => p.isEmpty),\n      i => i.title\n    );\n  }\n\n  isRequired() {\n    return !isEmpty(this.get());\n  }\n\n  getExecutionValues(extra = {}) {\n    const params = this.get();\n    return zipObject(\n      map(params, i => i.name),\n      map(params, i => i.getExecutionValue(extra))\n    );\n  }\n\n  hasPendingValues() {\n    return some(this.get(), p => p.hasPendingValue);\n  }\n\n  applyPendingValues() {\n    each(this.get(), p => p.applyPendingValue());\n  }\n\n  toUrlParams() {\n    if (this.get().length === 0) {\n      return \"\";\n    }\n\n    const params = Object.assign(...this.get().map(p => p.toUrlParams()));\n    Object.keys(params).forEach(key => params[key] == null && delete params[key]);\n    return Object.keys(params)\n      .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n      .join(\"&\");\n  }\n}\n\nexport class QueryResultError {\n  constructor(errorMessage) {\n    this.errorMessage = errorMessage;\n    this.updatedAt = moment.utc();\n  }\n\n  getUpdatedAt() {\n    return this.updatedAt;\n  }\n\n  getError() {\n    return this.errorMessage;\n  }\n\n  toPromise() {\n    return Promise.reject(this);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getStatus() {\n    return \"failed\";\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getData() {\n    return null;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getLog() {\n    return null;\n  }\n}\n\nconst getQuery = query => new Query(query);\nconst saveOrCreateUrl = data => (data.id ? `api/queries/${data.id}` : \"api/queries\");\nconst mapResults = data => ({ ...data, results: map(data.results, getQuery) });\n\nconst QueryService = {\n  query: params => axios.get(\"api/queries\", { params }).then(mapResults),\n  get: data => axios.get(`api/queries/${data.id}`, data).then(getQuery),\n  save: data => axios.post(saveOrCreateUrl(data), data).then(getQuery),\n  delete: data => axios.delete(`api/queries/${data.id}`),\n  recent: params => axios.get(`api/queries/recent`, { params }).then(data => map(data, getQuery)),\n  archive: params => axios.get(`api/queries/archive`, { params }).then(mapResults),\n  myQueries: params => axios.get(\"api/queries/my\", { params }).then(mapResults),\n  fork: ({ id }) => axios.post(`api/queries/${id}/fork`, { id }).then(getQuery),\n  resultById: data => axios.get(`api/queries/${data.id}/results.json`),\n  asDropdown: data => axios.get(`api/queries/${data.id}/dropdown`),\n  associatedDropdown: ({ queryId, dropdownQueryId }) =>\n    axios.get(`api/queries/${queryId}/dropdowns/${dropdownQueryId}`),\n  favorites: params => axios.get(\"api/queries/favorites\", { params }).then(mapResults),\n  favorite: data => axios.post(`api/queries/${data.id}/favorite`),\n  unfavorite: data => axios.delete(`api/queries/${data.id}/favorite`),\n};\n\nQueryService.newQuery = function newQuery() {\n  return new Query({\n    query: \"\",\n    name: \"New Query\",\n    schedule: null,\n    user: currentUser,\n    options: {},\n    tags: [],\n    can_edit: true,\n  });\n};\n\nQueryService.format = function formatQuery(syntax, query) {\n  if (syntax === \"json\") {\n    try {\n      const formatted = JSON.stringify(JSON.parse(query), \" \", 4);\n      return Promise.resolve(formatted);\n    } catch (err) {\n      return Promise.reject(String(err));\n    }\n  } else if (syntax === \"sql\") {\n    return axios.post(\"api/queries/format\", { query }).then(data => data.query);\n  } else {\n    return Promise.reject(\"Query formatting is not supported for your data source syntax.\");\n  }\n};\n\nextend(Query, QueryService);\n","import { isNull, isUndefined, isArray, isEmpty, get, map, join, has } from \"lodash\";\nimport { Query } from \"@/services/query\";\nimport Parameter from \"./Parameter\";\n\nclass QueryBasedDropdownParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.queryId = parameter.queryId;\n    this.multiValuesOptions = parameter.multiValuesOptions;\n    this.setValue(parameter.value);\n  }\n\n  normalizeValue(value) {\n    if (isUndefined(value) || isNull(value) || (isArray(value) && isEmpty(value))) {\n      return null;\n    }\n\n    if (this.multiValuesOptions) {\n      value = isArray(value) ? value : [value];\n    } else {\n      value = isArray(value) ? value[0] : value;\n    }\n    return value;\n  }\n\n  getExecutionValue(extra = {}) {\n    const { joinListValues } = extra;\n    if (joinListValues && isArray(this.value)) {\n      const separator = get(this.multiValuesOptions, \"separator\", \",\");\n      const prefix = get(this.multiValuesOptions, \"prefix\", \"\");\n      const suffix = get(this.multiValuesOptions, \"suffix\", \"\");\n      const parameterValues = map(this.value, v => `${prefix}${v}${suffix}`);\n      return join(parameterValues, separator);\n    }\n    return this.value;\n  }\n\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n\n    let urlParam = this.value;\n    if (this.multiValuesOptions && isArray(this.value)) {\n      urlParam = JSON.stringify(this.value);\n    }\n\n    return {\n      [`${prefix}${this.name}`]: !this.isEmpty ? urlParam : null,\n    };\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n    if (has(query, key)) {\n      if (this.multiValuesOptions) {\n        try {\n          const valueFromJson = JSON.parse(query[key]);\n          this.setValue(isArray(valueFromJson) ? valueFromJson : query[key]);\n        } catch (e) {\n          this.setValue(query[key]);\n        }\n      } else {\n        this.setValue(query[key]);\n      }\n    }\n  }\n\n  loadDropdownValues() {\n    if (this.parentQueryId) {\n      return Query.associatedDropdown({ queryId: this.parentQueryId, dropdownQueryId: this.queryId }).catch(() =>\n        Promise.resolve([])\n      );\n    }\n\n    return Query.asDropdown({ id: this.queryId }).catch(Promise.resolve([]));\n  }\n}\n\nexport default QueryBasedDropdownParameter;\n","import { findKey, startsWith, has, includes, isNull, values } from \"lodash\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport Parameter from \"./Parameter\";\n\nconst DATETIME_FORMATS = {\n  // eslint-disable-next-line quote-props\n  date: \"YYYY-MM-DD\",\n  \"datetime-local\": \"YYYY-MM-DD HH:mm\",\n  \"datetime-with-seconds\": \"YYYY-MM-DD HH:mm:ss\",\n};\n\nconst DYNAMIC_PREFIX = \"d_\";\n\nconst DYNAMIC_DATES = {\n  now: {\n    name: \"Today/Now\",\n    value: () => moment(),\n  },\n  yesterday: {\n    name: \"Yesterday\",\n    value: () => moment().subtract(1, \"day\"),\n  },\n};\n\nexport const DynamicDateType = PropTypes.oneOf(values(DYNAMIC_DATES));\n\nfunction isDynamicDateString(value) {\n  return startsWith(value, DYNAMIC_PREFIX) && has(DYNAMIC_DATES, value.substring(DYNAMIC_PREFIX.length));\n}\n\nexport function isDynamicDate(value) {\n  return includes(DYNAMIC_DATES, value);\n}\n\nexport function getDynamicDateFromString(value) {\n  if (!isDynamicDateString(value)) {\n    return null;\n  }\n  return DYNAMIC_DATES[value.substring(DYNAMIC_PREFIX.length)];\n}\n\nclass DateParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.useCurrentDateTime = parameter.useCurrentDateTime;\n    this.setValue(parameter.value);\n  }\n\n  get hasDynamicValue() {\n    return isDynamicDate(this.normalizedValue);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isDynamicDateString(value)) {\n      return getDynamicDateFromString(value);\n    }\n\n    if (isDynamicDate(value)) {\n      return value;\n    }\n\n    const normalizedValue = moment(value);\n    return normalizedValue.isValid() ? normalizedValue : null;\n  }\n\n  setValue(value) {\n    const normalizedValue = this.normalizeValue(value);\n    if (isDynamicDate(normalizedValue)) {\n      this.value = DYNAMIC_PREFIX + findKey(DYNAMIC_DATES, normalizedValue);\n    } else if (moment.isMoment(normalizedValue)) {\n      this.value = normalizedValue.format(DATETIME_FORMATS[this.type]);\n    } else {\n      this.value = normalizedValue;\n    }\n    this.$$value = normalizedValue;\n\n    this.updateLocals();\n    this.clearPendingValue();\n    return this;\n  }\n\n  getExecutionValue() {\n    if (this.hasDynamicValue) {\n      return this.normalizedValue.value().format(DATETIME_FORMATS[this.type]);\n    }\n    if (isNull(this.value) && this.useCurrentDateTime) {\n      return moment().format(DATETIME_FORMATS[this.type]);\n    }\n    return this.value;\n  }\n}\n\nexport default DateParameter;\n","import { startsWith, has, includes, findKey, values, isObject, isArray } from \"lodash\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport Parameter from \"./Parameter\";\n\nconst DATETIME_FORMATS = {\n  \"date-range\": \"YYYY-MM-DD\",\n  \"datetime-range\": \"YYYY-MM-DD HH:mm\",\n  \"datetime-range-with-seconds\": \"YYYY-MM-DD HH:mm:ss\",\n};\n\nconst DYNAMIC_PREFIX = \"d_\";\n\nconst DYNAMIC_DATE_RANGES = {\n  today: {\n    name: \"Today\",\n    value: () => [moment().startOf(\"day\"), moment().endOf(\"day\")],\n  },\n  yesterday: {\n    name: \"Yesterday\",\n    value: () => [\n      moment()\n        .subtract(1, \"day\")\n        .startOf(\"day\"),\n      moment()\n        .subtract(1, \"day\")\n        .endOf(\"day\"),\n    ],\n  },\n  this_week: {\n    name: \"This week\",\n    value: () => [moment().startOf(\"week\"), moment().endOf(\"week\")],\n  },\n  this_month: {\n    name: \"This month\",\n    value: () => [moment().startOf(\"month\"), moment().endOf(\"month\")],\n  },\n  this_year: {\n    name: \"This year\",\n    value: () => [moment().startOf(\"year\"), moment().endOf(\"year\")],\n  },\n  last_week: {\n    name: \"Last week\",\n    value: () => [\n      moment()\n        .subtract(1, \"week\")\n        .startOf(\"week\"),\n      moment()\n        .subtract(1, \"week\")\n        .endOf(\"week\"),\n    ],\n  },\n  last_month: {\n    name: \"Last month\",\n    value: () => [\n      moment()\n        .subtract(1, \"month\")\n        .startOf(\"month\"),\n      moment()\n        .subtract(1, \"month\")\n        .endOf(\"month\"),\n    ],\n  },\n  last_year: {\n    name: \"Last year\",\n    value: () => [\n      moment()\n        .subtract(1, \"year\")\n        .startOf(\"year\"),\n      moment()\n        .subtract(1, \"year\")\n        .endOf(\"year\"),\n    ],\n  },\n  last_7_days: {\n    name: \"Last 7 days\",\n    value: () => [moment().subtract(7, \"days\"), moment()],\n  },\n  last_14_days: {\n    name: \"Last 14 days\",\n    value: () => [moment().subtract(14, \"days\"), moment()],\n  },\n  last_30_days: {\n    name: \"Last 30 days\",\n    value: () => [moment().subtract(30, \"days\"), moment()],\n  },\n  last_60_days: {\n    name: \"Last 60 days\",\n    value: () => [moment().subtract(60, \"days\"), moment()],\n  },\n  last_90_days: {\n    name: \"Last 90 days\",\n    value: () => [moment().subtract(90, \"days\"), moment()],\n  },\n};\n\nexport const DynamicDateRangeType = PropTypes.oneOf(values(DYNAMIC_DATE_RANGES));\n\nexport function isDynamicDateRangeString(value) {\n  if (!startsWith(value, DYNAMIC_PREFIX)) {\n    return false;\n  }\n  return !!DYNAMIC_DATE_RANGES[value.substring(DYNAMIC_PREFIX.length)];\n}\n\nexport function isDynamicDateRange(value) {\n  return includes(DYNAMIC_DATE_RANGES, value);\n}\n\nexport function getDynamicDateRangeFromString(value) {\n  if (!isDynamicDateRangeString(value)) {\n    return null;\n  }\n  return DYNAMIC_DATE_RANGES[value.substring(DYNAMIC_PREFIX.length)];\n}\n\nclass DateRangeParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.setValue(parameter.value);\n  }\n\n  get hasDynamicValue() {\n    return isDynamicDateRange(this.normalizedValue);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isDynamicDateRangeString(value)) {\n      return getDynamicDateRangeFromString(value);\n    }\n\n    if (isDynamicDateRange(value)) {\n      return value;\n    }\n\n    if (isObject(value) && !isArray(value)) {\n      value = [value.start, value.end];\n    }\n\n    if (isArray(value) && value.length === 2) {\n      value = [moment(value[0]), moment(value[1])];\n      if (value[0].isValid() && value[1].isValid()) {\n        return value;\n      }\n    }\n    return null;\n  }\n\n  setValue(value) {\n    const normalizedValue = this.normalizeValue(value);\n    if (isDynamicDateRange(normalizedValue)) {\n      this.value = DYNAMIC_PREFIX + findKey(DYNAMIC_DATE_RANGES, normalizedValue);\n    } else if (isArray(normalizedValue)) {\n      this.value = {\n        start: normalizedValue[0].format(DATETIME_FORMATS[this.type]),\n        end: normalizedValue[1].format(DATETIME_FORMATS[this.type]),\n      };\n    } else {\n      this.value = normalizedValue;\n    }\n    this.$$value = normalizedValue;\n\n    this.updateLocals();\n    this.clearPendingValue();\n    return this;\n  }\n\n  getExecutionValue() {\n    if (this.hasDynamicValue) {\n      const format = date => date.format(DATETIME_FORMATS[this.type]);\n      const [start, end] = this.normalizedValue.value().map(format);\n      return { start, end };\n    }\n    return this.value;\n  }\n\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n    if (isObject(this.value) && this.value.start && this.value.end) {\n      return {\n        [`${prefix}${this.name}`]: `${this.value.start}--${this.value.end}`,\n      };\n    }\n    return super.toUrlParams();\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n\n    // backward compatibility\n    const keyStart = `${prefix}${this.name}.start`;\n    const keyEnd = `${prefix}${this.name}.end`;\n\n    if (has(query, key)) {\n      const dates = query[key].split(\"--\");\n      if (dates.length === 2) {\n        this.setValue(dates);\n      } else {\n        this.setValue(query[key]);\n      }\n    } else if (has(query, keyStart) && has(query, keyEnd)) {\n      this.setValue([query[keyStart], query[keyEnd]]);\n    }\n  }\n\n  toQueryTextFragment() {\n    return `{{ ${this.name}.start }} {{ ${this.name}.end }}`;\n  }\n}\n\nexport default DateRangeParameter;\n","import Parameter from \"./Parameter\";\nimport TextParameter from \"./TextParameter\";\nimport NumberParameter from \"./NumberParameter\";\nimport EnumParameter from \"./EnumParameter\";\nimport QueryBasedDropdownParameter from \"./QueryBasedDropdownParameter\";\nimport DateParameter from \"./DateParameter\";\nimport DateRangeParameter from \"./DateRangeParameter\";\n\nfunction createParameter(param, parentQueryId) {\n  switch (param.type) {\n    case \"number\":\n      return new NumberParameter(param, parentQueryId);\n    case \"enum\":\n      return new EnumParameter(param, parentQueryId);\n    case \"query\":\n      return new QueryBasedDropdownParameter(param, parentQueryId);\n    case \"date\":\n    case \"datetime-local\":\n    case \"datetime-with-seconds\":\n      return new DateParameter(param, parentQueryId);\n    case \"date-range\":\n    case \"datetime-range\":\n    case \"datetime-range-with-seconds\":\n      return new DateRangeParameter(param, parentQueryId);\n    default:\n      return new TextParameter({ ...param, type: \"text\" }, parentQueryId);\n  }\n}\n\nfunction cloneParameter(param) {\n  return createParameter(param, param.parentQueryId);\n}\n\nexport {\n  Parameter,\n  TextParameter,\n  NumberParameter,\n  EnumParameter,\n  QueryBasedDropdownParameter,\n  DateParameter,\n  DateRangeParameter,\n  createParameter,\n  cloneParameter,\n};\n","import moment from \"moment\";\nimport { axios } from \"@/services/axios\";\nimport { each, pick, extend, isObject, truncate, keys, difference, filter, map, merge } from \"lodash\";\nimport location from \"@/services/location\";\nimport { cloneParameter } from \"@/services/parameters\";\nimport dashboardGridOptions from \"@/config/dashboard-grid-options\";\nimport { registeredVisualizations } from \"@redash/viz/lib\";\nimport { Query } from \"./query\";\n\nexport const WidgetTypeEnum = {\n  TEXTBOX: \"textbox\",\n  VISUALIZATION: \"visualization\",\n  RESTRICTED: \"restricted\",\n};\n\nfunction calculatePositionOptions(widget) {\n  widget.width = 1; // Backward compatibility, user on back-end\n\n  const visualizationOptions = {\n    autoHeight: false,\n    sizeX: Math.round(dashboardGridOptions.columns / 2),\n    sizeY: dashboardGridOptions.defaultSizeY,\n    minSizeX: dashboardGridOptions.minSizeX,\n    maxSizeX: dashboardGridOptions.maxSizeX,\n    minSizeY: dashboardGridOptions.minSizeY,\n    maxSizeY: dashboardGridOptions.maxSizeY,\n  };\n\n  const config = widget.visualization ? registeredVisualizations[widget.visualization.type] : null;\n  if (isObject(config)) {\n    if (Object.prototype.hasOwnProperty.call(config, \"autoHeight\")) {\n      visualizationOptions.autoHeight = config.autoHeight;\n    }\n\n    // Width constraints\n    const minColumns = parseInt(config.minColumns, 10);\n    if (isFinite(minColumns) && minColumns >= 0) {\n      visualizationOptions.minSizeX = minColumns;\n    }\n    const maxColumns = parseInt(config.maxColumns, 10);\n    if (isFinite(maxColumns) && maxColumns >= 0) {\n      visualizationOptions.maxSizeX = Math.min(maxColumns, dashboardGridOptions.columns);\n    }\n\n    // Height constraints\n    // `minRows` is preferred, but it should be kept for backward compatibility\n    const height = parseInt(config.height, 10);\n    if (isFinite(height)) {\n      visualizationOptions.minSizeY = Math.ceil(height / dashboardGridOptions.rowHeight);\n    }\n    const minRows = parseInt(config.minRows, 10);\n    if (isFinite(minRows)) {\n      visualizationOptions.minSizeY = minRows;\n    }\n    const maxRows = parseInt(config.maxRows, 10);\n    if (isFinite(maxRows) && maxRows >= 0) {\n      visualizationOptions.maxSizeY = maxRows;\n    }\n\n    // Default dimensions\n    const defaultWidth = parseInt(config.defaultColumns, 10);\n    if (isFinite(defaultWidth) && defaultWidth > 0) {\n      visualizationOptions.sizeX = defaultWidth;\n    }\n    const defaultHeight = parseInt(config.defaultRows, 10);\n    if (isFinite(defaultHeight) && defaultHeight > 0) {\n      visualizationOptions.sizeY = defaultHeight;\n    }\n  }\n\n  return visualizationOptions;\n}\n\nexport const ParameterMappingType = {\n  DashboardLevel: \"dashboard-level\",\n  WidgetLevel: \"widget-level\",\n  StaticValue: \"static-value\",\n};\n\nclass Widget {\n  static MappingType = ParameterMappingType;\n\n  constructor(data) {\n    // Copy properties\n    extend(this, data);\n\n    const visualizationOptions = calculatePositionOptions(this);\n\n    this.options = this.options || {};\n    this.options.position = extend(\n      {},\n      visualizationOptions,\n      pick(this.options.position, [\"col\", \"row\", \"sizeX\", \"sizeY\", \"autoHeight\"])\n    );\n\n    if (this.options.position.sizeY < 0) {\n      this.options.position.autoHeight = true;\n    }\n  }\n\n  get type() {\n    if (this.visualization) {\n      return WidgetTypeEnum.VISUALIZATION;\n    } else if (this.restricted) {\n      return WidgetTypeEnum.RESTRICTED;\n    }\n    return WidgetTypeEnum.TEXTBOX;\n  }\n\n  getQuery() {\n    if (!this.query && this.visualization) {\n      this.query = new Query(this.visualization.query);\n    }\n\n    return this.query;\n  }\n\n  getQueryResult() {\n    return this.data;\n  }\n\n  getName() {\n    if (this.visualization) {\n      return `${this.visualization.query.name} (${this.visualization.name})`;\n    }\n    return truncate(this.text, 20);\n  }\n\n  load(force, maxAge) {\n    if (!this.visualization) {\n      return Promise.resolve();\n    }\n\n    // Both `this.data` and `this.queryResult` are query result objects;\n    // `this.data` is last loaded query result;\n    // `this.queryResult` is currently loading query result;\n    // while widget is refreshing, `this.data` !== `this.queryResult`\n\n    if (force || this.queryResult === undefined) {\n      this.loading = true;\n      this.refreshStartedAt = moment();\n\n      if (maxAge === undefined || force) {\n        maxAge = force ? 0 : undefined;\n      }\n      this.queryResult = this.getQuery().getQueryResult(maxAge);\n\n      this.queryResult\n        .toPromise()\n        .then(result => {\n          this.loading = false;\n          this.data = result;\n          return result;\n        })\n        .catch(error => {\n          this.loading = false;\n          this.data = error;\n          return error;\n        });\n    }\n\n    return this.queryResult.toPromise();\n  }\n\n  save(key, value) {\n    const data = pick(this, \"options\", \"text\", \"id\", \"width\", \"dashboard_id\", \"visualization_id\");\n    if (key && value) {\n      data[key] = merge({}, data[key], value); // done like this so `this.options` doesn't get updated by side-effect\n    }\n\n    let url = \"api/widgets\";\n    if (this.id) {\n      url = `${url}/${this.id}`;\n    }\n\n    return axios.post(url, data).then(data => {\n      each(data, (v, k) => {\n        this[k] = v;\n      });\n\n      return this;\n    });\n  }\n\n  delete() {\n    const url = `api/widgets/${this.id}`;\n    return axios.delete(url);\n  }\n\n  isStaticParam(param) {\n    const mappings = this.getParameterMappings();\n    const mappingType = mappings[param.name].type;\n    return mappingType === Widget.MappingType.StaticValue;\n  }\n\n  getParametersDefs() {\n    const mappings = this.getParameterMappings();\n    // textboxes does not have query\n    const params = this.getQuery() ? this.getQuery().getParametersDefs() : [];\n\n    const queryParams = location.search;\n\n    const localTypes = [Widget.MappingType.WidgetLevel, Widget.MappingType.StaticValue];\n    return map(\n      filter(params, param => localTypes.indexOf(mappings[param.name].type) >= 0),\n      param => {\n        const mapping = mappings[param.name];\n        const result = cloneParameter(param);\n        result.title = mapping.title || param.title;\n        result.locals = [param];\n        result.urlPrefix = `p_w${this.id}_`;\n        if (mapping.type === Widget.MappingType.StaticValue) {\n          result.setValue(mapping.value);\n        } else {\n          result.fromUrlParams(queryParams);\n        }\n        return result;\n      }\n    );\n  }\n\n  getParameterMappings() {\n    if (!isObject(this.options.parameterMappings)) {\n      this.options.parameterMappings = {};\n    }\n\n    const existingParams = {};\n    // textboxes does not have query\n    const params = this.getQuery() ? this.getQuery().getParametersDefs(false) : [];\n    each(params, param => {\n      existingParams[param.name] = true;\n      if (!isObject(this.options.parameterMappings[param.name])) {\n        // \"migration\" for old dashboards: parameters with `global` flag\n        // should be mapped to a dashboard-level parameter with the same name\n        this.options.parameterMappings[param.name] = {\n          name: param.name,\n          type: param.global ? Widget.MappingType.DashboardLevel : Widget.MappingType.WidgetLevel,\n          mapTo: param.name, // map to param with the same name\n          value: null, // for StaticValue\n          title: \"\", // Use parameter's title\n        };\n      }\n    });\n\n    // Remove mappings for parameters that do not exists anymore\n    const removedParams = difference(keys(this.options.parameterMappings), keys(existingParams));\n    each(removedParams, name => {\n      delete this.options.parameterMappings[name];\n    });\n\n    return this.options.parameterMappings;\n  }\n\n  getLocalParameters() {\n    return filter(this.getParametersDefs(), param => !this.isStaticParam(param));\n  }\n}\n\nexport default Widget;\n","import _ from \"lodash\";\nimport { axios } from \"@/services/axios\";\nimport dashboardGridOptions from \"@/config/dashboard-grid-options\";\nimport Widget from \"./widget\";\nimport { currentUser } from \"@/services/auth\";\nimport location from \"@/services/location\";\nimport { cloneParameter } from \"@/services/parameters\";\n\nexport function collectDashboardFilters(dashboard, queryResults, urlParams) {\n  const filters = {};\n  _.each(queryResults, queryResult => {\n    const queryFilters = queryResult && queryResult.getFilters ? queryResult.getFilters() : [];\n    _.each(queryFilters, queryFilter => {\n      const hasQueryStringValue = _.has(urlParams, queryFilter.name);\n\n      if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n        // If dashboard filters not enabled, or no query string value given,\n        // skip filters linking.\n        return;\n      }\n\n      if (hasQueryStringValue) {\n        queryFilter.current = urlParams[queryFilter.name];\n      }\n\n      const filter = { ...queryFilter };\n      if (!_.has(filters, queryFilter.name)) {\n        filters[filter.name] = filter;\n      } else {\n        filters[filter.name].values = _.union(filters[filter.name].values, filter.values);\n      }\n    });\n  });\n\n  return _.values(filters);\n}\n\nfunction prepareWidgetsForDashboard(widgets) {\n  // Default height for auto-height widgets.\n  // Compute biggest widget size and choose between it and some magic number.\n  // This value should be big enough so auto-height widgets will not overlap other ones.\n  const defaultWidgetSizeY =\n    Math.max(\n      _.chain(widgets)\n        .map(w => w.options.position.sizeY)\n        .max()\n        .value(),\n      20\n    ) + 5;\n\n  // Fix layout:\n  // 1. sort and group widgets by row\n  // 2. update position of widgets in each row - place it right below\n  //    biggest widget from previous row\n  _.chain(widgets)\n    .sortBy(widget => widget.options.position.row)\n    .groupBy(widget => widget.options.position.row)\n    .reduce((row, widgetsAtRow) => {\n      let height = 1;\n      _.each(widgetsAtRow, widget => {\n        height = Math.max(\n          height,\n          widget.options.position.autoHeight ? defaultWidgetSizeY : widget.options.position.sizeY\n        );\n        widget.options.position.row = row;\n        if (widget.options.position.sizeY < 1) {\n          widget.options.position.sizeY = defaultWidgetSizeY;\n        }\n      });\n      return row + height;\n    }, 0)\n    .value();\n\n  // Sort widgets by updated column and row value\n  widgets = _.sortBy(widgets, widget => widget.options.position.col);\n  widgets = _.sortBy(widgets, widget => widget.options.position.row);\n\n  return widgets;\n}\n\nfunction calculateNewWidgetPosition(existingWidgets, newWidget) {\n  const width = _.extend({ sizeX: dashboardGridOptions.defaultSizeX }, _.extend({}, newWidget.options).position).sizeX;\n\n  // Find first free row for each column\n  const bottomLine = _.chain(existingWidgets)\n    .map(w => {\n      const options = _.extend({}, w.options);\n      const position = _.extend({ row: 0, sizeY: 0 }, options.position);\n      return {\n        left: position.col,\n        top: position.row,\n        right: position.col + position.sizeX,\n        bottom: position.row + position.sizeY,\n        width: position.sizeX,\n        height: position.sizeY,\n      };\n    })\n    .reduce((result, item) => {\n      const from = Math.max(item.left, 0);\n      const to = Math.min(item.right, result.length + 1);\n      for (let i = from; i < to; i += 1) {\n        result[i] = Math.max(result[i], item.bottom);\n      }\n      return result;\n    }, _.map(new Array(dashboardGridOptions.columns), _.constant(0)))\n    .value();\n\n  // Go through columns, pick them by count necessary to hold new block,\n  // and calculate bottom-most free row per group.\n  // Choose group with the top-most free row (comparing to other groups)\n  return _.chain(_.range(0, dashboardGridOptions.columns - width + 1))\n    .map(col => ({\n      col,\n      row: _.chain(bottomLine)\n        .slice(col, col + width)\n        .max()\n        .value(),\n    }))\n    .sortBy(\"row\")\n    .first()\n    .value();\n}\n\nexport function Dashboard(dashboard) {\n  _.extend(this, dashboard);\n}\n\nfunction prepareDashboardWidgets(widgets) {\n  return prepareWidgetsForDashboard(_.map(widgets, widget => new Widget(widget)));\n}\n\nfunction transformSingle(dashboard) {\n  dashboard = new Dashboard(dashboard);\n  if (dashboard.widgets) {\n    dashboard.widgets = prepareDashboardWidgets(dashboard.widgets);\n  }\n  dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  return dashboard;\n}\n\nfunction transformResponse(data) {\n  if (data.results) {\n    data = { ...data, results: _.map(data.results, transformSingle) };\n  } else {\n    data = transformSingle(data);\n  }\n  return data;\n}\n\nconst saveOrCreateUrl = data => (data.slug ? `api/dashboards/${data.slug}` : \"api/dashboards\");\nconst DashboardService = {\n  get: ({ slug }) => axios.get(`api/dashboards/${slug}`).then(transformResponse),\n  getByToken: ({ token }) => axios.get(`api/dashboards/public/${token}`).then(transformResponse),\n  save: data => axios.post(saveOrCreateUrl(data), data).then(transformResponse),\n  delete: ({ slug }) => axios.delete(`api/dashboards/${slug}`).then(transformResponse),\n  query: params => axios.get(\"api/dashboards\", { params }).then(transformResponse),\n  recent: params => axios.get(\"api/dashboards/recent\", { params }).then(transformResponse),\n  favorites: params => axios.get(\"api/dashboards/favorites\", { params }).then(transformResponse),\n  favorite: ({ slug }) => axios.post(`api/dashboards/${slug}/favorite`),\n  unfavorite: ({ slug }) => axios.delete(`api/dashboards/${slug}/favorite`),\n};\n\n_.extend(Dashboard, DashboardService);\n\nDashboard.prepareDashboardWidgets = prepareDashboardWidgets;\nDashboard.prepareWidgetsForDashboard = prepareWidgetsForDashboard;\n\nDashboard.prototype.canEdit = function canEdit() {\n  return currentUser.canEdit(this) || this.can_edit;\n};\n\nDashboard.prototype.getParametersDefs = function getParametersDefs() {\n  const globalParams = {};\n  const queryParams = location.search;\n  _.each(this.widgets, widget => {\n    if (widget.getQuery()) {\n      const mappings = widget.getParameterMappings();\n      widget\n        .getQuery()\n        .getParametersDefs(false)\n        .forEach(param => {\n          const mapping = mappings[param.name];\n          if (mapping.type === Widget.MappingType.DashboardLevel) {\n            // create global param\n            if (!globalParams[mapping.mapTo]) {\n              globalParams[mapping.mapTo] = cloneParameter(param);\n              globalParams[mapping.mapTo].name = mapping.mapTo;\n              globalParams[mapping.mapTo].title = mapping.title || param.title;\n              globalParams[mapping.mapTo].locals = [];\n            }\n\n            // add to locals list\n            globalParams[mapping.mapTo].locals.push(param);\n          }\n        });\n    }\n  });\n  return _.values(\n    _.each(globalParams, param => {\n      param.setValue(param.value); // apply global param value to all locals\n      param.fromUrlParams(queryParams); // try to initialize from url (may do nothing)\n    })\n  );\n};\n\nDashboard.prototype.addWidget = function addWidget(textOrVisualization, options = {}) {\n  const props = {\n    dashboard_id: this.id,\n    options: {\n      ...options,\n      isHidden: false,\n      position: {},\n    },\n    text: \"\",\n    visualization_id: null,\n    visualization: null,\n  };\n\n  if (_.isString(textOrVisualization)) {\n    props.text = textOrVisualization;\n  } else if (_.isObject(textOrVisualization)) {\n    props.visualization_id = textOrVisualization.id;\n    props.visualization = textOrVisualization;\n  } else {\n    // TODO: Throw an error?\n  }\n\n  const widget = new Widget(props);\n\n  const position = calculateNewWidgetPosition(this.widgets, widget);\n  widget.options.position.col = position.col;\n  widget.options.position.row = position.row;\n\n  return widget.save().then(() => {\n    this.widgets = [...this.widgets, widget];\n    return widget;\n  });\n};\n\nDashboard.prototype.favorite = function favorite() {\n  return Dashboard.favorite(this);\n};\n\nDashboard.prototype.unfavorite = function unfavorite() {\n  return Dashboard.unfavorite(this);\n};\n","import React, { useState, useMemo, useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty, template } from \"lodash\";\n\nimport Dropdown from \"antd/lib/dropdown\";\nimport Icon from \"antd/lib/icon\";\nimport Menu from \"antd/lib/menu\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nexport default function FavoritesDropdown({ fetch, urlTemplate }) {\n  const [items, setItems] = useState();\n  const [loading, setLoading] = useState(false);\n\n  const noItems = isEmpty(items);\n  const urlCompiled = useMemo(() => template(urlTemplate), [urlTemplate]);\n\n  const fetchItems = useCallback(\n    (showLoadingState = true) => {\n      setLoading(showLoadingState);\n      fetch()\n        .then(({ results }) => {\n          setItems(results);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    },\n    [fetch]\n  );\n\n  // fetch items on init\n  useEffect(() => {\n    fetchItems(false);\n  }, [fetchItems]);\n\n  // fetch items on click\n  const onVisibleChange = visible => visible && fetchItems();\n\n  const menu = (\n    <Menu className=\"favorites-dropdown\">\n      {noItems ? (\n        <Menu.Item>\n          <span className=\"btn-favourite m-r-5\">\n            <i className=\"fa fa-star\" />\n          </span>\n          No favorites selected yet <HelpTrigger type=\"FAVORITES\" />\n        </Menu.Item>\n      ) : (\n        items.map(item => (\n          <Menu.Item key={item.id}>\n            <a href={urlCompiled(item)}>\n              <span className=\"btn-favourite m-r-5\">\n                <i className=\"fa fa-star\" />\n              </span>\n              {item.name}\n            </a>\n          </Menu.Item>\n        ))\n      )}\n    </Menu>\n  );\n\n  return (\n    <Dropdown\n      disabled={loading}\n      trigger={[\"click\"]}\n      placement=\"bottomLeft\"\n      onVisibleChange={onVisibleChange}\n      overlay={menu}>\n      {loading ? <Icon type=\"loading\" spin /> : <Icon type=\"down\" />}\n    </Dropdown>\n  );\n}\n\nFavoritesDropdown.propTypes = {\n  fetch: PropTypes.func.isRequired,\n  urlTemplate: PropTypes.string.isRequired,\n};\n","/* eslint-disable no-template-curly-in-string */\n\nimport React, { useCallback, useRef } from \"react\";\n\nimport Dropdown from \"antd/lib/dropdown\";\nimport Button from \"antd/lib/button\";\nimport Icon from \"antd/lib/icon\";\nimport Menu from \"antd/lib/menu\";\nimport Input from \"antd/lib/input\";\nimport Tooltip from \"antd/lib/tooltip\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport CreateDashboardDialog from \"@/components/dashboards/CreateDashboardDialog\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\n\nimport { currentUser, Auth, clientConfig } from \"@/services/auth\";\nimport { Dashboard } from \"@/services/dashboard\";\nimport { Query } from \"@/services/query\";\nimport frontendVersion from \"@/version.json\";\nimport logoUrl from \"@/assets/images/redash_icon_small.png\";\n\nimport FavoritesDropdown from \"./FavoritesDropdown\";\nimport \"./index.less\";\n\nfunction onSearch(q) {\n  navigateTo(`queries?q=${encodeURIComponent(q)}`);\n}\n\nfunction DesktopNavbar() {\n  const showCreateDashboardDialog = useCallback(() => {\n    CreateDashboardDialog.showModal();\n  }, []);\n\n  return (\n    <div className=\"app-header\" data-platform=\"desktop\">\n      <div>\n        <Menu mode=\"horizontal\" selectable={false}>\n          {currentUser.hasPermission(\"list_dashboards\") && (\n            <Menu.Item key=\"dashboards\" className=\"dropdown-menu-item\">\n              <Button href=\"dashboards\">Dashboards</Button>\n              <FavoritesDropdown fetch={Dashboard.favorites} urlTemplate=\"dashboard/${slug}\" />\n            </Menu.Item>\n          )}\n          {currentUser.hasPermission(\"view_query\") && (\n            <Menu.Item key=\"queries\" className=\"dropdown-menu-item\">\n              <Button href=\"queries\">Queries</Button>\n              <FavoritesDropdown fetch={Query.favorites} urlTemplate=\"queries/${id}\" />\n            </Menu.Item>\n          )}\n          {currentUser.hasPermission(\"list_alerts\") && (\n            <Menu.Item key=\"alerts\">\n              <Button href=\"alerts\">Alerts</Button>\n            </Menu.Item>\n          )}\n        </Menu>\n        {currentUser.canCreate() && (\n          <Dropdown\n            trigger={[\"click\"]}\n            overlay={\n              <Menu>\n                {currentUser.hasPermission(\"create_query\") && (\n                  <Menu.Item key=\"new-query\">\n                    <a href=\"queries/new\">New Query</a>\n                  </Menu.Item>\n                )}\n                {currentUser.hasPermission(\"create_dashboard\") && (\n                  <Menu.Item key=\"new-dashboard\">\n                    <a onMouseUp={showCreateDashboardDialog}>New Dashboard</a>\n                  </Menu.Item>\n                )}\n                {currentUser.hasPermission(\"list_alerts\") && (\n                  <Menu.Item key=\"new-alert\">\n                    <a href=\"alerts/new\">New Alert</a>\n                  </Menu.Item>\n                )}\n              </Menu>\n            }>\n            <Button type=\"primary\" data-test=\"CreateButton\">\n              Create <Icon type=\"down\" />\n            </Button>\n          </Dropdown>\n        )}\n      </div>\n      <div className=\"header-logo\">\n        <a href=\"./\">\n          <img src={logoUrl} alt=\"Redash\" />\n        </a>\n      </div>\n      <div>\n        <Input.Search\n          className=\"searchbar\"\n          placeholder=\"Search queries...\"\n          data-test=\"AppHeaderSearch\"\n          onSearch={onSearch}\n        />\n        <Menu mode=\"horizontal\" selectable={false}>\n          <Menu.Item key=\"help\">\n            <HelpTrigger type=\"HOME\" className=\"menu-item-button\" />\n          </Menu.Item>\n          {currentUser.isAdmin && (\n            <Menu.Item key=\"settings\">\n              <Tooltip title=\"Settings\">\n                <Button href=\"data_sources\" className=\"menu-item-button\">\n                  <i className=\"fa fa-sliders\" />\n                </Button>\n              </Tooltip>\n            </Menu.Item>\n          )}\n          <Menu.Item key=\"profile\">\n            <Dropdown\n              overlayStyle={{ minWidth: 200 }}\n              placement=\"bottomRight\"\n              trigger={[\"click\"]}\n              overlay={\n                <Menu>\n                  <Menu.Item key=\"profile\">\n                    <a href=\"users/me\">Edit Profile</a>\n                  </Menu.Item>\n                  {currentUser.hasPermission(\"super_admin\") && <Menu.Divider />}\n                  {currentUser.isAdmin && (\n                    <Menu.Item key=\"datasources\">\n                      <a href=\"data_sources\">Data Sources</a>\n                    </Menu.Item>\n                  )}\n                  {currentUser.hasPermission(\"list_users\") && (\n                    <Menu.Item key=\"groups\">\n                      <a href=\"groups\">Groups</a>\n                    </Menu.Item>\n                  )}\n                  {currentUser.hasPermission(\"list_users\") && (\n                    <Menu.Item key=\"users\">\n                      <a href=\"users\">Users</a>\n                    </Menu.Item>\n                  )}\n                  {currentUser.hasPermission(\"create_query\") && (\n                    <Menu.Item key=\"snippets\">\n                      <a href=\"query_snippets\">Query Snippets</a>\n                    </Menu.Item>\n                  )}\n                  {currentUser.isAdmin && (\n                    <Menu.Item key=\"destinations\">\n                      <a href=\"destinations\">Alert Destinations</a>\n                    </Menu.Item>\n                  )}\n                  {currentUser.hasPermission(\"super_admin\") && <Menu.Divider />}\n                  {currentUser.hasPermission(\"super_admin\") && (\n                    <Menu.Item key=\"status\">\n                      <a href=\"admin/status\">System Status</a>\n                    </Menu.Item>\n                  )}\n                  <Menu.Divider />\n                  <Menu.Item key=\"logout\" onClick={() => Auth.logout()}>\n                    Log out\n                  </Menu.Item>\n                  <Menu.Divider />\n                  <Menu.Item key=\"version\" disabled>\n                    Version: {clientConfig.version}\n                    {frontendVersion !== clientConfig.version && ` (${frontendVersion.substring(0, 8)})`}\n                    {clientConfig.newVersionAvailable && currentUser.hasPermission(\"super_admin\") && (\n                      <Tooltip title=\"Update Available\" placement=\"rightTop\">\n                        {\" \"}\n                        {/* eslint-disable react/jsx-no-target-blank */}\n                        <a\n                          href=\"https://version.redash.io/\"\n                          className=\"update-available\"\n                          target=\"_blank\"\n                          rel=\"noopener\">\n                          <i className=\"fa fa-arrow-circle-down\" />\n                        </a>\n                      </Tooltip>\n                    )}\n                  </Menu.Item>\n                </Menu>\n              }>\n              <Button data-test=\"ProfileDropdown\" className=\"profile-dropdown\">\n                <img src={currentUser.profile_image_url} alt={currentUser.name} />\n                <span>{currentUser.name}</span>\n                <Icon type=\"down\" />\n              </Button>\n            </Dropdown>\n          </Menu.Item>\n        </Menu>\n      </div>\n    </div>\n  );\n}\n\nfunction MobileNavbar() {\n  const ref = useRef();\n\n  return (\n    <div className=\"app-header\" data-platform=\"mobile\" ref={ref}>\n      <div className=\"header-logo\">\n        <a href=\"./\">\n          <img src={logoUrl} alt=\"Redash\" />\n        </a>\n      </div>\n      <div>\n        <Dropdown\n          overlayStyle={{ minWidth: 200 }}\n          trigger={[\"click\"]}\n          getPopupContainer={() => ref.current} // so the overlay menu stays with the fixed header when page scrolls\n          overlay={\n            <Menu mode=\"vertical\" selectable={false}>\n              {currentUser.hasPermission(\"list_dashboards\") && (\n                <Menu.Item key=\"dashboards\">\n                  <a href=\"dashboards\">Dashboards</a>\n                </Menu.Item>\n              )}\n              {currentUser.hasPermission(\"view_query\") && (\n                <Menu.Item key=\"queries\">\n                  <a href=\"queries\">Queries</a>\n                </Menu.Item>\n              )}\n              {currentUser.hasPermission(\"list_alerts\") && (\n                <Menu.Item key=\"alerts\">\n                  <a href=\"alerts\">Alerts</a>\n                </Menu.Item>\n              )}\n              <Menu.Item key=\"profile\">\n                <a href=\"users/me\">Edit Profile</a>\n              </Menu.Item>\n              <Menu.Divider />\n              {currentUser.isAdmin && (\n                <Menu.Item key=\"settings\">\n                  <a href=\"data_sources\">Settings</a>\n                </Menu.Item>\n              )}\n              {currentUser.hasPermission(\"super_admin\") && (\n                <Menu.Item key=\"status\">\n                  <a href=\"admin/status\">System Status</a>\n                </Menu.Item>\n              )}\n              {currentUser.hasPermission(\"super_admin\") && <Menu.Divider />}\n              <Menu.Item key=\"help\">\n                {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                <a href=\"https://redash.io/help\" target=\"_blank\" rel=\"noopener\">\n                  Help\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"logout\" onClick={() => Auth.logout()}>\n                Log out\n              </Menu.Item>\n            </Menu>\n          }>\n          <Button>\n            <Icon type=\"menu\" />\n          </Button>\n        </Dropdown>\n      </div>\n    </div>\n  );\n}\n\nexport default function ApplicationHeader() {\n  return (\n    <nav className=\"app-header-wrapper\">\n      <DesktopNavbar />\n      <MobileNavbar />\n    </nav>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ErrorBoundary, { ErrorBoundaryContext } from \"@redash/viz/lib/components/ErrorBoundary\";\nimport { Auth } from \"@/services/auth\";\nimport organizationStatus from \"@/services/organizationStatus\";\nimport ApplicationHeader from \"./ApplicationHeader\";\nimport ErrorMessage from \"./ErrorMessage\";\n\n// This wrapper modifies `route.render` function and instead of passing `currentRoute` passes an object\n// that contains:\n// - `currentRoute.routeParams`\n// - `pageTitle` field which is equal to `currentRoute.title`\n// - `onError` field which is a `handleError` method of nearest error boundary\n\nfunction UserSessionWrapper({ bodyClass, currentRoute, renderChildren }) {\n  const [isAuthenticated, setIsAuthenticated] = useState(!!Auth.isAuthenticated());\n\n  useEffect(() => {\n    let isCancelled = false;\n    Promise.all([Auth.requireSession(), organizationStatus.refresh()])\n      .then(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(!!Auth.isAuthenticated());\n        }\n      })\n      .catch(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(false);\n        }\n      });\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (bodyClass) {\n      document.body.classList.toggle(bodyClass, true);\n      return () => {\n        document.body.classList.toggle(bodyClass, false);\n      };\n    }\n  }, [bodyClass]);\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      <ApplicationHeader />\n      <React.Fragment key={currentRoute.key}>\n        <ErrorBoundary renderError={error => <ErrorMessage error={error} />}>\n          <ErrorBoundaryContext.Consumer>\n            {({ handleError }) =>\n              renderChildren({ ...currentRoute.routeParams, pageTitle: currentRoute.title, onError: handleError })\n            }\n          </ErrorBoundaryContext.Consumer>\n        </ErrorBoundary>\n      </React.Fragment>\n    </React.Fragment>\n  );\n}\n\nUserSessionWrapper.propTypes = {\n  bodyClass: PropTypes.string,\n  renderChildren: PropTypes.func,\n};\n\nUserSessionWrapper.defaultProps = {\n  bodyClass: null,\n  renderChildren: () => null,\n};\n\nexport default function routeWithUserSession({ render, bodyClass, ...rest }) {\n  return {\n    ...rest,\n    render: currentRoute => (\n      <UserSessionWrapper bodyClass={bodyClass} currentRoute={currentRoute} renderChildren={render} />\n    ),\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default function PageHeader({ title }) {\n  return (\n    <div className=\"page-header-wrapper row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0\">\n      <div className=\"col-sm-9 p-l-0 p-r-0\">\n        <h3>{title}</h3>\n      </div>\n    </div>\n  );\n}\n\nPageHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tabs from \"antd/lib/tabs\";\nimport PageHeader from \"@/components/PageHeader\";\n\nimport \"./layout.less\";\n\nexport default function Layout({ activeTab, children }) {\n  return (\n    <div className=\"container admin-page-layout\">\n      <PageHeader title=\"Admin\" />\n\n      <div className=\"bg-white tiled\">\n        <Tabs className=\"admin-page-layout-tabs\" defaultActiveKey={activeTab} animated={false} tabBarGutter={0}>\n          <Tabs.TabPane key=\"system_status\" tab={<a href=\"admin/status\">System Status</a>}>\n            {activeTab === \"system_status\" ? children : null}\n          </Tabs.TabPane>\n          <Tabs.TabPane key=\"jobs\" tab={<a href=\"admin/queries/jobs\">RQ Status</a>}>\n            {activeTab === \"jobs\" ? children : null}\n          </Tabs.TabPane>\n          <Tabs.TabPane key=\"outdated_queries\" tab={<a href=\"admin/queries/outdated\">Outdated Queries</a>}>\n            {activeTab === \"outdated_queries\" ? children : null}\n          </Tabs.TabPane>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n\nLayout.propTypes = {\n  activeTab: PropTypes.string,\n  children: PropTypes.node,\n};\n\nLayout.defaultProps = {\n  activeTab: \"system_status\",\n  children: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class FavoritesControl extends React.Component {\n  static propTypes = {\n    item: PropTypes.shape({\n      is_favorite: PropTypes.bool.isRequired,\n    }).isRequired,\n    onChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onChange: () => {},\n  };\n\n  toggleItem(event, item, callback) {\n    const action = item.is_favorite ? item.unfavorite.bind(item) : item.favorite.bind(item);\n    const savedIsFavorite = item.is_favorite;\n\n    action().then(() => {\n      item.is_favorite = !savedIsFavorite;\n      this.forceUpdate();\n      callback();\n    });\n  }\n\n  render() {\n    const { item, onChange } = this.props;\n    const icon = item.is_favorite ? \"fa fa-star\" : \"fa fa-star-o\";\n    const title = item.is_favorite ? \"Remove from favorites\" : \"Add to favorites\";\n    return (\n      <a\n        title={title}\n        className=\"favorites-control btn-favourite\"\n        onClick={event => this.toggleItem(event, item, onChange)}>\n        <i className={icon} aria-hidden=\"true\" />\n      </a>\n    );\n  }\n}\n","import PropTypes from \"prop-types\";\nimport { wrap } from \"lodash\";\nimport moment from \"moment\";\n\nexport const DataSource = PropTypes.shape({\n  syntax: PropTypes.string,\n  options: PropTypes.shape({\n    doc: PropTypes.string,\n    doc_url: PropTypes.string,\n  }),\n  type_name: PropTypes.string,\n});\n\nexport const Table = PropTypes.shape({\n  columns: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nexport const Schema = PropTypes.arrayOf(Table);\n\nexport const RefreshScheduleType = PropTypes.shape({\n  interval: PropTypes.number,\n  time: PropTypes.string,\n  day_of_week: PropTypes.string,\n  until: PropTypes.string,\n});\n\nexport const RefreshScheduleDefault = {\n  interval: null,\n  time: null,\n  day_of_week: null,\n  until: null,\n};\n\nexport const Field = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  title: PropTypes.string,\n  type: PropTypes.oneOf([\n    \"ace\",\n    \"text\",\n    \"textarea\",\n    \"email\",\n    \"password\",\n    \"number\",\n    \"checkbox\",\n    \"file\",\n    \"select\",\n    \"content\",\n  ]).isRequired,\n  initialValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.bool,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.arrayOf(PropTypes.number),\n  ]),\n  content: PropTypes.node,\n  mode: PropTypes.string,\n  required: PropTypes.bool,\n  extra: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  minLength: PropTypes.number,\n  placeholder: PropTypes.string,\n  contentAfter: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  loading: PropTypes.bool,\n  props: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n});\n\nexport const Action = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  type: PropTypes.string,\n  pullRight: PropTypes.bool,\n  disabledWhenDirty: PropTypes.bool,\n});\n\nexport const AntdForm = PropTypes.shape({\n  validateFieldsAndScroll: PropTypes.func,\n});\n\nexport const UserProfile = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  profileImageUrl: PropTypes.string,\n  apiKey: PropTypes.string,\n  isDisabled: PropTypes.bool,\n});\n\nexport const Destination = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  icon: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n});\n\nexport const Query = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  data_source_id: PropTypes.number.isRequired,\n  created_at: PropTypes.string.isRequired,\n  updated_at: PropTypes.string,\n  user: UserProfile,\n  query: PropTypes.string,\n  queryHash: PropTypes.string,\n  is_safe: PropTypes.bool.isRequired,\n  is_draft: PropTypes.bool.isRequired,\n  is_archived: PropTypes.bool.isRequired,\n  api_key: PropTypes.string.isRequired,\n});\n\nexport const AlertOptions = PropTypes.shape({\n  column: PropTypes.string,\n  op: PropTypes.oneOf([\">\", \">=\", \"<\", \"<=\", \"==\", \"!=\"]),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  custom_subject: PropTypes.string,\n  custom_body: PropTypes.string,\n});\n\nexport const Alert = PropTypes.shape({\n  id: PropTypes.number,\n  name: PropTypes.string,\n  created_at: PropTypes.string,\n  last_triggered_at: PropTypes.string,\n  updated_at: PropTypes.string,\n  rearm: PropTypes.number,\n  state: PropTypes.oneOf([\"ok\", \"triggered\", \"unknown\"]),\n  user: UserProfile,\n  query: Query,\n  options: PropTypes.shape({\n    column: PropTypes.string,\n    op: PropTypes.string,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }).isRequired,\n});\n\nfunction checkMoment(isRequired, props, propName, componentName) {\n  const value = props[propName];\n  const isRequiredValid = isRequired && value !== null && value !== undefined && moment.isMoment(value);\n  const isOptionalValid = !isRequired && (value === null || value === undefined || moment.isMoment(value));\n  if (!isRequiredValid && !isOptionalValid) {\n    return new Error(\"Prop `\" + propName + \"` supplied to `\" + componentName + \"` should be a Moment.js instance.\");\n  }\n}\n\nexport const Moment = wrap(false, checkMoment);\nMoment.isRequired = wrap(true, checkMoment);\n","import moment from \"moment\";\nimport { isNil } from \"lodash\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Moment } from \"@/components/proptypes\";\nimport { clientConfig } from \"@/services/auth\";\nimport Tooltip from \"antd/lib/tooltip\";\n\nfunction toMoment(value) {\n  value = !isNil(value) ? moment(value) : null;\n  return value && value.isValid() ? value : null;\n}\n\nexport default function TimeAgo({ date, placeholder, autoUpdate }) {\n  const startDate = toMoment(date);\n  const [value, setValue] = useState(null);\n  const title = useMemo(() => (startDate ? startDate.format(clientConfig.dateTimeFormat) : null), [startDate]);\n\n  useEffect(() => {\n    function update() {\n      setValue(startDate ? startDate.fromNow() : placeholder);\n    }\n    update();\n\n    if (autoUpdate) {\n      const timer = setInterval(update, 30 * 1000);\n      return () => clearInterval(timer);\n    }\n  }, [autoUpdate, startDate, placeholder]);\n\n  return (\n    <Tooltip title={title}>\n      <span data-test=\"TimeAgo\">{value}</span>\n    </Tooltip>\n  );\n}\n\nTimeAgo.propTypes = {\n  date: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date), Moment]),\n  placeholder: PropTypes.string,\n  autoUpdate: PropTypes.bool,\n};\n\nTimeAgo.defaultProps = {\n  date: null,\n  placeholder: \"\",\n  autoUpdate: true,\n};\n","import moment from \"moment\";\nimport { clientConfig } from \"@/services/auth\";\n\nexport const IntervalEnum = {\n  NEVER: \"Never\",\n  SECONDS: \"second\",\n  MINUTES: \"minute\",\n  HOURS: \"hour\",\n  DAYS: \"day\",\n  WEEKS: \"week\",\n};\n\nexport function formatDateTime(value) {\n  if (!value) {\n    return \"\";\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return \"-\";\n  }\n\n  return parsed.format(clientConfig.dateTimeFormat);\n}\n\nexport function formatDate(value) {\n  if (!value) {\n    return \"\";\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return \"-\";\n  }\n\n  return parsed.format(clientConfig.dateFormat);\n}\n\nexport function localizeTime(time) {\n  const [hrs, mins] = time.split(\":\");\n  return moment\n    .utc()\n    .hour(hrs)\n    .minute(mins)\n    .local()\n    .format(\"HH:mm\");\n}\n\nexport function secondsToInterval(count) {\n  if (!count) {\n    return { interval: IntervalEnum.NEVER };\n  }\n\n  let interval = IntervalEnum.SECONDS;\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalEnum.MINUTES;\n  }\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalEnum.HOURS;\n  }\n  if (count >= 24 && interval === IntervalEnum.HOURS) {\n    count /= 24;\n    interval = IntervalEnum.DAYS;\n  }\n  if (count >= 7 && !(count % 7) && interval === IntervalEnum.DAYS) {\n    count /= 7;\n    interval = IntervalEnum.WEEKS;\n  }\n  return { count, interval };\n}\n\nexport function pluralize(text, count) {\n  const should = count !== 1;\n  return text + (should ? \"s\" : \"\");\n}\n\nexport function durationHumanize(duration, options = {}) {\n  if (!duration) {\n    return \"-\";\n  }\n  let ret = \"\";\n  const { interval, count } = secondsToInterval(duration);\n  const rounded = Math.round(count);\n  if (rounded !== 1 || !options.omitSingleValueNumber) {\n    ret = `${rounded} `;\n  }\n  ret += pluralize(interval, rounded);\n  return ret;\n}\n\nexport function toHuman(text) {\n  return text.replace(/_/g, \" \").replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nexport function remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  let notEquals;\n\n  if (item instanceof Array) {\n    notEquals = other => item.indexOf(other) === -1;\n  } else {\n    notEquals = other => item !== other;\n  }\n\n  const filtered = [];\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\nconst units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n\nexport function prettySize(bytes) {\n  if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) {\n    return \"?\";\n  }\n\n  let unit = 0;\n\n  while (bytes >= 1024) {\n    bytes /= 1024;\n    unit += 1;\n  }\n\n  return bytes.toFixed(3) + \" \" + units[unit];\n}\n\nexport function join(arr) {\n  if (arr === undefined || arr === null) {\n    return \"\";\n  }\n\n  return arr.join(\" / \");\n}\n\nexport function formatColumnValue(value, columnType = null) {\n  if (moment.isMoment(value)) {\n    if (columnType === \"date\") {\n      return formatDate(value);\n    }\n    return formatDateTime(value);\n  }\n\n  if (typeof value === \"boolean\") {\n    return value.toString();\n  }\n\n  return value;\n}\n","import { isFunction, map, filter, extend, omit, identity } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Table from \"antd/lib/table\";\nimport FavoritesControl from \"@/components/FavoritesControl\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport { durationHumanize, formatDate, formatDateTime } from \"@/lib/utils\";\n\n// `this` refers to previous function in the chain (`Columns.***`).\n// Adds `sorter: true` field to column definition\nfunction sortable(...args) {\n  return extend(this(...args), { sorter: true });\n}\n\nexport const Columns = {\n  favorites(overrides) {\n    return extend(\n      {\n        width: \"1%\",\n        render: (text, item) => <FavoritesControl item={item} />,\n      },\n      overrides\n    );\n  },\n  avatar(overrides, formatTitle) {\n    formatTitle = isFunction(formatTitle) ? formatTitle : identity;\n    return extend(\n      {\n        width: \"1%\",\n        render: (user, item) => (\n          <img\n            src={item.user.profile_image_url}\n            className=\"profile__image_thumb\"\n            alt={formatTitle(user.name, item)}\n            title={formatTitle(user.name, item)}\n          />\n        ),\n      },\n      overrides\n    );\n  },\n  date(overrides) {\n    return extend(\n      {\n        render: text => formatDate(text),\n      },\n      overrides\n    );\n  },\n  dateTime(overrides) {\n    return extend(\n      {\n        render: text => formatDateTime(text),\n      },\n      overrides\n    );\n  },\n  duration(overrides) {\n    return extend(\n      {\n        width: \"1%\",\n        className: \"text-nowrap\",\n        render: text => durationHumanize(text),\n      },\n      overrides\n    );\n  },\n  timeAgo(overrides) {\n    return extend(\n      {\n        render: value => <TimeAgo date={value} />,\n      },\n      overrides\n    );\n  },\n  custom(render, overrides) {\n    return extend(\n      {\n        render,\n      },\n      overrides\n    );\n  },\n};\n\nColumns.date.sortable = sortable;\nColumns.dateTime.sortable = sortable;\nColumns.duration.sortable = sortable;\nColumns.timeAgo.sortable = sortable;\nColumns.custom.sortable = sortable;\n\nexport default class ItemsTable extends React.Component {\n  static propTypes = {\n    loading: PropTypes.bool,\n    // eslint-disable-next-line react/forbid-prop-types\n    items: PropTypes.arrayOf(PropTypes.object),\n    columns: PropTypes.arrayOf(\n      PropTypes.shape({\n        field: PropTypes.string, // data field\n        orderByField: PropTypes.string, // field to order by (defaults to `field`)\n        render: PropTypes.func, // (prop, item) => text | node; `prop` is `item[field]`\n        isAvailable: PropTypes.func, // return `true` to show column and `false` to hide; if omitted: show column\n      })\n    ),\n    showHeader: PropTypes.bool,\n    onRowClick: PropTypes.func, // (event, item) => void\n\n    orderByField: PropTypes.string,\n    orderByReverse: PropTypes.bool,\n    toggleSorting: PropTypes.func,\n  };\n\n  static defaultProps = {\n    loading: false,\n    items: [],\n    columns: [],\n    showHeader: true,\n    onRowClick: null,\n\n    orderByField: null,\n    orderByReverse: false,\n    toggleSorting: () => {},\n  };\n\n  prepareColumns() {\n    const { orderByField, orderByReverse, toggleSorting } = this.props;\n    const orderByDirection = orderByReverse ? \"descend\" : \"ascend\";\n\n    return map(\n      map(\n        filter(this.props.columns, column => (isFunction(column.isAvailable) ? column.isAvailable() : true)),\n        column => extend(column, { orderByField: column.orderByField || column.field })\n      ),\n      (column, index) => {\n        // Bind click events only to sortable columns\n        const onHeaderCell = column.sorter ? () => ({ onClick: () => toggleSorting(column.orderByField) }) : null;\n\n        // Wrap render function to pass correct arguments\n        const render = isFunction(column.render) ? (text, row) => column.render(text, row.item) : identity;\n\n        return extend(omit(column, [\"field\", \"orderByField\", \"render\"]), {\n          key: \"column\" + index,\n          dataIndex: \"item[\" + JSON.stringify(column.field) + \"]\",\n          defaultSortOrder: column.orderByField === orderByField ? orderByDirection : null,\n          onHeaderCell,\n          render,\n        });\n      }\n    );\n  }\n\n  render() {\n    const columns = this.prepareColumns();\n    const rows = map(this.props.items, (item, index) => ({ key: \"row\" + index, item }));\n\n    // Bind events only if `onRowClick` specified\n    const onTableRow = isFunction(this.props.onRowClick)\n      ? row => ({\n          onClick: event => {\n            this.props.onRowClick(event, row.item);\n          },\n        })\n      : null;\n\n    const { showHeader } = this.props;\n\n    return (\n      <Table\n        className={classNames(\"table-data\", { \"ant-table-headerless\": !showHeader })}\n        loading={this.props.loading}\n        columns={columns}\n        showHeader={showHeader}\n        dataSource={rows}\n        rowKey={row => row.key}\n        pagination={false}\n        onRow={onTableRow}\n      />\n    );\n  }\n}\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Badge from \"antd/lib/badge\";\nimport Card from \"antd/lib/card\";\nimport Spin from \"antd/lib/spin\";\nimport Table from \"antd/lib/table\";\nimport { Columns } from \"@/components/items-list/components/ItemsTable\";\n\n// CounterCard\n\nexport function CounterCard({ title, value, loading }) {\n  return (\n    <Spin spinning={loading}>\n      <Card>\n        {title}\n        <div className=\"f-20\">{value}</div>\n      </Card>\n    </Spin>\n  );\n}\n\nCounterCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  loading: PropTypes.bool.isRequired,\n};\n\nCounterCard.defaultProps = {\n  value: \"\",\n};\n\n// Tables\n\nconst queryJobsColumns = [\n  { title: \"Queue\", dataIndex: \"origin\" },\n  { title: \"Query ID\", dataIndex: \"meta.query_id\" },\n  { title: \"Org ID\", dataIndex: \"meta.org_id\" },\n  { title: \"Data Source ID\", dataIndex: \"meta.data_source_id\" },\n  { title: \"User ID\", dataIndex: \"meta.user_id\" },\n  Columns.custom(scheduled => scheduled.toString(), { title: \"Scheduled\", dataIndex: \"meta.scheduled\" }),\n  Columns.timeAgo({ title: \"Start Time\", dataIndex: \"started_at\" }),\n  Columns.timeAgo({ title: \"Enqueue Time\", dataIndex: \"enqueued_at\" }),\n];\n\nconst otherJobsColumns = [\n  { title: \"Queue\", dataIndex: \"origin\" },\n  { title: \"Job Name\", dataIndex: \"name\" },\n  Columns.timeAgo({ title: \"Start Time\", dataIndex: \"started_at\" }),\n  Columns.timeAgo({ title: \"Enqueue Time\", dataIndex: \"enqueued_at\" }),\n];\n\nconst workersColumns = [\n  Columns.custom(\n    value => (\n      <span>\n        <Badge status={{ busy: \"processing\", idle: \"default\", started: \"success\", suspended: \"warning\" }[value]} />{\" \"}\n        {value}\n      </span>\n    ),\n    { title: \"State\", dataIndex: \"state\" }\n  ),\n]\n  .concat(\n    map([\"Hostname\", \"PID\", \"Name\", \"Queues\", \"Current Job\", \"Successful Jobs\", \"Failed Jobs\"], c => ({\n      title: c,\n      dataIndex: c.toLowerCase().replace(/\\s/g, \"_\"),\n    }))\n  )\n  .concat([\n    Columns.dateTime({ title: \"Birth Date\", dataIndex: \"birth_date\" }),\n    Columns.duration({ title: \"Total Working Time\", dataIndex: \"total_working_time\" }),\n  ]);\n\nconst queuesColumns = map([\"Name\", \"Started\", \"Queued\"], c => ({ title: c, dataIndex: c.toLowerCase() }));\n\nconst TablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport function WorkersTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={workersColumns}\n      rowKey=\"name\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nWorkersTable.propTypes = TablePropTypes;\n\nexport function QueuesTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={queuesColumns}\n      rowKey=\"name\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nQueuesTable.propTypes = TablePropTypes;\n\nexport function QueryJobsTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={queryJobsColumns}\n      rowKey=\"id\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nQueryJobsTable.propTypes = TablePropTypes;\n\nexport function OtherJobsTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={otherJobsColumns}\n      rowKey=\"id\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nOtherJobsTable.propTypes = TablePropTypes;\n","import { partition, flatMap, values } from \"lodash\";\nimport React from \"react\";\nimport { axios } from \"@/services/axios\";\n\nimport Alert from \"antd/lib/alert\";\nimport Tabs from \"antd/lib/tabs\";\nimport * as Grid from \"antd/lib/grid\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Layout from \"@/components/admin/Layout\";\nimport { CounterCard, WorkersTable, QueuesTable, QueryJobsTable, OtherJobsTable } from \"@/components/admin/RQStatus\";\n\nimport location from \"@/services/location\";\nimport recordEvent from \"@/services/recordEvent\";\nimport moment from \"moment\";\n\nclass Jobs extends React.Component {\n  state = {\n    activeTab: location.hash,\n    isLoading: true,\n    error: null,\n\n    queueCounters: [],\n    overallCounters: { started: 0, queued: 0 },\n    startedJobs: [],\n    workers: [],\n  };\n\n  _refreshTimer = null;\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"admin/rq_status\");\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    // Ignore data after component unmounted\n    clearTimeout(this._refreshTimer);\n    this.processQueues = () => {};\n    this.handleError = () => {};\n  }\n\n  refresh = () => {\n    axios\n      .get(\"/api/admin/queries/rq_status\")\n      .then(data => this.processQueues(data))\n      .catch(error => this.handleError(error));\n\n    this._refreshTimer = setTimeout(this.refresh, 60 * 1000);\n  };\n\n  processQueues = ({ queues, workers }) => {\n    const queueCounters = values(queues).map(({ started, ...rest }) => ({\n      started: started.length,\n      ...rest,\n    }));\n\n    const overallCounters = queueCounters.reduce(\n      (c, q) => ({\n        started: c.started + q.started,\n        queued: c.queued + q.queued,\n      }),\n      { started: 0, queued: 0 }\n    );\n\n    const startedJobs = flatMap(values(queues), queue =>\n      queue.started.map(job => ({\n        ...job,\n        enqueued_at: moment.utc(job.enqueued_at),\n        started_at: moment.utc(job.started_at),\n      }))\n    );\n\n    this.setState({ isLoading: false, queueCounters, startedJobs, overallCounters, workers });\n  };\n\n  handleError = error => {\n    this.setState({ isLoading: false, error });\n  };\n\n  render() {\n    const { isLoading, error, queueCounters, startedJobs, overallCounters, workers, activeTab } = this.state;\n    const [startedQueryJobs, otherStartedJobs] = partition(startedJobs, [\n      \"name\",\n      \"redash.tasks.queries.execution.execute_query\",\n    ]);\n\n    const changeTab = newTab => {\n      location.setHash(newTab);\n      this.setState({ activeTab: newTab });\n    };\n\n    return (\n      <Layout activeTab=\"jobs\">\n        <div className=\"p-15\">\n          {error && <Alert type=\"error\" message=\"Failed loading status. Please refresh.\" />}\n\n          {!error && (\n            <React.Fragment>\n              <Grid.Row gutter={15} className=\"m-b-15\">\n                <Grid.Col span={8}>\n                  <CounterCard title=\"Started Jobs\" value={overallCounters.started} loading={isLoading} />\n                </Grid.Col>\n                <Grid.Col span={8}>\n                  <CounterCard title=\"Queued Jobs\" value={overallCounters.queued} loading={isLoading} />\n                </Grid.Col>\n              </Grid.Row>\n\n              <Tabs activeKey={activeTab || \"queues\"} onTabClick={changeTab} animated={false}>\n                <Tabs.TabPane key=\"queues\" tab=\"Queues\">\n                  <QueuesTable loading={isLoading} items={queueCounters} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"workers\" tab=\"Workers\">\n                  <WorkersTable loading={isLoading} items={workers} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"queries\" tab=\"Queries\">\n                  <QueryJobsTable loading={isLoading} items={startedQueryJobs} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"other\" tab=\"Other Jobs\">\n                  <OtherJobsTable loading={isLoading} items={otherStartedJobs} />\n                </Tabs.TabPane>\n              </Tabs>\n            </React.Fragment>\n          )}\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default routeWithUserSession({\n  path: \"/admin/queries/jobs\",\n  title: \"RQ Status\",\n  render: pageProps => <Jobs {...pageProps} />,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Pagination from \"antd/lib/pagination\";\n\nexport default function Paginator({ page, itemsPerPage, totalCount, onChange }) {\n  if (totalCount <= itemsPerPage) {\n    return null;\n  }\n  return (\n    <div className=\"paginator-container\">\n      <Pagination defaultCurrent={page} defaultPageSize={itemsPerPage} total={totalCount} onChange={onChange} />\n    </div>\n  );\n}\n\nPaginator.propTypes = {\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalCount: PropTypes.number.isRequired,\n  onChange: PropTypes.func,\n};\n\nPaginator.defaultProps = {\n  onChange: () => {},\n};\n","import { map, trim, uniq, compact } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\n\nclass EditTagsDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    tags: PropTypes.arrayOf(PropTypes.string),\n    getAvailableTags: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    tags: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      availableTags: [],\n      result: uniq(map(this.props.tags, trim)),\n    };\n  }\n\n  componentDidMount() {\n    this.props.getAvailableTags().then(availableTags => {\n      this.setState({\n        loading: false,\n        availableTags: uniq(compact(map(availableTags, trim))),\n      });\n    });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const { loading, availableTags, result } = this.state;\n    return (\n      <Modal\n        {...dialog.props}\n        onOk={() => dialog.close(result)}\n        title=\"Add/Edit Tags\"\n        className=\"shortModal\"\n        wrapProps={{ \"data-test\": \"EditTagsDialog\" }}>\n        <Select\n          mode=\"tags\"\n          className=\"w-100\"\n          placeholder=\"Add some tags...\"\n          defaultValue={result}\n          onChange={values => this.setState({ result: compact(map(values, trim)) })}\n          autoFocus\n          disabled={loading}\n          loading={loading}>\n          {map(availableTags, tag => (\n            <Select.Option key={tag}>{tag}</Select.Option>\n          ))}\n        </Select>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditTagsDialog);\n","import { map, trim } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport EditTagsDialog from \"./EditTagsDialog\";\n\nexport class TagsControl extends React.Component {\n  static propTypes = {\n    tags: PropTypes.arrayOf(PropTypes.string),\n    canEdit: PropTypes.bool,\n    getAvailableTags: PropTypes.func,\n    onEdit: PropTypes.func,\n    className: PropTypes.string,\n    tagsExtra: PropTypes.node,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    tags: [],\n    canEdit: false,\n    getAvailableTags: () => Promise.resolve([]),\n    onEdit: () => {},\n    className: \"\",\n    tagsExtra: null,\n    children: null,\n  };\n\n  editTags = (tags, getAvailableTags) => {\n    EditTagsDialog.showModal({ tags, getAvailableTags }).onClose(this.props.onEdit);\n  };\n\n  renderEditButton() {\n    const tags = map(this.props.tags, trim);\n    return (\n      <a\n        className=\"label label-tag hidden-xs\"\n        role=\"none\"\n        onClick={() => this.editTags(tags, this.props.getAvailableTags)}\n        data-test=\"EditTagsButton\">\n        {tags.length === 0 && (\n          <React.Fragment>\n            <i className=\"zmdi zmdi-plus m-r-5\" />\n            Add tag\n          </React.Fragment>\n        )}\n        {tags.length > 0 && <i className=\"zmdi zmdi-edit\" />}\n      </a>\n    );\n  }\n\n  render() {\n    return (\n      <div className={\"tags-control \" + this.props.className} data-test=\"TagsControl\">\n        {this.props.children}\n        {map(this.props.tags, tag => (\n          <span className=\"label label-tag\" key={tag} title={tag} data-test=\"TagLabel\">\n            {tag}\n          </span>\n        ))}\n        {this.props.canEdit && this.renderEditButton()}\n        {this.props.tagsExtra}\n      </div>\n    );\n  }\n}\n\nfunction modelTagsControl({ archivedTooltip }) {\n  // See comment for `propTypes`/`defaultProps`\n  // eslint-disable-next-line react/prop-types\n  function ModelTagsControl({ isDraft, isArchived, ...props }) {\n    return (\n      <TagsControl {...props}>\n        {!isArchived && isDraft && <span className=\"label label-tag-unpublished\">Unpublished</span>}\n        {isArchived && (\n          <Tooltip placement=\"right\" title={archivedTooltip}>\n            <span className=\"label label-tag-archived\">Archived</span>\n          </Tooltip>\n        )}\n      </TagsControl>\n    );\n  }\n\n  ModelTagsControl.propTypes = {\n    isDraft: PropTypes.bool,\n    isArchived: PropTypes.bool,\n  };\n\n  ModelTagsControl.defaultProps = {\n    isDraft: false,\n    isArchived: false,\n  };\n\n  return ModelTagsControl;\n}\n\nexport const QueryTagsControl = modelTagsControl({\n  archivedTooltip: \"This query is archived and can't be used in dashboards, or appear in search results.\",\n});\n\nexport const DashboardTagsControl = modelTagsControl({\n  archivedTooltip: \"This dashboard is archived and won't be listed in dashboards nor search results.\",\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport { localizeTime, durationHumanize } from \"@/lib/utils\";\nimport { RefreshScheduleType, RefreshScheduleDefault } from \"../proptypes\";\n\nimport \"./ScheduleDialog.css\";\n\nexport default class SchedulePhrase extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    isNew: PropTypes.bool.isRequired,\n    isLink: PropTypes.bool,\n    onClick: PropTypes.func,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n    isLink: false,\n    onClick: () => {},\n  };\n\n  get content() {\n    const { interval: seconds } = this.props.schedule || SchedulePhrase.defaultProps.schedule;\n    if (!seconds) {\n      return [\"Never\"];\n    }\n    const humanized = durationHumanize(seconds, {\n      omitSingleValueNumber: true,\n    });\n    const short = `Every ${humanized}`;\n    let full = `Refreshes every ${humanized}`;\n\n    const { time, day_of_week: dayOfWeek } = this.props.schedule;\n    if (time) {\n      full += ` at ${localizeTime(time)}`;\n    }\n    if (dayOfWeek) {\n      full += ` on ${dayOfWeek}`;\n    }\n\n    return [short, full];\n  }\n\n  render() {\n    if (this.props.isNew) {\n      return \"Never\";\n    }\n\n    const [short, full] = this.content;\n    const content = full ? <Tooltip title={full}>{short}</Tooltip> : short;\n\n    return this.props.isLink ? (\n      <a className=\"schedule-phrase\" onClick={this.props.onClick}>\n        {content}\n      </a>\n    ) : (\n      content\n    );\n  }\n}\n","import { omit, debounce } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport { clientConfig } from \"@/services/auth\";\n\nexport const ControllerType = PropTypes.shape({\n  // values of props declared by wrapped component and some additional props from items list\n  params: PropTypes.object.isRequired,\n\n  isLoaded: PropTypes.bool.isRequired,\n  isEmpty: PropTypes.bool.isRequired,\n\n  // search\n  searchTerm: PropTypes.string,\n  updateSearch: PropTypes.func.isRequired, // (searchTerm: string) => void\n\n  // tags\n  selectedTags: PropTypes.array.isRequired,\n  updateSelectedTags: PropTypes.func.isRequired, // (selectedTags: array of tags) => void\n\n  // sorting\n  orderByField: PropTypes.string,\n  orderByReverse: PropTypes.bool.isRequired,\n  toggleSorting: PropTypes.func.isRequired, // (orderByField: string) => void\n\n  // pagination\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalItemsCount: PropTypes.number.isRequired,\n  pageSizeOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n  pageItems: PropTypes.array.isRequired,\n  updatePagination: PropTypes.func.isRequired, // ({ page: number, itemsPerPage: number }) => void\n\n  handleError: PropTypes.func.isRequired, // (error) => void\n});\n\nexport function wrap(WrappedComponent, createItemsSource, createStateStorage) {\n  class ItemsListWrapper extends React.Component {\n    static propTypes = {\n      onError: PropTypes.func,\n      children: PropTypes.node,\n    };\n\n    static defaultProps = {\n      onError: error => {\n        // Allow calling chain to roll up, and then throw the error in global context\n        setTimeout(() => {\n          throw error;\n        });\n      },\n      children: null,\n    };\n\n    constructor(props) {\n      super(props);\n\n      const stateStorage = createStateStorage();\n      const itemsSource = createItemsSource();\n      this._itemsSource = itemsSource;\n\n      itemsSource.setState({ ...stateStorage.getState(), validate: false });\n      itemsSource.getCallbackContext = () => this.state;\n\n      itemsSource.onBeforeUpdate = () => {\n        const state = itemsSource.getState();\n        stateStorage.setState(state);\n        this.setState(this.getState({ ...state, isLoaded: false }));\n      };\n\n      itemsSource.onAfterUpdate = () => {\n        const state = itemsSource.getState();\n        this.setState(this.getState({ ...state, isLoaded: true }));\n      };\n\n      itemsSource.onError = error => this.props.onError(error);\n\n      const initialState = this.getState({ ...itemsSource.getState(), isLoaded: false });\n      const { updatePagination, toggleSorting, updateSearch, updateSelectedTags, update, handleError } = itemsSource;\n      this.state = {\n        ...initialState,\n        toggleSorting, // eslint-disable-line react/no-unused-state\n        updateSearch: debounce(updateSearch, 200), // eslint-disable-line react/no-unused-state\n        updateSelectedTags, // eslint-disable-line react/no-unused-state\n        updatePagination, // eslint-disable-line react/no-unused-state\n        update, // eslint-disable-line react/no-unused-state\n        handleError, // eslint-disable-line react/no-unused-state\n      };\n    }\n\n    componentDidMount() {\n      this.state.update();\n    }\n\n    componentWillUnmount() {\n      this._itemsSource.onBeforeUpdate = () => {};\n      this._itemsSource.onAfterUpdate = () => {};\n      this._itemsSource.onError = () => {};\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getState({ isLoaded, totalCount, pageItems, params, ...rest }) {\n      return {\n        ...rest,\n\n        params: {\n          ...params, // custom params from items source\n          ...omit(this.props, [\"onError\", \"children\"]), // add all props except of own ones\n        },\n\n        isLoaded,\n        isEmpty: !isLoaded || totalCount === 0,\n        totalItemsCount: isLoaded ? totalCount : 0,\n        pageSizeOptions: clientConfig.pageSizeOptions,\n        pageItems: isLoaded ? pageItems : [],\n      };\n    }\n\n    render() {\n      // don't pass own props to wrapped component\n      const { children, onError, ...props } = this.props;\n      return (\n        <WrappedComponent {...props} controller={this.state}>\n          {children}\n        </WrappedComponent>\n      );\n    }\n  }\n\n  // Copy static methods from `WrappedComponent`\n  hoistNonReactStatics(ItemsListWrapper, WrappedComponent);\n\n  return ItemsListWrapper;\n}\n","import { isUndefined } from \"lodash\";\n\nexport default class Paginator {\n  page = 1;\n\n  itemsPerPage = 20;\n\n  totalCount = 0;\n\n  get totalPages() {\n    return Math.ceil(this.totalCount / this.itemsPerPage);\n  }\n\n  setPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 1;\n    if (validate) {\n      this.page = value >= 1 && value <= this.totalPages ? value : 1;\n    } else {\n      this.page = value >= 1 ? value : 1;\n    }\n  }\n\n  setItemsPerPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 20;\n    this.itemsPerPage = value >= 1 ? value : 1;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  setTotalCount(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 0;\n    this.totalCount = value;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  constructor({ page, itemsPerPage, totalCount, validate = true } = {}) {\n    this.setItemsPerPage(itemsPerPage, validate);\n    this.setTotalCount(totalCount, validate);\n    this.setPage(page, validate);\n  }\n\n  getItemsForPage(items) {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = first + this.itemsPerPage;\n\n    return items.slice(first, last);\n  }\n}\n","import { isString, sortBy } from \"lodash\";\n\nconst ORDER_BY_REVERSE = \"-\";\n\nexport function compile(field, reverse) {\n  if (!field) {\n    return null;\n  }\n  return reverse ? ORDER_BY_REVERSE + field : field;\n}\n\nexport function parse(compiled) {\n  compiled = isString(compiled) ? compiled : \"\";\n  const reverse = compiled.startsWith(ORDER_BY_REVERSE);\n  if (reverse) {\n    compiled = compiled.substring(1);\n  }\n  const field = compiled !== \"\" ? compiled : null;\n  return { field, reverse };\n}\n\nexport default class Sorter {\n  field = null;\n\n  reverse = false;\n\n  get compiled() {\n    return compile(this.field, this.reverse);\n  }\n\n  set compiled(value) {\n    const { field, reverse } = parse(value);\n    this.field = field;\n    this.reverse = reverse;\n  }\n\n  setField(value) {\n    this.field = isString(value) && value !== \"\" ? value : null;\n  }\n\n  setReverse(value) {\n    this.reverse = !!value; // cast to boolean\n  }\n\n  constructor({ orderByField, orderByReverse } = {}) {\n    this.setField(orderByField);\n    this.setReverse(orderByReverse);\n  }\n\n  toggleField(field) {\n    if (!isString(field) || field === \"\") {\n      return;\n    }\n    if (field === this.field) {\n      this.reverse = !this.reverse;\n    } else {\n      this.field = field;\n      this.reverse = false;\n    }\n  }\n\n  sort(items) {\n    if (this.field) {\n      items = sortBy(items, this.field);\n      if (this.reverse) {\n        items.reverse();\n      }\n      return items;\n    }\n  }\n}\n","import { identity, isFunction, isNil, isString } from \"lodash\";\n\nclass ItemsFetcher {\n  _getRequest(state, context) {\n    return this._originalGetRequest({}, context);\n  }\n\n  _processResults({ results, count }, state, context) {\n    return {\n      results: this._originalProcessResults(results, context),\n      count,\n    };\n  }\n\n  constructor({ getRequest, doRequest, processResults }) {\n    this._originalGetRequest = isFunction(getRequest) ? getRequest : identity;\n    this._originalDoRequest = doRequest;\n    this._originalProcessResults = isFunction(processResults) ? processResults : identity;\n  }\n\n  fetch(changes, state, context) {\n    const request = this._getRequest(state, context);\n    return this._originalDoRequest(request, context).then(data => this._processResults(data, state, context));\n  }\n}\n\n// For endpoints that return just an array with items; sorting and pagination\n// is performed on client\nexport class PlainListFetcher extends ItemsFetcher {\n  _allItems = [];\n\n  _getRequest({ searchTerm, selectedTags }, context) {\n    return this._originalGetRequest(\n      {\n        q: isString(searchTerm) && searchTerm !== \"\" ? searchTerm : undefined,\n        tags: selectedTags,\n      },\n      context\n    );\n  }\n\n  _processResults(data, { paginator, sorter }, context) {\n    this._allItems = this._originalProcessResults(data, context);\n    this._allItems = sorter.sort(this._allItems);\n    return {\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    };\n  }\n\n  fetch(changes, state, context) {\n    // For plain lists we need to reload items from server only if tags or search changes.\n    if (isNil(changes) || changes.tags || changes.sorting) {\n      return super.fetch(changes, state, context);\n    }\n    // Sorting and pagination could be updated using previously fetched items.\n    const { paginator, sorter } = state;\n    if (changes.sorting) {\n      this._allItems = sorter.sort(this._allItems);\n    }\n    return Promise.resolve({\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    });\n  }\n}\n\n// For endpoints that support server-side pagination (return object with\n// items for current page and total items count)\nexport class PaginatedListFetcher extends ItemsFetcher {\n  _getRequest({ paginator, sorter, searchTerm, selectedTags }, context) {\n    return this._originalGetRequest(\n      {\n        page: paginator.page,\n        page_size: paginator.itemsPerPage,\n        order: sorter.compiled,\n        q: isString(searchTerm) && searchTerm !== \"\" ? searchTerm : undefined,\n        tags: selectedTags,\n      },\n      context\n    );\n  }\n}\n","import { isFunction, identity, map, extend } from \"lodash\";\nimport Paginator from \"./Paginator\";\nimport Sorter from \"./Sorter\";\nimport { PlainListFetcher, PaginatedListFetcher } from \"./ItemsFetcher\";\n\nexport class ItemsSource {\n  onBeforeUpdate = null;\n\n  onAfterUpdate = null;\n\n  onError = null;\n\n  getCallbackContext = () => null;\n\n  _beforeUpdate() {\n    if (isFunction(this.onBeforeUpdate)) {\n      return Promise.resolve(this.onBeforeUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  _afterUpdate() {\n    if (isFunction(this.onAfterUpdate)) {\n      return Promise.resolve(this.onAfterUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  // changes: object with flags or null (full refresh requested)\n  _changed(changes) {\n    const state = {\n      paginator: this._paginator,\n      sorter: this._sorter,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n    };\n    const customParams = {};\n    const context = {\n      ...this.getCallbackContext(),\n      setCustomParams: params => {\n        extend(customParams, params);\n      },\n    };\n    return this._beforeUpdate().then(() =>\n      this._fetcher\n        .fetch(changes, state, context)\n        .then(({ results, count, allResults }) => {\n          this._pageItems = results;\n          this._allItems = allResults || null;\n          this._paginator.setTotalCount(count);\n          this._params = { ...this._params, ...customParams };\n          return this._afterUpdate();\n        })\n        .catch(error => this.handleError(error))\n    );\n  }\n\n  constructor({ getRequest, doRequest, processResults, isPlainList = false, ...defaultState }) {\n    if (!isFunction(getRequest)) {\n      getRequest = identity;\n    }\n\n    this._fetcher = isPlainList\n      ? new PlainListFetcher({ getRequest, doRequest, processResults })\n      : new PaginatedListFetcher({ getRequest, doRequest, processResults });\n\n    this.setState(defaultState);\n    this._pageItems = [];\n\n    this._params = {};\n  }\n\n  getState() {\n    return {\n      page: this._paginator.page,\n      itemsPerPage: this._paginator.itemsPerPage,\n      orderByField: this._sorter.field,\n      orderByReverse: this._sorter.reverse,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n      totalCount: this._paginator.totalCount,\n      pageItems: this._pageItems,\n      allItems: this._allItems,\n      params: this._params,\n    };\n  }\n\n  setState(state) {\n    this._paginator = new Paginator(state);\n    this._sorter = new Sorter(state);\n\n    this._searchTerm = state.searchTerm || \"\";\n    this._selectedTags = state.selectedTags || [];\n\n    this._savedOrderByField = this._sorter.field;\n  }\n\n  updatePagination = ({ page, itemsPerPage }) => {\n    const { page: prevPage, itemsPerPage: prevItemsPerPage } = this._paginator;\n    this._paginator.setItemsPerPage(itemsPerPage);\n    this._paginator.setPage(page);\n    this._changed({\n      pagination: {\n        page: prevPage !== this._paginator.page, // page changed flag\n        itemsPerPage: prevItemsPerPage !== this._paginator.itemsPerPage, // items per page changed flags\n      },\n    });\n  };\n\n  toggleSorting = orderByField => {\n    this._sorter.toggleField(orderByField);\n    this._savedOrderByField = this._sorter.field;\n    this._changed({ sorting: true });\n  };\n\n  updateSearch = searchTerm => {\n    // here we update state directly, but later `fetchData` will update it properly\n    this._searchTerm = searchTerm;\n    // in search mode ignore the ordering and use the ranking order\n    // provided by the server-side FTS backend instead, unless it was\n    // requested by the user by actively ordering in search mode\n    if (searchTerm === \"\") {\n      this._sorter.setField(this._savedOrderByField); // restore ordering\n    } else {\n      this._sorter.setField(null);\n    }\n    this._paginator.setPage(1);\n    this._changed({ search: true, pagination: { page: true } });\n  };\n\n  updateSelectedTags = selectedTags => {\n    this._selectedTags = selectedTags;\n    this._paginator.setPage(1);\n    this._changed({ tags: true, pagination: { page: true } });\n  };\n\n  update = () => this._changed();\n\n  handleError = error => {\n    if (isFunction(this.onError)) {\n      this.onError(error);\n    }\n  };\n}\n\nexport class ResourceItemsSource extends ItemsSource {\n  constructor({ getResource, getItemProcessor, ...rest }) {\n    getItemProcessor = isFunction(getItemProcessor) ? getItemProcessor : () => null;\n    super({\n      ...rest,\n      doRequest: (request, context) => {\n        const resource = getResource(context)(request);\n        return resource;\n      },\n      processResults: (results, context) => {\n        let processItem = getItemProcessor(context);\n        processItem = isFunction(processItem) ? processItem : identity;\n        return map(results, item => processItem(item, context));\n      },\n    });\n  }\n}\n","import { defaults } from \"lodash\";\nimport { clientConfig } from \"@/services/auth\";\nimport location from \"@/services/location\";\nimport { parse as parseOrderBy, compile as compileOrderBy } from \"./Sorter\";\n\nexport class StateStorage {\n  constructor(state = {}) {\n    this._state = { ...state };\n  }\n\n  getState() {\n    return defaults(this._state, {\n      page: 1,\n      itemsPerPage: clientConfig.pageSize,\n      orderByField: \"created_at\",\n      orderByReverse: false,\n      searchTerm: \"\",\n      tags: [],\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState() {}\n}\n\nexport class UrlStateStorage extends StateStorage {\n  getState() {\n    const defaultState = super.getState();\n    const params = location.search;\n\n    const searchTerm = params.q || \"\";\n\n    // in search mode order by should be explicitly specified in url, otherwise use default\n    const defaultOrderBy =\n      searchTerm !== \"\" ? \"\" : compileOrderBy(defaultState.orderByField, defaultState.orderByReverse);\n\n    const { field: orderByField, reverse: orderByReverse } = parseOrderBy(params.order || defaultOrderBy);\n\n    return {\n      page: parseInt(params.page, 10) || defaultState.page,\n      itemsPerPage: parseInt(params.page_size, 10) || defaultState.itemsPerPage,\n      orderByField,\n      orderByReverse,\n      searchTerm,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState({ page, itemsPerPage, orderByField, orderByReverse, searchTerm }) {\n    location.setSearch(\n      {\n        page,\n        page_size: itemsPerPage,\n        order: compileOrderBy(orderByField, orderByReverse),\n        q: searchTerm !== \"\" ? searchTerm : null,\n      },\n      true\n    );\n  }\n}\n","import React from \"react\";\nimport BigMessage from \"@/components/BigMessage\";\n\n// Default \"loading\" message for list pages\nexport default function LoadingState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" {...props} />\n    </div>\n  );\n}\n","import { axios } from \"@/services/axios\";\n\nfunction processTags(data) {\n  return data.tags || [];\n}\n\nexport default function getTags(url) {\n  return axios.get(url).then(processTags);\n}\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Badge from \"antd/lib/badge\";\nimport Menu from \"antd/lib/menu\";\nimport getTags from \"@/services/getTags\";\n\nimport \"./TagsList.less\";\n\nexport default class TagsList extends React.Component {\n  static propTypes = {\n    tagsUrl: PropTypes.string.isRequired,\n    onUpdate: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onUpdate: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // An array of objects that with the name and count of the tagged items\n      allTags: [],\n      // A set of tag names\n      selectedTags: new Set(),\n    };\n  }\n\n  componentDidMount() {\n    getTags(this.props.tagsUrl).then(allTags => {\n      this.setState({ allTags });\n    });\n  }\n\n  toggleTag(event, tag) {\n    const { selectedTags } = this.state;\n    if (event.shiftKey) {\n      // toggle tag\n      if (selectedTags.has(tag)) {\n        selectedTags.delete(tag);\n      } else {\n        selectedTags.add(tag);\n      }\n    } else {\n      // if the tag is the only selected, deselect it, otherwise select only it\n      if (selectedTags.has(tag) && selectedTags.size === 1) {\n        selectedTags.clear();\n      } else {\n        selectedTags.clear();\n        selectedTags.add(tag);\n      }\n    }\n    this.forceUpdate();\n\n    this.props.onUpdate([...this.state.selectedTags]);\n  }\n\n  render() {\n    const { allTags, selectedTags } = this.state;\n    if (allTags.length > 0) {\n      return (\n        <div className=\"m-t-10 tags-list tiled\">\n          <Menu className=\"invert-stripe-position\" mode=\"inline\" selectedKeys={[...selectedTags]}>\n            {map(allTags, tag => (\n              <Menu.Item key={tag.name} className=\"m-0\">\n                <a\n                  className=\"d-flex align-items-center justify-content-between\"\n                  onClick={event => this.toggleTag(event, tag.name)}>\n                  <span className=\"max-character col-xs-11\">{tag.name}</span>\n                  <Badge count={tag.count} />\n                </a>\n              </Menu.Item>\n            ))}\n          </Menu>\n        </div>\n      );\n    }\n    return null;\n  }\n}\n","import { isFunction, isString, filter, map } from \"lodash\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Input from \"antd/lib/input\";\nimport AntdMenu from \"antd/lib/menu\";\nimport Select from \"antd/lib/select\";\nimport TagsList from \"@/components/TagsList\";\n\n/*\n    SearchInput\n */\n\nexport function SearchInput({ placeholder, value, showIcon, onChange }) {\n  const [currentValue, setCurrentValue] = useState(value);\n\n  useEffect(() => {\n    setCurrentValue(value);\n  }, [value]);\n\n  const onInputChange = useCallback(\n    event => {\n      const newValue = event.target.value;\n      setCurrentValue(newValue);\n      onChange(newValue);\n    },\n    [onChange]\n  );\n\n  const InputControl = showIcon ? Input.Search : Input;\n  return (\n    <div className=\"m-b-10\">\n      <InputControl className=\"form-control\" placeholder={placeholder} value={currentValue} onChange={onInputChange} />\n    </div>\n  );\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  value: PropTypes.string.isRequired,\n  showIcon: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n};\n\nSearchInput.defaultProps = {\n  placeholder: \"Search...\",\n  showIcon: false,\n};\n\n/*\n    Menu\n */\n\nexport function Menu({ items, selected }) {\n  items = filter(items, item => (isFunction(item.isAvailable) ? item.isAvailable() : true));\n  if (items.length === 0) {\n    return null;\n  }\n  return (\n    <div className=\"m-b-10 tags-list tiled\">\n      <AntdMenu className=\"invert-stripe-position\" mode=\"inline\" selectable={false} selectedKeys={[selected]}>\n        {map(items, item => (\n          <AntdMenu.Item key={item.key} className=\"m-0\">\n            <a href={item.href}>\n              {isString(item.icon) && item.icon !== \"\" && (\n                <span className=\"btn-favourite m-r-5\">\n                  <i className={item.icon} aria-hidden=\"true\" />\n                </span>\n              )}\n              {isFunction(item.icon) && (item.icon(item) || null)}\n              {item.title}\n            </a>\n          </AntdMenu.Item>\n        ))}\n      </AntdMenu>\n    </div>\n  );\n}\n\nMenu.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.string.isRequired,\n      href: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      icon: PropTypes.func, // function to render icon\n      isAvailable: PropTypes.func, // return `true` to show item and `false` to hide; if omitted: show item\n    })\n  ),\n  selected: PropTypes.string,\n};\n\nMenu.defaultProps = {\n  items: [],\n  selected: null,\n};\n\n/*\n    MenuIcon\n */\n\nexport function MenuIcon({ icon }) {\n  return (\n    <span className=\"btn-favourite m-r-5\">\n      <i className={icon} aria-hidden=\"true\" />\n    </span>\n  );\n}\n\nMenuIcon.propTypes = {\n  icon: PropTypes.string.isRequired,\n};\n\n/*\n    ProfileImage\n */\n\nexport function ProfileImage({ user }) {\n  if (!isString(user.profile_image_url) || user.profile_image_url === \"\") {\n    return null;\n  }\n  return <img src={user.profile_image_url} className=\"profile__image--sidebar m-r-5\" width=\"13\" alt={user.name} />;\n}\n\nProfileImage.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string,\n    name: PropTypes.string,\n  }).isRequired,\n};\n\n/*\n    Tags\n */\n\nexport function Tags({ url, onChange }) {\n  if (url === \"\") {\n    return null;\n  }\n  return (\n    <div className=\"m-b-10\">\n      <TagsList tagsUrl={url} onUpdate={onChange} />\n    </div>\n  );\n}\n\nTags.propTypes = {\n  url: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\n/*\n    PageSizeSelect\n */\n\nexport function PageSizeSelect({ options, value, onChange, ...props }) {\n  return (\n    <div {...props}>\n      <Select className=\"w-100\" defaultValue={value} onChange={onChange}>\n        {map(options, option => (\n          <Select.Option key={option} value={option}>\n            {option} results\n          </Select.Option>\n        ))}\n      </Select>\n    </div>\n  );\n}\n\nPageSizeSelect.propTypes = {\n  options: PropTypes.arrayOf(PropTypes.number).isRequired,\n  value: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport { axios } from \"@/services/axios\";\n\nimport Switch from \"antd/lib/switch\";\nimport * as Grid from \"antd/lib/grid\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Paginator from \"@/components/Paginator\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport Layout from \"@/components/admin/Layout\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport { PageSizeSelect } from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport { Query } from \"@/services/query\";\nimport recordEvent from \"@/services/recordEvent\";\n\nclass OutdatedQueries extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    {\n      title: \"ID\",\n      field: \"id\",\n      width: \"1%\",\n      align: \"right\",\n      sorter: true,\n    },\n    Columns.custom.sortable(\n      (text, item) => (\n        <React.Fragment>\n          <a className=\"table-main-title\" href={\"queries/\" + item.id}>\n            {item.name}\n          </a>\n          <QueryTagsControl\n            className=\"d-block\"\n            tags={item.tags}\n            isDraft={item.is_draft}\n            isArchived={item.is_archived}\n          />\n        </React.Fragment>\n      ),\n      {\n        title: \"Name\",\n        field: \"name\",\n        width: null,\n      }\n    ),\n    Columns.avatar({ field: \"user\", className: \"p-l-0 p-r-0\" }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({ title: \"Created At\", field: \"created_at\" }),\n    Columns.duration.sortable({ title: \"Runtime\", field: \"runtime\" }),\n    Columns.dateTime.sortable({ title: \"Last Executed At\", field: \"retrieved_at\", orderByField: \"executed_at\" }),\n    Columns.custom.sortable((text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />, {\n      title: \"Update Schedule\",\n      field: \"schedule\",\n    }),\n  ];\n\n  state = {\n    autoUpdate: true,\n  };\n\n  _updateTimer = null;\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"admin/queries/outdated\");\n    this.update(true);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._updateTimer);\n  }\n\n  update = (isInitialCall = false) => {\n    if (!isInitialCall && this.state.autoUpdate) {\n      this.props.controller.update();\n    }\n    this._updateTimer = setTimeout(this.update, 60 * 1000);\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <Layout activeTab={controller.params.currentPage}>\n        <Grid.Row className=\"m-15\">\n          <Grid.Col span={16}>\n            <div>\n              <label htmlFor=\"auto-update-switch\" className=\"m-0\">\n                Auto update\n              </label>\n              <Switch\n                id=\"auto-update-switch\"\n                className=\"m-l-10\"\n                checked={this.state.autoUpdate}\n                onChange={autoUpdate => this.setState({ autoUpdate })}\n              />\n            </div>\n            {controller.params.lastUpdatedAt && (\n              <div className=\"m-t-5\">\n                Last updated: <TimeAgo date={controller.params.lastUpdatedAt * 1000} />\n              </div>\n            )}\n          </Grid.Col>\n          <Grid.Col span={8}>\n            {controller.isLoaded && !controller.isEmpty && (\n              <PageSizeSelect\n                options={controller.pageSizeOptions}\n                value={controller.itemsPerPage}\n                onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              />\n            )}\n          </Grid.Col>\n        </Grid.Row>\n        {!controller.isLoaded && <LoadingState />}\n        {controller.isLoaded && controller.isEmpty && (\n          <div className=\"text-center p-15\">There are no outdated queries.</div>\n        )}\n        {controller.isLoaded && !controller.isEmpty && (\n          <div className=\"bg-white tiled table-responsive\">\n            <ItemsTable\n              items={controller.pageItems}\n              columns={this.listColumns}\n              orderByField={controller.orderByField}\n              orderByReverse={controller.orderByReverse}\n              toggleSorting={controller.toggleSorting}\n            />\n            <Paginator\n              totalCount={controller.totalItemsCount}\n              itemsPerPage={controller.itemsPerPage}\n              page={controller.page}\n              onChange={page => controller.updatePagination({ page })}\n            />\n          </div>\n        )}\n      </Layout>\n    );\n  }\n}\n\nconst OutdatedQueriesPage = itemsList(\n  OutdatedQueries,\n  () =>\n    new ItemsSource({\n      doRequest(request, context) {\n        return (\n          axios\n            .get(\"/api/admin/queries/outdated\")\n            // eslint-disable-next-line camelcase\n            .then(({ queries, updated_at }) => {\n              context.setCustomParams({ lastUpdatedAt: parseFloat(updated_at) });\n              return queries;\n            })\n        );\n      },\n      processResults(items) {\n        return map(items, item => new Query(item));\n      },\n      isPlainList: true,\n    }),\n  () => new StateStorage({ orderByField: \"created_at\", orderByReverse: true })\n);\n\nexport default routeWithUserSession({\n  path: \"/admin/queries/outdated\",\n  title: \"Outdated Queries\",\n  render: pageProps => <OutdatedQueriesPage {...pageProps} currentPage=\"outdated_queries\" />,\n});\n","/* eslint-disable react/prop-types */\n\nimport { toPairs } from \"lodash\";\nimport React from \"react\";\n\nimport List from \"antd/lib/list\";\nimport Card from \"antd/lib/card\";\nimport TimeAgo from \"@/components/TimeAgo\";\n\nimport { toHuman, prettySize } from \"@/lib/utils\";\n\nexport function General({ info }) {\n  info = toPairs(info);\n  return (\n    <Card title=\"General\" size=\"small\">\n      {info.length === 0 && <div className=\"text-muted text-center\">No data</div>}\n      {info.length > 0 && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, value]) => (\n            <List.Item extra={<span className=\"badge\">{value}</span>}>{toHuman(name)}</List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function DatabaseMetrics({ info }) {\n  return (\n    <Card title=\"Redash Database\" size=\"small\">\n      {info.length === 0 && <div className=\"text-muted text-center\">No data</div>}\n      {info.length > 0 && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, size]) => (\n            <List.Item extra={<span className=\"badge\">{prettySize(size)}</span>}>{name}</List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function Queues({ info }) {\n  info = toPairs(info);\n  return (\n    <Card title=\"Queues\" size=\"small\">\n      {info.length === 0 && <div className=\"text-muted text-center\">No data</div>}\n      {info.length > 0 && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, queue]) => (\n            <List.Item extra={<span className=\"badge\">{queue.size}</span>}>{name}</List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function Manager({ info }) {\n  const items = info\n    ? [\n        <List.Item\n          extra={\n            <span className=\"badge\">\n              <TimeAgo date={info.lastRefreshAt} placeholder=\"n/a\" />\n            </span>\n          }>\n          Last Refresh\n        </List.Item>,\n        <List.Item\n          extra={\n            <span className=\"badge\">\n              <TimeAgo date={info.startedAt} placeholder=\"n/a\" />\n            </span>\n          }>\n          Started\n        </List.Item>,\n        <List.Item extra={<span className=\"badge\">{info.outdatedQueriesCount}</span>}>\n          Outdated Queries Count\n        </List.Item>,\n      ]\n    : [];\n\n  return (\n    <Card title=\"Manager\" size=\"small\">\n      {!info && <div className=\"text-muted text-center\">No data</div>}\n      {info && <List size=\"small\" itemLayout=\"vertical\" dataSource={items} renderItem={item => item} />}\n    </Card>\n  );\n}\n","import { omit } from \"lodash\";\nimport React from \"react\";\nimport { axios } from \"@/services/axios\";\nimport PropTypes from \"prop-types\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Layout from \"@/components/admin/Layout\";\nimport * as StatusBlock from \"@/components/admin/StatusBlock\";\nimport recordEvent from \"@/services/recordEvent\";\n\nimport \"./system-status.less\";\n\nclass SystemStatus extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    queues: [],\n    manager: null,\n    databaseMetrics: {},\n    status: {},\n  };\n\n  _refreshTimer = null;\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"admin/status\");\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._refreshTimer);\n  }\n\n  refresh = () => {\n    axios\n      .get(\"/status.json\")\n      .then(data => {\n        this.setState({\n          queues: data.manager.queues,\n          manager: {\n            startedAt: data.manager.started_at * 1000,\n            lastRefreshAt: data.manager.last_refresh_at * 1000,\n            outdatedQueriesCount: data.manager.outdated_queries_count,\n          },\n          databaseMetrics: data.database_metrics.metrics || [],\n          status: omit(data, [\"workers\", \"manager\", \"database_metrics\"]),\n        });\n      })\n      .catch(error => this.props.onError(error));\n    this._refreshTimer = setTimeout(this.refresh, 60 * 1000);\n  };\n\n  render() {\n    return (\n      <Layout activeTab=\"system_status\">\n        <div className=\"system-status-page\">\n          <div className=\"system-status-page-blocks\">\n            <div className=\"system-status-page-block\">\n              <StatusBlock.General info={this.state.status} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.Manager info={this.state.manager} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.Queues info={this.state.queues} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.DatabaseMetrics info={this.state.databaseMetrics} />\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default routeWithUserSession({\n  path: \"/admin/status\",\n  title: \"System Status\",\n  render: pageProps => <SystemStatus {...pageProps} />,\n});\n","import notification from \"antd/lib/notification\";\n\nnotification.config({\n  placement: \"bottomRight\",\n  duration: 3,\n});\n\nconst simpleNotification = {};\n\n[\"success\", \"error\", \"info\", \"warning\", \"warn\"].forEach(action => {\n  // eslint-disable-next-line arrow-body-style\n  simpleNotification[action] = (message, description = null, props = null) => {\n    return notification[action]({ ...props, message, description });\n  };\n});\n\nexport default {\n  // export Ant's notification and replace actions\n  ...notification,\n  ...simpleNotification,\n};\n","import { axios } from \"@/services/axios\";\nimport { merge } from \"lodash\";\n\n// backwards compatibility\nconst normalizeCondition = {\n  \"greater than\": \">\",\n  \"less than\": \"<\",\n  equals: \"=\",\n};\n\nconst transformResponse = data =>\n  merge({}, data, {\n    options: {\n      op: normalizeCondition[data.options.op] || data.options.op,\n    },\n  });\n\nconst transformRequest = data => {\n  const newData = Object.assign({}, data);\n  if (newData.query_id === undefined) {\n    newData.query_id = newData.query.id;\n    newData.destination_id = newData.destinations;\n    delete newData.query;\n    delete newData.destinations;\n  }\n\n  return newData;\n};\n\nconst saveOrCreateUrl = data => (data.id ? `api/alerts/${data.id}` : \"api/alerts\");\n\nconst Alert = {\n  query: () => axios.get(\"api/alerts\"),\n  get: ({ id }) => axios.get(`api/alerts/${id}`).then(transformResponse),\n  save: data => axios.post(saveOrCreateUrl(data), transformRequest(data)),\n  delete: data => axios.delete(`api/alerts/${data.id}`),\n  mute: data => axios.post(`api/alerts/${data.id}/mute`),\n  unmute: data => axios.delete(`api/alerts/${data.id}/mute`),\n};\n\nexport default Alert;\n","import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport Modal from \"antd/lib/modal\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Button from \"antd/lib/button\";\nimport Icon from \"antd/lib/icon\";\n\nexport default function MenuButton({ doDelete, canEdit, mute, unmute, muted }) {\n  const [loading, setLoading] = useState(false);\n\n  const execute = useCallback(action => {\n    setLoading(true);\n    action().finally(() => {\n      setLoading(false);\n    });\n  }, []);\n\n  const confirmDelete = useCallback(() => {\n    Modal.confirm({\n      title: \"Delete Alert\",\n      content: \"Are you sure you want to delete this alert?\",\n      okText: \"Delete\",\n      okType: \"danger\",\n      onOk: () => {\n        setLoading(true);\n        doDelete().catch(() => {\n          setLoading(false);\n        });\n      },\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  }, [doDelete]);\n\n  return (\n    <Dropdown\n      className={cx(\"m-l-5\", { disabled: !canEdit })}\n      trigger={[canEdit ? \"click\" : undefined]}\n      placement=\"bottomRight\"\n      overlay={\n        <Menu>\n          <Menu.Item>\n            {muted ? (\n              <a onClick={() => execute(unmute)}>Unmute Notifications</a>\n            ) : (\n              <a onClick={() => execute(mute)}>Mute Notifications</a>\n            )}\n          </Menu.Item>\n          <Menu.Item>\n            <a onClick={confirmDelete}>Delete Alert</a>\n          </Menu.Item>\n        </Menu>\n      }>\n      <Button>{loading ? <Icon type=\"loading\" /> : <Icon type=\"ellipsis\" rotate={90} />}</Button>\n    </Dropdown>\n  );\n}\n\nMenuButton.propTypes = {\n  doDelete: PropTypes.func.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  mute: PropTypes.func.isRequired,\n  unmute: PropTypes.func.isRequired,\n  muted: PropTypes.bool,\n};\n\nMenuButton.defaultProps = {\n  muted: false,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Input from \"antd/lib/input\";\nimport { getDefaultName } from \"../Alert\";\n\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport \"./Title.less\";\n\nexport default function Title({ alert, editMode, name, onChange, children }) {\n  const defaultName = getDefaultName(alert);\n  return (\n    <div className=\"alert-header\">\n      <div className=\"alert-title\">\n        <h3>\n          {editMode && alert.query ? (\n            <Input\n              className=\"f-inherit\"\n              placeholder={defaultName}\n              value={name}\n              onChange={e => onChange(e.target.value)}\n            />\n          ) : (\n            name || defaultName\n          )}\n        </h3>\n      </div>\n      <div className=\"alert-actions\">{children}</div>\n    </div>\n  );\n}\n\nTitle.propTypes = {\n  alert: AlertType.isRequired,\n  name: PropTypes.string,\n  children: PropTypes.node,\n  onChange: PropTypes.func,\n  editMode: PropTypes.bool,\n};\n\nTitle.defaultProps = {\n  name: null,\n  children: null,\n  onChange: null,\n  editMode: false,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { head, includes, toString, isEmpty } from \"lodash\";\n\nimport Input from \"antd/lib/input\";\nimport Icon from \"antd/lib/icon\";\nimport Select from \"antd/lib/select\";\nimport Divider from \"antd/lib/divider\";\n\nimport { AlertOptions as AlertOptionsType } from \"@/components/proptypes\";\n\nimport \"./Criteria.less\";\n\nconst CONDITIONS = {\n  \">\": \"\\u003e\",\n  \">=\": \"\\u2265\",\n  \"<\": \"\\u003c\",\n  \"<=\": \"\\u2264\",\n  \"==\": \"\\u003d\",\n  \"!=\": \"\\u2260\",\n};\n\nconst VALID_STRING_CONDITIONS = [\"==\", \"!=\"];\n\nfunction DisabledInput({ children, minWidth }) {\n  return (\n    <div className=\"criteria-disabled-input\" style={{ minWidth }}>\n      {children}\n    </div>\n  );\n}\n\nDisabledInput.propTypes = {\n  children: PropTypes.node.isRequired,\n  minWidth: PropTypes.number.isRequired,\n};\n\nexport default function Criteria({ columnNames, resultValues, alertOptions, onChange, editMode }) {\n  const columnValue = !isEmpty(resultValues) ? head(resultValues)[alertOptions.column] : null;\n  const invalidMessage = (() => {\n    // bail if condition is valid for strings\n    if (includes(VALID_STRING_CONDITIONS, alertOptions.op)) {\n      return null;\n    }\n\n    if (isNaN(alertOptions.value)) {\n      return \"Value column type doesn't match threshold type.\";\n    }\n\n    if (isNaN(columnValue)) {\n      return \"Value column isn't supported by condition type.\";\n    }\n\n    return null;\n  })();\n\n  const columnHint = (\n    <small className=\"alert-criteria-hint\">\n      Top row value is <code className=\"p-0\">{toString(columnValue) || \"unknown\"}</code>\n    </small>\n  );\n\n  return (\n    <div data-test=\"Criteria\">\n      <div className=\"input-title\">\n        <span>Value column</span>\n        {editMode ? (\n          <Select\n            value={alertOptions.column}\n            onChange={column => onChange({ column })}\n            dropdownMatchSelectWidth={false}\n            style={{ minWidth: 100 }}>\n            {columnNames.map(name => (\n              <Select.Option key={name}>{name}</Select.Option>\n            ))}\n          </Select>\n        ) : (\n          <DisabledInput minWidth={70}>{alertOptions.column}</DisabledInput>\n        )}\n      </div>\n      <div className=\"input-title\">\n        <span>Condition</span>\n        {editMode ? (\n          <Select\n            value={alertOptions.op}\n            onChange={op => onChange({ op })}\n            optionLabelProp=\"label\"\n            dropdownMatchSelectWidth={false}\n            style={{ width: 55 }}>\n            <Select.Option value=\">\" label={CONDITIONS[\">\"]}>\n              {CONDITIONS[\">\"]} greater than\n            </Select.Option>\n            <Select.Option value=\">=\" label={CONDITIONS[\">=\"]}>\n              {CONDITIONS[\">=\"]} greater than or equals\n            </Select.Option>\n            <Select.Option disabled key=\"dv1\">\n              <Divider className=\"select-option-divider m-t-10 m-b-5\" />\n            </Select.Option>\n            <Select.Option value=\"<\" label={CONDITIONS[\"<\"]}>\n              {CONDITIONS[\"<\"]} less than\n            </Select.Option>\n            <Select.Option value=\"<=\" label={CONDITIONS[\"<=\"]}>\n              {CONDITIONS[\"<=\"]} less than or equals\n            </Select.Option>\n            <Select.Option disabled key=\"dv2\">\n              <Divider className=\"select-option-divider m-t-10 m-b-5\" />\n            </Select.Option>\n            <Select.Option value=\"==\" label={CONDITIONS[\"==\"]}>\n              {CONDITIONS[\"==\"]} equals\n            </Select.Option>\n            <Select.Option value=\"!=\" label={CONDITIONS[\"!=\"]}>\n              {CONDITIONS[\"!=\"]} not equal to\n            </Select.Option>\n          </Select>\n        ) : (\n          <DisabledInput minWidth={50}>{CONDITIONS[alertOptions.op]}</DisabledInput>\n        )}\n      </div>\n      <div className=\"input-title\">\n        <span>Threshold</span>\n        {editMode ? (\n          <Input style={{ width: 90 }} value={alertOptions.value} onChange={e => onChange({ value: e.target.value })} />\n        ) : (\n          <DisabledInput minWidth={50}>{alertOptions.value}</DisabledInput>\n        )}\n      </div>\n      <div className=\"ant-form-explain\">\n        {columnHint}\n        <br />\n        {invalidMessage && (\n          <small>\n            <Icon type=\"warning\" theme=\"filled\" className=\"warning-icon-danger\" /> {invalidMessage}\n          </small>\n        )}\n      </div>\n    </div>\n  );\n}\n\nCriteria.propTypes = {\n  columnNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  resultValues: PropTypes.arrayOf(PropTypes.object).isRequired,\n  alertOptions: AlertOptionsType.isRequired,\n  onChange: PropTypes.func,\n  editMode: PropTypes.bool,\n};\n\nCriteria.defaultProps = {\n  onChange: () => {},\n  editMode: false,\n};\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { toLower, isNumber } from \"lodash\";\n\nimport InputNumber from \"antd/lib/input-number\";\nimport Select from \"antd/lib/select\";\n\nimport \"./Rearm.less\";\n\nconst DURATIONS = [\n  [\"Second\", 1],\n  [\"Minute\", 60],\n  [\"Hour\", 3600],\n  [\"Day\", 86400],\n  [\"Week\", 604800],\n];\n\nfunction RearmByDuration({ value, onChange, editMode }) {\n  const [durationIdx, setDurationIdx] = useState();\n  const [count, setCount] = useState();\n\n  useEffect(() => {\n    for (let i = DURATIONS.length - 1; i >= 0; i -= 1) {\n      const [, durValue] = DURATIONS[i];\n      if (value % durValue === 0) {\n        setDurationIdx(i);\n        setCount(value / durValue);\n        break;\n      }\n    }\n  }, [value]);\n\n  if (!isNumber(count) || !isNumber(durationIdx)) {\n    return null;\n  }\n\n  const onChangeCount = newCount => {\n    setCount(newCount);\n    onChange(newCount * DURATIONS[durationIdx][1]);\n  };\n\n  const onChangeIdx = newIdx => {\n    setDurationIdx(newIdx);\n    onChange(count * DURATIONS[newIdx][1]);\n  };\n\n  const plural = count !== 1 ? \"s\" : \"\";\n\n  if (editMode) {\n    return (\n      <>\n        <InputNumber value={count} onChange={onChangeCount} min={1} precision={0} />\n        <Select value={durationIdx} onChange={onChangeIdx}>\n          {DURATIONS.map(([name], idx) => (\n            <Select.Option value={idx} key={name}>\n              {name}\n              {plural}\n            </Select.Option>\n          ))}\n        </Select>\n      </>\n    );\n  }\n\n  const [name] = DURATIONS[durationIdx];\n  return count + \" \" + toLower(name) + plural;\n}\n\nRearmByDuration.propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n};\n\nRearmByDuration.defaultProps = {\n  onChange: () => {},\n};\n\nfunction RearmEditor({ value, onChange }) {\n  const [selected, setSelected] = useState(value < 2 ? value : 2);\n\n  const _onChange = newSelected => {\n    setSelected(newSelected);\n    onChange(newSelected < 2 ? newSelected : 3600);\n  };\n\n  return (\n    <div className=\"alert-rearm\">\n      <Select\n        optionLabelProp=\"label\"\n        defaultValue={selected || 0}\n        dropdownMatchSelectWidth={false}\n        onChange={_onChange}>\n        <Select.Option value={0} label=\"Just once\">\n          Just once <em>until back to normal</em>\n        </Select.Option>\n        <Select.Option value={1} label=\"Each time alert is evaluated\">\n          Each time alert is evaluated <em>until back to normal</em>\n        </Select.Option>\n        <Select.Option value={2} label=\"At most every\">\n          At most every ... <em>when alert is evaluated</em>\n        </Select.Option>\n      </Select>\n      {selected === 2 && value && <RearmByDuration value={value} onChange={onChange} editMode />}\n    </div>\n  );\n}\n\nRearmEditor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction RearmViewer({ value }) {\n  let phrase = \"\";\n  switch (value) {\n    case 0:\n      phrase = \"just once, until back to normal\";\n      break;\n    case 1:\n      phrase = \"each time alert is evaluated, until back to normal\";\n      break;\n    default:\n      phrase = (\n        <>\n          at most every <RearmByDuration value={value} editMode={false} />, when alert is evaluated\n        </>\n      );\n  }\n\n  return <span>Notifications are sent {phrase}.</span>;\n}\n\nRearmViewer.propTypes = {\n  value: PropTypes.number.isRequired,\n};\n\nexport default function Rearm({ editMode, ...props }) {\n  return editMode ? <RearmEditor {...props} /> : <RearmViewer {...props} />;\n}\n\nRearm.propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.number.isRequired,\n  editMode: PropTypes.bool,\n};\n\nRearm.defaultProps = {\n  onChange: null,\n  editMode: false,\n};\n","import { useState, useEffect, useRef } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\nexport default function useSearchResults(fetch, { initialResults = null, debounceTimeout = 200 } = {}) {\n  const [result, setResult] = useState(initialResults);\n  const [isLoading, setIsLoading] = useState(false);\n  const currentSearchTerm = useRef(null);\n  const isDestroyed = useRef(false);\n\n  const [doSearch] = useDebouncedCallback(searchTerm => {\n    setIsLoading(true);\n    currentSearchTerm.current = searchTerm;\n    fetch(searchTerm)\n      .catch(() => initialResults)\n      .then(data => {\n        if (searchTerm === currentSearchTerm.current && !isDestroyed.current) {\n          setResult(data);\n          setIsLoading(false);\n        }\n      });\n  }, debounceTimeout);\n\n  useEffect(\n    () =>\n      // ignore all requests after component destruction\n      () => {\n        isDestroyed.current = true;\n      },\n    []\n  );\n\n  return [doSearch, result, isLoading];\n}\n","import { find } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Input from \"antd/lib/input\";\nimport Select from \"antd/lib/select\";\nimport { Query } from \"@/services/query\";\nimport notification from \"@/services/notification\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport useSearchResults from \"@/lib/hooks/useSearchResults\";\n\nconst { Option } = Select;\nfunction search(term) {\n  if (term === null) {\n    return Promise.resolve(null);\n  }\n\n  // get recent\n  if (!term) {\n    return Query.recent().then(results => results.filter(item => !item.is_draft)); // filter out draft\n  }\n\n  // search by query\n  return Query.query({ q: term }).then(({ results }) => results);\n}\n\nexport default function QuerySelector(props) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedQuery, setSelectedQuery] = useState();\n  const [doSearch, searchResults, searching] = useSearchResults(search, { initialResults: [] });\n\n  const placeholder = \"Search a query by name\";\n  const clearIcon = <i className=\"fa fa-times hide-in-percy\" onClick={() => selectQuery(null)} />;\n  const spinIcon = <i className={cx(\"fa fa-spinner fa-pulse hide-in-percy\", { hidden: !searching })} />;\n\n  useEffect(() => {\n    doSearch(searchTerm);\n  }, [doSearch, searchTerm]);\n\n  // set selected from prop\n  useEffect(() => {\n    if (props.selectedQuery) {\n      setSelectedQuery(props.selectedQuery);\n    }\n  }, [props.selectedQuery]);\n\n  function selectQuery(queryId) {\n    let query = null;\n    if (queryId) {\n      query = find(searchResults, { id: queryId });\n      if (!query) {\n        // shouldn't happen\n        notification.error(\"Something went wrong...\", \"Couldn't select query\");\n      }\n    }\n\n    setSearchTerm(query ? null : \"\"); // empty string triggers recent fetch\n    setSelectedQuery(query);\n    props.onChange(query);\n  }\n\n  function renderResults() {\n    if (!searchResults.length) {\n      return <div className=\"text-muted\">No results matching search term.</div>;\n    }\n\n    return (\n      <div className=\"list-group\">\n        {searchResults.map(q => (\n          <a\n            className={cx(\"query-selector-result\", \"list-group-item\", { inactive: q.is_draft })}\n            key={q.id}\n            onClick={() => selectQuery(q.id)}\n            data-test={`QueryId${q.id}`}>\n            {q.name} <QueryTagsControl isDraft={q.is_draft} tags={q.tags} className=\"inline-tags-control\" />\n          </a>\n        ))}\n      </div>\n    );\n  }\n\n  if (props.disabled) {\n    return <Input value={selectedQuery && selectedQuery.name} placeholder={placeholder} disabled />;\n  }\n\n  if (props.type === \"select\") {\n    const suffixIcon = selectedQuery ? clearIcon : null;\n    const value = selectedQuery ? selectedQuery.name : searchTerm;\n\n    return (\n      <Select\n        showSearch\n        dropdownMatchSelectWidth={false}\n        placeholder={placeholder}\n        value={value || undefined} // undefined for the placeholder to show\n        onSearch={setSearchTerm}\n        onChange={selectQuery}\n        suffixIcon={searching ? spinIcon : suffixIcon}\n        notFoundContent={null}\n        filterOption={false}\n        defaultActiveFirstOption={false}\n        className={props.className}\n        data-test=\"QuerySelector\">\n        {searchResults &&\n          searchResults.map(q => {\n            const disabled = q.is_draft;\n            return (\n              <Option\n                value={q.id}\n                key={q.id}\n                disabled={disabled}\n                className=\"query-selector-result\"\n                data-test={`QueryId${q.id}`}>\n                {q.name}{\" \"}\n                <QueryTagsControl\n                  isDraft={q.is_draft}\n                  tags={q.tags}\n                  className={cx(\"inline-tags-control\", { disabled })}\n                />\n              </Option>\n            );\n          })}\n      </Select>\n    );\n  }\n\n  return (\n    <span data-test=\"QuerySelector\">\n      {selectedQuery ? (\n        <Input value={selectedQuery.name} suffix={clearIcon} readOnly />\n      ) : (\n        <Input\n          placeholder={placeholder}\n          value={searchTerm}\n          onChange={e => setSearchTerm(e.target.value)}\n          suffix={spinIcon}\n        />\n      )}\n      <div className=\"scrollbox\" style={{ maxHeight: \"50vh\", marginTop: 15 }}>\n        {searchResults && renderResults()}\n      </div>\n    </span>\n  );\n}\n\nQuerySelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selectedQuery: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  type: PropTypes.oneOf([\"select\", \"default\"]),\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n};\n\nQuerySelector.defaultProps = {\n  selectedQuery: null,\n  type: \"default\",\n  className: null,\n  disabled: false,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport QuerySelector from \"@/components/QuerySelector\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\nimport { Query as QueryType } from \"@/components/proptypes\";\n\nimport Tooltip from \"antd/lib/tooltip\";\nimport Icon from \"antd/lib/icon\";\n\nimport \"./Query.less\";\n\nexport default function QueryFormItem({ query, queryResult, onChange, editMode }) {\n  const queryHint =\n    query && query.schedule ? (\n      <small>\n        Scheduled to refresh{\" \"}\n        <i className=\"alert-query-schedule\">\n          <SchedulePhrase schedule={query.schedule} isNew={false} />\n        </i>\n      </small>\n    ) : (\n      <small>\n        <Icon type=\"warning\" theme=\"filled\" className=\"warning-icon-danger\" /> This query has no <i>refresh schedule</i>\n        .{\" \"}\n        <Tooltip title=\"A query schedule is not necessary but is highly recommended for alerts. An Alert without a query schedule will only send notifications if a user in your organization manually executes this query.\">\n          <a>\n            Why it&apos;s recommended <Icon type=\"question-circle\" theme=\"twoTone\" />\n          </a>\n        </Tooltip>\n      </small>\n    );\n\n  return (\n    <>\n      {editMode ? (\n        <QuerySelector onChange={onChange} selectedQuery={query} className=\"alert-query-selector\" type=\"select\" />\n      ) : (\n        <Tooltip title=\"Open query in a new tab.\">\n          <a href={`queries/${query.id}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"alert-query-link\">\n            {query.name}\n            <i className=\"fa fa-external-link\" />\n          </a>\n        </Tooltip>\n      )}\n      <div className=\"ant-form-explain\">{query && queryHint}</div>\n      {query && !queryResult && (\n        <div className=\"m-t-30\">\n          <Icon type=\"loading\" className=\"m-r-5\" /> Loading query data\n        </div>\n      )}\n    </>\n  );\n}\n\nQueryFormItem.propTypes = {\n  query: QueryType,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  onChange: PropTypes.func,\n  editMode: PropTypes.bool,\n};\n\nQueryFormItem.defaultProps = {\n  query: null,\n  queryResult: null,\n  onChange: () => {},\n  editMode: false,\n};\n","import { filter, find, isEmpty, size } from \"lodash\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport List from \"antd/lib/list\";\nimport Button from \"antd/lib/button\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport BigMessage from \"@/components/BigMessage\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport notification from \"@/services/notification\";\nimport useSearchResults from \"@/lib/hooks/useSearchResults\";\n\nfunction ItemsList({ items, renderItem, onItemClick }) {\n  const renderListItem = useCallback(\n    item => {\n      const { content, className, isDisabled } = renderItem(item);\n      return (\n        <List.Item\n          className={classNames(\"p-l-10\", \"p-r-10\", { clickable: !isDisabled, disabled: isDisabled }, className)}\n          onClick={isDisabled ? null : () => onItemClick(item)}>\n          {content}\n        </List.Item>\n      );\n    },\n    [renderItem, onItemClick]\n  );\n\n  return <List size=\"small\" dataSource={items} renderItem={renderListItem} />;\n}\n\nItemsList.propTypes = {\n  items: PropTypes.array,\n  renderItem: PropTypes.func,\n  onItemClick: PropTypes.func,\n};\n\nItemsList.defaultProps = {\n  items: [],\n  renderItem: () => {},\n  onItemClick: () => {},\n};\n\nfunction SelectItemsDialog({\n  dialog,\n  dialogTitle,\n  inputPlaceholder,\n  itemKey,\n  renderItem,\n  renderStagedItem,\n  searchItems,\n  selectedItemsTitle,\n  width,\n  showCount,\n  extraFooterContent,\n}) {\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [search, items, isLoading] = useSearchResults(searchItems, { initialResults: [] });\n  const hasResults = items.length > 0;\n\n  useEffect(() => {\n    search();\n  }, [search]);\n\n  const isItemSelected = useCallback(\n    item => {\n      const key = itemKey(item);\n      return !!find(selectedItems, i => itemKey(i) === key);\n    },\n    [selectedItems, itemKey]\n  );\n\n  const toggleItem = useCallback(\n    item => {\n      if (isItemSelected(item)) {\n        const key = itemKey(item);\n        setSelectedItems(filter(selectedItems, i => itemKey(i) !== key));\n      } else {\n        setSelectedItems([...selectedItems, item]);\n      }\n    },\n    [selectedItems, itemKey, isItemSelected]\n  );\n\n  const save = useCallback(() => {\n    dialog.close(selectedItems).catch(error => {\n      if (error) {\n        notification.error(\"Failed to save some of selected items.\");\n      }\n    });\n  }, [dialog, selectedItems]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      className=\"select-items-dialog\"\n      width={width}\n      title={dialogTitle}\n      footer={\n        <div className=\"d-flex align-items-center\">\n          <span className=\"flex-fill m-r-5\" style={{ textAlign: \"left\", color: \"rgba(0, 0, 0, 0.5)\" }}>\n            {extraFooterContent}\n          </span>\n          <Button {...dialog.props.cancelButtonProps} onClick={dialog.dismiss}>\n            Cancel\n          </Button>\n          <Button\n            {...dialog.props.okButtonProps}\n            onClick={save}\n            disabled={selectedItems.length === 0 || dialog.props.okButtonProps.disabled}\n            type=\"primary\">\n            Save\n            {showCount && !isEmpty(selectedItems) ? ` (${size(selectedItems)})` : null}\n          </Button>\n        </div>\n      }>\n      <div className=\"d-flex align-items-center m-b-10\">\n        <div className=\"flex-fill\">\n          <Input.Search onChange={event => search(event.target.value)} placeholder={inputPlaceholder} autoFocus />\n        </div>\n        {renderStagedItem && (\n          <div className=\"w-50 m-l-20\">\n            <h5 className=\"m-0\">{selectedItemsTitle}</h5>\n          </div>\n        )}\n      </div>\n\n      <div className=\"d-flex align-items-stretch\" style={{ minHeight: \"30vh\", maxHeight: \"50vh\" }}>\n        <div className=\"flex-fill scrollbox\">\n          {isLoading && <LoadingState className=\"\" />}\n          {!isLoading && !hasResults && (\n            <BigMessage icon=\"fa-search\" message=\"No items match your search.\" className=\"\" />\n          )}\n          {!isLoading && hasResults && (\n            <ItemsList\n              items={items}\n              renderItem={item => renderItem(item, { isSelected: isItemSelected(item) })}\n              onItemClick={toggleItem}\n            />\n          )}\n        </div>\n        {renderStagedItem && (\n          <div className=\"w-50 m-l-20 scrollbox\">\n            {selectedItems.length > 0 && (\n              <ItemsList\n                items={selectedItems}\n                renderItem={item => renderStagedItem(item, { isSelected: true })}\n                onItemClick={toggleItem}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nSelectItemsDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  dialogTitle: PropTypes.string,\n  inputPlaceholder: PropTypes.string,\n  selectedItemsTitle: PropTypes.string,\n  searchItems: PropTypes.func.isRequired, // (searchTerm: string): Promise<Items[]> if `searchTerm === ''` load all\n  itemKey: PropTypes.func, // (item) => string|number - return key of item (by default `id`)\n  // left list\n  // (item, { isSelected }) => {\n  //   content: node, // item contents\n  //   className: string = '', // additional class for item wrapper\n  //   isDisabled: bool = false, // is item clickable or disabled\n  // }\n  renderItem: PropTypes.func,\n  // right list; args/results save as for `renderItem`. if not specified - `renderItem` will be used\n  renderStagedItem: PropTypes.func,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  extraFooterContent: PropTypes.node,\n  showCount: PropTypes.bool,\n};\n\nSelectItemsDialog.defaultProps = {\n  dialogTitle: \"Add Items\",\n  inputPlaceholder: \"Search...\",\n  selectedItemsTitle: \"Selected items\",\n  itemKey: item => item.id,\n  renderItem: () => \"\",\n  renderStagedItem: null, // hidden by default\n  width: \"80%\",\n  extraFooterContent: null,\n  showCount: false,\n};\n\nexport default wrapDialog(SelectItemsDialog);\n","import { axios } from \"@/services/axios\";\n\nexport const IMG_ROOT = \"/static/images/destinations\";\n\nconst Destination = {\n  query: () => axios.get(\"api/destinations\"),\n  get: ({ id }) => axios.get(`api/destinations/${id}`),\n  types: () => axios.get(\"api/destinations/types\"),\n  create: data => axios.post(`api/destinations`, data),\n  save: data => axios.post(`api/destinations/${data.id}`, data),\n  delete: ({ id }) => axios.delete(`api/destinations/${id}`),\n};\n\nexport default Destination;\n","import { axios } from \"@/services/axios\";\n\nconst AlertSubscription = {\n  query: ({ alertId }) => axios.get(`api/alerts/${alertId}/subscriptions`),\n  create: data => axios.post(`api/alerts/${data.alert_id}/subscriptions`, data),\n  delete: data => axios.delete(`api/alerts/${data.alert_id}/subscriptions/${data.id}`),\n};\n\nexport default AlertSubscription;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"antd/lib/tooltip\";\n\nexport default function ListItemAddon({ isSelected, isStaged, alreadyInGroup, deselectedIcon }) {\n  if (isStaged) {\n    return <i className=\"fa fa-remove\" />;\n  }\n  if (alreadyInGroup) {\n    return (\n      <Tooltip title=\"Already selected\">\n        <i className=\"fa fa-check\" />\n      </Tooltip>\n    );\n  }\n  return isSelected ? <i className=\"fa fa-check\" /> : <i className={`fa ${deselectedIcon}`} />;\n}\n\nListItemAddon.propTypes = {\n  isSelected: PropTypes.bool,\n  isStaged: PropTypes.bool,\n  alreadyInGroup: PropTypes.bool,\n  deselectedIcon: PropTypes.string,\n};\n\nListItemAddon.defaultProps = {\n  isSelected: false,\n  isStaged: false,\n  alreadyInGroup: false,\n  deselectedIcon: \"fa-angle-double-right\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { clientConfig, currentUser } from \"@/services/auth\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Alert from \"antd/lib/alert\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nexport default function EmailSettingsWarning({ featureName, className, mode, adminOnly }) {\n  if (!clientConfig.mailSettingsMissing) {\n    return null;\n  }\n\n  if (adminOnly && !currentUser.isAdmin) {\n    return null;\n  }\n\n  const message = (\n    <span>\n      Your mail server isn&apos;t configured correctly, and is needed for {featureName} to work.{\" \"}\n      <HelpTrigger type=\"MAIL_CONFIG\" className=\"f-inherit\" />\n    </span>\n  );\n\n  if (mode === \"icon\") {\n    return (\n      <Tooltip title={message}>\n        <i className={cx(\"fa fa-exclamation-triangle\", className)} />\n      </Tooltip>\n    );\n  }\n\n  return <Alert message={message} type=\"error\" className={className} />;\n}\n\nEmailSettingsWarning.propTypes = {\n  featureName: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  mode: PropTypes.oneOf([\"alert\", \"icon\"]),\n  adminOnly: PropTypes.bool,\n};\n\nEmailSettingsWarning.defaultProps = {\n  className: null,\n  mode: \"alert\",\n  adminOnly: false,\n};\n","import { without, find, includes, map, toLower } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SelectItemsDialog from \"@/components/SelectItemsDialog\";\nimport { Destination as DestinationType, UserProfile as UserType } from \"@/components/proptypes\";\n\nimport DestinationService, { IMG_ROOT } from \"@/services/destination\";\nimport AlertSubscription from \"@/services/alert-subscription\";\nimport { clientConfig, currentUser } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\nimport ListItemAddon from \"@/components/groups/ListItemAddon\";\nimport EmailSettingsWarning from \"@/components/EmailSettingsWarning\";\n\nimport Icon from \"antd/lib/icon\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Switch from \"antd/lib/switch\";\nimport Button from \"antd/lib/button\";\n\nimport \"./AlertDestinations.less\";\n\nconst USER_EMAIL_DEST_ID = -1;\n\nfunction normalizeSub(sub) {\n  if (!sub.destination) {\n    sub.destination = {\n      id: USER_EMAIL_DEST_ID,\n      name: sub.user.email,\n      icon: \"DEPRECATED\",\n      type: \"email\",\n    };\n  }\n  return sub;\n}\n\nfunction ListItem({ destination: { name, type }, user, unsubscribe }) {\n  const canUnsubscribe = currentUser.isAdmin || currentUser.id === user.id;\n\n  return (\n    <li className=\"destination-wrapper\">\n      <img src={`${IMG_ROOT}/${type}.png`} className=\"destination-icon\" alt={name} />\n      <span className=\"flex-fill\">{name}</span>\n      {type === \"email\" && (\n        <EmailSettingsWarning className=\"destination-warning\" featureName=\"alert emails\" mode=\"icon\" />\n      )}\n      {canUnsubscribe && (\n        <Tooltip title=\"Remove\" mouseEnterDelay={0.5}>\n          <Icon type=\"close\" className=\"remove-button\" onClick={unsubscribe} />\n        </Tooltip>\n      )}\n    </li>\n  );\n}\n\nListItem.propTypes = {\n  destination: DestinationType.isRequired,\n  user: UserType.isRequired,\n  unsubscribe: PropTypes.func.isRequired,\n};\n\nexport default class AlertDestinations extends React.Component {\n  static propTypes = {\n    alertId: PropTypes.number.isRequired,\n  };\n\n  state = {\n    dests: [],\n    subs: null,\n  };\n\n  componentDidMount() {\n    const { alertId } = this.props;\n    Promise.all([\n      DestinationService.query(), // get all destinations\n      AlertSubscription.query({ alertId }), // get subcriptions per alert\n    ]).then(([dests, subs]) => {\n      subs = subs.map(normalizeSub);\n      this.setState({ dests, subs });\n    });\n  }\n\n  showAddAlertSubDialog = () => {\n    const { dests, subs } = this.state;\n\n    SelectItemsDialog.showModal({\n      width: 570,\n      showCount: true,\n      extraFooterContent: (\n        <>\n          <i className=\"fa fa-info-circle\" /> Create new destinations in{\" \"}\n          <Tooltip title=\"Opens page in a new tab.\">\n            <a href=\"destinations/new\" target=\"_blank\">\n              Alert Destinations\n            </a>\n          </Tooltip>\n        </>\n      ),\n      dialogTitle: \"Add Existing Alert Destinations\",\n      inputPlaceholder: \"Search destinations...\",\n      searchItems: searchTerm => {\n        searchTerm = toLower(searchTerm);\n        return Promise.resolve(dests.filter(d => includes(toLower(d.name), searchTerm)));\n      },\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = !!find(subs, s => s.destination.id === item.id);\n\n        return {\n          content: (\n            <div className=\"destination-wrapper\">\n              <img src={`${IMG_ROOT}/${item.type}.png`} className=\"destination-icon\" alt={item.name} />\n              <span className=\"flex-fill\">{item.name}</span>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} deselectedIcon=\"fa-plus\" />\n            </div>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? \"selected\" : \"\",\n        };\n      },\n    }).onClose(items => {\n      const promises = map(items, item => this.subscribe(item));\n      return Promise.all(promises)\n        .then(() => {\n          notification.success(\"Subscribed.\");\n        })\n        .catch(() => {\n          notification.error(\"Failed saving subscription.\");\n          return Promise.reject(null); // keep dialog visible but suppress its default error message\n        });\n    });\n  };\n\n  onUserEmailToggle = sub => {\n    if (sub) {\n      this.unsubscribe(sub);\n    } else {\n      this.subscribe();\n    }\n  };\n\n  subscribe = dest => {\n    const { alertId } = this.props;\n\n    const sub = { alert_id: alertId };\n    if (dest) {\n      sub.destination_id = dest.id;\n    }\n\n    return AlertSubscription.create(sub).then(sub => {\n      const { subs } = this.state;\n      this.setState({\n        subs: [...subs, normalizeSub(sub)],\n      });\n    });\n  };\n\n  unsubscribe = sub => {\n    AlertSubscription.delete(sub)\n      .then(() => {\n        // not showing subscribe notification cause it's redundant here\n        const { subs } = this.state;\n        this.setState({\n          subs: without(subs, sub),\n        });\n      })\n      .catch(() => {\n        notification.error(\"Failed unsubscribing.\");\n      });\n  };\n\n  render() {\n    if (!this.props.alertId) {\n      return null;\n    }\n\n    const { subs } = this.state;\n    const currentUserEmailSub = find(subs, {\n      destination: { id: USER_EMAIL_DEST_ID },\n      user: { id: currentUser.id },\n    });\n    const filteredSubs = without(subs, currentUserEmailSub);\n    const { mailSettingsMissing } = clientConfig;\n\n    return (\n      <div className=\"alert-destinations\" data-test=\"AlertDestinations\">\n        <Tooltip title='Click to add an existing \"Alert Destination\"' mouseEnterDelay={0.5}>\n          <Button\n            data-test=\"ShowAddAlertSubDialog\"\n            type=\"primary\"\n            size=\"small\"\n            className=\"add-button\"\n            onClick={this.showAddAlertSubDialog}>\n            <i className=\"fa fa-plus f-12 m-r-5\" /> Add\n          </Button>\n        </Tooltip>\n        <ul>\n          <li className=\"destination-wrapper\">\n            <i className=\"destination-icon fa fa-envelope\" />\n            <span className=\"flex-fill\">{currentUser.email}</span>\n            <EmailSettingsWarning className=\"destination-warning\" featureName=\"alert emails\" mode=\"icon\" />\n            {!mailSettingsMissing && (\n              <Switch\n                size=\"small\"\n                className=\"toggle-button\"\n                checked={!!currentUserEmailSub}\n                loading={!subs}\n                onChange={() => this.onUserEmailToggle(currentUserEmailSub)}\n                data-test=\"UserEmailToggle\"\n              />\n            )}\n          </li>\n          {filteredSubs.map(s => (\n            <ListItem key={s.id} unsubscribe={() => this.unsubscribe(s)} {...s} />\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Form from \"antd/lib/form\";\n\nexport default function HorizontalFormItem({ children, label, className, ...props }) {\n  const labelCol = { span: 4 };\n  const wrapperCol = { span: 16 };\n  if (!label) {\n    wrapperCol.offset = 4;\n  }\n\n  className = cx(\"alert-form-item\", className);\n\n  return (\n    <Form.Item labelCol={labelCol} wrapperCol={wrapperCol} label={label} className={className} {...props}>\n      {children}\n    </Form.Item>\n  );\n}\n\nHorizontalFormItem.propTypes = {\n  children: PropTypes.node,\n  label: PropTypes.string,\n  className: PropTypes.string,\n};\n\nHorizontalFormItem.defaultProps = {\n  children: null,\n  label: null,\n  className: null,\n};\n","import { keys, some } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport CreateDashboardDialog from \"@/components/dashboards/CreateDashboardDialog\";\nimport { currentUser } from \"@/services/auth\";\nimport organizationStatus from \"@/services/organizationStatus\";\nimport \"./empty-state.less\";\n\nfunction Step({ show, completed, text, url, urlText, onClick }) {\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <li className={classNames({ done: completed })}>\n      <a href={url} onClick={onClick}>\n        {urlText}\n      </a>{\" \"}\n      {text}\n    </li>\n  );\n}\n\nStep.propTypes = {\n  show: PropTypes.bool.isRequired,\n  completed: PropTypes.bool.isRequired,\n  text: PropTypes.string.isRequired,\n  url: PropTypes.string,\n  urlText: PropTypes.string,\n  onClick: PropTypes.func,\n};\n\nStep.defaultProps = {\n  url: null,\n  urlText: null,\n  onClick: null,\n};\n\nfunction EmptyState({\n  icon,\n  header,\n  description,\n  illustration,\n  helpLink,\n  onboardingMode,\n  showAlertStep,\n  showDashboardStep,\n  showInviteStep,\n}) {\n  const isAvailable = {\n    dataSource: true,\n    query: true,\n    alert: showAlertStep,\n    dashboard: showDashboardStep,\n    inviteUsers: showInviteStep,\n  };\n\n  const isCompleted = {\n    dataSource: organizationStatus.objectCounters.data_sources > 0,\n    query: organizationStatus.objectCounters.queries > 0,\n    alert: organizationStatus.objectCounters.alerts > 0,\n    dashboard: organizationStatus.objectCounters.dashboards > 0,\n    inviteUsers: organizationStatus.objectCounters.users > 1,\n  };\n\n  const showCreateDashboardDialog = useCallback(() => {\n    CreateDashboardDialog.showModal();\n  }, []);\n\n  // Show if `onboardingMode=false` or any requested step not completed\n  const shouldShow = !onboardingMode || some(keys(isAvailable), step => isAvailable[step] && !isCompleted[step]);\n\n  if (!shouldShow) {\n    return null;\n  }\n\n  return (\n    <div className=\"empty-state bg-white tiled\">\n      <div className=\"empty-state__summary\">\n        {header && <h4>{header}</h4>}\n        <h2>\n          <i className={icon} />\n        </h2>\n        <p>{description}</p>\n        <img\n          src={\"/static/images/illustrations/\" + illustration + \".svg\"}\n          alt={illustration + \" Illustration\"}\n          width=\"75%\"\n        />\n      </div>\n      <div className=\"empty-state__steps\">\n        <h4>Let&apos;s get started</h4>\n        <ol>\n          {currentUser.isAdmin && (\n            <Step\n              show={isAvailable.dataSource}\n              completed={isCompleted.dataSource}\n              url=\"data_sources/new\"\n              urlText=\"Connect\"\n              text=\"a Data Source\"\n            />\n          )}\n          {!currentUser.isAdmin && (\n            <Step\n              show={isAvailable.dataSource}\n              completed={isCompleted.dataSource}\n              text=\"Ask an account admin to connect a data source\"\n            />\n          )}\n          <Step\n            show={isAvailable.query}\n            completed={isCompleted.query}\n            url=\"queries/new\"\n            urlText=\"Create\"\n            text=\"your first Query\"\n          />\n          <Step\n            show={isAvailable.alert}\n            completed={isCompleted.alert}\n            url=\"alerts/new\"\n            urlText=\"Create\"\n            text=\"your first Alert\"\n          />\n          <Step\n            show={isAvailable.dashboard}\n            completed={isCompleted.dashboard}\n            onClick={showCreateDashboardDialog}\n            urlText=\"Create\"\n            text=\"your first Dashboard\"\n          />\n          <Step\n            show={isAvailable.inviteUsers}\n            completed={isCompleted.inviteUsers}\n            url=\"users/new\"\n            urlText=\"Invite\"\n            text=\"your team members\"\n          />\n        </ol>\n        <p>\n          Need more support?{\" \"}\n          <a href={helpLink} target=\"_blank\" rel=\"noopener noreferrer\">\n            See our Help\n            <i className=\"fa fa-external-link m-l-5\" aria-hidden=\"true\" />\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nEmptyState.propTypes = {\n  icon: PropTypes.string,\n  header: PropTypes.string,\n  description: PropTypes.string.isRequired,\n  illustration: PropTypes.string.isRequired,\n  helpLink: PropTypes.string.isRequired,\n\n  onboardingMode: PropTypes.bool,\n  showAlertStep: PropTypes.bool,\n  showDashboardStep: PropTypes.bool,\n  showInviteStep: PropTypes.bool,\n};\n\nEmptyState.defaultProps = {\n  icon: null,\n  header: null,\n\n  onboardingMode: false,\n  showAlertStep: false,\n  showDashboardStep: false,\n  showInviteStep: false,\n};\n\nexport default EmptyState;\n","import { toUpper } from \"lodash\";\nimport React from \"react\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Paginator from \"@/components/Paginator\";\nimport EmptyState from \"@/components/empty-state/EmptyState\";\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Alert from \"@/services/alert\";\n\nexport const STATE_CLASS = {\n  unknown: \"label-warning\",\n  ok: \"label-success\",\n  triggered: \"label-danger\",\n};\n\nclass AlertsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom.sortable(\n      (text, alert) => <i className={`fa fa-bell-${alert.options.muted ? \"slash\" : \"o\"} p-r-0`} />,\n      {\n        title: <i className=\"fa fa-bell p-r-0\" />,\n        field: \"muted\",\n        width: \"1%\",\n      }\n    ),\n    Columns.custom.sortable(\n      (text, alert) => (\n        <div>\n          <a className=\"table-main-title\" href={\"alerts/\" + alert.id}>\n            {alert.name}\n          </a>\n        </div>\n      ),\n      {\n        title: \"Name\",\n        field: \"name\",\n      }\n    ),\n    Columns.custom((text, item) => item.user.name, { title: \"Created By\" }),\n    Columns.custom.sortable(\n      (text, alert) => (\n        <div>\n          <span className={`label ${STATE_CLASS[alert.state]}`}>{toUpper(alert.state)}</span>\n        </div>\n      ),\n      {\n        title: \"State\",\n        field: \"state\",\n        width: \"1%\",\n      }\n    ),\n    Columns.timeAgo.sortable({ title: \"Last Updated At\", field: \"updated_at\", className: \"text-nowrap\", width: \"1%\" }),\n    Columns.dateTime.sortable({ title: \"Created At\", field: \"created_at\", className: \"text-nowrap\", width: \"1%\" }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div className=\"page-alerts-list\">\n        <div className=\"container\">\n          <PageHeader title={controller.params.pageTitle} />\n          <div className=\"m-l-15 m-r-15\">\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <EmptyState\n                icon=\"fa fa-bell-o\"\n                illustration=\"alert\"\n                description=\"Get notified on certain events\"\n                helpLink=\"https://redash.io/help/user-guide/alerts/\"\n                showAlertStep\n              />\n            )}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive bg-white tiled\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  totalCount={controller.totalItemsCount}\n                  itemsPerPage={controller.itemsPerPage}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst AlertsListPage = itemsList(\n  AlertsList,\n  () =>\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest() {\n        return {};\n      },\n      getResource() {\n        return Alert.query.bind(Alert);\n      },\n    }),\n  () => new StateStorage({ orderByField: \"created_at\", orderByReverse: true, itemsPerPage: 20 })\n);\n\nexport default routeWithUserSession({\n  path: \"/alerts\",\n  title: \"Alerts\",\n  render: pageProps => <AlertsListPage {...pageProps} currentPage=\"alerts\" />,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport TimeAgo from \"@/components/TimeAgo\";\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport AntAlert from \"antd/lib/alert\";\n\nimport Title from \"./components/Title\";\nimport Criteria from \"./components/Criteria\";\nimport Rearm from \"./components/Rearm\";\nimport Query from \"./components/Query\";\nimport AlertDestinations from \"./components/AlertDestinations\";\nimport HorizontalFormItem from \"./components/HorizontalFormItem\";\nimport { STATE_CLASS } from \"../alerts/AlertsList\";\n\nfunction AlertState({ state, lastTriggered }) {\n  return (\n    <div className=\"alert-state\">\n      <span className={`alert-state-indicator label ${STATE_CLASS[state]}`}>Status: {state}</span>\n      {state === \"unknown\" && <div className=\"ant-form-explain\">Alert condition has not been evaluated.</div>}\n      {lastTriggered && (\n        <div className=\"ant-form-explain\">\n          Last triggered{\" \"}\n          <span className=\"alert-last-triggered\">\n            <TimeAgo date={lastTriggered} />\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nAlertState.propTypes = {\n  state: PropTypes.string.isRequired,\n  lastTriggered: PropTypes.string,\n};\n\nAlertState.defaultProps = {\n  lastTriggered: null,\n};\n\n// eslint-disable-next-line react/prefer-stateless-function\nexport default class AlertView extends React.Component {\n  state = {\n    unmuting: false,\n  };\n\n  unmute = () => {\n    this.setState({ unmuting: true });\n    this.props.unmute().finally(() => {\n      this.setState({ unmuting: false });\n    });\n  };\n\n  render() {\n    const { alert, queryResult, canEdit, onEdit, menuButton } = this.props;\n    const { query, name, options, rearm } = alert;\n\n    return (\n      <>\n        <Title name={name} alert={alert}>\n          <Tooltip title={canEdit ? \"\" : \"You do not have sufficient permissions to edit this alert\"}>\n            <Button type=\"default\" onClick={canEdit ? onEdit : null} className={cx({ disabled: !canEdit })}>\n              <i className=\"fa fa-edit m-r-5\" />\n              Edit\n            </Button>\n            {menuButton}\n          </Tooltip>\n        </Title>\n        <div className=\"row bg-white tiled p-20\">\n          <div className=\"d-flex col-md-8\">\n            <Form className=\"flex-fill\">\n              <HorizontalFormItem>\n                <AlertState state={alert.state} lastTriggered={alert.last_triggered_at} />\n              </HorizontalFormItem>\n              <HorizontalFormItem label=\"Query\">\n                <Query query={query} queryResult={queryResult} />\n              </HorizontalFormItem>\n              {queryResult && options && (\n                <>\n                  <HorizontalFormItem label=\"Trigger when\" className=\"alert-criteria\">\n                    <Criteria\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      alertOptions={options}\n                    />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label=\"Notifications\" className=\"form-item-line-height-normal\">\n                    <Rearm value={rearm || 0} />\n                    <br />\n                    Set to {options.custom_subject || options.custom_body ? \"custom\" : \"default\"} notification template.\n                  </HorizontalFormItem>\n                </>\n              )}\n            </Form>\n          </div>\n          <div className=\"col-md-4\">\n            {options.muted && (\n              <AntAlert\n                className=\"m-b-20\"\n                message={\n                  <>\n                    <i className=\"fa fa-bell-slash-o\" /> Notifications are muted\n                  </>\n                }\n                description={\n                  <>\n                    Notifications for this alert will not be sent.\n                    <br />\n                    {canEdit && (\n                      <>\n                        To restore notifications click\n                        <Button\n                          size=\"small\"\n                          type=\"primary\"\n                          onClick={this.unmute}\n                          loading={this.state.unmuting}\n                          className=\"m-t-5 m-l-5\">\n                          Unmute\n                        </Button>\n                      </>\n                    )}\n                  </>\n                }\n                type=\"warning\"\n              />\n            )}\n            <h4>\n              Destinations{\" \"}\n              <Tooltip title=\"Open Alert Destinations page in a new tab.\">\n                <a href=\"destinations\" target=\"_blank\">\n                  <i className=\"fa fa-external-link f-13\" />\n                </a>\n              </Tooltip>\n            </h4>\n            <AlertDestinations alertId={alert.id} />\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nAlertView.propTypes = {\n  alert: AlertType.isRequired,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types,\n  canEdit: PropTypes.bool.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  menuButton: PropTypes.node.isRequired,\n  unmute: PropTypes.func,\n};\n\nAlertView.defaultProps = {\n  queryResult: null,\n  unmute: null,\n};\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { head, isEmpty, isNull, isUndefined } from \"lodash\";\nimport Mustache from \"mustache\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { Alert as AlertType, Query as QueryType } from \"@/components/proptypes\";\n\nimport Input from \"antd/lib/input\";\nimport Select from \"antd/lib/select\";\nimport Modal from \"antd/lib/modal\";\nimport Switch from \"antd/lib/switch\";\n\nimport \"./NotificationTemplate.less\";\n\nfunction normalizeCustomTemplateData(alert, query, columnNames, resultValues) {\n  const topValue = !isEmpty(resultValues) ? head(resultValues)[alert.options.column] : null;\n\n  return {\n    ALERT_STATUS: \"TRIGGERED\",\n    ALERT_CONDITION: alert.options.op,\n    ALERT_THRESHOLD: alert.options.value,\n    ALERT_NAME: alert.name,\n    ALERT_URL: `${window.location.origin}/alerts/${alert.id}`,\n    QUERY_NAME: query.name,\n    QUERY_URL: `${window.location.origin}/queries/${query.id}`,\n    QUERY_RESULT_VALUE: isNull(topValue) || isUndefined(topValue) ? \"UNKNOWN\" : topValue,\n    QUERY_RESULT_ROWS: resultValues,\n    QUERY_RESULT_COLS: columnNames,\n  };\n}\n\nfunction NotificationTemplate({ alert, query, columnNames, resultValues, subject, setSubject, body, setBody }) {\n  const hasContent = !!(subject || body);\n  const [enabled, setEnabled] = useState(hasContent ? 1 : 0);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const renderData = normalizeCustomTemplateData(alert, query, columnNames, resultValues);\n\n  const render = tmpl => Mustache.render(tmpl || \"\", renderData);\n  const onEnabledChange = value => {\n    if (value || !hasContent) {\n      setEnabled(value);\n      setShowPreview(false);\n    } else {\n      Modal.confirm({\n        title: \"Are you sure?\",\n        content: \"Switching to default template will discard your custom template.\",\n        onOk: () => {\n          setSubject(null);\n          setBody(null);\n          setEnabled(value);\n          setShowPreview(false);\n        },\n        maskClosable: true,\n        autoFocusButton: null,\n      });\n    }\n  };\n\n  return (\n    <div className=\"alert-template\">\n      <Select\n        value={enabled}\n        onChange={onEnabledChange}\n        optionLabelProp=\"label\"\n        dropdownMatchSelectWidth={false}\n        style={{ width: \"fit-content\" }}>\n        <Select.Option value={0} label=\"Use default template\">\n          Default template\n        </Select.Option>\n        <Select.Option value={1} label=\"Use custom template\">\n          Custom template\n        </Select.Option>\n      </Select>\n      {!!enabled && (\n        <div className=\"alert-custom-template\" data-test=\"AlertCustomTemplate\">\n          <div className=\"d-flex align-items-center\">\n            <h5 className=\"flex-fill\">Subject / Body</h5>\n            Preview{\" \"}\n            <Switch size=\"small\" className=\"alert-template-preview\" value={showPreview} onChange={setShowPreview} />\n          </div>\n          <Input\n            value={showPreview ? render(subject) : subject}\n            onChange={e => setSubject(e.target.value)}\n            disabled={showPreview}\n            data-test=\"CustomSubject\"\n          />\n          <Input.TextArea\n            value={showPreview ? render(body) : body}\n            autosize={{ minRows: 9 }}\n            onChange={e => setBody(e.target.value)}\n            disabled={showPreview}\n            data-test=\"CustomBody\"\n          />\n          <HelpTrigger type=\"ALERT_NOTIF_TEMPLATE_GUIDE\" className=\"f-13\">\n            <i className=\"fa fa-question-circle\" /> Formatting guide\n          </HelpTrigger>\n        </div>\n      )}\n    </div>\n  );\n}\n\nNotificationTemplate.propTypes = {\n  alert: AlertType.isRequired,\n  query: QueryType.isRequired,\n  columnNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  resultValues: PropTypes.arrayOf(PropTypes.any).isRequired,\n  subject: PropTypes.string,\n  setSubject: PropTypes.func.isRequired,\n  body: PropTypes.string,\n  setBody: PropTypes.func.isRequired,\n};\n\nNotificationTemplate.defaultProps = {\n  subject: \"\",\n  body: \"\",\n};\n\nexport default NotificationTemplate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\n\nimport Title from \"./components/Title\";\nimport Criteria from \"./components/Criteria\";\nimport NotificationTemplate from \"./components/NotificationTemplate\";\nimport Rearm from \"./components/Rearm\";\nimport Query from \"./components/Query\";\n\nimport HorizontalFormItem from \"./components/HorizontalFormItem\";\n\nexport default class AlertEdit extends React.Component {\n  _isMounted = false;\n\n  state = {\n    saving: false,\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  save = () => {\n    this.setState({ saving: true });\n    this.props.save().catch(() => {\n      if (this._isMounted) {\n        this.setState({ saving: false });\n      }\n    });\n  };\n\n  cancel = () => {\n    this.props.cancel();\n  };\n\n  render() {\n    const { alert, queryResult, pendingRearm, onNotificationTemplateChange, menuButton } = this.props;\n    const { onQuerySelected, onNameChange, onRearmChange, onCriteriaChange } = this.props;\n    const { query, name, options } = alert;\n    const { saving } = this.state;\n\n    return (\n      <>\n        <Title name={name} alert={alert} onChange={onNameChange} editMode>\n          <Button className=\"m-r-5\" onClick={() => this.cancel()}>\n            <i className=\"fa fa-times m-r-5\" />\n            Cancel\n          </Button>\n          <Button type=\"primary\" onClick={() => this.save()}>\n            {saving ? <i className=\"fa fa-spinner fa-pulse m-r-5\" /> : <i className=\"fa fa-check m-r-5\" />}\n            Save Changes\n          </Button>\n          {menuButton}\n        </Title>\n        <div className=\"row bg-white tiled p-20\">\n          <div className=\"d-flex\">\n            <Form className=\"flex-fill\">\n              <HorizontalFormItem label=\"Query\">\n                <Query query={query} queryResult={queryResult} onChange={onQuerySelected} editMode />\n              </HorizontalFormItem>\n              {queryResult && options && (\n                <>\n                  <HorizontalFormItem label=\"Trigger when\" className=\"alert-criteria\">\n                    <Criteria\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      alertOptions={options}\n                      onChange={onCriteriaChange}\n                      editMode\n                    />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label=\"When triggered, send notification\">\n                    <Rearm value={pendingRearm || 0} onChange={onRearmChange} editMode />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label=\"Template\">\n                    <NotificationTemplate\n                      alert={alert}\n                      query={query}\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      subject={options.custom_subject}\n                      setSubject={subject => onNotificationTemplateChange({ custom_subject: subject })}\n                      body={options.custom_body}\n                      setBody={body => onNotificationTemplateChange({ custom_body: body })}\n                    />\n                  </HorizontalFormItem>\n                </>\n              )}\n            </Form>\n            <div>\n              <HelpTrigger className=\"f-13\" type=\"ALERT_SETUP\">\n                Setup Instructions <i className=\"fa fa-question-circle\" />\n              </HelpTrigger>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nAlertEdit.propTypes = {\n  alert: AlertType.isRequired,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types,\n  pendingRearm: PropTypes.number,\n  menuButton: PropTypes.node.isRequired,\n  save: PropTypes.func.isRequired,\n  cancel: PropTypes.func.isRequired,\n  onQuerySelected: PropTypes.func.isRequired,\n  onNameChange: PropTypes.func.isRequired,\n  onCriteriaChange: PropTypes.func.isRequired,\n  onRearmChange: PropTypes.func.isRequired,\n  onNotificationTemplateChange: PropTypes.func.isRequired,\n};\n\nAlertEdit.defaultProps = {\n  queryResult: null,\n  pendingRearm: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\n\nimport Title from \"./components/Title\";\nimport Criteria from \"./components/Criteria\";\nimport NotificationTemplate from \"./components/NotificationTemplate\";\nimport Rearm from \"./components/Rearm\";\nimport Query from \"./components/Query\";\nimport HorizontalFormItem from \"./components/HorizontalFormItem\";\n\nexport default class AlertNew extends React.Component {\n  state = {\n    saving: false,\n  };\n\n  save = () => {\n    this.setState({ saving: true });\n    this.props.save().catch(() => {\n      this.setState({ saving: false });\n    });\n  };\n\n  render() {\n    const { alert, queryResult, pendingRearm, onNotificationTemplateChange } = this.props;\n    const { onQuerySelected, onNameChange, onRearmChange, onCriteriaChange } = this.props;\n    const { query, name, options } = alert;\n    const { saving } = this.state;\n\n    return (\n      <>\n        <Title alert={alert} name={name} onChange={onNameChange} editMode />\n        <div className=\"row bg-white tiled p-20\">\n          <div className=\"d-flex\">\n            <Form className=\"flex-fill\">\n              <div className=\"m-b-30\">\n                Start by selecting the query that you would like to monitor using the search bar.\n                <br />\n                Keep in mind that Alerts do not work with queries that use parameters.\n              </div>\n              <HorizontalFormItem label=\"Query\">\n                <Query query={query} queryResult={queryResult} onChange={onQuerySelected} editMode />\n              </HorizontalFormItem>\n              {queryResult && options && (\n                <>\n                  <HorizontalFormItem label=\"Trigger when\" className=\"alert-criteria\">\n                    <Criteria\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      alertOptions={options}\n                      onChange={onCriteriaChange}\n                      editMode\n                    />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label=\"When triggered, send notification\">\n                    <Rearm value={pendingRearm || 0} onChange={onRearmChange} editMode />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label=\"Template\">\n                    <NotificationTemplate\n                      alert={alert}\n                      query={query}\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      subject={options.custom_subject}\n                      setSubject={subject => onNotificationTemplateChange({ custom_subject: subject })}\n                      body={options.custom_body}\n                      setBody={body => onNotificationTemplateChange({ custom_body: body })}\n                    />\n                  </HorizontalFormItem>\n                </>\n              )}\n              <HorizontalFormItem>\n                <Button type=\"primary\" onClick={this.save} disabled={!query} className=\"btn-create-alert\">\n                  {saving && <i className=\"fa fa-spinner fa-pulse m-r-5\" />}\n                  Create Alert\n                </Button>\n              </HorizontalFormItem>\n            </Form>\n            <HelpTrigger className=\"f-13\" type=\"ALERT_SETUP\">\n              Setup Instructions <i className=\"fa fa-question-circle\" />\n            </HelpTrigger>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nAlertNew.propTypes = {\n  alert: AlertType.isRequired,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types,\n  pendingRearm: PropTypes.number,\n  onQuerySelected: PropTypes.func.isRequired,\n  save: PropTypes.func.isRequired,\n  onNameChange: PropTypes.func.isRequired,\n  onRearmChange: PropTypes.func.isRequired,\n  onCriteriaChange: PropTypes.func.isRequired,\n  onNotificationTemplateChange: PropTypes.func.isRequired,\n};\n\nAlertNew.defaultProps = {\n  queryResult: null,\n  pendingRearm: null,\n};\n","import { head, includes, trim, template, values } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { currentUser } from \"@/services/auth\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport notification from \"@/services/notification\";\nimport AlertService from \"@/services/alert\";\nimport { Query as QueryService } from \"@/services/query\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport MenuButton from \"./components/MenuButton\";\nimport AlertView from \"./AlertView\";\nimport AlertEdit from \"./AlertEdit\";\nimport AlertNew from \"./AlertNew\";\n\nconst MODES = {\n  NEW: 0,\n  VIEW: 1,\n  EDIT: 2,\n};\n\nconst defaultNameBuilder = template(\"<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>\");\n\nexport function getDefaultName(alert) {\n  if (!alert.query) {\n    return \"New Alert\";\n  }\n  return defaultNameBuilder(alert);\n}\n\nclass Alert extends React.Component {\n  static propTypes = {\n    mode: PropTypes.oneOf(values(MODES)),\n    alertId: PropTypes.string,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    mode: null,\n    alertId: null,\n    onError: () => {},\n  };\n\n  _isMounted = false;\n\n  state = {\n    alert: null,\n    queryResult: null,\n    pendingRearm: null,\n    canEdit: false,\n    mode: null,\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n    const { mode } = this.props;\n    this.setState({ mode });\n\n    if (mode === MODES.NEW) {\n      this.setState({\n        alert: {\n          options: {\n            op: \">\",\n            value: 1,\n            muted: false,\n          },\n        },\n        pendingRearm: 0,\n        canEdit: true,\n      });\n    } else {\n      const { alertId } = this.props;\n      AlertService.get({ id: alertId })\n        .then(alert => {\n          if (this._isMounted) {\n            const canEdit = currentUser.canEdit(alert);\n\n            // force view mode if can't edit\n            if (!canEdit) {\n              this.setState({ mode: MODES.VIEW });\n              notification.warn(\n                \"You cannot edit this alert\",\n                \"You do not have sufficient permissions to edit this alert, and have been redirected to the view-only page.\",\n                { duration: 0 }\n              );\n            }\n\n            this.setState({ alert, canEdit, pendingRearm: alert.rearm });\n            this.onQuerySelected(alert.query);\n          }\n        })\n        .catch(error => {\n          if (this._isMounted) {\n            this.props.onError(error);\n          }\n        });\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  save = () => {\n    const { alert, pendingRearm } = this.state;\n\n    alert.name = trim(alert.name) || getDefaultName(alert);\n    alert.rearm = pendingRearm || null;\n\n    return AlertService.save(alert)\n      .then(alert => {\n        notification.success(\"Saved.\");\n        navigateTo(`alerts/${alert.id}`, true);\n        this.setState({ alert, mode: MODES.VIEW });\n      })\n      .catch(() => {\n        notification.error(\"Failed saving alert.\");\n      });\n  };\n\n  onQuerySelected = query => {\n    this.setState(({ alert }) => ({\n      alert: Object.assign(alert, { query }),\n      queryResult: null,\n    }));\n\n    if (query) {\n      // get cached result for column names and values\n      new QueryService(query).getQueryResultPromise().then(queryResult => {\n        if (this._isMounted) {\n          this.setState({ queryResult });\n          let { column } = this.state.alert.options;\n          const columns = queryResult.getColumnNames();\n\n          // default to first column name if none chosen, or irrelevant in current query\n          if (!column || !includes(columns, column)) {\n            column = head(queryResult.getColumnNames());\n          }\n          this.setAlertOptions({ column });\n        }\n      });\n    }\n  };\n\n  onNameChange = name => {\n    const { alert } = this.state;\n    this.setState({\n      alert: Object.assign(alert, { name }),\n    });\n  };\n\n  onRearmChange = pendingRearm => {\n    this.setState({ pendingRearm });\n  };\n\n  setAlertOptions = obj => {\n    const { alert } = this.state;\n    const options = { ...alert.options, ...obj };\n    this.setState({\n      alert: Object.assign(alert, { options }),\n    });\n  };\n\n  delete = () => {\n    const { alert } = this.state;\n    return AlertService.delete(alert)\n      .then(() => {\n        notification.success(\"Alert deleted successfully.\");\n        navigateTo(\"alerts\");\n      })\n      .catch(() => {\n        notification.error(\"Failed deleting alert.\");\n      });\n  };\n\n  mute = () => {\n    const { alert } = this.state;\n    return AlertService.mute(alert)\n      .then(() => {\n        this.setAlertOptions({ muted: true });\n        notification.warn(\"Notifications have been muted.\");\n      })\n      .catch(() => {\n        notification.error(\"Failed muting notifications.\");\n      });\n  };\n\n  unmute = () => {\n    const { alert } = this.state;\n    return AlertService.unmute(alert)\n      .then(() => {\n        this.setAlertOptions({ muted: false });\n        notification.success(\"Notifications have been restored.\");\n      })\n      .catch(() => {\n        notification.error(\"Failed restoring notifications.\");\n      });\n  };\n\n  edit = () => {\n    const { id } = this.state.alert;\n    navigateTo(`alerts/${id}/edit`, true);\n    this.setState({ mode: MODES.EDIT });\n  };\n\n  cancel = () => {\n    const { id } = this.state.alert;\n    navigateTo(`alerts/${id}`, true);\n    this.setState({ mode: MODES.VIEW });\n  };\n\n  render() {\n    const { alert } = this.state;\n    if (!alert) {\n      return <LoadingState className=\"m-t-30\" />;\n    }\n\n    const muted = !!alert.options.muted;\n    const { queryResult, mode, canEdit, pendingRearm } = this.state;\n\n    const menuButton = (\n      <MenuButton doDelete={this.delete} muted={muted} mute={this.mute} unmute={this.unmute} canEdit={canEdit} />\n    );\n\n    const commonProps = {\n      alert,\n      queryResult,\n      pendingRearm,\n      save: this.save,\n      menuButton,\n      onQuerySelected: this.onQuerySelected,\n      onRearmChange: this.onRearmChange,\n      onNameChange: this.onNameChange,\n      onCriteriaChange: this.setAlertOptions,\n      onNotificationTemplateChange: this.setAlertOptions,\n    };\n\n    return (\n      <div className=\"alert-page\">\n        <div className=\"container\">\n          {mode === MODES.NEW && <AlertNew {...commonProps} />}\n          {mode === MODES.VIEW && (\n            <AlertView canEdit={canEdit} onEdit={this.edit} muted={muted} unmute={this.unmute} {...commonProps} />\n          )}\n          {mode === MODES.EDIT && <AlertEdit cancel={this.cancel} {...commonProps} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default [\n  routeWithUserSession({\n    path: \"/alerts/new\",\n    title: \"New Alert\",\n    render: pageProps => <Alert {...pageProps} mode={MODES.NEW} />,\n  }),\n  routeWithUserSession({\n    path: \"/alerts/:alertId([0-9]+)\",\n    title: \"Alert\",\n    render: pageProps => <Alert {...pageProps} mode={MODES.VIEW} />,\n  }),\n  routeWithUserSession({\n    path: \"/alerts/:alertId([0-9]+)/edit\",\n    title: \"Alert\",\n    render: pageProps => <Alert {...pageProps} mode={MODES.EDIT} />,\n  }),\n];\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\nimport \"./content-with-sidebar.less\";\n\nconst propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  className: null,\n  children: null,\n};\n\n// Sidebar\n\nfunction Sidebar({ className, children, ...props }) {\n  return (\n    <div className={classNames(\"layout-sidebar\", className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nSidebar.propTypes = propTypes;\nSidebar.defaultProps = defaultProps;\n\n// Content\n\nfunction Content({ className, children, ...props }) {\n  return (\n    <div className={classNames(\"layout-content\", className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nContent.propTypes = propTypes;\nContent.defaultProps = defaultProps;\n\n// Layout\n\nexport default function Layout({ className, children, ...props }) {\n  return (\n    <div className={classNames(\"layout-with-sidebar\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nLayout.propTypes = propTypes;\nLayout.defaultProps = defaultProps;\n\nLayout.Sidebar = Sidebar;\nLayout.Content = Content;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport BigMessage from \"@/components/BigMessage\";\nimport { TagsControl } from \"@/components/tags-control/TagsControl\";\n\nexport default function NoTaggedObjectsFound({ objectType, tags }) {\n  return (\n    <BigMessage icon=\"fa-tags\">\n      No {objectType} found tagged with&nbsp;\n      <TagsControl className=\"inline-tags-control\" tags={Array.from(tags)} />.\n    </BigMessage>\n  );\n}\n\nNoTaggedObjectsFound.propTypes = {\n  objectType: PropTypes.string.isRequired,\n  tags: PropTypes.oneOfType([PropTypes.array, PropTypes.objectOf(Set)]).isRequired,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport BigMessage from \"@/components/BigMessage\";\nimport NoTaggedObjectsFound from \"@/components/NoTaggedObjectsFound\";\nimport EmptyState from \"@/components/empty-state/EmptyState\";\n\nexport default function DashboardListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== \"\") {\n    return <BigMessage message=\"Sorry, we couldn't find anything.\" icon=\"fa-search\" />;\n  }\n  if (selectedTags.length > 0) {\n    return <NoTaggedObjectsFound objectType=\"dashboards\" tags={selectedTags} />;\n  }\n  switch (page) {\n    case \"favorites\":\n      return <BigMessage message=\"Mark dashboards as Favorite to list them here.\" icon=\"fa-star\" />;\n    default:\n      return (\n        <EmptyState\n          icon=\"zmdi zmdi-view-quilt\"\n          description=\"See the big picture\"\n          illustration=\"dashboard\"\n          helpLink=\"https://help.redash.io/category/22-dashboards\"\n          showDashboardStep\n        />\n      );\n  }\n}\n\nDashboardListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import React from \"react\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Paginator from \"@/components/Paginator\";\nimport { DashboardTagsControl } from \"@/components/tags-control/TagsControl\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { UrlStateStorage } from \"@/components/items-list/classes/StateStorage\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\n\nimport { Dashboard } from \"@/services/dashboard\";\n\nimport DashboardListEmptyState from \"./components/DashboardListEmptyState\";\n\nimport \"./dashboard-list.css\";\n\nclass DashboardList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: \"all\",\n      href: \"dashboards\",\n      title: \"All Dashboards\",\n    },\n    {\n      key: \"favorites\",\n      href: \"dashboards/favorites\",\n      title: \"Favorites\",\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n    },\n  ];\n\n  listColumns = [\n    Columns.favorites({ className: \"p-r-0\" }),\n    Columns.custom.sortable(\n      (text, item) => (\n        <React.Fragment>\n          <a className=\"table-main-title\" href={\"dashboard/\" + item.slug} data-test={item.slug}>\n            {item.name}\n          </a>\n          <DashboardTagsControl\n            className=\"d-block\"\n            tags={item.tags}\n            isDraft={item.is_draft}\n            isArchived={item.is_archived}\n          />\n        </React.Fragment>\n      ),\n      {\n        title: \"Name\",\n        field: \"name\",\n        width: null,\n      }\n    ),\n    Columns.custom((text, item) => item.user.name, { title: \"Created By\" }),\n    Columns.dateTime.sortable({\n      title: \"Created At\",\n      field: \"created_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div className=\"page-dashboard-list\">\n        <div className=\"container\">\n          <PageHeader title={controller.params.pageTitle} />\n          <Layout className=\"m-l-15 m-r-15\">\n            <Layout.Sidebar className=\"m-b-0\">\n              <Sidebar.SearchInput\n                placeholder=\"Search Dashboards...\"\n                value={controller.searchTerm}\n                onChange={controller.updateSearch}\n              />\n              <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n              <Sidebar.Tags url=\"api/dashboards/tags\" onChange={controller.updateSelectedTags} />\n              <Sidebar.PageSizeSelect\n                className=\"m-b-10\"\n                options={controller.pageSizeOptions}\n                value={controller.itemsPerPage}\n                onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              />\n            </Layout.Sidebar>\n            <Layout.Content>\n              {controller.isLoaded ? (\n                <div data-test=\"DashboardLayoutContent\">\n                  {controller.isEmpty ? (\n                    <DashboardListEmptyState\n                      page={controller.params.currentPage}\n                      searchTerm={controller.searchTerm}\n                      selectedTags={controller.selectedTags}\n                    />\n                  ) : (\n                    <div className=\"bg-white tiled table-responsive\">\n                      <ItemsTable\n                        items={controller.pageItems}\n                        columns={this.listColumns}\n                        orderByField={controller.orderByField}\n                        orderByReverse={controller.orderByReverse}\n                        toggleSorting={controller.toggleSorting}\n                      />\n                      <Paginator\n                        totalCount={controller.totalItemsCount}\n                        itemsPerPage={controller.itemsPerPage}\n                        page={controller.page}\n                        onChange={page => controller.updatePagination({ page })}\n                      />\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <LoadingState />\n              )}\n            </Layout.Content>\n          </Layout>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst DashboardListPage = itemsList(\n  DashboardList,\n  () =>\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Dashboard.query.bind(Dashboard),\n          favorites: Dashboard.favorites.bind(Dashboard),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return item => new Dashboard(item);\n      },\n    }),\n  () => new UrlStateStorage({ orderByField: \"created_at\", orderByReverse: true })\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/dashboards\",\n    title: \"Dashboards\",\n    render: pageProps => <DashboardListPage {...pageProps} currentPage=\"all\" />,\n  }),\n  routeWithUserSession({\n    path: \"/dashboards/favorites\",\n    title: \"Favorite Dashboards\",\n    render: pageProps => <DashboardListPage {...pageProps} currentPage=\"favorites\" />,\n  }),\n];\n","import { each, filter, map, toLower, toString, trim, upperFirst, without } from \"lodash\";\nimport Mousetrap from \"mousetrap\";\nimport \"mousetrap/plugins/global-bind/mousetrap-global-bind\";\n\nconst modKey = /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? \"Cmd\" : \"Ctrl\";\nconst altKey = /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? \"Option\" : \"Alt\";\n\nexport function humanReadableShortcut(shortcut, limit = Infinity) {\n  const modifiers = {\n    mod: upperFirst(modKey),\n    alt: upperFirst(altKey),\n  };\n\n  shortcut = toLower(toString(shortcut));\n  shortcut = filter(map(shortcut.split(\",\"), trim), s => s !== \"\").slice(0, limit);\n  shortcut = map(shortcut, sc => {\n    sc = filter(map(sc.split(\"+\")), s => s !== \"\");\n    return map(sc, s => modifiers[s] || upperFirst(s)).join(\" + \");\n  }).join(\", \");\n\n  return shortcut !== \"\" ? shortcut : null;\n}\n\nconst handlers = {};\n\nfunction onShortcut(event, shortcut) {\n  event.preventDefault();\n  event.retunValue = false;\n  each(handlers[shortcut], fn => fn());\n}\n\nconst KeyboardShortcuts = {\n  modKey,\n  altKey,\n\n  bind: keymap => {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(\",\")\n        .map(trim);\n      each(keys, k => {\n        handlers[k] = [...without(handlers[k], fn), fn];\n        Mousetrap.bindGlobal(k, onShortcut);\n      });\n    });\n  },\n\n  unbind: keymap => {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(\",\")\n        .map(trim);\n      each(keys, k => {\n        handlers[k] = without(handlers[k], fn);\n        if (handlers[k].length === 0) {\n          handlers[k] = undefined;\n          Mousetrap.unbind(k);\n        }\n      });\n    });\n  },\n};\n\nexport default KeyboardShortcuts;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Badge from \"antd/lib/badge\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport KeyboardShortcuts from \"@/services/KeyboardShortcuts\";\n\nfunction ParameterApplyButton({ paramCount, onClick }) {\n  // show spinner when count is empty so the fade out is consistent\n  const icon = !paramCount ? \"spinner fa-pulse\" : \"check\";\n\n  return (\n    <div className=\"parameter-apply-button\" data-show={!!paramCount} data-test=\"ParameterApplyButton\">\n      <Badge count={paramCount}>\n        <Tooltip title={paramCount ? `${KeyboardShortcuts.modKey} + Enter` : null}>\n          <span>\n            <Button onClick={onClick}>\n              <i className={`fa fa-${icon}`} /> Apply Changes\n            </Button>\n          </span>\n        </Tooltip>\n      </Badge>\n    </div>\n  );\n}\n\nParameterApplyButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  paramCount: PropTypes.number.isRequired,\n};\n\nexport default ParameterApplyButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst DateInput = React.forwardRef(({ defaultValue, value, onSelect, className, ...props }, ref) => {\n  const format = clientConfig.dateFormat || \"YYYY-MM-DD\";\n  const additionalAttributes = {};\n  if (defaultValue && defaultValue.isValid()) {\n    additionalAttributes.defaultValue = defaultValue;\n  }\n  if (value === null || (value && value.isValid())) {\n    additionalAttributes.value = value;\n  }\n  return (\n    <DatePicker\n      ref={ref}\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      placeholder=\"Select Date\"\n      onChange={onSelect}\n      {...props}\n    />\n  );\n});\n\nDateInput.propTypes = {\n  defaultValue: Moment,\n  value: Moment,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateInput;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst DateTimeInput = React.forwardRef(({ defaultValue, value, withSeconds, onSelect, className, ...props }, ref) => {\n  const format = (clientConfig.dateFormat || \"YYYY-MM-DD\") + (withSeconds ? \" HH:mm:ss\" : \" HH:mm\");\n  const additionalAttributes = {};\n  if (defaultValue && defaultValue.isValid()) {\n    additionalAttributes.defaultValue = defaultValue;\n  }\n  if (value === null || (value && value.isValid())) {\n    additionalAttributes.value = value;\n  }\n  return (\n    <DatePicker\n      ref={ref}\n      className={className}\n      showTime\n      {...additionalAttributes}\n      format={format}\n      placeholder=\"Select Date and Time\"\n      onChange={onSelect}\n      {...props}\n    />\n  );\n});\n\nDateTimeInput.propTypes = {\n  defaultValue: Moment,\n  value: Moment,\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  withSeconds: false,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateTimeInput;\n","import React, { useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isFunction, get, findIndex } from \"lodash\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Icon from \"antd/lib/icon\";\nimport Menu from \"antd/lib/menu\";\nimport Typography from \"antd/lib/typography\";\nimport { DynamicDateType } from \"@/services/parameters/DateParameter\";\nimport { DynamicDateRangeType } from \"@/services/parameters/DateRangeParameter\";\n\nimport \"./DynamicButton.less\";\n\nconst { Text } = Typography;\n\nfunction DynamicButton({ options, selectedDynamicValue, onSelect, enabled }) {\n  const menu = (\n    <Menu\n      className=\"dynamic-menu\"\n      onClick={({ key }) => onSelect(get(options, key, \"static\"))}\n      selectedKeys={[`${findIndex(options, { value: selectedDynamicValue })}`]}\n      data-test=\"DynamicButtonMenu\">\n      {options.map((option, index) => (\n        // eslint-disable-next-line react/no-array-index-key\n        <Menu.Item key={index}>\n          {option.name} {option.label && <em>{isFunction(option.label) ? option.label() : option.label}</em>}\n        </Menu.Item>\n      ))}\n      {enabled && <Menu.Divider />}\n      {enabled && (\n        <Menu.Item>\n          <Icon type=\"arrow-left\" />\n          <Text type=\"secondary\">Back to Static Value</Text>\n        </Menu.Item>\n      )}\n    </Menu>\n  );\n\n  const containerRef = useRef(null);\n\n  return (\n    <div ref={containerRef}>\n      <a onClick={e => e.stopPropagation()}>\n        <Dropdown.Button\n          overlay={menu}\n          className=\"dynamic-button\"\n          placement=\"bottomRight\"\n          trigger={[\"click\"]}\n          icon={<Icon type=\"thunderbolt\" theme={enabled ? \"twoTone\" : \"outlined\"} className=\"dynamic-icon\" />}\n          getPopupContainer={() => containerRef.current}\n          data-test=\"DynamicButton\"\n        />\n      </a>\n    </div>\n  );\n}\n\nDynamicButton.propTypes = {\n  options: PropTypes.arrayOf(PropTypes.object), // eslint-disable-line react/forbid-prop-types\n  selectedDynamicValue: PropTypes.oneOfType([DynamicDateType, DynamicDateRangeType]),\n  onSelect: PropTypes.func,\n  enabled: PropTypes.bool,\n};\n\nDynamicButton.defaultProps = {\n  options: [],\n  selectedDynamicValue: null,\n  onSelect: () => {},\n  enabled: false,\n};\n\nexport default DynamicButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { includes } from \"lodash\";\nimport { isDynamicDate, getDynamicDateFromString } from \"@/services/parameters/DateParameter\";\nimport DateInput from \"@/components/DateInput\";\nimport DateTimeInput from \"@/components/DateTimeInput\";\nimport DynamicButton from \"@/components/dynamic-parameters/DynamicButton\";\n\nimport \"./DynamicParameters.less\";\n\nconst DYNAMIC_DATE_OPTIONS = [\n  {\n    name: \"Today/Now\",\n    value: getDynamicDateFromString(\"d_now\"),\n    label: () =>\n      getDynamicDateFromString(\"d_now\")\n        .value()\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"Yesterday\",\n    value: getDynamicDateFromString(\"d_yesterday\"),\n    label: () =>\n      getDynamicDateFromString(\"d_yesterday\")\n        .value()\n        .format(\"MMM D\"),\n  },\n];\n\nclass DateParameter extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    className: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n  };\n\n  static defaultProps = {\n    type: \"\",\n    className: \"\",\n    value: null,\n    parameter: null,\n    onSelect: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.dateComponentRef = React.createRef();\n  }\n\n  onDynamicValueSelect = dynamicValue => {\n    const { onSelect, parameter } = this.props;\n    if (dynamicValue === \"static\") {\n      const parameterValue = parameter.getExecutionValue();\n      if (parameterValue) {\n        onSelect(moment(parameterValue));\n      } else {\n        onSelect(null);\n      }\n    } else {\n      onSelect(dynamicValue.value);\n    }\n    // give focus to the DatePicker to get keyboard shortcuts to work\n    this.dateComponentRef.current.focus();\n  };\n\n  render() {\n    const { type, value, className, onSelect } = this.props;\n    const hasDynamicValue = isDynamicDate(value);\n    const isDateTime = includes(type, \"datetime\");\n\n    const additionalAttributes = {};\n\n    let DateComponent = DateInput;\n    if (isDateTime) {\n      DateComponent = DateTimeInput;\n      if (includes(type, \"with-seconds\")) {\n        additionalAttributes.withSeconds = true;\n      }\n    }\n\n    if (moment.isMoment(value) || value === null) {\n      additionalAttributes.value = value;\n    }\n\n    if (hasDynamicValue) {\n      const dynamicDate = value;\n      additionalAttributes.placeholder = dynamicDate && dynamicDate.name;\n      additionalAttributes.value = null;\n    }\n\n    return (\n      <DateComponent\n        ref={this.dateComponentRef}\n        className={classNames(\"redash-datepicker\", { \"dynamic-value\": hasDynamicValue }, className)}\n        onSelect={onSelect}\n        suffixIcon={\n          <DynamicButton\n            options={DYNAMIC_DATE_OPTIONS}\n            selectedDynamicValue={hasDynamicValue ? value : null}\n            enabled={hasDynamicValue}\n            onSelect={this.onDynamicValueSelect}\n          />\n        }\n        {...additionalAttributes}\n      />\n    );\n  }\n}\n\nexport default DateParameter;\n","import { isArray } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst { RangePicker } = DatePicker;\n\nconst DateRangeInput = React.forwardRef(({ defaultValue, value, onSelect, className, ...props }, ref) => {\n  const format = clientConfig.dateFormat || \"YYYY-MM-DD\";\n  const additionalAttributes = {};\n  if (isArray(defaultValue) && defaultValue[0].isValid() && defaultValue[1].isValid()) {\n    additionalAttributes.defaultValue = defaultValue;\n  }\n  if (value === null || (isArray(value) && value[0].isValid() && value[1].isValid())) {\n    additionalAttributes.value = value;\n  }\n  return (\n    <RangePicker\n      ref={ref}\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      onChange={onSelect}\n      {...props}\n    />\n  );\n});\n\nDateRangeInput.propTypes = {\n  defaultValue: PropTypes.arrayOf(Moment),\n  value: PropTypes.arrayOf(Moment),\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateRangeInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateRangeInput;\n","import { isArray } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst { RangePicker } = DatePicker;\n\nconst DateTimeRangeInput = React.forwardRef(\n  ({ defaultValue, value, withSeconds, onSelect, className, ...props }, ref) => {\n    const format = (clientConfig.dateFormat || \"YYYY-MM-DD\") + (withSeconds ? \" HH:mm:ss\" : \" HH:mm\");\n    const additionalAttributes = {};\n    if (isArray(defaultValue) && defaultValue[0].isValid() && defaultValue[1].isValid()) {\n      additionalAttributes.defaultValue = defaultValue;\n    }\n    if (value === null || (isArray(value) && value[0].isValid() && value[1].isValid())) {\n      additionalAttributes.value = value;\n    }\n    return (\n      <RangePicker\n        ref={ref}\n        className={className}\n        showTime\n        {...additionalAttributes}\n        format={format}\n        onChange={onSelect}\n        {...props}\n      />\n    );\n  }\n);\n\nDateTimeRangeInput.propTypes = {\n  defaultValue: PropTypes.arrayOf(Moment),\n  value: PropTypes.arrayOf(Moment),\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeRangeInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  withSeconds: false,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateTimeRangeInput;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { includes, isArray, isObject } from \"lodash\";\nimport { isDynamicDateRange, getDynamicDateRangeFromString } from \"@/services/parameters/DateRangeParameter\";\nimport DateRangeInput from \"@/components/DateRangeInput\";\nimport DateTimeRangeInput from \"@/components/DateTimeRangeInput\";\nimport DynamicButton from \"@/components/dynamic-parameters/DynamicButton\";\n\nimport \"./DynamicParameters.less\";\n\nconst DYNAMIC_DATE_OPTIONS = [\n  {\n    name: \"This week\",\n    value: getDynamicDateRangeFromString(\"d_this_week\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_this_week\")\n        .value()[0]\n        .format(\"MMM D\") +\n      \" - \" +\n      getDynamicDateRangeFromString(\"d_this_week\")\n        .value()[1]\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"This month\",\n    value: getDynamicDateRangeFromString(\"d_this_month\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_this_month\")\n        .value()[0]\n        .format(\"MMMM\"),\n  },\n  {\n    name: \"This year\",\n    value: getDynamicDateRangeFromString(\"d_this_year\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_this_year\")\n        .value()[0]\n        .format(\"YYYY\"),\n  },\n  {\n    name: \"Last week\",\n    value: getDynamicDateRangeFromString(\"d_last_week\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_week\")\n        .value()[0]\n        .format(\"MMM D\") +\n      \" - \" +\n      getDynamicDateRangeFromString(\"d_last_week\")\n        .value()[1]\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"Last month\",\n    value: getDynamicDateRangeFromString(\"d_last_month\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_month\")\n        .value()[0]\n        .format(\"MMMM\"),\n  },\n  {\n    name: \"Last year\",\n    value: getDynamicDateRangeFromString(\"d_last_year\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_year\")\n        .value()[0]\n        .format(\"YYYY\"),\n  },\n  {\n    name: \"Last 7 days\",\n    value: getDynamicDateRangeFromString(\"d_last_7_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_7_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 14 days\",\n    value: getDynamicDateRangeFromString(\"d_last_14_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_14_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 30 days\",\n    value: getDynamicDateRangeFromString(\"d_last_30_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_30_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 60 days\",\n    value: getDynamicDateRangeFromString(\"d_last_60_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_60_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 90 days\",\n    value: getDynamicDateRangeFromString(\"d_last_90_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_90_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n];\n\nconst DYNAMIC_DATETIME_OPTIONS = [\n  {\n    name: \"Today\",\n    value: getDynamicDateRangeFromString(\"d_today\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_today\")\n        .value()[0]\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"Yesterday\",\n    value: getDynamicDateRangeFromString(\"d_yesterday\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_yesterday\")\n        .value()[0]\n        .format(\"MMM D\"),\n  },\n  ...DYNAMIC_DATE_OPTIONS,\n];\n\nconst widthByType = {\n  \"date-range\": 294,\n  \"datetime-range\": 352,\n  \"datetime-range-with-seconds\": 382,\n};\n\nfunction isValidDateRangeValue(value) {\n  return isArray(value) && value.length === 2 && moment.isMoment(value[0]) && moment.isMoment(value[1]);\n}\n\nclass DateRangeParameter extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    className: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n  };\n\n  static defaultProps = {\n    type: \"\",\n    className: \"\",\n    value: null,\n    parameter: null,\n    onSelect: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.dateRangeComponentRef = React.createRef();\n  }\n\n  onDynamicValueSelect = dynamicValue => {\n    const { onSelect, parameter } = this.props;\n    if (dynamicValue === \"static\") {\n      const parameterValue = parameter.getExecutionValue();\n      if (isObject(parameterValue) && parameterValue.start && parameterValue.end) {\n        onSelect([moment(parameterValue.start), moment(parameterValue.end)]);\n      } else {\n        onSelect(null);\n      }\n    } else {\n      onSelect(dynamicValue.value);\n    }\n    // give focus to the DatePicker to get keyboard shortcuts to work\n    this.dateRangeComponentRef.current.focus();\n  };\n\n  render() {\n    const { type, value, onSelect, className } = this.props;\n    const isDateTimeRange = includes(type, \"datetime-range\");\n    const hasDynamicValue = isDynamicDateRange(value);\n    const options = isDateTimeRange ? DYNAMIC_DATETIME_OPTIONS : DYNAMIC_DATE_OPTIONS;\n\n    const additionalAttributes = {};\n\n    let DateRangeComponent = DateRangeInput;\n    if (isDateTimeRange) {\n      DateRangeComponent = DateTimeRangeInput;\n      if (includes(type, \"with-seconds\")) {\n        additionalAttributes.withSeconds = true;\n      }\n    }\n\n    if (isValidDateRangeValue(value) || value === null) {\n      additionalAttributes.value = value;\n    }\n\n    if (hasDynamicValue) {\n      additionalAttributes.placeholder = [value && value.name];\n      additionalAttributes.value = null;\n    }\n\n    return (\n      <DateRangeComponent\n        ref={this.dateRangeComponentRef}\n        className={classNames(\"redash-datepicker date-range-input\", { \"dynamic-value\": hasDynamicValue }, className)}\n        onSelect={onSelect}\n        style={{ width: hasDynamicValue ? 195 : widthByType[type] }}\n        suffixIcon={\n          <DynamicButton\n            options={options}\n            selectedDynamicValue={hasDynamicValue ? value : null}\n            enabled={hasDynamicValue}\n            onSelect={this.onDynamicValueSelect}\n          />\n        }\n        {...additionalAttributes}\n      />\n    );\n  }\n}\n\nexport default DateRangeParameter;\n","import { find, isArray, get, first, map, intersection, isEqual, isEmpty } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\n\nconst { Option } = Select;\n\nexport default class QueryBasedParameterInput extends React.Component {\n  static propTypes = {\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    mode: PropTypes.oneOf([\"default\", \"multiple\"]),\n    queryId: PropTypes.number,\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    value: null,\n    mode: \"default\",\n    parameter: null,\n    queryId: null,\n    onSelect: () => {},\n    className: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: [],\n      value: null,\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this._loadOptions(this.props.queryId);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.queryId !== prevProps.queryId) {\n      this._loadOptions(this.props.queryId);\n    }\n    if (this.props.value !== prevProps.value) {\n      this.setValue(this.props.value);\n    }\n  }\n\n  setValue(value) {\n    const { options } = this.state;\n    if (this.props.mode === \"multiple\") {\n      value = isArray(value) ? value : [value];\n      const optionValues = map(options, option => option.value);\n      const validValues = intersection(value, optionValues);\n      this.setState({ value: validValues });\n      return validValues;\n    }\n    const found = find(options, option => option.value === this.props.value) !== undefined;\n    value = found ? value : get(first(options), \"value\");\n    this.setState({ value });\n    return value;\n  }\n\n  async _loadOptions(queryId) {\n    if (queryId && queryId !== this.state.queryId) {\n      this.setState({ loading: true });\n      const options = await this.props.parameter.loadDropdownValues();\n\n      // stale queryId check\n      if (this.props.queryId === queryId) {\n        this.setState({ options, loading: false }, () => {\n          const updatedValue = this.setValue(this.props.value);\n          if (!isEqual(updatedValue, this.props.value)) {\n            this.props.onSelect(updatedValue);\n          }\n        });\n      }\n    }\n  }\n\n  render() {\n    const { className, value, mode, onSelect, ...otherProps } = this.props;\n    const { loading, options } = this.state;\n    return (\n      <span>\n        <Select\n          className={className}\n          disabled={loading}\n          loading={loading}\n          mode={mode}\n          value={this.state.value}\n          onChange={onSelect}\n          dropdownMatchSelectWidth={false}\n          optionFilterProp=\"children\"\n          showSearch\n          showArrow\n          notFoundContent={isEmpty(options) ? \"No options available\" : null}\n          {...otherProps}>\n          {options.map(option => (\n            <Option value={option.value} key={option.value}>\n              {option.name}\n            </Option>\n          ))}\n        </Select>\n      </span>\n    );\n  }\n}\n","import { isEqual, isEmpty } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport Input from \"antd/lib/input\";\nimport InputNumber from \"antd/lib/input-number\";\nimport DateParameter from \"@/components/dynamic-parameters/DateParameter\";\nimport DateRangeParameter from \"@/components/dynamic-parameters/DateRangeParameter\";\nimport QueryBasedParameterInput from \"./QueryBasedParameterInput\";\n\nimport \"./ParameterValueInput.less\";\n\nconst { Option } = Select;\n\nconst multipleValuesProps = {\n  maxTagCount: 3,\n  maxTagTextLength: 10,\n  maxTagPlaceholder: num => `+${num.length} more`,\n};\n\nclass ParameterValueInput extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    enumOptions: PropTypes.string,\n    queryId: PropTypes.number,\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    type: \"text\",\n    value: null,\n    enumOptions: \"\",\n    queryId: null,\n    parameter: null,\n    onSelect: () => {},\n    className: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.parameter.hasPendingValue ? props.parameter.pendingValue : props.value,\n      isDirty: props.parameter.hasPendingValue,\n    };\n  }\n\n  componentDidUpdate = prevProps => {\n    const { value, parameter } = this.props;\n    // if value prop updated, reset dirty state\n    if (prevProps.value !== value || prevProps.parameter !== parameter) {\n      this.setState({\n        value: parameter.hasPendingValue ? parameter.pendingValue : value,\n        isDirty: parameter.hasPendingValue,\n      });\n    }\n  };\n\n  onSelect = value => {\n    const isDirty = !isEqual(value, this.props.value);\n    this.setState({ value, isDirty });\n    this.props.onSelect(value, isDirty);\n  };\n\n  renderDateParameter() {\n    const { type, parameter } = this.props;\n    const { value } = this.state;\n    return (\n      <DateParameter\n        type={type}\n        className={this.props.className}\n        value={value}\n        parameter={parameter}\n        onSelect={this.onSelect}\n      />\n    );\n  }\n\n  renderDateRangeParameter() {\n    const { type, parameter } = this.props;\n    const { value } = this.state;\n    return (\n      <DateRangeParameter\n        type={type}\n        className={this.props.className}\n        value={value}\n        parameter={parameter}\n        onSelect={this.onSelect}\n      />\n    );\n  }\n\n  renderEnumInput() {\n    const { enumOptions, parameter } = this.props;\n    const { value } = this.state;\n    const enumOptionsArray = enumOptions.split(\"\\n\").filter(v => v !== \"\");\n    // Antd Select doesn't handle null in multiple mode\n    const normalize = val => (parameter.multiValuesOptions && val === null ? [] : val);\n    return (\n      <Select\n        className={this.props.className}\n        mode={parameter.multiValuesOptions ? \"multiple\" : \"default\"}\n        optionFilterProp=\"children\"\n        value={normalize(value)}\n        onChange={this.onSelect}\n        dropdownMatchSelectWidth={false}\n        showSearch\n        showArrow\n        style={{ minWidth: 60 }}\n        notFoundContent={isEmpty(enumOptionsArray) ? \"No options available\" : null}\n        {...multipleValuesProps}>\n        {enumOptionsArray.map(option => (\n          <Option key={option} value={option}>\n            {option}\n          </Option>\n        ))}\n      </Select>\n    );\n  }\n\n  renderQueryBasedInput() {\n    const { queryId, parameter } = this.props;\n    const { value } = this.state;\n    return (\n      <QueryBasedParameterInput\n        className={this.props.className}\n        mode={parameter.multiValuesOptions ? \"multiple\" : \"default\"}\n        optionFilterProp=\"children\"\n        parameter={parameter}\n        value={value}\n        queryId={queryId}\n        onSelect={this.onSelect}\n        style={{ minWidth: 60 }}\n        {...multipleValuesProps}\n      />\n    );\n  }\n\n  renderNumberInput() {\n    const { className } = this.props;\n    const { value } = this.state;\n\n    const normalize = val => (isNaN(val) ? undefined : val);\n\n    return (\n      <InputNumber className={className} value={normalize(value)} onChange={val => this.onSelect(normalize(val))} />\n    );\n  }\n\n  renderTextInput() {\n    const { className } = this.props;\n    const { value } = this.state;\n\n    return (\n      <Input\n        className={className}\n        value={value}\n        data-test=\"TextParamInput\"\n        onChange={e => this.onSelect(e.target.value)}\n      />\n    );\n  }\n\n  renderInput() {\n    const { type } = this.props;\n    switch (type) {\n      case \"datetime-with-seconds\":\n      case \"datetime-local\":\n      case \"date\":\n        return this.renderDateParameter();\n      case \"datetime-range-with-seconds\":\n      case \"datetime-range\":\n      case \"date-range\":\n        return this.renderDateRangeParameter();\n      case \"enum\":\n        return this.renderEnumInput();\n      case \"query\":\n        return this.renderQueryBasedInput();\n      case \"number\":\n        return this.renderNumberInput();\n      default:\n        return this.renderTextInput();\n    }\n  }\n\n  render() {\n    const { isDirty } = this.state;\n\n    return (\n      <div className=\"parameter-input\" data-dirty={isDirty || null} data-test=\"ParameterValueInput\">\n        {this.renderInput()}\n      </div>\n    );\n  }\n}\n\nexport default ParameterValueInput;\n","import { includes, words, capitalize, clone, isNull } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Modal from \"antd/lib/modal\";\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\nimport Select from \"antd/lib/select\";\nimport Input from \"antd/lib/input\";\nimport Divider from \"antd/lib/divider\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport QuerySelector from \"@/components/QuerySelector\";\nimport { Query } from \"@/services/query\";\n\nconst { Option } = Select;\nconst formItemProps = { labelCol: { span: 6 }, wrapperCol: { span: 16 } };\n\nfunction getDefaultTitle(text) {\n  return capitalize(words(text).join(\" \")); // humanize\n}\n\nfunction isTypeDateRange(type) {\n  return /-range/.test(type);\n}\n\nfunction joinExampleList(multiValuesOptions) {\n  const { prefix, suffix } = multiValuesOptions;\n  return [\"value1\", \"value2\", \"value3\"].map(value => `${prefix}${value}${suffix}`).join(\",\");\n}\n\nfunction NameInput({ name, type, onChange, existingNames, setValidation }) {\n  let helpText = \"\";\n  let validateStatus = \"\";\n\n  if (!name) {\n    helpText = \"Choose a keyword for this parameter\";\n    setValidation(false);\n  } else if (includes(existingNames, name)) {\n    helpText = \"Parameter with this name already exists\";\n    setValidation(false);\n    validateStatus = \"error\";\n  } else {\n    if (isTypeDateRange(type)) {\n      helpText = (\n        <React.Fragment>\n          Appears in query as{\" \"}\n          <code style={{ display: \"inline-block\", color: \"inherit\" }}>{`{{${name}.start}} {{${name}.end}}`}</code>\n        </React.Fragment>\n      );\n    }\n    setValidation(true);\n  }\n\n  return (\n    <Form.Item required label=\"Keyword\" help={helpText} validateStatus={validateStatus} {...formItemProps}>\n      <Input onChange={e => onChange(e.target.value)} autoFocus />\n    </Form.Item>\n  );\n}\n\nNameInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  existingNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setValidation: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nfunction EditParameterSettingsDialog(props) {\n  const [param, setParam] = useState(clone(props.parameter));\n  const [isNameValid, setIsNameValid] = useState(true);\n  const [initialQuery, setInitialQuery] = useState();\n\n  const isNew = !props.parameter.name;\n\n  // fetch query by id\n  useEffect(() => {\n    const queryId = props.parameter.queryId;\n    if (queryId) {\n      Query.get({ id: queryId }).then(setInitialQuery);\n    }\n  }, [props.parameter.queryId]);\n\n  function isFulfilled() {\n    // name\n    if (!isNameValid) {\n      return false;\n    }\n\n    // title\n    if (param.title === \"\") {\n      return false;\n    }\n\n    // query\n    if (param.type === \"query\" && !param.queryId) {\n      return false;\n    }\n\n    return true;\n  }\n\n  function onConfirm(e) {\n    // update title to default\n    if (!param.title) {\n      // forced to do this cause param won't update in time for save\n      param.title = getDefaultTitle(param.name);\n      setParam(param);\n    }\n\n    props.dialog.close(param);\n\n    e.preventDefault(); // stops form redirect\n  }\n\n  return (\n    <Modal\n      {...props.dialog.props}\n      title={isNew ? \"Add Parameter\" : param.name}\n      width={600}\n      footer={[\n        <Button key=\"cancel\" onClick={props.dialog.dismiss}>\n          Cancel\n        </Button>,\n        <Button\n          key=\"submit\"\n          htmlType=\"submit\"\n          disabled={!isFulfilled()}\n          type=\"primary\"\n          form=\"paramForm\"\n          data-test=\"SaveParameterSettings\">\n          {isNew ? \"Add Parameter\" : \"OK\"}\n        </Button>,\n      ]}>\n      <Form layout=\"horizontal\" onSubmit={onConfirm} id=\"paramForm\">\n        {isNew && (\n          <NameInput\n            name={param.name}\n            onChange={name => setParam({ ...param, name })}\n            setValidation={setIsNameValid}\n            existingNames={props.existingParams}\n            type={param.type}\n          />\n        )}\n        <Form.Item label=\"Title\" {...formItemProps}>\n          <Input\n            value={isNull(param.title) ? getDefaultTitle(param.name) : param.title}\n            onChange={e => setParam({ ...param, title: e.target.value })}\n            data-test=\"ParameterTitleInput\"\n          />\n        </Form.Item>\n        <Form.Item label=\"Type\" {...formItemProps}>\n          <Select value={param.type} onChange={type => setParam({ ...param, type })} data-test=\"ParameterTypeSelect\">\n            <Option value=\"text\" data-test=\"TextParameterTypeOption\">\n              Text\n            </Option>\n            <Option value=\"number\" data-test=\"NumberParameterTypeOption\">\n              Number\n            </Option>\n            <Option value=\"enum\">Dropdown List</Option>\n            <Option value=\"query\">Query Based Dropdown List</Option>\n            <Option disabled key=\"dv1\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date\" data-test=\"DateParameterTypeOption\">\n              Date\n            </Option>\n            <Option value=\"datetime-local\" data-test=\"DateTimeParameterTypeOption\">\n              Date and Time\n            </Option>\n            <Option value=\"datetime-with-seconds\">Date and Time (with seconds)</Option>\n            <Option disabled key=\"dv2\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date-range\" data-test=\"DateRangeParameterTypeOption\">\n              Date Range\n            </Option>\n            <Option value=\"datetime-range\">Date and Time Range</Option>\n            <Option value=\"datetime-range-with-seconds\">Date and Time Range (with seconds)</Option>\n          </Select>\n        </Form.Item>\n        {param.type === \"enum\" && (\n          <Form.Item label=\"Values\" help=\"Dropdown list values (newline delimited)\" {...formItemProps}>\n            <Input.TextArea\n              rows={3}\n              value={param.enumOptions}\n              onChange={e => setParam({ ...param, enumOptions: e.target.value })}\n            />\n          </Form.Item>\n        )}\n        {param.type === \"query\" && (\n          <Form.Item label=\"Query\" help=\"Select query to load dropdown values from\" {...formItemProps}>\n            <QuerySelector\n              selectedQuery={initialQuery}\n              onChange={q => setParam({ ...param, queryId: q && q.id })}\n              type=\"select\"\n            />\n          </Form.Item>\n        )}\n        {(param.type === \"enum\" || param.type === \"query\") && (\n          <Form.Item className=\"m-b-0\" label=\" \" colon={false} {...formItemProps}>\n            <Checkbox\n              defaultChecked={!!param.multiValuesOptions}\n              onChange={e =>\n                setParam({\n                  ...param,\n                  multiValuesOptions: e.target.checked\n                    ? {\n                        prefix: \"\",\n                        suffix: \"\",\n                        separator: \",\",\n                      }\n                    : null,\n                })\n              }\n              data-test=\"AllowMultipleValuesCheckbox\">\n              Allow multiple values\n            </Checkbox>\n          </Form.Item>\n        )}\n        {(param.type === \"enum\" || param.type === \"query\") && param.multiValuesOptions && (\n          <Form.Item\n            label=\"Quotation\"\n            help={\n              <React.Fragment>\n                Placed in query as: <code>{joinExampleList(param.multiValuesOptions)}</code>\n              </React.Fragment>\n            }\n            {...formItemProps}>\n            <Select\n              value={param.multiValuesOptions.prefix}\n              onChange={quoteOption =>\n                setParam({\n                  ...param,\n                  multiValuesOptions: {\n                    ...param.multiValuesOptions,\n                    prefix: quoteOption,\n                    suffix: quoteOption,\n                  },\n                })\n              }\n              data-test=\"QuotationSelect\">\n              <Option value=\"\">None (default)</Option>\n              <Option value=\"'\">Single Quotation Mark</Option>\n              <Option value={'\"'} data-test=\"DoubleQuotationMarkOption\">\n                Double Quotation Mark\n              </Option>\n            </Select>\n          </Form.Item>\n        )}\n      </Form>\n    </Modal>\n  );\n}\n\nEditParameterSettingsDialog.propTypes = {\n  parameter: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  dialog: DialogPropType.isRequired,\n  existingParams: PropTypes.arrayOf(PropTypes.string),\n};\n\nEditParameterSettingsDialog.defaultProps = {\n  existingParams: [],\n};\n\nexport default wrapDialog(EditParameterSettingsDialog);\n","import { size, filter, forEach, extend } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SortableContainer, SortableElement, DragHandle } from \"@redash/viz/lib/components/sortable\";\nimport location from \"@/services/location\";\nimport { Parameter, createParameter } from \"@/services/parameters\";\nimport ParameterApplyButton from \"@/components/ParameterApplyButton\";\nimport ParameterValueInput from \"@/components/ParameterValueInput\";\nimport EditParameterSettingsDialog from \"./EditParameterSettingsDialog\";\nimport { toHuman } from \"@/lib/utils\";\n\nimport \"./Parameters.less\";\n\nfunction updateUrl(parameters) {\n  const params = extend({}, location.search);\n  parameters.forEach(param => {\n    extend(params, param.toUrlParams());\n  });\n  location.setSearch(params, true);\n}\n\nexport default class Parameters extends React.Component {\n  static propTypes = {\n    parameters: PropTypes.arrayOf(PropTypes.instanceOf(Parameter)),\n    editable: PropTypes.bool,\n    disableUrlUpdate: PropTypes.bool,\n    onValuesChange: PropTypes.func,\n    onPendingValuesChange: PropTypes.func,\n    onParametersEdit: PropTypes.func,\n  };\n\n  static defaultProps = {\n    parameters: [],\n    editable: false,\n    disableUrlUpdate: false,\n    onValuesChange: () => {},\n    onPendingValuesChange: () => {},\n    onParametersEdit: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    const { parameters } = props;\n    this.state = { parameters };\n    if (!props.disableUrlUpdate) {\n      updateUrl(parameters);\n    }\n  }\n\n  componentDidUpdate = prevProps => {\n    const { parameters, disableUrlUpdate } = this.props;\n    const parametersChanged = prevProps.parameters !== parameters;\n    const disableUrlUpdateChanged = prevProps.disableUrlUpdate !== disableUrlUpdate;\n    if (parametersChanged) {\n      this.setState({ parameters });\n    }\n    if ((parametersChanged || disableUrlUpdateChanged) && !disableUrlUpdate) {\n      updateUrl(parameters);\n    }\n  };\n\n  handleKeyDown = e => {\n    // Cmd/Ctrl/Alt + Enter\n    if (e.keyCode === 13 && (e.ctrlKey || e.metaKey || e.altKey)) {\n      e.stopPropagation();\n      this.applyChanges();\n    }\n  };\n\n  setPendingValue = (param, value, isDirty) => {\n    const { onPendingValuesChange } = this.props;\n    this.setState(({ parameters }) => {\n      if (isDirty) {\n        param.setPendingValue(value);\n      } else {\n        param.clearPendingValue();\n      }\n      onPendingValuesChange();\n      return { parameters };\n    });\n  };\n\n  moveParameter = ({ oldIndex, newIndex }) => {\n    const { onParametersEdit } = this.props;\n    if (oldIndex !== newIndex) {\n      this.setState(({ parameters }) => {\n        parameters.splice(newIndex, 0, parameters.splice(oldIndex, 1)[0]);\n        onParametersEdit();\n        return { parameters };\n      });\n    }\n  };\n\n  applyChanges = () => {\n    const { onValuesChange, disableUrlUpdate } = this.props;\n    this.setState(({ parameters }) => {\n      const parametersWithPendingValues = parameters.filter(p => p.hasPendingValue);\n      forEach(parameters, p => p.applyPendingValue());\n      if (!disableUrlUpdate) {\n        updateUrl(parameters);\n      }\n      onValuesChange(parametersWithPendingValues);\n      return { parameters };\n    });\n  };\n\n  showParameterSettings = (parameter, index) => {\n    const { onParametersEdit } = this.props;\n    EditParameterSettingsDialog.showModal({ parameter }).onClose(updated => {\n      this.setState(({ parameters }) => {\n        const updatedParameter = extend(parameter, updated);\n        parameters[index] = createParameter(updatedParameter, updatedParameter.parentQueryId);\n        onParametersEdit();\n        return { parameters };\n      });\n    });\n  };\n\n  renderParameter(param, index) {\n    const { editable } = this.props;\n    return (\n      <div key={param.name} className=\"di-block\" data-test={`ParameterName-${param.name}`}>\n        <div className=\"parameter-heading\">\n          <label>{param.title || toHuman(param.name)}</label>\n          {editable && (\n            <button\n              className=\"btn btn-default btn-xs m-l-5\"\n              onClick={() => this.showParameterSettings(param, index)}\n              data-test={`ParameterSettings-${param.name}`}\n              type=\"button\">\n              <i className=\"fa fa-cog\" />\n            </button>\n          )}\n        </div>\n        <ParameterValueInput\n          type={param.type}\n          value={param.normalizedValue}\n          parameter={param}\n          enumOptions={param.enumOptions}\n          queryId={param.queryId}\n          onSelect={(value, isDirty) => this.setPendingValue(param, value, isDirty)}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { parameters } = this.state;\n    const { editable } = this.props;\n    const dirtyParamCount = size(filter(parameters, \"hasPendingValue\"));\n    return (\n      <SortableContainer\n        disabled={!editable}\n        axis=\"xy\"\n        useDragHandle\n        lockToContainerEdges\n        helperClass=\"parameter-dragged\"\n        updateBeforeSortStart={this.onBeforeSortStart}\n        onSortEnd={this.moveParameter}\n        containerProps={{\n          className: \"parameter-container\",\n          onKeyDown: dirtyParamCount ? this.handleKeyDown : null,\n        }}>\n        {parameters.map((param, index) => (\n          <SortableElement key={param.name} index={index}>\n            <div className=\"parameter-block\" data-editable={editable || null}>\n              {editable && <DragHandle data-test={`DragHandle-${param.name}`} />}\n              {this.renderParameter(param, index)}\n            </div>\n          </SortableElement>\n        ))}\n        <ParameterApplyButton onClick={this.applyChanges} paramCount={dirtyParamCount} />\n      </SortableContainer>\n    );\n  }\n}\n","import React, { useMemo, useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport { Moment } from \"@/components/proptypes\";\n\nexport default function Timer({ from }) {\n  const startTime = useMemo(() => moment(from).valueOf(), [from]);\n  const [value, setValue] = useState(null);\n\n  useEffect(() => {\n    function update() {\n      const diff = moment.now() - startTime;\n      const format = diff > 1000 * 60 * 60 ? \"HH:mm:ss\" : \"mm:ss\"; // no HH under an hour\n      setValue(moment.utc(diff).format(format));\n    }\n    update();\n\n    const timer = setInterval(update, 1000);\n    return () => clearInterval(timer);\n  }, [startTime]);\n\n  return <span className=\"rd-timer\">{value}</span>;\n}\n\nTimer.propTypes = {\n  from: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date), Moment]),\n};\n\nTimer.defaultProps = {\n  from: null,\n};\n","import React from \"react\";\nimport { VisualizationType, registeredVisualizations } from \"@redash/viz/lib\";\n\nimport \"./VisualizationName.less\";\n\nfunction VisualizationName({ visualization }) {\n  const config = registeredVisualizations[visualization.type];\n  return (\n    <span className=\"visualization-name\">\n      {config && visualization.name !== config.name ? visualization.name : null}\n    </span>\n  );\n}\n\nVisualizationName.propTypes = {\n  visualization: VisualizationType.isRequired,\n};\n\nexport default VisualizationName;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VisualizationType } from \"@redash/viz/lib\";\nimport VisualizationName from \"@/components/visualizations/VisualizationName\";\n\nimport \"./QueryLink.less\";\n\nfunction QueryLink({ query, visualization, readOnly }) {\n  const getUrl = () => {\n    let hash = null;\n    if (visualization) {\n      if (visualization.type === \"TABLE\") {\n        // link to hard-coded table tab instead of the (hidden) visualization tab\n        hash = \"table\";\n      } else {\n        hash = visualization.id;\n      }\n    }\n\n    return query.getUrl(false, hash);\n  };\n\n  return (\n    <a href={readOnly ? null : getUrl()} className=\"query-link\">\n      <VisualizationName visualization={visualization} /> <span>{query.name}</span>\n    </a>\n  );\n}\n\nQueryLink.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  visualization: VisualizationType,\n  readOnly: PropTypes.bool,\n};\n\nQueryLink.defaultProps = {\n  visualization: null,\n  readOnly: false,\n};\n\nexport default QueryLink;\n","import { isArray, indexOf, get, map, includes, every, some, toNumber } from \"lodash\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport { formatColumnValue } from \"@/lib/utils\";\n\nconst ALL_VALUES = \"###Redash::Filters::SelectAll###\";\nconst NONE_VALUES = \"###Redash::Filters::Clear###\";\n\nexport const FilterType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  friendlyName: PropTypes.string.isRequired,\n  multiple: PropTypes.bool,\n  current: PropTypes.oneOfType([PropTypes.any, PropTypes.arrayOf(PropTypes.any)]),\n  values: PropTypes.arrayOf(PropTypes.any).isRequired,\n});\n\nexport const FiltersType = PropTypes.arrayOf(FilterType);\n\nfunction createFilterChangeHandler(filters, onChange) {\n  return (filter, values) => {\n    if (isArray(values)) {\n      values = map(values, value => filter.values[toNumber(value.key)] || value.key);\n    } else {\n      const _values = filter.values[toNumber(values.key)];\n      values = _values !== undefined ? _values : values.key;\n    }\n\n    if (filter.multiple && includes(values, ALL_VALUES)) {\n      values = [...filter.values];\n    }\n    if (filter.multiple && includes(values, NONE_VALUES)) {\n      values = [];\n    }\n    filters = map(filters, f => (f.name === filter.name ? { ...filter, current: values } : f));\n    onChange(filters);\n  };\n}\n\nexport function filterData(rows, filters = []) {\n  if (!isArray(rows)) {\n    return [];\n  }\n\n  let result = rows;\n\n  if (isArray(filters) && filters.length > 0) {\n    // \"every\" field's value should match \"some\" of corresponding filter's values\n    result = result.filter(row =>\n      every(filters, filter => {\n        const rowValue = row[filter.name];\n        const filterValues = isArray(filter.current) ? filter.current : [filter.current];\n        return some(filterValues, filterValue => {\n          if (moment.isMoment(rowValue)) {\n            return rowValue.isSame(filterValue);\n          }\n          // We compare with either the value or the String representation of the value,\n          // because Select2 casts true/false to \"true\"/\"false\".\n          return filterValue === rowValue || String(rowValue) === filterValue;\n        });\n      })\n    );\n  }\n\n  return result;\n}\n\nfunction Filters({ filters, onChange }) {\n  if (filters.length === 0) {\n    return null;\n  }\n\n  onChange = createFilterChangeHandler(filters, onChange);\n\n  return (\n    <div className=\"filters-wrapper\" data-test=\"Filters\">\n      <div className=\"container bg-white\">\n        <div className=\"row\">\n          {map(filters, filter => {\n            const options = map(filter.values, (value, index) => (\n              <Select.Option key={index}>{formatColumnValue(value, get(filter, \"column.type\"))}</Select.Option>\n            ));\n\n            return (\n              <div\n                key={filter.name}\n                className=\"col-sm-6 p-l-0 filter-container\"\n                data-test={`FilterName-${filter.name}`}>\n                <label>{filter.friendlyName}</label>\n                {options.length === 0 && <Select className=\"w-100\" disabled value=\"No values\" />}\n                {options.length > 0 && (\n                  <Select\n                    labelInValue\n                    className=\"w-100\"\n                    mode={filter.multiple ? \"multiple\" : \"default\"}\n                    value={\n                      isArray(filter.current)\n                        ? map(filter.current, value => ({\n                            key: `${indexOf(filter.values, value)}`,\n                            label: formatColumnValue(value),\n                          }))\n                        : { key: `${indexOf(filter.values, filter.current)}`, label: formatColumnValue(filter.current) }\n                    }\n                    allowClear={filter.multiple}\n                    optionFilterProp=\"children\"\n                    showSearch\n                    maxTagCount={3}\n                    maxTagTextLength={10}\n                    maxTagPlaceholder={num => `+${num.length} more`}\n                    onChange={values => onChange(filter, values)}>\n                    {!filter.multiple && options}\n                    {filter.multiple && [\n                      <Select.Option key={NONE_VALUES} data-test=\"ClearOption\">\n                        <i className=\"fa fa-square-o m-r-5\" />\n                        Clear\n                      </Select.Option>,\n                      <Select.Option key={ALL_VALUES} data-test=\"SelectAllOption\">\n                        <i className=\"fa fa-check-square-o m-r-5\" />\n                        Select All\n                      </Select.Option>,\n                      <Select.OptGroup key=\"Values\" title=\"Values\">\n                        {options}\n                      </Select.OptGroup>,\n                    ]}\n                  </Select>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nFilters.propTypes = {\n  filters: FiltersType.isRequired,\n  onChange: PropTypes.func, // (name, value) => void\n};\n\nFilters.defaultProps = {\n  onChange: () => {},\n};\n\nexport default Filters;\n","import { useMemo } from \"react\";\nimport { get, invoke } from \"lodash\";\n\nfunction getQueryResultData(queryResult, queryResultStatus = null) {\n  return {\n    status: queryResultStatus || invoke(queryResult, \"getStatus\") || null,\n    columns: invoke(queryResult, \"getColumns\") || [],\n    rows: invoke(queryResult, \"getData\") || [],\n    filters: invoke(queryResult, \"getFilters\") || [],\n    updatedAt: invoke(queryResult, \"getUpdatedAt\") || null,\n    retrievedAt: get(queryResult, \"query_result.retrieved_at\", null),\n    log: invoke(queryResult, \"getLog\") || [],\n    error: invoke(queryResult, \"getError\") || null,\n    runtime: invoke(queryResult, \"getRuntime\") || null,\n    metadata: get(queryResult, \"query_result.data.metadata\", {}),\n  };\n}\n\nexport default function useQueryResultData(queryResult) {\n  // make sure it re-executes when queryResult status changes\n  const queryResultStatus = invoke(queryResult, \"getStatus\");\n  return useMemo(() => getQueryResultData(queryResult, queryResultStatus), [queryResult, queryResultStatus]);\n}\n","import React from \"react\";\nimport { pick } from \"lodash\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { Renderer as VisRenderer, Editor as VisEditor, updateVisualizationsSettings } from \"@redash/viz/lib\";\nimport { clientConfig } from \"@/services/auth\";\n\nimport countriesDataUrl from \"@redash/viz/lib/visualizations/choropleth/maps/countries.geo.json\";\nimport subdivJapanDataUrl from \"@redash/viz/lib/visualizations/choropleth/maps/japan.prefectures.geo.json\";\n\nfunction wrapComponentWithSettings(WrappedComponent) {\n  return function VisualizationComponent(props) {\n    updateVisualizationsSettings({\n      HelpTriggerComponent: HelpTrigger,\n      choroplethAvailableMaps: {\n        countries: {\n          name: \"Countries\",\n          url: countriesDataUrl,\n        },\n        subdiv_japan: {\n          name: \"Japan/Prefectures\",\n          url: subdivJapanDataUrl,\n        },\n      },\n      ...pick(clientConfig, [\n        \"dateFormat\",\n        \"dateTimeFormat\",\n        \"integerFormat\",\n        \"floatFormat\",\n        \"booleanValues\",\n        \"tableCellMaxJSONSize\",\n        \"allowCustomJSVisualization\",\n        \"hidePlotlyModeBar\",\n      ]),\n    });\n\n    return <WrappedComponent {...props} />;\n  };\n}\n\nexport const Renderer = wrapComponentWithSettings(VisRenderer);\nexport const Editor = wrapComponentWithSettings(VisEditor);\n","import { map, find } from \"lodash\";\nimport React, { useState, useMemo, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport Filters, { FiltersType, filterData } from \"@/components/Filters\";\nimport { VisualizationType } from \"@redash/viz/lib\";\nimport { Renderer } from \"@/components/visualizations/visualizationComponents\";\n\nfunction combineFilters(localFilters, globalFilters) {\n  // tiny optimization - to avoid unnecessary updates\n  if (localFilters.length === 0 || globalFilters.length === 0) {\n    return localFilters;\n  }\n\n  return map(localFilters, localFilter => {\n    const globalFilter = find(globalFilters, f => f.name === localFilter.name);\n    if (globalFilter) {\n      return {\n        ...localFilter,\n        current: globalFilter.current,\n      };\n    }\n    return localFilter;\n  });\n}\n\nexport default function VisualizationRenderer(props) {\n  const data = useQueryResultData(props.queryResult);\n  const [filters, setFilters] = useState(data.filters);\n  const filtersRef = useRef();\n  filtersRef.current = filters;\n\n  // Reset local filters when query results updated\n  useEffect(() => {\n    setFilters(combineFilters(data.filters, props.filters));\n  }, [data.filters, props.filters]);\n\n  // Update local filters when global filters changed.\n  // For correct behavior need to watch only `props.filters` here,\n  // therefore using ref to access current local filters\n  useEffect(() => {\n    setFilters(combineFilters(filtersRef.current, props.filters));\n  }, [props.filters]);\n\n  const filteredData = useMemo(\n    () => ({\n      columns: data.columns,\n      rows: filterData(data.rows, filters),\n    }),\n    [data, filters]\n  );\n\n  const { showFilters, visualization } = props;\n\n  let options = { ...visualization.options };\n\n  // define pagination size based on context for Table visualization\n  if (visualization.type === \"TABLE\") {\n    options.paginationSize = props.context === \"widget\" ? \"small\" : \"default\";\n  }\n\n  return (\n    <Renderer\n      key={`visualization${visualization.id}`}\n      type={visualization.type}\n      options={options}\n      data={filteredData}\n      visualizationName={visualization.name}\n      addonBefore={showFilters && <Filters filters={filters} onChange={setFilters} />}\n    />\n  );\n}\n\nVisualizationRenderer.propTypes = {\n  visualization: VisualizationType.isRequired,\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  filters: FiltersType,\n  showFilters: PropTypes.bool,\n  context: PropTypes.oneOf([\"query\", \"widget\"]).isRequired,\n};\n\nVisualizationRenderer.defaultProps = {\n  filters: [],\n  showFilters: true,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\nimport VisualizationName from \"@/components/visualizations/VisualizationName\";\n\nfunction ExpandedWidgetDialog({ dialog, widget }) {\n  return (\n    <Modal\n      {...dialog.props}\n      title={\n        <>\n          <VisualizationName visualization={widget.visualization} /> <span>{widget.getQuery().name}</span>\n        </>\n      }\n      width=\"95%\"\n      footer={<Button onClick={dialog.dismiss}>Close</Button>}>\n      <VisualizationRenderer\n        visualization={widget.visualization}\n        queryResult={widget.getQueryResult()}\n        context=\"widget\"\n      />\n    </Modal>\n  );\n}\n\nExpandedWidgetDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nexport default wrapDialog(ExpandedWidgetDialog);\n","/* eslint-disable react/no-multi-comp */\n\nimport { isString, extend, each, has, map, includes, findIndex, find, fromPairs, clone, isEmpty } from \"lodash\";\nimport React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Select from \"antd/lib/select\";\nimport Table from \"antd/lib/table\";\nimport Popover from \"antd/lib/popover\";\nimport Button from \"antd/lib/button\";\nimport Icon from \"antd/lib/icon\";\nimport Tag from \"antd/lib/tag\";\nimport Input from \"antd/lib/input\";\nimport Radio from \"antd/lib/radio\";\nimport Form from \"antd/lib/form\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport ParameterValueInput from \"@/components/ParameterValueInput\";\nimport { ParameterMappingType } from \"@/services/widget\";\nimport { Parameter, cloneParameter } from \"@/services/parameters\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nimport \"./ParameterMappingInput.less\";\n\nconst { Option } = Select;\n\nexport const MappingType = {\n  DashboardAddNew: \"dashboard-add-new\",\n  DashboardMapToExisting: \"dashboard-map-to-existing\",\n  WidgetLevel: \"widget-level\",\n  StaticValue: \"static-value\",\n};\n\nexport function parameterMappingsToEditableMappings(mappings, parameters, existingParameterNames = []) {\n  return map(mappings, mapping => {\n    const result = extend({}, mapping);\n    const alreadyExists = includes(existingParameterNames, mapping.mapTo);\n    result.param = find(parameters, p => p.name === mapping.name);\n    switch (mapping.type) {\n      case ParameterMappingType.DashboardLevel:\n        result.type = alreadyExists ? MappingType.DashboardMapToExisting : MappingType.DashboardAddNew;\n        result.value = null;\n        break;\n      case ParameterMappingType.StaticValue:\n        result.type = MappingType.StaticValue;\n        result.param = cloneParameter(result.param);\n        result.param.setValue(result.value);\n        break;\n      case ParameterMappingType.WidgetLevel:\n        result.type = MappingType.WidgetLevel;\n        result.value = null;\n        break;\n      // no default\n    }\n    return result;\n  });\n}\n\nexport function editableMappingsToParameterMappings(mappings) {\n  return fromPairs(\n    map(\n      // convert to map\n      mappings,\n      mapping => {\n        const result = extend({}, mapping);\n        switch (mapping.type) {\n          case MappingType.DashboardAddNew:\n            result.type = ParameterMappingType.DashboardLevel;\n            result.value = null;\n            break;\n          case MappingType.DashboardMapToExisting:\n            result.type = ParameterMappingType.DashboardLevel;\n            result.value = null;\n            break;\n          case MappingType.StaticValue:\n            result.type = ParameterMappingType.StaticValue;\n            result.param = cloneParameter(mapping.param);\n            result.param.setValue(result.value);\n            result.value = result.param.value;\n            break;\n          case MappingType.WidgetLevel:\n            result.type = ParameterMappingType.WidgetLevel;\n            result.value = null;\n            break;\n          // no default\n        }\n        delete result.param;\n        return [result.name, result];\n      }\n    )\n  );\n}\n\nexport function synchronizeWidgetTitles(sourceMappings, widgets) {\n  const affectedWidgets = [];\n\n  each(sourceMappings, sourceMapping => {\n    if (sourceMapping.type === ParameterMappingType.DashboardLevel) {\n      each(widgets, widget => {\n        const widgetMappings = widget.options.parameterMappings;\n        each(widgetMappings, widgetMapping => {\n          // check if mapped to the same dashboard-level parameter\n          if (\n            widgetMapping.type === ParameterMappingType.DashboardLevel &&\n            widgetMapping.mapTo === sourceMapping.mapTo\n          ) {\n            // dirty check - update only when needed\n            if (widgetMapping.title !== sourceMapping.title) {\n              widgetMapping.title = sourceMapping.title;\n              affectedWidgets.push(widget);\n            }\n          }\n        });\n      });\n    }\n  });\n\n  return affectedWidgets;\n}\n\nexport class ParameterMappingInput extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string),\n    onChange: PropTypes.func,\n    inputError: PropTypes.string,\n  };\n\n  static defaultProps = {\n    mapping: {},\n    existingParamNames: [],\n    onChange: () => {},\n    inputError: null,\n  };\n\n  formItemProps = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 16 },\n    className: \"form-item\",\n  };\n\n  updateSourceType = type => {\n    let {\n      mapping: { mapTo },\n    } = this.props;\n    const { existingParamNames } = this.props;\n\n    // if mapped name doesn't already exists\n    // default to first select option\n    if (type === MappingType.DashboardMapToExisting && !includes(existingParamNames, mapTo)) {\n      mapTo = existingParamNames[0];\n    }\n\n    this.updateParamMapping({ type, mapTo });\n  };\n\n  updateParamMapping = update => {\n    const { onChange, mapping } = this.props;\n    const newMapping = extend({}, mapping, update);\n    if (newMapping.value !== mapping.value) {\n      newMapping.param = cloneParameter(newMapping.param);\n      newMapping.param.setValue(newMapping.value);\n    }\n    if (has(update, \"type\")) {\n      if (update.type === MappingType.StaticValue) {\n        newMapping.value = newMapping.param.value;\n      } else {\n        newMapping.value = null;\n      }\n    }\n    onChange(newMapping);\n  };\n\n  renderMappingTypeSelector() {\n    const noExisting = isEmpty(this.props.existingParamNames);\n    return (\n      <Radio.Group value={this.props.mapping.type} onChange={e => this.updateSourceType(e.target.value)}>\n        <Radio className=\"radio\" value={MappingType.DashboardAddNew} data-test=\"NewDashboardParameterOption\">\n          New dashboard parameter\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.DashboardMapToExisting} disabled={noExisting}>\n          Existing dashboard parameter{\" \"}\n          {noExisting ? (\n            <Tooltip title=\"There are no dashboard parameters corresponding to this data type\">\n              <Icon type=\"question-circle\" theme=\"filled\" />\n            </Tooltip>\n          ) : null}\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.WidgetLevel} data-test=\"WidgetParameterOption\">\n          Widget parameter\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.StaticValue} data-test=\"StaticValueOption\">\n          Static value\n        </Radio>\n      </Radio.Group>\n    );\n  }\n\n  renderDashboardAddNew() {\n    const {\n      mapping: { mapTo },\n    } = this.props;\n    return <Input value={mapTo} onChange={e => this.updateParamMapping({ mapTo: e.target.value })} />;\n  }\n\n  renderDashboardMapToExisting() {\n    const { mapping, existingParamNames } = this.props;\n\n    return (\n      <Select\n        value={mapping.mapTo}\n        onChange={mapTo => this.updateParamMapping({ mapTo })}\n        dropdownMatchSelectWidth={false}>\n        {map(existingParamNames, name => (\n          <Option value={name} key={name}>\n            {name}\n          </Option>\n        ))}\n      </Select>\n    );\n  }\n\n  renderStaticValue() {\n    const { mapping } = this.props;\n    return (\n      <ParameterValueInput\n        type={mapping.param.type}\n        value={mapping.param.normalizedValue}\n        enumOptions={mapping.param.enumOptions}\n        queryId={mapping.param.queryId}\n        parameter={mapping.param}\n        onSelect={value => this.updateParamMapping({ value })}\n      />\n    );\n  }\n\n  renderInputBlock() {\n    const { mapping } = this.props;\n    switch (mapping.type) {\n      case MappingType.DashboardAddNew:\n        return [\"Key\", \"Enter a new parameter keyword\", this.renderDashboardAddNew()];\n      case MappingType.DashboardMapToExisting:\n        return [\"Key\", \"Select from a list of existing parameters\", this.renderDashboardMapToExisting()];\n      case MappingType.StaticValue:\n        return [\"Value\", null, this.renderStaticValue()];\n      default:\n        return [];\n    }\n  }\n\n  render() {\n    const { inputError } = this.props;\n    const [label, help, input] = this.renderInputBlock();\n\n    return (\n      <Form layout=\"horizontal\">\n        <Form.Item label=\"Source\" {...this.formItemProps}>\n          {this.renderMappingTypeSelector()}\n        </Form.Item>\n        <Form.Item\n          style={{ height: 60, visibility: input ? \"visible\" : \"hidden\" }}\n          label={label}\n          {...this.formItemProps}\n          validateStatus={inputError ? \"error\" : \"\"}\n          help={inputError || help} // empty space so line doesn't collapse\n        >\n          {input}\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nclass MappingEditor extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      mapping: clone(this.props.mapping),\n      inputError: null,\n    };\n  }\n\n  onVisibleChange = visible => {\n    if (visible) this.show();\n    else this.hide();\n  };\n\n  onChange = mapping => {\n    let inputError = null;\n\n    if (mapping.type === MappingType.DashboardAddNew) {\n      if (isEmpty(mapping.mapTo)) {\n        inputError = \"Keyword must have a value\";\n      } else if (includes(this.props.existingParamNames, mapping.mapTo)) {\n        inputError = \"A parameter with this name already exists\";\n      }\n    }\n\n    this.setState({ mapping, inputError });\n  };\n\n  save = () => {\n    this.props.onChange(this.props.mapping, this.state.mapping);\n    this.hide();\n  };\n\n  show = () => {\n    this.setState({\n      visible: true,\n      mapping: clone(this.props.mapping), // restore original state\n    });\n  };\n\n  hide = () => {\n    this.setState({ visible: false });\n  };\n\n  renderContent() {\n    const { mapping, inputError } = this.state;\n\n    return (\n      <div className=\"parameter-mapping-editor\" data-test=\"EditParamMappingPopover\">\n        <header>\n          Edit Source and Value <HelpTrigger type=\"VALUE_SOURCE_OPTIONS\" />\n        </header>\n        <ParameterMappingInput\n          mapping={mapping}\n          existingParamNames={this.props.existingParamNames}\n          onChange={this.onChange}\n          inputError={inputError}\n        />\n        <footer>\n          <Button onClick={this.hide}>Cancel</Button>\n          <Button onClick={this.save} disabled={!!inputError} type=\"primary\">\n            OK\n          </Button>\n        </footer>\n      </div>\n    );\n  }\n\n  render() {\n    const { visible, mapping } = this.state;\n    return (\n      <Popover\n        placement=\"left\"\n        trigger=\"click\"\n        content={this.renderContent()}\n        visible={visible}\n        onVisibleChange={this.onVisibleChange}>\n        <Button size=\"small\" type=\"dashed\" data-test={`EditParamMappingButon-${mapping.param.name}`}>\n          <Icon type=\"edit\" />\n        </Button>\n      </Popover>\n    );\n  }\n}\n\nclass TitleEditor extends React.Component {\n  static propTypes = {\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    onChange: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    existingParams: [],\n  };\n\n  state = {\n    showPopup: false,\n    title: \"\", // will be set on editing\n  };\n\n  onPopupVisibleChange = showPopup => {\n    this.setState({\n      showPopup,\n      title: showPopup ? this.getMappingTitle() : \"\",\n    });\n  };\n\n  onEditingTitleChange = event => {\n    this.setState({ title: event.target.value });\n  };\n\n  getMappingTitle() {\n    let { mapping } = this.props;\n\n    if (isString(mapping.title) && mapping.title !== \"\") {\n      return mapping.title;\n    }\n\n    // if mapped to dashboard, find source param and return it's title\n    if (mapping.type === MappingType.DashboardMapToExisting) {\n      const source = find(this.props.existingParams, { name: mapping.mapTo });\n      if (source) {\n        mapping = source;\n      }\n    }\n\n    return mapping.title || mapping.param.title;\n  }\n\n  save = () => {\n    const newMapping = extend({}, this.props.mapping, { title: this.state.title });\n    this.props.onChange(newMapping);\n    this.hide();\n  };\n\n  hide = () => {\n    this.setState({ showPopup: false });\n  };\n\n  renderPopover() {\n    const {\n      param: { title: paramTitle },\n    } = this.props.mapping;\n\n    return (\n      <div className=\"parameter-mapping-title-editor\">\n        <Input\n          size=\"small\"\n          value={this.state.title}\n          placeholder={paramTitle}\n          onChange={this.onEditingTitleChange}\n          onPressEnter={this.save}\n          maxLength={100}\n          autoFocus\n        />\n        <Button size=\"small\" type=\"dashed\" onClick={this.hide}>\n          <Icon type=\"close\" />\n        </Button>\n        <Button size=\"small\" type=\"dashed\" onClick={this.save}>\n          <Icon type=\"check\" />\n        </Button>\n      </div>\n    );\n  }\n\n  renderEditButton() {\n    const { mapping } = this.props;\n    if (mapping.type === MappingType.StaticValue) {\n      return (\n        <Tooltip placement=\"right\" title=\"Titles for static values don't appear in widgets\">\n          <i className=\"fa fa-eye-slash\" />\n        </Tooltip>\n      );\n    }\n    return (\n      <Popover\n        placement=\"right\"\n        trigger=\"click\"\n        content={this.renderPopover()}\n        visible={this.state.showPopup}\n        onVisibleChange={this.onPopupVisibleChange}>\n        <Button size=\"small\" type=\"dashed\">\n          <Icon type=\"edit\" />\n        </Button>\n      </Popover>\n    );\n  }\n\n  render() {\n    const { mapping } = this.props;\n    // static value are non-editable hence disabled\n    const disabled = mapping.type === MappingType.StaticValue;\n\n    return (\n      <div className={classNames(\"parameter-mapping-title\", { disabled })}>\n        <span className=\"text\">{this.getMappingTitle()}</span>\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nexport class ParameterMappingListInput extends React.Component {\n  static propTypes = {\n    mappings: PropTypes.arrayOf(PropTypes.object),\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    onChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    mappings: [],\n    existingParams: [],\n    onChange: () => {},\n  };\n\n  static getStringValue(value) {\n    // null\n    if (!value) {\n      return \"\";\n    }\n\n    // range\n    if (value instanceof Object && \"start\" in value && \"end\" in value) {\n      return `${value.start} ~ ${value.end}`;\n    }\n\n    // just to be safe, array or object\n    if (typeof value === \"object\") {\n      return map(value, v => this.getStringValue(v)).join(\", \");\n    }\n\n    // rest\n    return value.toString();\n  }\n\n  static getDefaultValue(mapping, existingParams) {\n    const { type, mapTo, name } = mapping;\n    let { param } = mapping;\n\n    // if mapped to another param, swap 'em\n    if (type === MappingType.DashboardMapToExisting && mapTo !== name) {\n      const mappedTo = find(existingParams, { name: mapTo });\n      if (mappedTo) {\n        // just being safe\n        param = mappedTo;\n      }\n\n      // static type is different since it's fed param.normalizedValue\n    } else if (type === MappingType.StaticValue) {\n      param = cloneParameter(param).setValue(mapping.value);\n    }\n\n    let value = Parameter.getExecutionValue(param);\n\n    // in case of dynamic value display the name instead of value\n    if (param.hasDynamicValue) {\n      value = param.normalizedValue.name;\n    }\n\n    return this.getStringValue(value);\n  }\n\n  static getSourceTypeLabel({ type, mapTo }) {\n    switch (type) {\n      case MappingType.DashboardAddNew:\n      case MappingType.DashboardMapToExisting:\n        return (\n          <Fragment>\n            Dashboard <Tag className=\"tag\">{mapTo}</Tag>\n          </Fragment>\n        );\n      case MappingType.WidgetLevel:\n        return \"Widget parameter\";\n      case MappingType.StaticValue:\n        return \"Static value\";\n      default:\n        return \"\"; // won't happen (typescript-ftw)\n    }\n  }\n\n  updateParamMapping(oldMapping, newMapping) {\n    const mappings = [...this.props.mappings];\n    const index = findIndex(mappings, oldMapping);\n    if (index >= 0) {\n      // This should be the only possible case, but need to handle `else` too\n      mappings[index] = newMapping;\n    } else {\n      mappings.push(newMapping);\n    }\n    this.props.onChange(mappings);\n  }\n\n  render() {\n    const { existingParams } = this.props; // eslint-disable-line react/prop-types\n    const dataSource = this.props.mappings.map(mapping => ({ mapping }));\n\n    return (\n      <div className=\"parameters-mapping-list\">\n        <Table dataSource={dataSource} size=\"middle\" pagination={false} rowKey={(record, idx) => `row${idx}`}>\n          <Table.Column\n            title=\"Title\"\n            dataIndex=\"mapping\"\n            key=\"title\"\n            render={mapping => (\n              <TitleEditor\n                existingParams={existingParams}\n                mapping={mapping}\n                onChange={newMapping => this.updateParamMapping(mapping, newMapping)}\n              />\n            )}\n          />\n          <Table.Column\n            title=\"Keyword\"\n            dataIndex=\"mapping\"\n            key=\"keyword\"\n            className=\"keyword\"\n            render={mapping => <code>{`{{ ${mapping.name} }}`}</code>}\n          />\n          <Table.Column\n            title=\"Default Value\"\n            dataIndex=\"mapping\"\n            key=\"value\"\n            render={mapping => this.constructor.getDefaultValue(mapping, this.props.existingParams)}\n          />\n          <Table.Column\n            title=\"Value Source\"\n            dataIndex=\"mapping\"\n            key=\"source\"\n            render={mapping => {\n              const existingParamsNames = existingParams\n                .filter(({ type }) => type === mapping.param.type) // exclude mismatching param types\n                .map(({ name }) => name); // keep names only\n\n              return (\n                <Fragment>\n                  {this.constructor.getSourceTypeLabel(mapping)}{\" \"}\n                  <MappingEditor\n                    mapping={mapping}\n                    existingParamNames={existingParamsNames}\n                    onChange={(oldMapping, newMapping) => this.updateParamMapping(oldMapping, newMapping)}\n                  />\n                </Fragment>\n              );\n            }}\n          />\n        </Table>\n      </div>\n    );\n  }\n}\n","import { isMatch, map, find, sortBy } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport {\n  MappingType,\n  ParameterMappingListInput,\n  parameterMappingsToEditableMappings,\n  editableMappingsToParameterMappings,\n  synchronizeWidgetTitles,\n} from \"@/components/ParameterMappingInput\";\nimport notification from \"@/services/notification\";\n\nexport function getParamValuesSnapshot(mappings, dashboardParameters) {\n  return map(\n    sortBy(mappings, m => m.name),\n    m => {\n      let param;\n      switch (m.type) {\n        case MappingType.StaticValue:\n          return [m.name, m.value];\n        case MappingType.WidgetLevel:\n          return [m.name, m.param.value];\n        case MappingType.DashboardAddNew:\n        case MappingType.DashboardMapToExisting:\n          param = find(dashboardParameters, p => p.name === m.mapTo);\n          return [m.name, param ? param.value : null];\n        // no default\n      }\n    }\n  );\n}\n\nclass EditParameterMappingsDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n  };\n\n  originalParamValuesSnapshot = null;\n\n  constructor(props) {\n    super(props);\n\n    const parameterMappings = parameterMappingsToEditableMappings(\n      props.widget.options.parameterMappings,\n      props.widget.query.getParametersDefs(),\n      map(this.props.dashboard.getParametersDefs(), p => p.name)\n    );\n\n    this.originalParamValuesSnapshot = getParamValuesSnapshot(\n      parameterMappings,\n      this.props.dashboard.getParametersDefs()\n    );\n\n    this.state = {\n      saveInProgress: false,\n      parameterMappings,\n    };\n  }\n\n  saveWidget() {\n    const widget = this.props.widget;\n\n    this.setState({ saveInProgress: true });\n\n    const newMappings = editableMappingsToParameterMappings(this.state.parameterMappings);\n    widget.options.parameterMappings = newMappings;\n\n    const valuesChanged = !isMatch(\n      this.originalParamValuesSnapshot,\n      getParamValuesSnapshot(this.state.parameterMappings, this.props.dashboard.getParametersDefs())\n    );\n\n    const widgetsToSave = [\n      widget,\n      ...synchronizeWidgetTitles(widget.options.parameterMappings, this.props.dashboard.widgets),\n    ];\n\n    Promise.all(map(widgetsToSave, w => w.save()))\n      .then(() => {\n        this.props.dialog.close(valuesChanged);\n      })\n      .catch(() => {\n        notification.error(\"Widget cannot be updated\");\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  updateParamMappings(parameterMappings) {\n    this.setState({ parameterMappings });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title=\"Parameters\"\n        onOk={() => this.saveWidget()}\n        okButtonProps={{ loading: this.state.saveInProgress }}\n        width={700}>\n        {this.state.parameterMappings.length > 0 && (\n          <ParameterMappingListInput\n            mappings={this.state.parameterMappings}\n            existingParams={this.props.dashboard.getParametersDefs()}\n            onChange={mappings => this.updateParamMappings(mappings)}\n          />\n        )}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditParameterMappingsDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { isEmpty } from \"lodash\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Modal from \"antd/lib/modal\";\nimport Menu from \"antd/lib/menu\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { Moment } from \"@/components/proptypes\";\n\nimport \"./Widget.less\";\n\nfunction WidgetDropdownButton({ extraOptions, showDeleteOption, onDelete }) {\n  const WidgetMenu = (\n    <Menu data-test=\"WidgetDropdownButtonMenu\">\n      {extraOptions}\n      {showDeleteOption && extraOptions && <Menu.Divider />}\n      {showDeleteOption && <Menu.Item onClick={onDelete}>Remove from Dashboard</Menu.Item>}\n    </Menu>\n  );\n\n  return (\n    <div className=\"widget-menu-regular\">\n      <Dropdown overlay={WidgetMenu} placement=\"bottomRight\" trigger={[\"click\"]}>\n        <a className=\"action p-l-15 p-r-15\" data-test=\"WidgetDropdownButton\">\n          <i className=\"zmdi zmdi-more-vert\" />\n        </a>\n      </Dropdown>\n    </div>\n  );\n}\n\nWidgetDropdownButton.propTypes = {\n  extraOptions: PropTypes.node,\n  showDeleteOption: PropTypes.bool,\n  onDelete: PropTypes.func,\n};\n\nWidgetDropdownButton.defaultProps = {\n  extraOptions: null,\n  showDeleteOption: false,\n  onDelete: () => {},\n};\n\nfunction WidgetDeleteButton({ onClick }) {\n  return (\n    <div className=\"widget-menu-remove\">\n      <a className=\"action\" title=\"Remove From Dashboard\" onClick={onClick} data-test=\"WidgetDeleteButton\">\n        <i className=\"zmdi zmdi-close\" />\n      </a>\n    </div>\n  );\n}\n\nWidgetDeleteButton.propTypes = { onClick: PropTypes.func };\nWidgetDeleteButton.defaultProps = { onClick: () => {} };\n\nclass Widget extends React.Component {\n  static propTypes = {\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    className: PropTypes.string,\n    children: PropTypes.node,\n    header: PropTypes.node,\n    footer: PropTypes.node,\n    canEdit: PropTypes.bool,\n    isPublic: PropTypes.bool,\n    refreshStartedAt: Moment,\n    menuOptions: PropTypes.node,\n    tileProps: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n    onDelete: PropTypes.func,\n  };\n\n  static defaultProps = {\n    className: \"\",\n    children: null,\n    header: null,\n    footer: null,\n    canEdit: false,\n    isPublic: false,\n    refreshStartedAt: null,\n    menuOptions: null,\n    tileProps: {},\n    onDelete: () => {},\n  };\n\n  componentDidMount() {\n    const { widget } = this.props;\n    recordEvent(\"view\", \"widget\", widget.id);\n  }\n\n  deleteWidget = () => {\n    const { widget, onDelete } = this.props;\n\n    Modal.confirm({\n      title: \"Delete Widget\",\n      content: \"Are you sure you want to remove this widget from the dashboard?\",\n      okText: \"Delete\",\n      okType: \"danger\",\n      onOk: () => widget.delete().then(onDelete),\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  render() {\n    const { className, children, header, footer, canEdit, isPublic, menuOptions, tileProps } = this.props;\n    const showDropdownButton = !isPublic && (canEdit || !isEmpty(menuOptions));\n    return (\n      <div className=\"widget-wrapper\">\n        <div className={cx(\"tile body-container\", className)} {...tileProps}>\n          <div className=\"widget-actions\">\n            {showDropdownButton && (\n              <WidgetDropdownButton\n                extraOptions={menuOptions}\n                showDeleteOption={canEdit}\n                onDelete={this.deleteWidget}\n              />\n            )}\n            {canEdit && <WidgetDeleteButton onClick={this.deleteWidget} />}\n          </div>\n          <div className=\"body-row widget-header\">{header}</div>\n          {children}\n          {footer && <div className=\"body-row tile__bottom-control\">{footer}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Widget;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compact, isEmpty, invoke } from \"lodash\";\nimport { markdown } from \"markdown\";\nimport cx from \"classnames\";\nimport Menu from \"antd/lib/menu\";\nimport HtmlContent from \"@redash/viz/lib/components/HtmlContent\";\nimport { currentUser } from \"@/services/auth\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { formatDateTime } from \"@/lib/utils\";\nimport Parameters from \"@/components/Parameters\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport Timer from \"@/components/Timer\";\nimport { Moment } from \"@/components/proptypes\";\nimport QueryLink from \"@/components/QueryLink\";\nimport { FiltersType } from \"@/components/Filters\";\nimport ExpandedWidgetDialog from \"@/components/dashboards/ExpandedWidgetDialog\";\nimport EditParameterMappingsDialog from \"@/components/dashboards/EditParameterMappingsDialog\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\nimport Widget from \"./Widget\";\n\nfunction visualizationWidgetMenuOptions({ widget, canEditDashboard, onParametersEdit }) {\n  const canViewQuery = currentUser.hasPermission(\"view_query\");\n  const canEditParameters = canEditDashboard && !isEmpty(invoke(widget, \"query.getParametersDefs\"));\n  const widgetQueryResult = widget.getQueryResult();\n  const isQueryResultEmpty = !widgetQueryResult || !widgetQueryResult.isEmpty || widgetQueryResult.isEmpty();\n\n  const downloadLink = fileType => widgetQueryResult.getLink(widget.getQuery().id, fileType);\n  const downloadName = fileType => widgetQueryResult.getName(widget.getQuery().name, fileType);\n  return compact([\n    <Menu.Item key=\"download_csv\" disabled={isQueryResultEmpty}>\n      {!isQueryResultEmpty ? (\n        <a href={downloadLink(\"csv\")} download={downloadName(\"csv\")} target=\"_self\">\n          Download as CSV File\n        </a>\n      ) : (\n        \"Download as CSV File\"\n      )}\n    </Menu.Item>,\n    <Menu.Item key=\"download_tsv\" disabled={isQueryResultEmpty}>\n      {!isQueryResultEmpty ? (\n        <a href={downloadLink(\"tsv\")} download={downloadName(\"tsv\")} target=\"_self\">\n          Download as TSV File\n        </a>\n      ) : (\n        \"Download as TSV File\"\n      )}\n    </Menu.Item>,\n    <Menu.Item key=\"download_excel\" disabled={isQueryResultEmpty}>\n      {!isQueryResultEmpty ? (\n        <a href={downloadLink(\"xlsx\")} download={downloadName(\"xlsx\")} target=\"_self\">\n          Download as Excel File\n        </a>\n      ) : (\n        \"Download as Excel File\"\n      )}\n    </Menu.Item>,\n    (canViewQuery || canEditParameters) && <Menu.Divider key=\"divider\" />,\n    canViewQuery && (\n      <Menu.Item key=\"view_query\">\n        <a href={widget.getQuery().getUrl(true, widget.visualization.id)}>View Query</a>\n      </Menu.Item>\n    ),\n    canEditParameters && (\n      <Menu.Item key=\"edit_parameters\" onClick={onParametersEdit}>\n        Edit Parameters\n      </Menu.Item>\n    ),\n  ]);\n}\n\nfunction RefreshIndicator({ refreshStartedAt }) {\n  return (\n    <div className=\"refresh-indicator\">\n      <div className=\"refresh-icon\">\n        <i className=\"zmdi zmdi-refresh zmdi-hc-spin\" />\n      </div>\n      <Timer from={refreshStartedAt} />\n    </div>\n  );\n}\n\nRefreshIndicator.propTypes = { refreshStartedAt: Moment };\nRefreshIndicator.defaultProps = { refreshStartedAt: null };\n\nfunction VisualizationWidgetHeader({ widget, refreshStartedAt, parameters, onParametersUpdate }) {\n  const canViewQuery = currentUser.hasPermission(\"view_query\");\n\n  return (\n    <>\n      <RefreshIndicator refreshStartedAt={refreshStartedAt} />\n      <div className=\"t-header widget clearfix\">\n        <div className=\"th-title\">\n          <p>\n            <QueryLink query={widget.getQuery()} visualization={widget.visualization} readOnly={!canViewQuery} />\n          </p>\n          {!isEmpty(widget.getQuery().description) && (\n            <HtmlContent className=\"text-muted markdown query--description\">\n              {markdown.toHTML(widget.getQuery().description || \"\")}\n            </HtmlContent>\n          )}\n        </div>\n      </div>\n      {!isEmpty(parameters) && (\n        <div className=\"m-b-10\">\n          <Parameters parameters={parameters} onValuesChange={onParametersUpdate} />\n        </div>\n      )}\n    </>\n  );\n}\n\nVisualizationWidgetHeader.propTypes = {\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  refreshStartedAt: Moment,\n  parameters: PropTypes.arrayOf(PropTypes.object),\n  onParametersUpdate: PropTypes.func,\n};\n\nVisualizationWidgetHeader.defaultProps = {\n  refreshStartedAt: null,\n  onParametersUpdate: () => {},\n  parameters: [],\n};\n\nfunction VisualizationWidgetFooter({ widget, isPublic, onRefresh, onExpand }) {\n  const widgetQueryResult = widget.getQueryResult();\n  const updatedAt = invoke(widgetQueryResult, \"getUpdatedAt\");\n  const [refreshClickButtonId, setRefreshClickButtonId] = useState();\n\n  const refreshWidget = buttonId => {\n    if (!refreshClickButtonId) {\n      setRefreshClickButtonId(buttonId);\n      onRefresh().finally(() => setRefreshClickButtonId(null));\n    }\n  };\n\n  return widgetQueryResult ? (\n    <>\n      <span>\n        {!isPublic && !!widgetQueryResult && (\n          <a\n            className=\"refresh-button hidden-print btn btn-sm btn-default btn-transparent\"\n            onClick={() => refreshWidget(1)}\n            data-test=\"RefreshButton\">\n            <i className={cx(\"zmdi zmdi-refresh\", { \"zmdi-hc-spin\": refreshClickButtonId === 1 })} />{\" \"}\n            <TimeAgo date={updatedAt} />\n          </a>\n        )}\n        <span className=\"visible-print\">\n          <i className=\"zmdi zmdi-time-restore\" /> {formatDateTime(updatedAt)}\n        </span>\n        {isPublic && (\n          <span className=\"small hidden-print\">\n            <i className=\"zmdi zmdi-time-restore\" /> <TimeAgo date={updatedAt} />\n          </span>\n        )}\n      </span>\n      <span>\n        {!isPublic && (\n          <a\n            className=\"btn btn-sm btn-default hidden-print btn-transparent btn__refresh\"\n            onClick={() => refreshWidget(2)}>\n            <i className={cx(\"zmdi zmdi-refresh\", { \"zmdi-hc-spin\": refreshClickButtonId === 2 })} />\n          </a>\n        )}\n        <a className=\"btn btn-sm btn-default hidden-print btn-transparent btn__refresh\" onClick={onExpand}>\n          <i className=\"zmdi zmdi-fullscreen\" />\n        </a>\n      </span>\n    </>\n  ) : null;\n}\n\nVisualizationWidgetFooter.propTypes = {\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  isPublic: PropTypes.bool,\n  onRefresh: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n};\n\nVisualizationWidgetFooter.defaultProps = { isPublic: false };\n\nclass VisualizationWidget extends React.Component {\n  static propTypes = {\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    filters: FiltersType,\n    isPublic: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    canEdit: PropTypes.bool,\n    onLoad: PropTypes.func,\n    onRefresh: PropTypes.func,\n    onDelete: PropTypes.func,\n    onParameterMappingsChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    filters: [],\n    isPublic: false,\n    isLoading: false,\n    canEdit: false,\n    onLoad: () => {},\n    onRefresh: () => {},\n    onDelete: () => {},\n    onParameterMappingsChange: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { localParameters: props.widget.getLocalParameters() };\n  }\n\n  componentDidMount() {\n    const { widget, onLoad } = this.props;\n    recordEvent(\"view\", \"query\", widget.visualization.query.id, { dashboard: true });\n    recordEvent(\"view\", \"visualization\", widget.visualization.id, { dashboard: true });\n    onLoad();\n  }\n\n  expandWidget = () => {\n    ExpandedWidgetDialog.showModal({ widget: this.props.widget });\n  };\n\n  editParameterMappings = () => {\n    const { widget, dashboard, onRefresh, onParameterMappingsChange } = this.props;\n    EditParameterMappingsDialog.showModal({\n      dashboard,\n      widget,\n    }).onClose(valuesChanged => {\n      // refresh widget if any parameter value has been updated\n      if (valuesChanged) {\n        onRefresh();\n      }\n      onParameterMappingsChange();\n      this.setState({ localParameters: widget.getLocalParameters() });\n    });\n  };\n\n  renderVisualization() {\n    const { widget, filters } = this.props;\n    const widgetQueryResult = widget.getQueryResult();\n    const widgetStatus = widgetQueryResult && widgetQueryResult.getStatus();\n    switch (widgetStatus) {\n      case \"failed\":\n        return (\n          <div className=\"body-row-auto scrollbox\">\n            {widgetQueryResult.getError() && (\n              <div className=\"alert alert-danger m-5\">\n                Error running query: <strong>{widgetQueryResult.getError()}</strong>\n              </div>\n            )}\n          </div>\n        );\n      case \"done\":\n        return (\n          <div className=\"body-row-auto scrollbox\">\n            <VisualizationRenderer\n              visualization={widget.visualization}\n              queryResult={widgetQueryResult}\n              filters={filters}\n              context=\"widget\"\n            />\n          </div>\n        );\n      default:\n        return (\n          <div className=\"body-row-auto spinner-container\">\n            <div className=\"spinner\">\n              <i className=\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\" />\n            </div>\n          </div>\n        );\n    }\n  }\n\n  render() {\n    const { widget, isLoading, isPublic, canEdit, onRefresh } = this.props;\n    const { localParameters } = this.state;\n    const widgetQueryResult = widget.getQueryResult();\n    const isRefreshing = isLoading && !!(widgetQueryResult && widgetQueryResult.getStatus());\n\n    return (\n      <Widget\n        {...this.props}\n        className=\"widget-visualization\"\n        menuOptions={visualizationWidgetMenuOptions({\n          widget,\n          canEditDashboard: canEdit,\n          onParametersEdit: this.editParameterMappings,\n        })}\n        header={\n          <VisualizationWidgetHeader\n            widget={widget}\n            refreshStartedAt={isRefreshing ? widget.refreshStartedAt : null}\n            parameters={localParameters}\n            onParametersUpdate={onRefresh}\n          />\n        }\n        footer={\n          <VisualizationWidgetFooter\n            widget={widget}\n            isPublic={isPublic}\n            onRefresh={onRefresh}\n            onExpand={this.expandWidget}\n          />\n        }\n        tileProps={{ \"data-refreshing\": isRefreshing }}>\n        {this.renderVisualization()}\n      </Widget>\n    );\n  }\n}\n\nexport default VisualizationWidget;\n","import { toString } from \"lodash\";\nimport { markdown } from \"markdown\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Divider from \"antd/lib/divider\";\nimport HtmlContent from \"@redash/viz/lib/components/HtmlContent\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport notification from \"@/services/notification\";\n\nimport \"./TextboxDialog.less\";\n\nfunction TextboxDialog({ dialog, isNew, ...props }) {\n  const [text, setText] = useState(toString(props.text));\n  const [preview, setPreview] = useState(null);\n\n  useEffect(() => {\n    setText(props.text);\n    setPreview(markdown.toHTML(props.text));\n  }, [props.text]);\n\n  const [updatePreview] = useDebouncedCallback(() => {\n    setPreview(markdown.toHTML(text));\n  }, 200);\n\n  const handleInputChange = useCallback(\n    event => {\n      setText(event.target.value);\n      updatePreview();\n    },\n    [updatePreview]\n  );\n\n  const saveWidget = useCallback(() => {\n    dialog.close(text).catch(() => {\n      notification.error(isNew ? \"Widget could not be added\" : \"Widget could not be saved\");\n    });\n  }, [dialog, isNew, text]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={isNew ? \"Add Textbox\" : \"Edit Textbox\"}\n      onOk={saveWidget}\n      okText={isNew ? \"Add to Dashboard\" : \"Save\"}\n      width={500}\n      wrapProps={{ \"data-test\": \"TextboxDialog\" }}>\n      <div className=\"textbox-dialog\">\n        <Input.TextArea\n          className=\"resize-vertical\"\n          rows=\"5\"\n          value={text}\n          onChange={handleInputChange}\n          autoFocus\n          placeholder=\"This is where you write some text\"\n        />\n        <small>\n          Supports basic{\" \"}\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.markdownguide.org/cheat-sheet/#basic-syntax\">\n            <Tooltip title=\"Markdown guide opens in new window\">Markdown</Tooltip>\n          </a>\n          .\n        </small>\n        {text && (\n          <React.Fragment>\n            <Divider dashed />\n            <strong className=\"preview-title\">Preview:</strong>\n            <HtmlContent className=\"preview markdown\">{preview}</HtmlContent>\n          </React.Fragment>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nTextboxDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  isNew: PropTypes.bool,\n  text: PropTypes.string,\n};\n\nTextboxDialog.defaultProps = {\n  isNew: false,\n  text: \"\",\n};\n\nexport default wrapDialog(TextboxDialog);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { markdown } from \"markdown\";\nimport Menu from \"antd/lib/menu\";\nimport HtmlContent from \"@redash/viz/lib/components/HtmlContent\";\nimport TextboxDialog from \"@/components/dashboards/TextboxDialog\";\nimport Widget from \"./Widget\";\n\nfunction TextboxWidget(props) {\n  const { widget, canEdit } = props;\n  const [text, setText] = useState(widget.text);\n\n  const editTextBox = () => {\n    TextboxDialog.showModal({\n      text: widget.text,\n    }).onClose(newText => {\n      widget.text = newText;\n      setText(newText);\n      return widget.save();\n    });\n  };\n\n  const TextboxMenuOptions = [\n    <Menu.Item key=\"edit\" onClick={editTextBox}>\n      Edit\n    </Menu.Item>,\n  ];\n\n  if (!widget.width) {\n    return null;\n  }\n\n  return (\n    <Widget {...props} menuOptions={canEdit ? TextboxMenuOptions : null} className=\"widget-text\">\n      <HtmlContent className=\"body-row-auto scrollbox t-body p-15 markdown\">{markdown.toHTML(text || \"\")}</HtmlContent>\n    </Widget>\n  );\n}\n\nTextboxWidget.propTypes = {\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  canEdit: PropTypes.bool,\n};\n\nTextboxWidget.defaultProps = {\n  canEdit: false,\n};\n\nexport default TextboxWidget;\n","import React from \"react\";\nimport Widget from \"./Widget\";\n\nfunction RestrictedWidget(props) {\n  return (\n    <Widget {...props} className=\"d-flex justify-content-center align-items-center widget-restricted\">\n      <div className=\"t-body scrollbox\">\n        <div className=\"text-center\">\n          <h1>\n            <span className=\"zmdi zmdi-lock\" />\n          </h1>\n          <p className=\"text-muted\">This widget requires access to a data source you don&apos;t have access to.</p>\n        </div>\n      </div>\n    </Widget>\n  );\n}\n\nexport default RestrictedWidget;\n","import { includes, reduce, some } from \"lodash\";\n\n// TODO: Revisit this implementation when migrating widget component to React\n\nconst WIDGET_SELECTOR = '[data-widgetid=\"{0}\"]';\nconst WIDGET_CONTENT_SELECTOR = [\n  \".widget-header\", // header\n  \".visualization-renderer\", // visualization\n  \".scrollbox .alert\", // error state\n  \".spinner-container\", // loading state\n  \".tile__bottom-control\", // footer\n].join(\",\");\nconst INTERVAL = 200;\n\nexport default class AutoHeightController {\n  widgets = {};\n\n  interval = null;\n\n  onHeightChange = null;\n\n  constructor(handler) {\n    this.onHeightChange = handler;\n  }\n\n  update(widgets) {\n    const newWidgetIds = widgets\n      .filter(widget => widget.options.position.autoHeight)\n      .map(widget => widget.id.toString());\n\n    // added\n    newWidgetIds.filter(id => !includes(Object.keys(this.widgets), id)).forEach(this.add);\n\n    // removed\n    Object.keys(this.widgets)\n      .filter(id => !includes(newWidgetIds, id))\n      .forEach(this.remove);\n  }\n\n  add = id => {\n    if (this.isEmpty()) {\n      this.start();\n    }\n\n    const selector = WIDGET_SELECTOR.replace(\"{0}\", id);\n    this.widgets[id] = [\n      function getHeight() {\n        const widgetEl = document.querySelector(selector);\n        if (!widgetEl) {\n          return undefined; // safety\n        }\n\n        // get all content elements\n        const els = widgetEl.querySelectorAll(WIDGET_CONTENT_SELECTOR);\n\n        // calculate accumulated height\n        return reduce(\n          els,\n          (acc, el) => {\n            const height = el ? el.getBoundingClientRect().height : 0;\n            return acc + height;\n          },\n          0\n        );\n      },\n    ];\n  };\n\n  remove = id => {\n    // ignore if not an active autoHeight widget\n    if (!this.exists(id)) {\n      return;\n    }\n\n    // not actually deleting from this.widgets to prevent case of unwanted re-adding\n    this.widgets[id.toString()] = false;\n\n    if (this.isEmpty()) {\n      this.stop();\n    }\n  };\n\n  exists = id => !!this.widgets[id.toString()];\n\n  isEmpty = () => !some(this.widgets);\n\n  checkHeightChanges = () => {\n    Object.keys(this.widgets)\n      .filter(this.exists) // reject already removed items\n      .forEach(id => {\n        const [getHeight, prevHeight] = this.widgets[id];\n        const height = getHeight();\n        if (height && height !== prevHeight) {\n          this.widgets[id][1] = height; // save\n          this.onHeightChange(id, height); // dispatch\n        }\n      });\n  };\n\n  start = () => {\n    this.stop();\n    this.interval = setInterval(this.checkHeightChanges, INTERVAL);\n  };\n\n  stop = () => {\n    clearInterval(this.interval);\n  };\n\n  resume = () => {\n    if (!this.isEmpty()) {\n      this.start();\n    }\n  };\n\n  destroy = () => {\n    this.stop();\n    this.widgets = null;\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { chain, cloneDeep, find } from \"lodash\";\nimport cx from \"classnames\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport { VisualizationWidget, TextboxWidget, RestrictedWidget } from \"@/components/dashboards/dashboard-widget\";\nimport { FiltersType } from \"@/components/Filters\";\nimport cfg from \"@/config/dashboard-grid-options\";\nimport AutoHeightController from \"./AutoHeightController\";\nimport { WidgetTypeEnum } from \"@/services/widget\";\n\nimport \"react-grid-layout/css/styles.css\";\nimport \"./dashboard-grid.less\";\n\nconst ResponsiveGridLayout = WidthProvider(Responsive);\n\nconst WidgetType = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  options: PropTypes.shape({\n    position: PropTypes.shape({\n      col: PropTypes.number.isRequired,\n      row: PropTypes.number.isRequired,\n      sizeY: PropTypes.number.isRequired,\n      minSizeY: PropTypes.number.isRequired,\n      maxSizeY: PropTypes.number.isRequired,\n      sizeX: PropTypes.number.isRequired,\n      minSizeX: PropTypes.number.isRequired,\n      maxSizeX: PropTypes.number.isRequired,\n    }).isRequired,\n  }).isRequired,\n});\n\nconst SINGLE = \"single-column\";\nconst MULTI = \"multi-column\";\n\nconst DashboardWidget = React.memo(\n  function DashboardWidget({\n    widget,\n    dashboard,\n    onLoadWidget,\n    onRefreshWidget,\n    onRemoveWidget,\n    onParameterMappingsChange,\n    canEdit,\n    isPublic,\n    isLoading,\n    filters,\n  }) {\n    const { type } = widget;\n    const onLoad = () => onLoadWidget(widget);\n    const onRefresh = () => onRefreshWidget(widget);\n    const onDelete = () => onRemoveWidget(widget.id);\n\n    if (type === WidgetTypeEnum.VISUALIZATION) {\n      return (\n        <VisualizationWidget\n          widget={widget}\n          dashboard={dashboard}\n          filters={filters}\n          canEdit={canEdit}\n          isPublic={isPublic}\n          isLoading={isLoading}\n          onLoad={onLoad}\n          onRefresh={onRefresh}\n          onDelete={onDelete}\n          onParameterMappingsChange={onParameterMappingsChange}\n        />\n      );\n    }\n    if (type === WidgetTypeEnum.TEXTBOX) {\n      return <TextboxWidget widget={widget} canEdit={canEdit} isPublic={isPublic} onDelete={onDelete} />;\n    }\n    return <RestrictedWidget widget={widget} />;\n  },\n  (prevProps, nextProps) =>\n    prevProps.widget === nextProps.widget &&\n    prevProps.canEdit === nextProps.canEdit &&\n    prevProps.isPublic === nextProps.isPublic &&\n    prevProps.isLoading === nextProps.isLoading &&\n    prevProps.filters === nextProps.filters\n);\n\nclass DashboardGrid extends React.Component {\n  static propTypes = {\n    isEditing: PropTypes.bool.isRequired,\n    isPublic: PropTypes.bool,\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    widgets: PropTypes.arrayOf(WidgetType).isRequired,\n    filters: FiltersType,\n    onBreakpointChange: PropTypes.func,\n    onLoadWidget: PropTypes.func,\n    onRefreshWidget: PropTypes.func,\n    onRemoveWidget: PropTypes.func,\n    onLayoutChange: PropTypes.func,\n    onParameterMappingsChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    isPublic: false,\n    filters: [],\n    onLoadWidget: () => {},\n    onRefreshWidget: () => {},\n    onRemoveWidget: () => {},\n    onLayoutChange: () => {},\n    onBreakpointChange: () => {},\n    onParameterMappingsChange: () => {},\n  };\n\n  static normalizeFrom(widget) {\n    const {\n      id,\n      options: { position: pos },\n    } = widget;\n\n    return {\n      i: id.toString(),\n      x: pos.col,\n      y: pos.row,\n      w: pos.sizeX,\n      h: pos.sizeY,\n      minW: pos.minSizeX,\n      maxW: pos.maxSizeX,\n      minH: pos.minSizeY,\n      maxH: pos.maxSizeY,\n    };\n  }\n\n  mode = null;\n\n  autoHeightCtrl = null;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      layouts: {},\n      disableAnimations: true,\n    };\n\n    // init AutoHeightController\n    this.autoHeightCtrl = new AutoHeightController(this.onWidgetHeightUpdated);\n    this.autoHeightCtrl.update(this.props.widgets);\n  }\n\n  componentDidMount() {\n    this.onBreakpointChange(document.body.offsetWidth <= cfg.mobileBreakPoint ? SINGLE : MULTI);\n    // Work-around to disable initial animation on widgets; `measureBeforeMount` doesn't work properly:\n    // it disables animation, but it cannot detect scrollbars.\n    setTimeout(() => {\n      this.setState({ disableAnimations: false });\n    }, 50);\n  }\n\n  componentDidUpdate() {\n    // update, in case widgets added or removed\n    this.autoHeightCtrl.update(this.props.widgets);\n  }\n\n  componentWillUnmount() {\n    this.autoHeightCtrl.destroy();\n  }\n\n  onLayoutChange = (_, layouts) => {\n    // workaround for when dashboard starts at single mode and then multi is empty or carries single col data\n    // fixes test dashboard_spec['shows widgets with full width']\n    // TODO: open react-grid-layout issue\n    if (layouts[MULTI]) {\n      this.setState({ layouts });\n    }\n\n    // workaround for https://github.com/STRML/react-grid-layout/issues/889\n    // remove next line when fix lands\n    this.mode = document.body.offsetWidth <= cfg.mobileBreakPoint ? SINGLE : MULTI;\n    // end workaround\n\n    // don't save single column mode layout\n    if (this.mode === SINGLE) {\n      return;\n    }\n\n    const normalized = chain(layouts[MULTI])\n      .keyBy(\"i\")\n      .mapValues(this.normalizeTo)\n      .value();\n\n    this.props.onLayoutChange(normalized);\n  };\n\n  onBreakpointChange = mode => {\n    this.mode = mode;\n    this.props.onBreakpointChange(mode === SINGLE);\n  };\n\n  // height updated by auto-height\n  onWidgetHeightUpdated = (widgetId, newHeight) => {\n    this.setState(({ layouts }) => {\n      const layout = cloneDeep(layouts[MULTI]); // must clone to allow react-grid-layout to compare prev/next state\n      const item = find(layout, { i: widgetId.toString() });\n      if (item) {\n        // update widget height\n        item.h = Math.ceil((newHeight + cfg.margins) / cfg.rowHeight);\n      }\n\n      return { layouts: { [MULTI]: layout } };\n    });\n  };\n\n  // height updated by manual resize\n  onWidgetResize = (layout, oldItem, newItem) => {\n    if (oldItem.h !== newItem.h) {\n      this.autoHeightCtrl.remove(Number(newItem.i));\n    }\n\n    this.autoHeightCtrl.resume();\n  };\n\n  normalizeTo = layout => ({\n    col: layout.x,\n    row: layout.y,\n    sizeX: layout.w,\n    sizeY: layout.h,\n    autoHeight: this.autoHeightCtrl.exists(layout.i),\n  });\n\n  render() {\n    const className = cx(\"dashboard-wrapper\", this.props.isEditing ? \"editing-mode\" : \"preview-mode\");\n    const {\n      onLoadWidget,\n      onRefreshWidget,\n      onRemoveWidget,\n      onParameterMappingsChange,\n      filters,\n      dashboard,\n      isPublic,\n      widgets,\n    } = this.props;\n\n    return (\n      <div className={className}>\n        <ResponsiveGridLayout\n          className={cx(\"layout\", { \"disable-animations\": this.state.disableAnimations })}\n          cols={{ [MULTI]: cfg.columns, [SINGLE]: 1 }}\n          rowHeight={cfg.rowHeight - cfg.margins}\n          margin={[cfg.margins, cfg.margins]}\n          isDraggable={this.props.isEditing}\n          isResizable={this.props.isEditing}\n          onResizeStart={this.autoHeightCtrl.stop}\n          onResizeStop={this.onWidgetResize}\n          layouts={this.state.layouts}\n          onLayoutChange={this.onLayoutChange}\n          onBreakpointChange={this.onBreakpointChange}\n          breakpoints={{ [MULTI]: cfg.mobileBreakPoint, [SINGLE]: 0 }}>\n          {widgets.map(widget => (\n            <div\n              key={widget.id}\n              data-grid={DashboardGrid.normalizeFrom(widget)}\n              data-widgetid={widget.id}\n              data-test={`WidgetId${widget.id}`}\n              className={cx(\"dashboard-widget-wrapper\", {\n                \"widget-auto-height-enabled\": this.autoHeightCtrl.exists(widget.id),\n              })}>\n              <DashboardWidget\n                dashboard={dashboard}\n                widget={widget}\n                filters={filters}\n                isPublic={isPublic}\n                isLoading={widget.loading}\n                canEdit={dashboard.canEdit()}\n                onLoadWidget={onLoadWidget}\n                onRefreshWidget={onRefreshWidget}\n                onRemoveWidget={onRemoveWidget}\n                onParameterMappingsChange={onParameterMappingsChange}\n              />\n            </div>\n          ))}\n        </ResponsiveGridLayout>\n      </div>\n    );\n  }\n}\n\nexport default DashboardGrid;\n","import { map, includes, groupBy, first, find } from \"lodash\";\nimport React, { useState, useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { MappingType, ParameterMappingListInput } from \"@/components/ParameterMappingInput\";\nimport QuerySelector from \"@/components/QuerySelector\";\nimport notification from \"@/services/notification\";\nimport { Query } from \"@/services/query\";\n\nfunction VisualizationSelect({ query, visualization, onChange }) {\n  const visualizationGroups = useMemo(() => {\n    return query ? groupBy(query.visualizations, \"type\") : {};\n  }, [query]);\n\n  const handleChange = useCallback(\n    visualizationId => {\n      const selectedVisualization = query ? find(query.visualizations, { id: visualizationId }) : null;\n      onChange(selectedVisualization || null);\n    },\n    [query, onChange]\n  );\n\n  if (!query) {\n    return null;\n  }\n\n  return (\n    <div>\n      <div className=\"form-group\">\n        <label htmlFor=\"choose-visualization\">Choose Visualization</label>\n        <Select\n          id=\"choose-visualization\"\n          className=\"w-100\"\n          value={visualization ? visualization.id : undefined}\n          onChange={handleChange}>\n          {map(visualizationGroups, (visualizations, groupKey) => (\n            <Select.OptGroup key={groupKey} label={groupKey}>\n              {map(visualizations, visualization => (\n                <Select.Option key={`${visualization.id}`} value={visualization.id}>\n                  {visualization.name}\n                </Select.Option>\n              ))}\n            </Select.OptGroup>\n          ))}\n        </Select>\n      </div>\n    </div>\n  );\n}\n\nVisualizationSelect.propTypes = {\n  query: PropTypes.object,\n  visualization: PropTypes.object,\n  onChange: PropTypes.func,\n};\n\nVisualizationSelect.defaultProps = {\n  query: null,\n  visualization: null,\n  onChange: () => {},\n};\n\nfunction AddWidgetDialog({ dialog, dashboard }) {\n  const [selectedQuery, setSelectedQuery] = useState(null);\n  const [selectedVisualization, setSelectedVisualization] = useState(null);\n  const [parameterMappings, setParameterMappings] = useState([]);\n\n  const selectQuery = useCallback(\n    queryId => {\n      // Clear previously selected query (if any)\n      setSelectedQuery(null);\n      setSelectedVisualization(null);\n      setParameterMappings([]);\n\n      if (queryId) {\n        Query.get({ id: queryId }).then(query => {\n          if (query) {\n            const existingParamNames = map(dashboard.getParametersDefs(), param => param.name);\n            setSelectedQuery(query);\n            setParameterMappings(\n              map(query.getParametersDefs(), param => ({\n                name: param.name,\n                type: includes(existingParamNames, param.name)\n                  ? MappingType.DashboardMapToExisting\n                  : MappingType.DashboardAddNew,\n                mapTo: param.name,\n                value: param.normalizedValue,\n                title: \"\",\n                param,\n              }))\n            );\n            if (query.visualizations.length > 0) {\n              setSelectedVisualization(first(query.visualizations));\n            }\n          }\n        });\n      }\n    },\n    [dashboard]\n  );\n\n  const saveWidget = useCallback(() => {\n    dialog.close({ visualization: selectedVisualization, parameterMappings }).catch(() => {\n      notification.error(\"Widget could not be added\");\n    });\n  }, [dialog, selectedVisualization, parameterMappings]);\n\n  const existingParams = dashboard.getParametersDefs();\n\n  return (\n    <Modal\n      {...dialog.props}\n      title=\"Add Widget\"\n      onOk={saveWidget}\n      okButtonProps={{\n        ...dialog.props.okButtonProps,\n        disabled: !selectedQuery || dialog.props.okButtonProps.disabled,\n      }}\n      okText=\"Add to Dashboard\"\n      width={700}>\n      <div data-test=\"AddWidgetDialog\">\n        <QuerySelector onChange={query => selectQuery(query ? query.id : null)} />\n\n        {selectedQuery && (\n          <VisualizationSelect\n            query={selectedQuery}\n            visualization={selectedVisualization}\n            onChange={setSelectedVisualization}\n          />\n        )}\n\n        {parameterMappings.length > 0 && [\n          <label key=\"parameters-title\" htmlFor=\"parameter-mappings\">\n            Parameters\n          </label>,\n          <ParameterMappingListInput\n            key=\"parameters-list\"\n            id=\"parameter-mappings\"\n            mappings={parameterMappings}\n            existingParams={existingParams}\n            onChange={setParameterMappings}\n          />,\n        ]}\n      </div>\n    </Modal>\n  );\n}\n\nAddWidgetDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  dashboard: PropTypes.object.isRequired,\n};\n\nexport default wrapDialog(AddWidgetDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\n// PreviewCard\n\nexport function PreviewCard({ imageUrl, roundedImage, title, body, children, className, ...props }) {\n  return (\n    <div {...props} className={className + \" w-100 d-flex align-items-center\"}>\n      <img\n        src={imageUrl}\n        width=\"32\"\n        height=\"32\"\n        className={classNames({ \"profile__image--settings\": roundedImage }, \"m-r-5\")}\n        alt=\"Logo/Avatar\"\n      />\n      <div className=\"flex-fill\">\n        <div>{title}</div>\n        {body && <div className=\"text-muted\">{body}</div>}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nPreviewCard.propTypes = {\n  imageUrl: PropTypes.string.isRequired,\n  title: PropTypes.node.isRequired,\n  body: PropTypes.node,\n  roundedImage: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nPreviewCard.defaultProps = {\n  body: null,\n  roundedImage: true,\n  className: \"\",\n  children: null,\n};\n\n// UserPreviewCard\n\nexport function UserPreviewCard({ user, withLink, children, ...props }) {\n  const title = withLink ? <a href={\"users/\" + user.id}>{user.name}</a> : user.name;\n  return (\n    <PreviewCard {...props} imageUrl={user.profile_image_url} title={title} body={user.email}>\n      {children}\n    </PreviewCard>\n  );\n}\n\nUserPreviewCard.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nUserPreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n\n// DataSourcePreviewCard\n\nexport function DataSourcePreviewCard({ dataSource, withLink, children, ...props }) {\n  const imageUrl = `/static/images/db-logos/${dataSource.type}.png`;\n  const title = withLink ? <a href={\"data_sources/\" + dataSource.id}>{dataSource.name}</a> : dataSource.name;\n  return (\n    <PreviewCard {...props} imageUrl={imageUrl} title={title}>\n      {children}\n    </PreviewCard>\n  );\n}\n\nDataSourcePreviewCard.propTypes = {\n  dataSource: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nDataSourcePreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n","import { isString } from \"lodash\";\nimport DOMPurify from \"dompurify\";\n\nDOMPurify.setConfig({\n  ADD_ATTR: [\"target\"],\n});\n\nDOMPurify.addHook(\"afterSanitizeAttributes\", function(node) {\n  // Fix elements with `target` attribute:\n  // - allow only `target=\"_blank\"\n  // - add `rel=\"noopener noreferrer\"` to prevent https://www.owasp.org/index.php/Reverse_Tabnabbing\n\n  const target = node.getAttribute(\"target\");\n  if (isString(target) && target.toLowerCase() === \"_blank\") {\n    node.setAttribute(\"rel\", \"noopener noreferrer\");\n  } else {\n    node.removeAttribute(\"target\");\n  }\n});\n\nexport default DOMPurify.sanitize;\n","import { isString, get, find } from \"lodash\";\nimport sanitize from \"@/services/sanitize\";\nimport { axios } from \"@/services/axios\";\nimport notification from \"@/services/notification\";\nimport { clientConfig } from \"@/services/auth\";\n\nfunction getErrorMessage(error) {\n  return find([get(error, \"response.data.message\"), get(error, \"response.statusText\"), \"Unknown error\"], isString);\n}\n\nfunction disableResource(user) {\n  return `api/users/${user.id}/disable`;\n}\n\nfunction enableUser(user) {\n  const userName = sanitize(user.name);\n\n  return axios\n    .delete(disableResource(user))\n    .then(data => {\n      notification.success(`User ${userName} is now enabled.`);\n      user.is_disabled = false;\n      user.profile_image_url = data.profile_image_url;\n      return data;\n    })\n    .catch(error => {\n      notification.error(\"Cannot enable user\", getErrorMessage(error));\n    });\n}\n\nfunction disableUser(user) {\n  const userName = sanitize(user.name);\n  return axios\n    .post(disableResource(user))\n    .then(data => {\n      notification.warning(`User ${userName} is now disabled.`);\n      user.is_disabled = true;\n      user.profile_image_url = data.profile_image_url;\n      return data;\n    })\n    .catch(error => {\n      notification.error(\"Cannot disable user\", getErrorMessage(error));\n    });\n}\n\nfunction deleteUser(user) {\n  const userName = sanitize(user.name);\n  return axios\n    .delete(`api/users/${user.id}`)\n    .then(data => {\n      notification.warning(`User ${userName} has been deleted.`);\n      return data;\n    })\n    .catch(error => {\n      notification.error(\"Cannot delete user\", getErrorMessage(error));\n    });\n}\n\nfunction convertUserInfo(user) {\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n    profileImageUrl: user.profile_image_url,\n    apiKey: user.api_key,\n    groupIds: user.groups,\n    isDisabled: user.is_disabled,\n    isInvitationPending: user.is_invitation_pending,\n  };\n}\n\nfunction regenerateApiKey(user) {\n  return axios\n    .post(`api/users/${user.id}/regenerate_api_key`)\n    .then(data => {\n      notification.success(\"The API Key has been updated.\");\n      return data.api_key;\n    })\n    .catch(error => {\n      notification.error(\"Failed regenerating API Key\", getErrorMessage(error));\n    });\n}\n\nfunction sendPasswordReset(user) {\n  return axios\n    .post(`api/users/${user.id}/reset_password`)\n    .then(data => {\n      if (clientConfig.mailSettingsMissing) {\n        notification.warning(\"The mail server is not configured.\");\n        return data.reset_link;\n      }\n      notification.success(\"Password reset email sent.\");\n    })\n    .catch(error => {\n      notification.error(\"Failed to send password reset email\", getErrorMessage(error));\n    });\n}\n\nfunction resendInvitation(user) {\n  return axios\n    .post(`api/users/${user.id}/invite`)\n    .then(data => {\n      if (clientConfig.mailSettingsMissing) {\n        notification.warning(\"The mail server is not configured.\");\n        return data.invite_link;\n      }\n      notification.success(\"Invitation sent.\");\n    })\n    .catch(error => {\n      notification.error(\"Failed to resend invitation\", getErrorMessage(error));\n    });\n}\n\nconst User = {\n  query: params => axios.get(\"api/users\", { params }),\n  get: ({ id }) => axios.get(`api/users/${id}`),\n  create: data => axios.post(`api/users`, data),\n  save: data => axios.post(`api/users/${data.id}`, data),\n  enableUser,\n  disableUser,\n  deleteUser,\n  convertUserInfo,\n  regenerateApiKey,\n  sendPasswordReset,\n  resendInvitation,\n};\n\nexport default User;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { axios } from \"@/services/axios\";\nimport PropTypes from \"prop-types\";\nimport { each, debounce, get, find } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport List from \"antd/lib/list\";\nimport Modal from \"antd/lib/modal\";\nimport Select from \"antd/lib/select\";\nimport Tag from \"antd/lib/tag\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { toHuman } from \"@/lib/utils\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { UserPreviewCard } from \"@/components/PreviewCard\";\nimport notification from \"@/services/notification\";\nimport User from \"@/services/user\";\n\nimport \"./index.less\";\n\nconst { Option } = Select;\nconst DEBOUNCE_SEARCH_DURATION = 200;\n\nfunction useGrantees(url) {\n  const loadGrantees = useCallback(\n    () =>\n      axios.get(url).then(data => {\n        const resultGrantees = [];\n        each(data, (grantees, accessType) => {\n          grantees.forEach(grantee => {\n            grantee.accessType = toHuman(accessType);\n            resultGrantees.push(grantee);\n          });\n        });\n        return resultGrantees;\n      }),\n    [url]\n  );\n\n  const addPermission = useCallback(\n    (userId, accessType = \"modify\") =>\n      axios\n        .post(url, { access_type: accessType, user_id: userId })\n        .catch(() => notification.error(\"Could not grant permission to the user\")),\n    [url]\n  );\n\n  const removePermission = useCallback(\n    (userId, accessType = \"modify\") =>\n      axios\n        .delete(url, { data: { access_type: accessType, user_id: userId } })\n        .catch(() => notification.error(\"Could not remove permission from the user\")),\n    [url]\n  );\n\n  return { loadGrantees, addPermission, removePermission };\n}\n\nconst searchUsers = searchTerm =>\n  User.query({ q: searchTerm })\n    .then(({ results }) => results)\n    .catch(() => []);\n\nfunction PermissionsEditorDialogHeader({ context }) {\n  return (\n    <>\n      Manage Permissions\n      <div className=\"modal-header-desc\">\n        {`Editing this ${context} is enabled for the users in this list and for admins. `}\n        <HelpTrigger type=\"MANAGE_PERMISSIONS\" />\n      </div>\n    </>\n  );\n}\n\nPermissionsEditorDialogHeader.propTypes = { context: PropTypes.oneOf([\"query\", \"dashboard\"]) };\nPermissionsEditorDialogHeader.defaultProps = { context: \"query\" };\n\nfunction UserSelect({ onSelect, shouldShowUser }) {\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [users, setUsers] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const debouncedSearchUsers = useCallback(\n    debounce(\n      search =>\n        searchUsers(search)\n          .then(setUsers)\n          .finally(() => setLoadingUsers(false)),\n      DEBOUNCE_SEARCH_DURATION\n    ),\n    []\n  );\n\n  useEffect(() => {\n    setLoadingUsers(true);\n    debouncedSearchUsers(searchTerm);\n  }, [debouncedSearchUsers, searchTerm]);\n\n  return (\n    <Select\n      className=\"w-100 m-b-10\"\n      placeholder=\"Add users...\"\n      showSearch\n      onSearch={setSearchTerm}\n      suffixIcon={loadingUsers ? <i className=\"fa fa-spinner fa-pulse\" /> : <i className=\"fa fa-search\" />}\n      filterOption={false}\n      notFoundContent={null}\n      value={undefined}\n      getPopupContainer={trigger => trigger.parentNode}\n      onSelect={onSelect}>\n      {users.filter(shouldShowUser).map(user => (\n        <Option key={user.id} value={user.id}>\n          <UserPreviewCard user={user} />\n        </Option>\n      ))}\n    </Select>\n  );\n}\n\nUserSelect.propTypes = {\n  onSelect: PropTypes.func,\n  shouldShowUser: PropTypes.func,\n};\nUserSelect.defaultProps = { onSelect: () => {}, shouldShowUser: () => true };\n\nfunction PermissionsEditorDialog({ dialog, author, context, aclUrl }) {\n  const [loadingGrantees, setLoadingGrantees] = useState(true);\n  const [grantees, setGrantees] = useState([]);\n  const { loadGrantees, addPermission, removePermission } = useGrantees(aclUrl);\n  const loadUsersWithPermissions = useCallback(() => {\n    setLoadingGrantees(true);\n    loadGrantees()\n      .then(setGrantees)\n      .catch(() => notification.error(\"Failed to load grantees list\"))\n      .finally(() => setLoadingGrantees(false));\n  }, [loadGrantees]);\n\n  const userHasPermission = useCallback(\n    user => user.id === author.id || !!get(find(grantees, { id: user.id }), \"accessType\"),\n    [author.id, grantees]\n  );\n\n  useEffect(() => {\n    loadUsersWithPermissions();\n  }, [aclUrl, loadUsersWithPermissions]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      className=\"permissions-editor-dialog\"\n      title={<PermissionsEditorDialogHeader context={context} />}\n      footer={<Button onClick={dialog.dismiss}>Close</Button>}>\n      <UserSelect\n        onSelect={userId => addPermission(userId).then(loadUsersWithPermissions)}\n        shouldShowUser={user => !userHasPermission(user)}\n      />\n      <div className=\"d-flex align-items-center m-t-5\">\n        <h5 className=\"flex-fill\">Users with permissions</h5>\n        {loadingGrantees && <i className=\"fa fa-spinner fa-pulse\" />}\n      </div>\n      <div className=\"scrollbox p-5\" style={{ maxHeight: \"40vh\" }}>\n        <List\n          size=\"small\"\n          dataSource={[author, ...grantees]}\n          renderItem={user => (\n            <List.Item>\n              <UserPreviewCard key={user.id} user={user}>\n                {user.id === author.id ? (\n                  <Tag className=\"m-0\">Author</Tag>\n                ) : (\n                  <Tooltip title=\"Remove user permissions\">\n                    <i\n                      className=\"fa fa-remove clickable\"\n                      onClick={() => removePermission(user.id).then(loadUsersWithPermissions)}\n                    />\n                  </Tooltip>\n                )}\n              </UserPreviewCard>\n            </List.Item>\n          )}\n        />\n      </div>\n    </Modal>\n  );\n}\n\nPermissionsEditorDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  author: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  context: PropTypes.oneOf([\"query\", \"dashboard\"]),\n  aclUrl: PropTypes.string.isRequired,\n};\n\nPermissionsEditorDialog.defaultProps = { context: \"query\" };\n\nexport default wrapDialog(PermissionsEditorDialog);\n","import React from \"react\";\nimport Input from \"antd/lib/input\";\nimport Icon from \"antd/lib/icon\";\nimport Tooltip from \"antd/lib/tooltip\";\n\nexport default class InputWithCopy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { copied: null };\n    this.ref = React.createRef();\n    this.copyFeatureSupported = document.queryCommandSupported(\"copy\");\n    this.resetCopyState = null;\n  }\n\n  componentWillUnmount() {\n    if (this.resetCopyState) {\n      clearTimeout(this.resetCopyState);\n    }\n  }\n\n  copy = () => {\n    // select text\n    this.ref.current.select();\n\n    // copy\n    try {\n      const success = document.execCommand(\"copy\");\n      if (!success) {\n        throw new Error();\n      }\n      this.setState({ copied: \"Copied!\" });\n    } catch (err) {\n      this.setState({\n        copied: \"Copy failed\",\n      });\n    }\n\n    // reset tooltip\n    this.resetCopyState = setTimeout(() => this.setState({ copied: null }), 2000);\n  };\n\n  render() {\n    const copyButton = (\n      <Tooltip title={this.state.copied || \"Copy\"}>\n        <Icon type=\"copy\" style={{ cursor: \"pointer\" }} onClick={this.copy} />\n      </Tooltip>\n    );\n\n    return <Input {...this.props} ref={this.ref} addonAfter={this.copyFeatureSupported && copyButton} />;\n  }\n}\n","import { replace } from \"lodash\";\nimport React from \"react\";\nimport { axios } from \"@/services/axios\";\nimport PropTypes from \"prop-types\";\nimport Switch from \"antd/lib/switch\";\nimport Modal from \"antd/lib/modal\";\nimport Form from \"antd/lib/form\";\nimport Alert from \"antd/lib/alert\";\nimport notification from \"@/services/notification\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport InputWithCopy from \"@/components/InputWithCopy\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nconst API_SHARE_URL = \"api/dashboards/{id}/share\";\n\nclass ShareDashboardDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    hasOnlySafeQueries: PropTypes.bool.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  formItemProps = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n    style: { marginBottom: 7 },\n  };\n\n  constructor(props) {\n    super(props);\n    const { dashboard } = this.props;\n\n    this.state = {\n      saving: false,\n    };\n\n    this.apiUrl = replace(API_SHARE_URL, \"{id}\", dashboard.id);\n    this.enabled = this.props.hasOnlySafeQueries || dashboard.publicAccessEnabled;\n  }\n\n  static get headerContent() {\n    return (\n      <React.Fragment>\n        Share Dashboard\n        <div className=\"modal-header-desc\">\n          Allow public access to this dashboard with a secret address. <HelpTrigger type=\"SHARE_DASHBOARD\" />\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  enableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    axios\n      .post(this.apiUrl)\n      .then(data => {\n        dashboard.publicAccessEnabled = true;\n        dashboard.public_url = data.public_url;\n      })\n      .catch(() => {\n        notification.error(\"Failed to turn on sharing for this dashboard\");\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  };\n\n  disableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    axios\n      .delete(this.apiUrl)\n      .then(() => {\n        dashboard.publicAccessEnabled = false;\n        delete dashboard.public_url;\n      })\n      .catch(() => {\n        notification.error(\"Failed to turn off sharing for this dashboard\");\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  };\n\n  onChange = checked => {\n    if (checked) {\n      this.enableAccess();\n    } else {\n      this.disableAccess();\n    }\n  };\n\n  render() {\n    const { dialog, dashboard } = this.props;\n\n    return (\n      <Modal {...dialog.props} title={this.constructor.headerContent} footer={null}>\n        <Form layout=\"horizontal\">\n          {!this.props.hasOnlySafeQueries && (\n            <Form.Item>\n              <Alert\n                message=\"For your security, sharing is currently not supported for dashboards containing queries with text parameters. Consider changing the text parameters in your query to a different type.\"\n                type=\"error\"\n              />\n            </Form.Item>\n          )}\n          <Form.Item label=\"Allow public access\" {...this.formItemProps}>\n            <Switch\n              checked={dashboard.publicAccessEnabled}\n              onChange={this.onChange}\n              loading={this.state.saving}\n              disabled={!this.enabled}\n              data-test=\"PublicAccessEnabled\"\n            />\n          </Form.Item>\n          {dashboard.public_url && (\n            <Form.Item label=\"Secret address\" {...this.formItemProps}>\n              <InputWithCopy value={dashboard.public_url} data-test=\"SecretAddress\" />\n            </Form.Item>\n          )}\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ShareDashboardDialog);\n","import { has } from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport location from \"@/services/location\";\n\nexport default function useFullscreenHandler() {\n  const [fullscreen, setFullscreen] = useState(has(location.search, \"fullscreen\"));\n  useEffect(() => {\n    document.body.classList.toggle(\"headless\", fullscreen);\n    location.setSearch({ fullscreen: fullscreen ? true : null }, true);\n  }, [fullscreen]);\n\n  const toggleFullscreen = () => setFullscreen(!fullscreen);\n  return [fullscreen, toggleFullscreen];\n}\n","import { isNaN, max, min } from \"lodash\";\nimport { useEffect, useState, useRef, useMemo } from \"react\";\nimport location from \"@/services/location\";\nimport { policy } from \"@/services/policy\";\n\nfunction getLimitedRefreshRate(refreshRate) {\n  const allowedIntervals = policy.getDashboardRefreshIntervals();\n  return max([30, min(allowedIntervals), refreshRate]);\n}\n\nfunction getRefreshRateFromUrl() {\n  const refreshRate = parseFloat(location.search.refresh);\n  return isNaN(refreshRate) ? null : getLimitedRefreshRate(refreshRate);\n}\n\nexport default function useRefreshRateHandler(refreshDashboard) {\n  const [refreshRate, setRefreshRate] = useState(getRefreshRateFromUrl());\n\n  // `refreshDashboard` may change quite frequently (on every update of `dashboard` instance), but we\n  // have to keep the same timer running, because timer will restart when re-creating, and instead of\n  // running refresh every N seconds - it will run refresh every N seconds after last dashboard update\n  // (which is not right obviously)\n  const refreshDashboardRef = useRef();\n  refreshDashboardRef.current = refreshDashboard;\n\n  // URL and timer should be updated only when `refreshRate` changes\n  useEffect(() => {\n    location.setSearch({ refresh: refreshRate || null }, true);\n    if (refreshRate) {\n      const refreshTimer = setInterval(() => {\n        refreshDashboardRef.current();\n      }, refreshRate * 1000);\n      return () => clearInterval(refreshTimer);\n    }\n  }, [refreshRate]);\n\n  return useMemo(() => [refreshRate, rate => setRefreshRate(getLimitedRefreshRate(rate)), () => setRefreshRate(null)], [\n    refreshRate,\n  ]);\n}\n","import { debounce, find, has, isMatch, map, pickBy } from \"lodash\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport location from \"@/services/location\";\nimport notification from \"@/services/notification\";\n\nexport const DashboardStatusEnum = {\n  SAVED: \"saved\",\n  SAVING: \"saving\",\n  SAVING_FAILED: \"saving_failed\",\n};\n\nfunction getChangedPositions(widgets, nextPositions = {}) {\n  return pickBy(nextPositions, (nextPos, widgetId) => {\n    const widget = find(widgets, { id: Number(widgetId) });\n    const prevPos = widget.options.position;\n    return !isMatch(prevPos, nextPos);\n  });\n}\n\nexport default function useEditModeHandler(canEditDashboard, widgets) {\n  const [editingLayout, setEditingLayout] = useState(canEditDashboard && has(location.search, \"edit\"));\n  const [dashboardStatus, setDashboardStatus] = useState(DashboardStatusEnum.SAVED);\n  const [recentPositions, setRecentPositions] = useState([]);\n  const [doneBtnClickedWhileSaving, setDoneBtnClickedWhileSaving] = useState(false);\n\n  useEffect(() => {\n    location.setSearch({ edit: editingLayout ? true : null }, true);\n  }, [editingLayout]);\n\n  useEffect(() => {\n    if (doneBtnClickedWhileSaving && dashboardStatus === DashboardStatusEnum.SAVED) {\n      setDoneBtnClickedWhileSaving(false);\n      setEditingLayout(false);\n    }\n  }, [doneBtnClickedWhileSaving, dashboardStatus]);\n\n  const saveDashboardLayout = useCallback(\n    positions => {\n      if (!canEditDashboard) {\n        setDashboardStatus(DashboardStatusEnum.SAVED);\n        return;\n      }\n\n      const changedPositions = getChangedPositions(widgets, positions);\n\n      setDashboardStatus(DashboardStatusEnum.SAVING);\n      setRecentPositions(positions);\n      const saveChangedWidgets = map(changedPositions, (position, id) => {\n        // find widget\n        const widget = find(widgets, { id: Number(id) });\n\n        // skip already deleted widget\n        if (!widget) {\n          return Promise.resolve();\n        }\n\n        return widget.save(\"options\", { position });\n      });\n\n      return Promise.all(saveChangedWidgets)\n        .then(() => setDashboardStatus(DashboardStatusEnum.SAVED))\n        .catch(() => {\n          setDashboardStatus(DashboardStatusEnum.SAVING_FAILED);\n          notification.error(\"Error saving changes.\");\n        });\n    },\n    [canEditDashboard, widgets]\n  );\n\n  const saveDashboardLayoutDebounced = useCallback(\n    (...args) => {\n      setDashboardStatus(DashboardStatusEnum.SAVING);\n      return debounce(() => saveDashboardLayout(...args), 2000)();\n    },\n    [saveDashboardLayout]\n  );\n\n  const retrySaveDashboardLayout = useCallback(() => saveDashboardLayout(recentPositions), [\n    recentPositions,\n    saveDashboardLayout,\n  ]);\n\n  const setEditing = useCallback(\n    editing => {\n      if (!editing && dashboardStatus !== DashboardStatusEnum.SAVED) {\n        setDoneBtnClickedWhileSaving(true);\n        return;\n      }\n      setEditingLayout(canEditDashboard && editing);\n    },\n    [dashboardStatus, canEditDashboard]\n  );\n\n  return {\n    editingLayout: canEditDashboard && editingLayout,\n    setEditingLayout: setEditing,\n    saveDashboardLayout: editingLayout ? saveDashboardLayoutDebounced : saveDashboardLayout,\n    retrySaveDashboardLayout,\n    doneBtnClickedWhileSaving,\n    dashboardStatus,\n  };\n}\n","import { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\nimport { isEmpty, includes, compact, map, has, pick, keys, extend, every, get } from \"lodash\";\nimport notification from \"@/services/notification\";\nimport location from \"@/services/location\";\nimport { Dashboard, collectDashboardFilters } from \"@/services/dashboard\";\nimport { currentUser } from \"@/services/auth\";\nimport recordEvent from \"@/services/recordEvent\";\nimport AddWidgetDialog from \"@/components/dashboards/AddWidgetDialog\";\nimport TextboxDialog from \"@/components/dashboards/TextboxDialog\";\nimport PermissionsEditorDialog from \"@/components/PermissionsEditorDialog\";\nimport { editableMappingsToParameterMappings, synchronizeWidgetTitles } from \"@/components/ParameterMappingInput\";\nimport ShareDashboardDialog from \"../components/ShareDashboardDialog\";\nimport useFullscreenHandler from \"../../../lib/hooks/useFullscreenHandler\";\nimport useRefreshRateHandler from \"./useRefreshRateHandler\";\nimport useEditModeHandler from \"./useEditModeHandler\";\n\nexport { DashboardStatusEnum } from \"./useEditModeHandler\";\n\nfunction getAffectedWidgets(widgets, updatedParameters = []) {\n  return !isEmpty(updatedParameters)\n    ? widgets.filter(widget =>\n        Object.values(widget.getParameterMappings())\n          .filter(({ type }) => type === \"dashboard-level\")\n          .some(({ mapTo }) =>\n            includes(\n              updatedParameters.map(p => p.name),\n              mapTo\n            )\n          )\n      )\n    : widgets;\n}\n\nfunction useDashboard(dashboardData) {\n  const [dashboard, setDashboard] = useState(dashboardData);\n  const [filters, setFilters] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [gridDisabled, setGridDisabled] = useState(false);\n  const globalParameters = useMemo(() => dashboard.getParametersDefs(), [dashboard]);\n  const canEditDashboard = !dashboard.is_archived && dashboard.can_edit;\n  const isDashboardOwnerOrAdmin = useMemo(\n    () =>\n      !dashboard.is_archived &&\n      has(dashboard, \"user.id\") &&\n      (currentUser.id === dashboard.user.id || currentUser.hasPermission(\"admin\")),\n    [dashboard]\n  );\n  const hasOnlySafeQueries = useMemo(\n    () => every(dashboard.widgets, w => (w.getQuery() ? w.getQuery().is_safe : true)),\n    [dashboard]\n  );\n\n  const managePermissions = useCallback(() => {\n    const aclUrl = `api/dashboards/${dashboard.id}/acl`;\n    PermissionsEditorDialog.showModal({\n      aclUrl,\n      context: \"dashboard\",\n      author: dashboard.user,\n    });\n  }, [dashboard]);\n\n  const updateDashboard = useCallback(\n    (data, includeVersion = true) => {\n      setDashboard(currentDashboard => extend({}, currentDashboard, data));\n      // for some reason the request uses the id as slug\n      data = { ...data, slug: dashboard.id };\n      if (includeVersion) {\n        data = { ...data, version: dashboard.version };\n      }\n      return Dashboard.save(data)\n        .then(updatedDashboard =>\n          setDashboard(currentDashboard => extend({}, currentDashboard, pick(updatedDashboard, keys(data))))\n        )\n        .catch(error => {\n          const status = get(error, \"response.status\");\n          if (status === 403) {\n            notification.error(\"Dashboard update failed\", \"Permission Denied.\");\n          } else if (status === 409) {\n            notification.error(\n              \"It seems like the dashboard has been modified by another user. \",\n              \"Please copy/backup your changes and reload this page.\",\n              { duration: null }\n            );\n          }\n        });\n    },\n    [dashboard]\n  );\n\n  const togglePublished = useCallback(() => {\n    recordEvent(\"toggle_published\", \"dashboard\", dashboard.id);\n    updateDashboard({ is_draft: !dashboard.is_draft }, false);\n  }, [dashboard, updateDashboard]);\n\n  const loadWidget = useCallback((widget, forceRefresh = false) => {\n    widget.getParametersDefs(); // Force widget to read parameters values from URL\n    setDashboard(currentDashboard => extend({}, currentDashboard));\n    return widget.load(forceRefresh).finally(() => setDashboard(currentDashboard => extend({}, currentDashboard)));\n  }, []);\n\n  const refreshWidget = useCallback(widget => loadWidget(widget, true), [loadWidget]);\n\n  const removeWidget = useCallback(widgetId => {\n    setDashboard(currentDashboard =>\n      extend({}, currentDashboard, {\n        widgets: currentDashboard.widgets.filter(widget => widget.id !== undefined && widget.id !== widgetId),\n      })\n    );\n  }, []);\n\n  const dashboardRef = useRef();\n  dashboardRef.current = dashboard;\n\n  const loadDashboard = useCallback(\n    (forceRefresh = false, updatedParameters = []) => {\n      const affectedWidgets = getAffectedWidgets(dashboardRef.current.widgets, updatedParameters);\n      const loadWidgetPromises = compact(\n        affectedWidgets.map(widget => loadWidget(widget, forceRefresh).catch(error => error))\n      );\n\n      return Promise.all(loadWidgetPromises).then(() => {\n        const queryResults = compact(map(dashboardRef.current.widgets, widget => widget.getQueryResult()));\n        const updatedFilters = collectDashboardFilters(dashboardRef.current, queryResults, location.search);\n        setFilters(updatedFilters);\n      });\n    },\n    [loadWidget]\n  );\n\n  const refreshDashboard = useCallback(\n    updatedParameters => {\n      if (!refreshing) {\n        setRefreshing(true);\n        loadDashboard(true, updatedParameters).finally(() => setRefreshing(false));\n      }\n    },\n    [refreshing, loadDashboard]\n  );\n\n  const archiveDashboard = useCallback(() => {\n    recordEvent(\"archive\", \"dashboard\", dashboard.id);\n    Dashboard.delete(dashboard).then(updatedDashboard =>\n      setDashboard(currentDashboard => extend({}, currentDashboard, pick(updatedDashboard, [\"is_archived\"])))\n    );\n  }, [dashboard]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const showShareDashboardDialog = useCallback(() => {\n    const handleDialogClose = () => setDashboard(currentDashboard => extend({}, currentDashboard));\n\n    ShareDashboardDialog.showModal({\n      dashboard,\n      hasOnlySafeQueries,\n    })\n      .onClose(handleDialogClose)\n      .onDismiss(handleDialogClose);\n  }, [dashboard, hasOnlySafeQueries]);\n\n  const showAddTextboxDialog = useCallback(() => {\n    TextboxDialog.showModal({\n      isNew: true,\n    }).onClose(text =>\n      dashboard.addWidget(text).then(() => setDashboard(currentDashboard => extend({}, currentDashboard)))\n    );\n  }, [dashboard]);\n\n  const showAddWidgetDialog = useCallback(() => {\n    AddWidgetDialog.showModal({\n      dashboard,\n    }).onClose(({ visualization, parameterMappings }) =>\n      dashboard\n        .addWidget(visualization, {\n          parameterMappings: editableMappingsToParameterMappings(parameterMappings),\n        })\n        .then(widget => {\n          const widgetsToSave = [\n            widget,\n            ...synchronizeWidgetTitles(widget.options.parameterMappings, dashboard.widgets),\n          ];\n          return Promise.all(widgetsToSave.map(w => w.save())).then(() =>\n            setDashboard(currentDashboard => extend({}, currentDashboard))\n          );\n        })\n    );\n  }, [dashboard]);\n\n  const [refreshRate, setRefreshRate, disableRefreshRate] = useRefreshRateHandler(refreshDashboard);\n  const [fullscreen, toggleFullscreen] = useFullscreenHandler();\n  const editModeHandler = useEditModeHandler(!gridDisabled && canEditDashboard, dashboard.widgets);\n\n  useEffect(() => {\n    setDashboard(dashboardData);\n    loadDashboard();\n  }, [dashboardData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    document.title = dashboard.name;\n  }, [dashboard.name]);\n\n  // reload dashboard when filter option changes\n  useEffect(() => {\n    loadDashboard();\n  }, [dashboard.dashboard_filters_enabled]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    dashboard,\n    globalParameters,\n    refreshing,\n    filters,\n    setFilters,\n    loadDashboard,\n    refreshDashboard,\n    updateDashboard,\n    togglePublished,\n    archiveDashboard,\n    loadWidget,\n    refreshWidget,\n    removeWidget,\n    canEditDashboard,\n    isDashboardOwnerOrAdmin,\n    refreshRate,\n    setRefreshRate,\n    disableRefreshRate,\n    ...editModeHandler,\n    gridDisabled,\n    setGridDisabled,\n    fullscreen,\n    toggleFullscreen,\n    showShareDashboardDialog,\n    showAddTextboxDialog,\n    showAddWidgetDialog,\n    managePermissions,\n  };\n}\n\nexport default useDashboard;\n","import { trim } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Input from \"antd/lib/input\";\n\nexport default class EditInPlace extends React.Component {\n  static propTypes = {\n    ignoreBlanks: PropTypes.bool,\n    isEditable: PropTypes.bool,\n    placeholder: PropTypes.string,\n    value: PropTypes.string,\n    onDone: PropTypes.func.isRequired,\n    onStopEditing: PropTypes.func,\n    multiline: PropTypes.bool,\n    editorProps: PropTypes.object,\n    defaultEditing: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    ignoreBlanks: false,\n    isEditable: true,\n    placeholder: \"\",\n    value: \"\",\n    onStopEditing: () => {},\n    multiline: false,\n    editorProps: {},\n    defaultEditing: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: props.defaultEditing,\n    };\n  }\n\n  componentDidUpdate(_, prevState) {\n    if (!this.state.editing && prevState.editing) {\n      this.props.onStopEditing();\n    }\n  }\n\n  startEditing = () => {\n    if (this.props.isEditable) {\n      this.setState({ editing: true });\n    }\n  };\n\n  stopEditing = currentValue => {\n    const newValue = trim(currentValue);\n    const ignorableBlank = this.props.ignoreBlanks && newValue === \"\";\n    if (!ignorableBlank && newValue !== this.props.value) {\n      this.props.onDone(newValue);\n    }\n    this.setState({ editing: false });\n  };\n\n  handleKeyDown = event => {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      this.stopEditing(event.target.value);\n    } else if (event.keyCode === 27) {\n      this.setState({ editing: false });\n    }\n  };\n\n  renderNormal = () =>\n    this.props.value ? (\n      <span\n        role=\"presentation\"\n        onFocus={this.startEditing}\n        onClick={this.startEditing}\n        className={this.props.isEditable ? \"editable\" : \"\"}>\n        {this.props.value}\n      </span>\n    ) : (\n      <a className=\"clickable\" onClick={this.startEditing}>\n        {this.props.placeholder}\n      </a>\n    );\n\n  renderEdit = () => {\n    const { multiline, value, editorProps } = this.props;\n    const InputComponent = multiline ? Input.TextArea : Input;\n    return (\n      <InputComponent\n        defaultValue={value}\n        onBlur={e => this.stopEditing(e.target.value)}\n        onKeyDown={this.handleKeyDown}\n        autoFocus\n        {...editorProps}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <span className={cx(\"edit-in-place\", { active: this.state.editing }, this.props.className)}>\n        {this.state.editing ? this.renderEdit() : this.renderNormal()}\n      </span>\n    );\n  }\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { map, includes } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Icon from \"antd/lib/icon\";\nimport Modal from \"antd/lib/modal\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport FavoritesControl from \"@/components/FavoritesControl\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport { DashboardTagsControl } from \"@/components/tags-control/TagsControl\";\nimport getTags from \"@/services/getTags\";\nimport { clientConfig } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport { durationHumanize } from \"@/lib/utils\";\nimport { DashboardStatusEnum } from \"../hooks/useDashboard\";\n\nimport \"./DashboardHeader.less\";\n\nfunction getDashboardTags() {\n  return getTags(\"api/dashboards/tags\").then(tags => map(tags, t => t.name));\n}\n\nfunction buttonType(value) {\n  return value ? \"primary\" : \"default\";\n}\n\nfunction DashboardPageTitle({ dashboardOptions }) {\n  const { dashboard, canEditDashboard, updateDashboard, editingLayout } = dashboardOptions;\n  return (\n    <div className=\"title-with-tags\">\n      <div className=\"page-title\">\n        <FavoritesControl item={dashboard} />\n        <h3>\n          <EditInPlace\n            isEditable={editingLayout}\n            onDone={name => updateDashboard({ name })}\n            value={dashboard.name}\n            ignoreBlanks\n          />\n        </h3>\n        <Tooltip title={dashboard.user.name} placement=\"bottom\">\n          <img src={dashboard.user.profile_image_url} className=\"profile-image\" alt={dashboard.user.name} />\n        </Tooltip>\n      </div>\n      <DashboardTagsControl\n        tags={dashboard.tags}\n        isDraft={dashboard.is_draft}\n        isArchived={dashboard.is_archived}\n        canEdit={canEditDashboard}\n        getAvailableTags={getDashboardTags}\n        onEdit={tags => updateDashboard({ tags })}\n      />\n    </div>\n  );\n}\n\nDashboardPageTitle.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction RefreshButton({ dashboardOptions }) {\n  const { refreshRate, setRefreshRate, disableRefreshRate, refreshing, refreshDashboard } = dashboardOptions;\n  const allowedIntervals = policy.getDashboardRefreshIntervals();\n  const refreshRateOptions = clientConfig.dashboardRefreshIntervals;\n  const onRefreshRateSelected = ({ key }) => {\n    const parsedRefreshRate = parseFloat(key);\n    if (parsedRefreshRate) {\n      setRefreshRate(parsedRefreshRate);\n      refreshDashboard();\n    } else {\n      disableRefreshRate();\n    }\n  };\n  return (\n    <Button.Group>\n      <Tooltip title={refreshRate ? `Auto Refreshing every ${durationHumanize(refreshRate)}` : null}>\n        <Button type={buttonType(refreshRate)} onClick={() => refreshDashboard()}>\n          <i className={cx(\"zmdi zmdi-refresh m-r-5\", { \"zmdi-hc-spin\": refreshing })} />\n          {refreshRate ? durationHumanize(refreshRate) : \"Refresh\"}\n        </Button>\n      </Tooltip>\n      <Dropdown\n        trigger={[\"click\"]}\n        placement=\"bottomRight\"\n        overlay={\n          <Menu onClick={onRefreshRateSelected} selectedKeys={[`${refreshRate}`]}>\n            {refreshRateOptions.map(option => (\n              <Menu.Item key={`${option}`} disabled={!includes(allowedIntervals, option)}>\n                {durationHumanize(option)}\n              </Menu.Item>\n            ))}\n            {refreshRate && <Menu.Item key={null}>Disable auto refresh</Menu.Item>}\n          </Menu>\n        }>\n        <Button className=\"icon-button hidden-xs\" type={buttonType(refreshRate)}>\n          <i className=\"fa fa-angle-down\" />\n          <span className=\"sr-only\">Split button!</span>\n        </Button>\n      </Dropdown>\n    </Button.Group>\n  );\n}\n\nRefreshButton.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardMoreOptionsButton({ dashboardOptions }) {\n  const {\n    dashboard,\n    setEditingLayout,\n    togglePublished,\n    archiveDashboard,\n    managePermissions,\n    gridDisabled,\n    isDashboardOwnerOrAdmin,\n  } = dashboardOptions;\n\n  const archive = () => {\n    Modal.confirm({\n      title: \"Archive Dashboard\",\n      content: `Are you sure you want to archive the \"${dashboard.name}\" dashboard?`,\n      okText: \"Archive\",\n      okType: \"danger\",\n      onOk: archiveDashboard,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  return (\n    <Dropdown\n      trigger={[\"click\"]}\n      placement=\"bottomRight\"\n      overlay={\n        <Menu data-test=\"DashboardMoreButtonMenu\">\n          <Menu.Item className={cx({ hidden: gridDisabled })}>\n            <a onClick={() => setEditingLayout(true)}>Edit</a>\n          </Menu.Item>\n          {clientConfig.showPermissionsControl && isDashboardOwnerOrAdmin && (\n            <Menu.Item>\n              <a onClick={managePermissions}>Manage Permissions</a>\n            </Menu.Item>\n          )}\n          {!dashboard.is_draft && (\n            <Menu.Item>\n              <a onClick={togglePublished}>Unpublish</a>\n            </Menu.Item>\n          )}\n          <Menu.Item>\n            <a onClick={archive}>Archive</a>\n          </Menu.Item>\n        </Menu>\n      }>\n      <Button className=\"icon-button m-l-5\" data-test=\"DashboardMoreButton\">\n        <Icon type=\"ellipsis\" rotate={90} />\n      </Button>\n    </Dropdown>\n  );\n}\n\nDashboardMoreOptionsButton.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardControl({ dashboardOptions }) {\n  const {\n    dashboard,\n    togglePublished,\n    canEditDashboard,\n    fullscreen,\n    toggleFullscreen,\n    showShareDashboardDialog,\n  } = dashboardOptions;\n  const showPublishButton = dashboard.is_draft;\n  const showRefreshButton = true;\n  const showFullscreenButton = !dashboard.is_draft;\n  const showShareButton = dashboard.publicAccessEnabled || (canEditDashboard && !dashboard.is_draft);\n  const showMoreOptionsButton = canEditDashboard;\n  return (\n    <div className=\"dashboard-control\">\n      {!dashboard.is_archived && (\n        <span className=\"hidden-print\">\n          {showPublishButton && (\n            <Button className=\"m-r-5 hidden-xs\" onClick={togglePublished}>\n              <span className=\"fa fa-paper-plane m-r-5\" /> Publish\n            </Button>\n          )}\n          {showRefreshButton && <RefreshButton dashboardOptions={dashboardOptions} />}\n          {showFullscreenButton && (\n            <Tooltip className=\"hidden-xs\" title=\"Enable/Disable Fullscreen display\">\n              <Button type={buttonType(fullscreen)} className=\"icon-button m-l-5\" onClick={toggleFullscreen}>\n                <i className=\"zmdi zmdi-fullscreen\" />\n              </Button>\n            </Tooltip>\n          )}\n          {showShareButton && (\n            <Tooltip title=\"Dashboard Sharing Options\">\n              <Button\n                className=\"icon-button m-l-5\"\n                type={buttonType(dashboard.publicAccessEnabled)}\n                onClick={showShareDashboardDialog}\n                data-test=\"OpenShareForm\">\n                <i className=\"zmdi zmdi-share\" />\n              </Button>\n            </Tooltip>\n          )}\n          {showMoreOptionsButton && <DashboardMoreOptionsButton dashboardOptions={dashboardOptions} />}\n        </span>\n      )}\n    </div>\n  );\n}\n\nDashboardControl.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardEditControl({ dashboardOptions }) {\n  const { setEditingLayout, doneBtnClickedWhileSaving, dashboardStatus, retrySaveDashboardLayout } = dashboardOptions;\n  let status;\n  if (dashboardStatus === DashboardStatusEnum.SAVED) {\n    status = <span className=\"save-status\">Saved</span>;\n  } else if (dashboardStatus === DashboardStatusEnum.SAVING) {\n    status = (\n      <span className=\"save-status\" data-saving>\n        Saving\n      </span>\n    );\n  } else {\n    status = (\n      <span className=\"save-status\" data-error>\n        Saving Failed\n      </span>\n    );\n  }\n  return (\n    <div className=\"dashboard-control\">\n      {status}\n      {dashboardStatus === DashboardStatusEnum.SAVING_FAILED ? (\n        <Button type=\"primary\" onClick={retrySaveDashboardLayout}>\n          Retry\n        </Button>\n      ) : (\n        <Button loading={doneBtnClickedWhileSaving} type=\"primary\" onClick={() => setEditingLayout(false)}>\n          {!doneBtnClickedWhileSaving && <i className=\"fa fa-check m-r-5\" />} Done Editing\n        </Button>\n      )}\n    </div>\n  );\n}\n\nDashboardEditControl.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nexport default function DashboardHeader({ dashboardOptions }) {\n  const { editingLayout } = dashboardOptions;\n  const DashboardControlComponent = editingLayout ? DashboardEditControl : DashboardControl;\n\n  return (\n    <div className=\"dashboard-header\">\n      <DashboardPageTitle dashboardOptions={dashboardOptions} />\n      <DashboardControlComponent dashboardOptions={dashboardOptions} />\n    </div>\n  );\n}\n\nDashboardHeader.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport DashboardGrid from \"@/components/dashboards/DashboardGrid\";\nimport Parameters from \"@/components/Parameters\";\nimport Filters from \"@/components/Filters\";\nimport { Dashboard } from \"@/services/dashboard\";\nimport recordEvent from \"@/services/recordEvent\";\nimport useDashboard from \"./hooks/useDashboard\";\nimport DashboardHeader from \"./components/DashboardHeader\";\n\nimport \"./DashboardPage.less\";\n\nfunction DashboardSettings({ dashboardOptions }) {\n  const { dashboard, updateDashboard } = dashboardOptions;\n  return (\n    <div className=\"m-b-10 p-15 bg-white tiled\">\n      <Checkbox\n        checked={!!dashboard.dashboard_filters_enabled}\n        onChange={({ target }) => updateDashboard({ dashboard_filters_enabled: target.checked })}\n        data-test=\"DashboardFiltersCheckbox\">\n        Use Dashboard Level Filters\n      </Checkbox>\n    </div>\n  );\n}\n\nDashboardSettings.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction AddWidgetContainer({ dashboardOptions }) {\n  const { showAddTextboxDialog, showAddWidgetDialog } = dashboardOptions;\n  return (\n    <div className=\"add-widget-container\">\n      <h2>\n        <i className=\"zmdi zmdi-widgets\" />\n        <span className=\"hidden-xs hidden-sm\">\n          Widgets are individual query visualizations or text boxes you can place on your dashboard in various\n          arrangements.\n        </span>\n      </h2>\n      <div>\n        <Button className=\"m-r-15\" onClick={showAddTextboxDialog} data-test=\"AddTextboxButton\">\n          Add Textbox\n        </Button>\n        <Button type=\"primary\" onClick={showAddWidgetDialog} data-test=\"AddWidgetButton\">\n          Add Widget\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nAddWidgetContainer.propTypes = {\n  dashboardOptions: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardComponent(props) {\n  const dashboardOptions = useDashboard(props.dashboard);\n  const {\n    dashboard,\n    filters,\n    setFilters,\n    loadDashboard,\n    loadWidget,\n    removeWidget,\n    saveDashboardLayout,\n    globalParameters,\n    refreshDashboard,\n    refreshWidget,\n    editingLayout,\n    setGridDisabled,\n  } = dashboardOptions;\n\n  return (\n    <>\n      <DashboardHeader dashboardOptions={dashboardOptions} />\n      {!isEmpty(globalParameters) && (\n        <div className=\"dashboard-parameters m-b-10 p-15 bg-white tiled\" data-test=\"DashboardParameters\">\n          <Parameters parameters={globalParameters} onValuesChange={refreshDashboard} />\n        </div>\n      )}\n      {!isEmpty(filters) && (\n        <div className=\"m-b-10 p-15 bg-white tiled\" data-test=\"DashboardFilters\">\n          <Filters filters={filters} onChange={setFilters} />\n        </div>\n      )}\n      {editingLayout && <DashboardSettings dashboardOptions={dashboardOptions} />}\n      <div id=\"dashboard-container\">\n        <DashboardGrid\n          dashboard={dashboard}\n          widgets={dashboard.widgets}\n          filters={filters}\n          isEditing={editingLayout}\n          onLayoutChange={editingLayout ? saveDashboardLayout : () => {}}\n          onBreakpointChange={setGridDisabled}\n          onLoadWidget={loadWidget}\n          onRefreshWidget={refreshWidget}\n          onRemoveWidget={removeWidget}\n          onParameterMappingsChange={loadDashboard}\n        />\n      </div>\n      {editingLayout && <AddWidgetContainer dashboardOptions={dashboardOptions} />}\n    </>\n  );\n}\n\nDashboardComponent.propTypes = {\n  dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardPage({ dashboardSlug, onError }) {\n  const [dashboard, setDashboard] = useState(null);\n  const onErrorRef = useRef();\n  onErrorRef.current = onError;\n\n  useEffect(() => {\n    Dashboard.get({ slug: dashboardSlug })\n      .then(dashboardData => {\n        recordEvent(\"view\", \"dashboard\", dashboardData.id);\n        setDashboard(dashboardData);\n      })\n      .catch(error => onErrorRef.current(error));\n  }, [dashboardSlug]);\n\n  return (\n    <div className=\"dashboard-page\">\n      <div className=\"container\">{dashboard && <DashboardComponent dashboard={dashboard} />}</div>\n    </div>\n  );\n}\n\nDashboardPage.propTypes = {\n  dashboardSlug: PropTypes.string.isRequired,\n  onError: PropTypes.func,\n};\n\nDashboardPage.defaultProps = {\n  onError: PropTypes.func,\n};\n\nexport default routeWithUserSession({\n  path: \"/dashboard/:dashboardSlug\",\n  render: pageProps => <DashboardPage {...pageProps} />,\n});\n","import React, { useEffect, useState, useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ErrorBoundaryContext } from \"@redash/viz/lib/components/ErrorBoundary\";\nimport { Auth } from \"@/services/auth\";\n\n// This wrapper modifies `route.render` function and instead of passing `currentRoute` passes an object\n// that contains:\n// - `currentRoute.routeParams`\n// - `pageTitle` field which is equal to `currentRoute.title`\n// - `onError` field which is a `handleError` method of nearest error boundary\n// - `apiKey` field\n\nfunction ApiKeySessionWrapper({ apiKey, currentRoute, renderChildren }) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const { handleError } = useContext(ErrorBoundaryContext);\n\n  useEffect(() => {\n    let isCancelled = false;\n    Auth.setApiKey(apiKey);\n    Auth.loadConfig()\n      .then(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(true);\n        }\n      })\n      .catch(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(false);\n        }\n      });\n    return () => {\n      isCancelled = true;\n    };\n  }, [apiKey]);\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <React.Fragment key={currentRoute.key}>\n      {renderChildren({ ...currentRoute.routeParams, pageTitle: currentRoute.title, onError: handleError, apiKey })}\n    </React.Fragment>\n  );\n}\n\nApiKeySessionWrapper.propTypes = {\n  apiKey: PropTypes.string.isRequired,\n  renderChildren: PropTypes.func,\n};\n\nApiKeySessionWrapper.defaultProps = {\n  renderChildren: () => null,\n};\n\nexport default function routeWithApiKeySession({ render, getApiKey, ...rest }) {\n  return {\n    ...rest,\n    render: currentRoute => (\n      <ApiKeySessionWrapper apiKey={getApiKey(currentRoute)} currentRoute={currentRoute} renderChildren={render} />\n    ),\n  };\n}\n","import { isEmpty } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport routeWithApiKeySession from \"@/components/ApplicationArea/routeWithApiKeySession\";\nimport BigMessage from \"@/components/BigMessage\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Parameters from \"@/components/Parameters\";\nimport DashboardGrid from \"@/components/dashboards/DashboardGrid\";\nimport Filters from \"@/components/Filters\";\nimport { Dashboard } from \"@/services/dashboard\";\nimport logoUrl from \"@/assets/images/redash_icon_small.png\";\nimport useDashboard from \"./hooks/useDashboard\";\n\nimport \"./PublicDashboardPage.less\";\n\nfunction PublicDashboard({ dashboard }) {\n  const { globalParameters, filters, setFilters, refreshDashboard, loadWidget, refreshWidget } = useDashboard(\n    dashboard\n  );\n\n  return (\n    <div className=\"container p-t-10 p-b-20\">\n      <PageHeader title={dashboard.name} />\n      {!isEmpty(globalParameters) && (\n        <div className=\"m-b-10 p-15 bg-white tiled\">\n          <Parameters parameters={globalParameters} onValuesChange={refreshDashboard} />\n        </div>\n      )}\n      {!isEmpty(filters) && (\n        <div className=\"m-b-10 p-15 bg-white tiled\">\n          <Filters filters={filters} onChange={setFilters} />\n        </div>\n      )}\n      <div id=\"dashboard-container\">\n        <DashboardGrid\n          dashboard={dashboard}\n          widgets={dashboard.widgets}\n          filters={filters}\n          isEditing={false}\n          isPublic\n          onLoadWidget={loadWidget}\n          onRefreshWidget={refreshWidget}\n        />\n      </div>\n    </div>\n  );\n}\n\nPublicDashboard.propTypes = {\n  dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nclass PublicDashboardPage extends React.Component {\n  static propTypes = {\n    token: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    loading: true,\n    dashboard: null,\n  };\n\n  componentDidMount() {\n    Dashboard.getByToken({ token: this.props.token })\n      .then(dashboard => this.setState({ dashboard, loading: false }))\n      .catch(error => this.props.onError(error));\n  }\n\n  render() {\n    const { loading, dashboard } = this.state;\n    return (\n      <div className=\"public-dashboard-page\">\n        {loading ? (\n          <div className=\"container loading-message\">\n            <BigMessage className=\"\" icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" />\n          </div>\n        ) : (\n          <PublicDashboard dashboard={dashboard} />\n        )}\n        <div id=\"footer\">\n          <div className=\"text-center\">\n            <a href=\"https://redash.io\">\n              <img alt=\"Redash Logo\" src={logoUrl} width=\"38\" />\n            </a>\n          </div>\n          Powered by <a href=\"https://redash.io/?ref=public-dashboard\">Redash</a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default routeWithApiKeySession({\n  path: \"/public/dashboards/:token\",\n  render: pageProps => <PublicDashboardPage {...pageProps} />,\n  getApiKey: currentRoute => currentRoute.routeParams.token,\n});\n","import { axios } from \"@/services/axios\";\n\nexport const SCHEMA_NOT_SUPPORTED = 1;\nexport const SCHEMA_LOAD_ERROR = 2;\nexport const IMG_ROOT = \"/static/images/db-logos\";\n\nconst DataSource = {\n  query: () => axios.get(\"api/data_sources\"),\n  get: ({ id }) => axios.get(`api/data_sources/${id}`),\n  types: () => axios.get(\"api/data_sources/types\"),\n  create: (data) => axios.post(`api/data_sources`, data),\n  save: (data) => axios.post(`api/data_sources/${data.id}`, data),\n  test: (data) => axios.post(`api/data_sources/${data.id}/test`),\n  delete: ({ id }) => axios.delete(`api/data_sources/${id}`),\n  fetchSchema: (data, refresh = false) => {\n    const params = {};\n\n    if (refresh) {\n      params.refresh = true;\n    }\n\n    return axios.get(`api/data_sources/${data.id}/schema`, { params });\n  },\n};\n\nexport default DataSource;\n","import React from \"react\";\nimport BigMessage from \"@/components/BigMessage\";\n\n// Default \"list empty\" message for list pages\nexport default function EmptyState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-search\" message=\"Sorry, we couldn't find anything.\" {...props} />\n    </div>\n  );\n}\n","import Input from \"antd/lib/input\";\nimport { includes, isEmpty } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\n\nimport \"./CardsList.less\";\n\nconst { Search } = Input;\n\nexport default class CardsList extends React.Component {\n  static propTypes = {\n    items: PropTypes.arrayOf(\n      PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        imgSrc: PropTypes.string.isRequired,\n        onClick: PropTypes.func,\n        href: PropTypes.string,\n      })\n    ),\n    showSearch: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    items: [],\n    showSearch: false,\n  };\n\n  state = {\n    searchText: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.items = [];\n\n    let itemId = 1;\n    props.items.forEach(item => {\n      this.items.push({ id: itemId, ...item });\n      itemId += 1;\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  renderListItem(item) {\n    return (\n      <a key={`card${item.id}`} className=\"visual-card\" onClick={item.onClick} href={item.href}>\n        <img alt={item.title} src={item.imgSrc} />\n        <h3>{item.title}</h3>\n      </a>\n    );\n  }\n\n  render() {\n    const { showSearch } = this.props;\n    const { searchText } = this.state;\n\n    const filteredItems = this.items.filter(\n      item => isEmpty(searchText) || includes(item.title.toLowerCase(), searchText.toLowerCase())\n    );\n\n    return (\n      <div data-test=\"CardsList\">\n        {showSearch && (\n          <div className=\"row p-10\">\n            <div className=\"col-md-4 col-md-offset-4\">\n              <Search placeholder=\"Search...\" onChange={e => this.setState({ searchText: e.target.value })} autoFocus />\n            </div>\n          </div>\n        )}\n        {isEmpty(filteredItems) ? (\n          <EmptyState className=\"\" />\n        ) : (\n          <div className=\"row\">\n            <div className=\"col-lg-12 d-inline-flex flex-wrap visual-card-list\">\n              {filteredItems.map(item => this.renderListItem(item))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport AntCollapse from \"antd/lib/collapse\";\n\nexport default function Collapse({ collapsed, children, className, ...props }) {\n  return (\n    <AntCollapse\n      {...props}\n      activeKey={collapsed ? null : \"content\"}\n      className={cx(className, \"ant-collapse-headerless\")}>\n      <AntCollapse.Panel key=\"content\" header=\"\">\n        {children}\n      </AntCollapse.Panel>\n    </AntCollapse>\n  );\n}\n\nCollapse.propTypes = {\n  collapsed: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nCollapse.defaultProps = {\n  collapsed: true,\n  children: null,\n  className: \"\",\n};\n","import React, { forwardRef } from \"react\";\nimport AceEditor from \"react-ace\";\n\nimport \"./AceEditorInput.less\";\n\nfunction AceEditorInput(props, ref) {\n  return (\n    <div className=\"ace-editor-input\" data-test={props[\"data-test\"]}>\n      <AceEditor\n        ref={ref}\n        mode=\"sql\"\n        theme=\"textmate\"\n        height=\"100px\"\n        editorProps={{ $blockScrolling: Infinity }}\n        showPrintMargin={false}\n        {...props}\n      />\n    </div>\n  );\n}\n\nexport default forwardRef(AceEditorInput);\n","import React from \"react\";\nimport { each, includes, isUndefined, isEmpty, isNil, map } from \"lodash\";\n\nfunction orderedInputs(properties, order, targetOptions) {\n  const inputs = new Array(order.length);\n  Object.keys(properties).forEach(key => {\n    const position = order.indexOf(key);\n    const input = {\n      name: key,\n      title: properties[key].title,\n      type: properties[key].type,\n      placeholder: isNil(properties[key].default) ? null : properties[key].default.toString(),\n      required: properties[key].required,\n      extra: properties[key].extra,\n      initialValue: targetOptions[key],\n    };\n\n    if (input.type === \"select\") {\n      input.placeholder = \"Select an option\";\n      input.options = properties[key].options;\n    }\n\n    if (position > -1) {\n      inputs[position] = input;\n    } else {\n      inputs.push(input);\n    }\n  });\n  return inputs;\n}\n\nfunction normalizeSchema(configurationSchema) {\n  each(configurationSchema.properties, (prop, name) => {\n    if (name === \"password\" || name === \"passwd\") {\n      prop.type = \"password\";\n    }\n\n    if (name.endsWith(\"File\")) {\n      prop.type = \"file\";\n    }\n\n    if (prop.type === \"boolean\") {\n      prop.type = \"checkbox\";\n    }\n\n    if (prop.type === \"string\") {\n      prop.type = \"text\";\n    }\n\n    if (!isEmpty(prop.enum)) {\n      prop.type = \"select\";\n      prop.options = map(prop.enum, value => ({ value, name: value }));\n    }\n\n    if (!isEmpty(prop.extendedEnum)) {\n      prop.type = \"select\";\n      prop.options = prop.extendedEnum;\n    }\n\n    prop.required = includes(configurationSchema.required, name);\n    prop.extra = includes(configurationSchema.extra_options, name);\n  });\n\n  configurationSchema.order = configurationSchema.order || [];\n}\n\nfunction setDefaultValueToFields(configurationSchema, options = {}) {\n  const properties = configurationSchema.properties;\n  Object.keys(properties).forEach(key => {\n    const property = properties[key];\n    // set default value for checkboxes\n    if (!isUndefined(property.default) && property.type === \"checkbox\") {\n      options[key] = property.default;\n    }\n    // set default or first value when value has predefined options\n    if (property.type === \"select\") {\n      const optionValues = map(property.options, option => option.value);\n      options[key] = includes(optionValues, property.default) ? property.default : optionValues[0];\n    }\n  });\n}\n\nfunction getFields(type = {}, target = { options: {} }) {\n  const configurationSchema = type.configuration_schema;\n  normalizeSchema(configurationSchema);\n  const hasTargetObject = Object.keys(target.options).length > 0;\n  if (!hasTargetObject) {\n    setDefaultValueToFields(configurationSchema, target.options);\n  }\n\n  const isNewTarget = !target.id;\n  const inputs = [\n    {\n      name: \"name\",\n      title: \"Name\",\n      type: \"text\",\n      required: true,\n      initialValue: target.name,\n      contentAfter: React.createElement(\"hr\"),\n      placeholder: `My ${type.name}`,\n      autoFocus: isNewTarget,\n    },\n    ...orderedInputs(configurationSchema.properties, configurationSchema.order, target.options),\n  ];\n\n  return inputs;\n}\n\nfunction updateTargetWithValues(target, values) {\n  target.name = values.name;\n  Object.keys(values).forEach(key => {\n    if (key !== \"name\") {\n      target.options[key] = values[key];\n    }\n  });\n}\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result.substr(reader.result.indexOf(\",\") + 1));\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport default {\n  getFields,\n  updateTargetWithValues,\n  getBase64,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Form from \"antd/lib/form\";\nimport Input from \"antd/lib/input\";\nimport InputNumber from \"antd/lib/input-number\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Button from \"antd/lib/button\";\nimport Upload from \"antd/lib/upload\";\nimport Icon from \"antd/lib/icon\";\nimport { includes, isFunction, filter, difference, isEmpty, some, isNumber, isBoolean } from \"lodash\";\nimport Select from \"antd/lib/select\";\nimport notification from \"@/services/notification\";\nimport Collapse from \"@/components/Collapse\";\nimport AceEditorInput from \"@/components/AceEditorInput\";\nimport { toHuman } from \"@/lib/utils\";\nimport { Field, Action, AntdForm } from \"../proptypes\";\nimport helper from \"./dynamicFormHelper\";\n\nimport \"./DynamicForm.less\";\n\nconst fieldRules = ({ type, required, minLength }) => {\n  const requiredRule = required;\n  const minLengthRule = minLength && includes([\"text\", \"email\", \"password\"], type);\n  const emailTypeRule = type === \"email\";\n\n  return [\n    requiredRule && { required, message: \"This field is required.\" },\n    minLengthRule && { min: minLength, message: \"This field is too short.\" },\n    emailTypeRule && { type: \"email\", message: \"This field must be a valid email.\" },\n  ].filter(rule => rule);\n};\n\nclass DynamicForm extends React.Component {\n  static propTypes = {\n    id: PropTypes.string,\n    fields: PropTypes.arrayOf(Field),\n    actions: PropTypes.arrayOf(Action),\n    feedbackIcons: PropTypes.bool,\n    hideSubmitButton: PropTypes.bool,\n    saveText: PropTypes.string,\n    onSubmit: PropTypes.func,\n    form: AntdForm.isRequired,\n  };\n\n  static defaultProps = {\n    id: null,\n    fields: [],\n    actions: [],\n    feedbackIcons: false,\n    hideSubmitButton: false,\n    saveText: \"Save\",\n    onSubmit: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    const hasFilledExtraField = some(props.fields, field => {\n      const { extra, initialValue, placeholder } = field;\n      return (\n        extra &&\n        (!isEmpty(initialValue) ||\n          isNumber(initialValue) ||\n          (isBoolean(initialValue) && initialValue.toString() !== placeholder))\n      );\n    });\n\n    const inProgressActions = {};\n    props.actions.forEach(action => (inProgressActions[action.name] = false));\n\n    this.state = {\n      isSubmitting: false,\n      showExtraFields: hasFilledExtraField,\n      inProgressActions,\n    };\n\n    this.actionCallbacks = this.props.actions.reduce(\n      (acc, cur) => ({\n        ...acc,\n        [cur.name]: cur.callback,\n      }),\n      null\n    );\n  }\n\n  setActionInProgress = (actionName, inProgress) => {\n    this.setState(prevState => ({\n      inProgressActions: {\n        ...prevState.inProgressActions,\n        [actionName]: inProgress,\n      },\n    }));\n  };\n\n  handleSubmit = e => {\n    this.setState({ isSubmitting: true });\n    e.preventDefault();\n\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      Object.entries(values).forEach(([key, value]) => {\n        const initialValue = this.props.fields.find(f => f.name === key).initialValue;\n        if ((initialValue === null || initialValue === undefined || initialValue === \"\") && value === \"\") {\n          values[key] = null;\n        }\n      });\n\n      if (!err) {\n        this.props.onSubmit(\n          values,\n          msg => {\n            const { setFieldsValue, getFieldsValue } = this.props.form;\n            this.setState({ isSubmitting: false });\n            setFieldsValue(getFieldsValue()); // reset form touched state\n            notification.success(msg);\n          },\n          msg => {\n            this.setState({ isSubmitting: false });\n            notification.error(msg);\n          }\n        );\n      } else this.setState({ isSubmitting: false });\n    });\n  };\n\n  handleAction = e => {\n    const actionName = e.target.dataset.action;\n\n    this.setActionInProgress(actionName, true);\n    this.actionCallbacks[actionName](() => {\n      this.setActionInProgress(actionName, false);\n    });\n  };\n\n  base64File = (fieldName, e) => {\n    if (e && e.fileList[0]) {\n      helper.getBase64(e.file).then(value => {\n        this.props.form.setFieldsValue({ [fieldName]: value });\n      });\n    }\n  };\n\n  renderUpload(field, props) {\n    const { getFieldDecorator, getFieldValue } = this.props.form;\n    const { name, initialValue } = field;\n\n    const fileOptions = {\n      rules: fieldRules(field),\n      initialValue,\n      getValueFromEvent: this.base64File.bind(this, name),\n    };\n\n    const disabled = getFieldValue(name) !== undefined && getFieldValue(name) !== initialValue;\n\n    const upload = (\n      <Upload {...props} beforeUpload={() => false}>\n        <Button disabled={disabled}>\n          <Icon type=\"upload\" /> Click to upload\n        </Button>\n      </Upload>\n    );\n\n    return getFieldDecorator(name, fileOptions)(upload);\n  }\n\n  renderSelect(field, props) {\n    const { getFieldDecorator } = this.props.form;\n    const { name, options, mode, initialValue, readOnly, loading } = field;\n    const { Option } = Select;\n\n    const decoratorOptions = {\n      rules: fieldRules(field),\n      initialValue,\n    };\n\n    return getFieldDecorator(\n      name,\n      decoratorOptions\n    )(\n      <Select\n        {...props}\n        optionFilterProp=\"children\"\n        loading={loading || false}\n        mode={mode}\n        getPopupContainer={trigger => trigger.parentNode}>\n        {options &&\n          options.map(option => (\n            <Option key={`${option.value}`} value={option.value} disabled={readOnly}>\n              {option.name || option.value}\n            </Option>\n          ))}\n      </Select>\n    );\n  }\n\n  renderField(field, props) {\n    const { getFieldDecorator } = this.props.form;\n    const { name, type, initialValue } = field;\n    const fieldLabel = field.title || toHuman(name);\n\n    const options = {\n      rules: fieldRules(field),\n      valuePropName: type === \"checkbox\" ? \"checked\" : \"value\",\n      initialValue,\n    };\n\n    if (type === \"checkbox\") {\n      return getFieldDecorator(name, options)(<Checkbox {...props}>{fieldLabel}</Checkbox>);\n    } else if (type === \"file\") {\n      return this.renderUpload(field, props);\n    } else if (type === \"select\") {\n      return this.renderSelect(field, props);\n    } else if (type === \"content\") {\n      return field.content;\n    } else if (type === \"number\") {\n      return getFieldDecorator(name, options)(<InputNumber {...props} />);\n    } else if (type === \"textarea\") {\n      return getFieldDecorator(name, options)(<Input.TextArea {...props} />);\n    } else if (type === \"ace\") {\n      return getFieldDecorator(name, options)(<AceEditorInput {...props} />);\n    }\n    return getFieldDecorator(name, options)(<Input {...props} />);\n  }\n\n  renderFields(fields) {\n    return fields.map(field => {\n      const FormItem = Form.Item;\n      const { name, title, type, readOnly, autoFocus, contentAfter } = field;\n      const fieldLabel = title || toHuman(name);\n      const { feedbackIcons, form } = this.props;\n\n      const formItemProps = {\n        className: \"m-b-10\",\n        hasFeedback: type !== \"checkbox\" && type !== \"file\" && feedbackIcons,\n        label: type === \"checkbox\" ? \"\" : fieldLabel,\n      };\n\n      const fieldProps = {\n        ...field.props,\n        className: \"w-100\",\n        name,\n        type,\n        readOnly,\n        autoFocus,\n        placeholder: field.placeholder,\n        \"data-test\": fieldLabel,\n      };\n\n      return (\n        <React.Fragment key={name}>\n          <FormItem {...formItemProps}>{this.renderField(field, fieldProps)}</FormItem>\n          {isFunction(contentAfter) ? contentAfter(form.getFieldValue(name)) : contentAfter}\n        </React.Fragment>\n      );\n    });\n  }\n\n  renderActions() {\n    return this.props.actions.map(action => {\n      const inProgress = this.state.inProgressActions[action.name];\n      const { isFieldsTouched } = this.props.form;\n\n      const actionProps = {\n        key: action.name,\n        htmlType: \"button\",\n        className: action.pullRight ? \"pull-right m-t-10\" : \"m-t-10\",\n        type: action.type,\n        disabled: isFieldsTouched() && action.disableWhenDirty,\n        loading: inProgress,\n        onClick: this.handleAction,\n      };\n\n      return (\n        <Button {...actionProps} data-action={action.name}>\n          {action.name}\n        </Button>\n      );\n    });\n  }\n\n  render() {\n    const submitProps = {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"w-100 m-t-20\",\n      disabled: this.state.isSubmitting,\n      loading: this.state.isSubmitting,\n    };\n    const { id, hideSubmitButton, saveText, fields } = this.props;\n    const { showExtraFields } = this.state;\n    const saveButton = !hideSubmitButton;\n    const extraFields = filter(fields, { extra: true });\n    const regularFields = difference(fields, extraFields);\n\n    return (\n      <Form id={id} className=\"dynamic-form\" layout=\"vertical\" onSubmit={this.handleSubmit}>\n        {this.renderFields(regularFields)}\n        {!isEmpty(extraFields) && (\n          <div className=\"extra-options\">\n            <Button\n              type=\"dashed\"\n              block\n              className=\"extra-options-button\"\n              onClick={() => this.setState({ showExtraFields: !showExtraFields })}>\n              Additional Settings\n              <i className={cx(\"fa m-l-5\", { \"fa-caret-up\": showExtraFields, \"fa-caret-down\": !showExtraFields })} />\n            </Button>\n            <Collapse collapsed={!showExtraFields} className=\"extra-options-content\">\n              {this.renderFields(extraFields)}\n            </Collapse>\n          </div>\n        )}\n        {saveButton && <Button {...submitProps}>{saveText}</Button>}\n        {this.renderActions()}\n      </Form>\n    );\n  }\n}\n\nexport default Form.create()(DynamicForm);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty, toUpper, includes } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport List from \"antd/lib/list\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport Steps from \"antd/lib/steps\";\nimport { getErrorMessage } from \"@/components/ApplicationArea/ErrorMessage\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { PreviewCard } from \"@/components/PreviewCard\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport HelpTrigger, { TYPES as HELP_TRIGGER_TYPES } from \"@/components/HelpTrigger\";\n\nconst { Step } = Steps;\nconst { Search } = Input;\n\nconst StepEnum = {\n  SELECT_TYPE: 0,\n  CONFIGURE_IT: 1,\n  DONE: 2,\n};\n\nclass CreateSourceDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    types: PropTypes.arrayOf(PropTypes.object),\n    sourceType: PropTypes.string.isRequired,\n    imageFolder: PropTypes.string.isRequired,\n    helpTriggerPrefix: PropTypes.string,\n    onCreate: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    types: [],\n    helpTriggerPrefix: null,\n  };\n\n  state = {\n    searchText: \"\",\n    selectedType: null,\n    savingSource: false,\n    currentStep: StepEnum.SELECT_TYPE,\n  };\n\n  selectType = selectedType => {\n    this.setState({ selectedType, currentStep: StepEnum.CONFIGURE_IT });\n  };\n\n  resetType = () => {\n    if (this.state.currentStep === StepEnum.CONFIGURE_IT) {\n      this.setState({ searchText: \"\", selectedType: null, currentStep: StepEnum.SELECT_TYPE });\n    }\n  };\n\n  createSource = (values, successCallback, errorCallback) => {\n    const { selectedType, savingSource } = this.state;\n    if (!savingSource) {\n      this.setState({ savingSource: true, currentStep: StepEnum.DONE });\n      this.props\n        .onCreate(selectedType, values)\n        .then(data => {\n          successCallback(\"Saved.\");\n          this.props.dialog.close({ success: true, data });\n        })\n        .catch(error => {\n          this.setState({ savingSource: false, currentStep: StepEnum.CONFIGURE_IT });\n          errorCallback(getErrorMessage(error, \"Failed saving.\"));\n        });\n    }\n  };\n\n  renderTypeSelector() {\n    const { types } = this.props;\n    const { searchText } = this.state;\n    const filteredTypes = types.filter(\n      type => isEmpty(searchText) || includes(type.name.toLowerCase(), searchText.toLowerCase())\n    );\n    return (\n      <div className=\"m-t-10\">\n        <Search\n          placeholder=\"Search...\"\n          onChange={e => this.setState({ searchText: e.target.value })}\n          autoFocus\n          data-test=\"SearchSource\"\n        />\n        <div className=\"scrollbox p-5 m-t-10\" style={{ minHeight: \"30vh\", maxHeight: \"40vh\" }}>\n          {isEmpty(filteredTypes) ? (\n            <EmptyState className=\"\" />\n          ) : (\n            <List size=\"small\" dataSource={filteredTypes} renderItem={item => this.renderItem(item)} />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderForm() {\n    const { imageFolder, helpTriggerPrefix } = this.props;\n    const { selectedType } = this.state;\n    const fields = helper.getFields(selectedType);\n    const helpTriggerType = `${helpTriggerPrefix}${toUpper(selectedType.type)}`;\n    return (\n      <div>\n        <div className=\"d-flex justify-content-center align-items-center\">\n          <img className=\"p-5\" src={`${imageFolder}/${selectedType.type}.png`} alt={selectedType.name} width=\"48\" />\n          <h4 className=\"m-0\">{selectedType.name}</h4>\n        </div>\n        <div className=\"text-right\">\n          {HELP_TRIGGER_TYPES[helpTriggerType] && (\n            <HelpTrigger className=\"f-13\" type={helpTriggerType}>\n              Setup Instructions <i className=\"fa fa-question-circle\" />\n            </HelpTrigger>\n          )}\n        </div>\n        <DynamicForm id=\"sourceForm\" fields={fields} onSubmit={this.createSource} feedbackIcons hideSubmitButton />\n        {selectedType.type === \"databricks\" && (\n          <small>\n            By using the Databricks Data Source you agree to the Databricks JDBC/ODBC{\" \"}\n            <a href=\"https://databricks.com/spark/odbc-driver-download\" target=\"_blank\" rel=\"noopener noreferrer\">\n              Driver Download Terms and Conditions\n            </a>\n            .\n          </small>\n        )}\n      </div>\n    );\n  }\n\n  renderItem(item) {\n    const { imageFolder } = this.props;\n    return (\n      <List.Item className=\"p-l-10 p-r-10 clickable\" onClick={() => this.selectType(item)}>\n        <PreviewCard\n          title={item.name}\n          imageUrl={`${imageFolder}/${item.type}.png`}\n          roundedImage={false}\n          data-test=\"PreviewItem\"\n          data-test-type={item.type}>\n          <i className=\"fa fa-angle-double-right\" />\n        </PreviewCard>\n      </List.Item>\n    );\n  }\n\n  render() {\n    const { currentStep, savingSource } = this.state;\n    const { dialog, sourceType } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title={`Create a New ${sourceType}`}\n        footer={\n          currentStep === StepEnum.SELECT_TYPE\n            ? [\n                <Button key=\"cancel\" onClick={() => dialog.dismiss()}>\n                  Cancel\n                </Button>,\n                <Button key=\"submit\" type=\"primary\" disabled>\n                  Create\n                </Button>,\n              ]\n            : [\n                <Button key=\"previous\" onClick={this.resetType}>\n                  Previous\n                </Button>,\n                <Button\n                  key=\"submit\"\n                  htmlType=\"submit\"\n                  form=\"sourceForm\"\n                  type=\"primary\"\n                  loading={savingSource}\n                  data-test=\"CreateSourceButton\">\n                  Create\n                </Button>,\n              ]\n        }>\n        <div data-test=\"CreateSourceDialog\">\n          <Steps className=\"hidden-xs m-b-10\" size=\"small\" current={currentStep} progressDot>\n            {currentStep === StepEnum.CONFIGURE_IT ? (\n              <Step title={<a>Type Selection</a>} className=\"clickable\" onClick={this.resetType} />\n            ) : (\n              <Step title=\"Type Selection\" />\n            )}\n            <Step title=\"Configuration\" />\n            <Step title=\"Done\" />\n          </Steps>\n          {currentStep === StepEnum.SELECT_TYPE && this.renderTypeSelector()}\n          {currentStep !== StepEnum.SELECT_TYPE && this.renderForm()}\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateSourceDialog);\n","import { isFunction, extend, omit, sortBy, find } from \"lodash\";\nimport { stripBase } from \"@/components/ApplicationArea/Router\";\nimport { currentUser } from \"@/services/auth\";\n\nclass SettingsMenuItem {\n  constructor(menuItem) {\n    extend(this, { pathPrefix: `/${menuItem.path}` }, omit(menuItem, [\"isActive\"]));\n    if (isFunction(menuItem.isActive)) {\n      this.isActive = menuItem.isActive;\n    }\n  }\n\n  isActive(path) {\n    return path.startsWith(this.pathPrefix);\n  }\n\n  isAvailable() {\n    return this.permission === undefined || currentUser.hasPermission(this.permission);\n  }\n}\n\nclass SettingsMenu {\n  constructor() {\n    this.items = [];\n  }\n\n  add(item) {\n    this.items.push(new SettingsMenuItem(item));\n    this.items = sortBy(this.items, \"order\");\n  }\n\n  getActiveItem(path) {\n    const strippedPath = stripBase(path);\n    return find(this.items, item => item.isActive(strippedPath));\n  }\n}\n\nexport default new SettingsMenu();\n","import React from \"react\";\nimport Menu from \"antd/lib/menu\";\nimport PageHeader from \"@/components/PageHeader\";\nimport location from \"@/services/location\";\nimport settingsMenu from \"@/services/settingsMenu\";\n\nfunction wrapSettingsTab(options, WrappedComponent) {\n  if (options) {\n    settingsMenu.add(options);\n  }\n\n  return function SettingsTab(props) {\n    const activeItem = settingsMenu.getActiveItem(location.path);\n    return (\n      <div className=\"settings-screen\">\n        <div className=\"container\">\n          <PageHeader title=\"Settings\" />\n          <div className=\"bg-white tiled\">\n            <Menu selectedKeys={[activeItem && activeItem.title]} selectable={false} mode=\"horizontal\">\n              {settingsMenu.items\n                .filter(item => item.isAvailable())\n                .map(item => (\n                  <Menu.Item key={item.title}>\n                    <a href={item.path} data-test=\"SettingsScreenItem\">\n                      {item.title}\n                    </a>\n                  </Menu.Item>\n                ))}\n            </Menu>\n            <div className=\"p-15\">\n              <div>\n                <WrappedComponent {...props} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default wrapSettingsTab;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport { isEmpty, reject } from \"lodash\";\nimport DataSource, { IMG_ROOT } from \"@/services/data-source\";\nimport { policy } from \"@/services/policy\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport CardsList from \"@/components/cards-list/CardsList\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport CreateSourceDialog from \"@/components/CreateSourceDialog\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport recordEvent from \"@/services/recordEvent\";\n\nclass DataSourcesList extends React.Component {\n  static propTypes = {\n    isNewDataSourcePage: PropTypes.bool,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    isNewDataSourcePage: false,\n    onError: () => {},\n  };\n\n  state = {\n    dataSourceTypes: [],\n    dataSources: [],\n    loading: true,\n  };\n\n  newDataSourceDialog = null;\n\n  componentDidMount() {\n    Promise.all([DataSource.query(), DataSource.types()])\n      .then(values =>\n        this.setState(\n          {\n            dataSources: values[0],\n            dataSourceTypes: values[1],\n            loading: false,\n          },\n          () => {\n            // all resources are loaded in state\n            if (this.props.isNewDataSourcePage) {\n              if (policy.canCreateDataSource()) {\n                this.showCreateSourceDialog();\n              } else {\n                navigateTo(\"data_sources\", true);\n              }\n            }\n          }\n        )\n      )\n      .catch(error => this.props.onError(error));\n  }\n\n  componentWillUnmount() {\n    if (this.newDataSourceDialog) {\n      this.newDataSourceDialog.dismiss();\n    }\n  }\n\n  createDataSource = (selectedType, values) => {\n    const target = { options: {}, type: selectedType.type };\n    helper.updateTargetWithValues(target, values);\n\n    return DataSource.create(target).then(dataSource => {\n      this.setState({ loading: true });\n      DataSource.query().then(dataSources => this.setState({ dataSources, loading: false }));\n      return dataSource;\n    });\n  };\n\n  showCreateSourceDialog = () => {\n    recordEvent(\"view\", \"page\", \"data_sources/new\");\n    this.newDataSourceDialog = CreateSourceDialog.showModal({\n      types: reject(this.state.dataSourceTypes, \"deprecated\"),\n      sourceType: \"Data Source\",\n      imageFolder: IMG_ROOT,\n      helpTriggerPrefix: \"DS_\",\n      onCreate: this.createDataSource,\n    });\n\n    this.newDataSourceDialog\n      .onClose((result = {}) => {\n        this.newDataSourceDialog = null;\n        if (result.success) {\n          navigateTo(`data_sources/${result.data.id}`);\n        }\n      })\n      .onDismiss(() => {\n        this.newDataSourceDialog = null;\n        navigateTo(\"data_sources\", true);\n      });\n  };\n\n  renderDataSources() {\n    const { dataSources } = this.state;\n    const items = dataSources.map(dataSource => ({\n      title: dataSource.name,\n      imgSrc: `${IMG_ROOT}/${dataSource.type}.png`,\n      href: `data_sources/${dataSource.id}`,\n    }));\n\n    return isEmpty(dataSources) ? (\n      <div className=\"text-center\">\n        There are no data sources yet.\n        {policy.isCreateDataSourceEnabled() && (\n          <div className=\"m-t-5\">\n            <a className=\"clickable\" onClick={this.showCreateSourceDialog}>\n              Click here\n            </a>{\" \"}\n            to add one.\n          </div>\n        )}\n      </div>\n    ) : (\n      <CardsList items={items} />\n    );\n  }\n\n  render() {\n    const newDataSourceProps = {\n      type: \"primary\",\n      onClick: policy.isCreateDataSourceEnabled() ? this.showCreateSourceDialog : null,\n      disabled: !policy.isCreateDataSourceEnabled(),\n    };\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button {...newDataSourceProps}>\n            <i className=\"fa fa-plus m-r-5\" />\n            New Data Source\n          </Button>\n          <DynamicComponent name=\"DataSourcesListExtra\" />\n        </div>\n        {this.state.loading ? <LoadingState className=\"\" /> : this.renderDataSources()}\n      </div>\n    );\n  }\n}\n\nconst DataSourcesListPage = wrapSettingsTab(\n  {\n    permission: \"admin\",\n    title: \"Data Sources\",\n    path: \"data_sources\",\n    order: 1,\n  },\n  DataSourcesList\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/data_sources\",\n    title: \"Data Sources\",\n    render: pageProps => <DataSourcesListPage {...pageProps} />,\n  }),\n  routeWithUserSession({\n    path: \"/data_sources/new\",\n    title: \"Data Sources\",\n    render: pageProps => <DataSourcesListPage {...pageProps} isNewDataSourcePage />,\n  }),\n];\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { get, find, toUpper } from \"lodash\";\nimport Modal from \"antd/lib/modal\";\nimport DataSource, { IMG_ROOT } from \"@/services/data-source\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport notification from \"@/services/notification\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport HelpTrigger, { TYPES as HELP_TRIGGER_TYPES } from \"@/components/HelpTrigger\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nclass EditDataSource extends React.Component {\n  static propTypes = {\n    dataSourceId: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    dataSource: null,\n    type: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    DataSource.get({ id: this.props.dataSourceId })\n      .then(dataSource => {\n        const { type } = dataSource;\n        this.setState({ dataSource });\n        DataSource.types().then(types => this.setState({ type: find(types, { type }), loading: false }));\n      })\n      .catch(error => this.props.onError(error));\n  }\n\n  saveDataSource = (values, successCallback, errorCallback) => {\n    const { dataSource } = this.state;\n    helper.updateTargetWithValues(dataSource, values);\n    DataSource.save(dataSource)\n      .then(() => successCallback(\"Saved.\"))\n      .catch(error => {\n        const message = get(error, \"response.data.message\", \"Failed saving.\");\n        errorCallback(message);\n      });\n  };\n\n  deleteDataSource = callback => {\n    const { dataSource } = this.state;\n\n    const doDelete = () => {\n      DataSource.delete(dataSource)\n        .then(() => {\n          notification.success(\"Data source deleted successfully.\");\n          navigateTo(\"data_sources\");\n        })\n        .catch(() => {\n          callback();\n        });\n    };\n\n    Modal.confirm({\n      title: \"Delete Data Source\",\n      content: \"Are you sure you want to delete this data source?\",\n      okText: \"Delete\",\n      okType: \"danger\",\n      onOk: doDelete,\n      onCancel: callback,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  testConnection = callback => {\n    const { dataSource } = this.state;\n    DataSource.test({ id: dataSource.id })\n      .then(httpResponse => {\n        if (httpResponse.ok) {\n          notification.success(\"Success\");\n        } else {\n          notification.error(\"Connection Test Failed:\", httpResponse.message, { duration: 10 });\n        }\n        callback();\n      })\n      .catch(() => {\n        notification.error(\n          \"Connection Test Failed:\",\n          \"Unknown error occurred while performing connection test. Please try again later.\",\n          { duration: 10 }\n        );\n        callback();\n      });\n  };\n\n  renderForm() {\n    const { dataSource, type } = this.state;\n    const fields = helper.getFields(type, dataSource);\n    const helpTriggerType = `DS_${toUpper(type.type)}`;\n    const formProps = {\n      fields,\n      type,\n      actions: [\n        { name: \"Delete\", type: \"danger\", callback: this.deleteDataSource },\n        { name: \"Test Connection\", pullRight: true, callback: this.testConnection, disableWhenDirty: true },\n      ],\n      onSubmit: this.saveDataSource,\n      feedbackIcons: true,\n    };\n\n    return (\n      <div className=\"row\" data-test=\"DataSource\">\n        <div className=\"text-right m-r-10\">\n          {HELP_TRIGGER_TYPES[helpTriggerType] && (\n            <HelpTrigger className=\"f-13\" type={helpTriggerType}>\n              Setup Instructions <i className=\"fa fa-question-circle\" />\n            </HelpTrigger>\n          )}\n        </div>\n        <div className=\"text-center m-b-10\">\n          <img className=\"p-5\" src={`${IMG_ROOT}/${type.type}.png`} alt={type.name} width=\"64\" />\n          <h3 className=\"m-0\">{type.name}</h3>\n        </div>\n        <div className=\"col-md-4 col-md-offset-4 m-b-10\">\n          <DynamicForm {...formProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return this.state.loading ? <LoadingState className=\"\" /> : this.renderForm();\n  }\n}\n\nconst EditDataSourcePage = wrapSettingsTab(null, EditDataSource);\n\nexport default routeWithUserSession({\n  path: \"/data_sources/:dataSourceId([0-9]+)\",\n  title: \"Data Sources\",\n  render: pageProps => <EditDataSourcePage {...pageProps} />,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport { isEmpty, reject } from \"lodash\";\nimport Destination, { IMG_ROOT } from \"@/services/destination\";\nimport { policy } from \"@/services/policy\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport CardsList from \"@/components/cards-list/CardsList\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport CreateSourceDialog from \"@/components/CreateSourceDialog\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nclass DestinationsList extends React.Component {\n  static propTypes = {\n    isNewDestinationPage: PropTypes.bool,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    isNewDestinationPage: false,\n    onError: () => {},\n  };\n\n  state = {\n    destinationTypes: [],\n    destinations: [],\n    loading: true,\n  };\n\n  componentDidMount() {\n    Promise.all([Destination.query(), Destination.types()])\n      .then(values =>\n        this.setState(\n          {\n            destinations: values[0],\n            destinationTypes: values[1],\n            loading: false,\n          },\n          () => {\n            // all resources are loaded in state\n            if (this.props.isNewDestinationPage) {\n              if (policy.canCreateDestination()) {\n                this.showCreateSourceDialog();\n              } else {\n                navigateTo(\"destinations\", true);\n              }\n            }\n          }\n        )\n      )\n      .catch(error => this.props.onError(error));\n  }\n\n  createDestination = (selectedType, values) => {\n    const target = { options: {}, type: selectedType.type };\n    helper.updateTargetWithValues(target, values);\n\n    return Destination.create(target).then(destination => {\n      this.setState({ loading: true });\n      Destination.query().then(destinations => this.setState({ destinations, loading: false }));\n      return destination;\n    });\n  };\n\n  showCreateSourceDialog = () => {\n    CreateSourceDialog.showModal({\n      types: reject(this.state.destinationTypes, \"deprecated\"),\n      sourceType: \"Alert Destination\",\n      imageFolder: IMG_ROOT,\n      onCreate: this.createDestination,\n    })\n      .onClose((result = {}) => {\n        if (result.success) {\n          navigateTo(`destinations/${result.data.id}`);\n        }\n      })\n      .onDismiss(() => {\n        navigateTo(\"destinations\", true);\n      });\n  };\n\n  renderDestinations() {\n    const { destinations } = this.state;\n    const items = destinations.map(destination => ({\n      title: destination.name,\n      imgSrc: `${IMG_ROOT}/${destination.type}.png`,\n      href: `destinations/${destination.id}`,\n    }));\n\n    return isEmpty(destinations) ? (\n      <div className=\"text-center\">\n        There are no alert destinations yet.\n        {policy.isCreateDestinationEnabled() && (\n          <div className=\"m-t-5\">\n            <a className=\"clickable\" onClick={this.showCreateSourceDialog}>\n              Click here\n            </a>{\" \"}\n            to add one.\n          </div>\n        )}\n      </div>\n    ) : (\n      <CardsList items={items} />\n    );\n  }\n\n  render() {\n    const newDestinationProps = {\n      type: \"primary\",\n      onClick: policy.isCreateDestinationEnabled() ? this.showCreateSourceDialog : null,\n      disabled: !policy.isCreateDestinationEnabled(),\n    };\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button {...newDestinationProps}>\n            <i className=\"fa fa-plus m-r-5\" />\n            New Alert Destination\n          </Button>\n        </div>\n        {this.state.loading ? <LoadingState className=\"\" /> : this.renderDestinations()}\n      </div>\n    );\n  }\n}\n\nconst DestinationsListPage = wrapSettingsTab(\n  {\n    permission: \"admin\",\n    title: \"Alert Destinations\",\n    path: \"destinations\",\n    order: 4,\n  },\n  DestinationsList\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/destinations\",\n    title: \"Alert Destinations\",\n    render: pageProps => <DestinationsListPage {...pageProps} />,\n  }),\n  routeWithUserSession({\n    path: \"/destinations/new\",\n    title: \"Alert Destinations\",\n    render: pageProps => <DestinationsListPage {...pageProps} isNewDestinationPage />,\n  }),\n];\n","import { get, find } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Destination, { IMG_ROOT } from \"@/services/destination\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport notification from \"@/services/notification\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nclass EditDestination extends React.Component {\n  static propTypes = {\n    destinationId: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    destination: null,\n    type: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    Destination.get({ id: this.props.destinationId })\n      .then(destination => {\n        const { type } = destination;\n        this.setState({ destination });\n        Destination.types().then(types => this.setState({ type: find(types, { type }), loading: false }));\n      })\n      .catch(error => this.props.onError(error));\n  }\n\n  saveDestination = (values, successCallback, errorCallback) => {\n    const { destination } = this.state;\n    helper.updateTargetWithValues(destination, values);\n    Destination.save(destination)\n      .then(() => successCallback(\"Saved.\"))\n      .catch(error => {\n        const message = get(error, \"response.data.message\", \"Failed saving.\");\n        errorCallback(message);\n      });\n  };\n\n  deleteDestination = callback => {\n    const { destination } = this.state;\n\n    const doDelete = () => {\n      Destination.delete(destination)\n        .then(() => {\n          notification.success(\"Alert destination deleted successfully.\");\n          navigateTo(\"destinations\");\n        })\n        .catch(() => {\n          callback();\n        });\n    };\n\n    Modal.confirm({\n      title: \"Delete Alert Destination\",\n      content: \"Are you sure you want to delete this alert destination?\",\n      okText: \"Delete\",\n      okType: \"danger\",\n      onOk: doDelete,\n      onCancel: callback,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  renderForm() {\n    const { destination, type } = this.state;\n    const fields = helper.getFields(type, destination);\n    const formProps = {\n      fields,\n      type,\n      actions: [{ name: \"Delete\", type: \"danger\", callback: this.deleteDestination }],\n      onSubmit: this.saveDestination,\n      feedbackIcons: true,\n    };\n\n    return (\n      <div className=\"row\" data-test=\"Destination\">\n        <div className=\"text-center m-b-10\">\n          <img className=\"p-5\" src={`${IMG_ROOT}/${type.type}.png`} alt={type.name} width=\"64\" />\n          <h3 className=\"m-0\">{type.name}</h3>\n        </div>\n        <div className=\"col-md-4 col-md-offset-4 m-b-10\">\n          <DynamicForm {...formProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return this.state.loading ? <LoadingState className=\"\" /> : this.renderForm();\n  }\n}\n\nconst EditDestinationPage = wrapSettingsTab(null, EditDestination);\n\nexport default routeWithUserSession({\n  path: \"/destinations/:destinationId([0-9]+)\",\n  title: \"Alert Destinations\",\n  render: pageProps => <EditDestinationPage {...pageProps} />,\n});\n","import React from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\n\nclass CreateGroupDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n  };\n\n  state = {\n    name: \"\",\n  };\n\n  save = () => {\n    this.props.dialog.close({\n      name: this.state.name,\n    });\n  };\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal {...dialog.props} title=\"Create a New Group\" okText=\"Create\" onOk={() => this.save()}>\n        <Input\n          className=\"form-control\"\n          defaultValue={this.state.name}\n          onChange={event => this.setState({ name: event.target.value })}\n          onPressEnter={() => this.save()}\n          placeholder=\"Group Name\"\n          autoFocus\n        />\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateGroupDialog);\n","import { axios } from \"@/services/axios\";\n\nconst Group = {\n  query: () => axios.get(\"api/groups\"),\n  get: ({ id }) => axios.get(`api/groups/${id}`),\n  create: data => axios.post(`api/groups`, data),\n  save: data => axios.post(`api/groups/${data.id}`, data),\n  delete: data => axios.delete(`api/groups/${data.id}`),\n  members: ({ id }) => axios.get(`api/groups/${id}/members`),\n  addMember: ({ id }, data) => axios.post(`api/groups/${id}/members`, data),\n  removeMember: ({ id, userId }) => axios.delete(`api/groups/${id}/members/${userId}`),\n  dataSources: ({ id }) => axios.get(`api/groups/${id}/data_sources`),\n  addDataSource: ({ id }, data) => axios.post(`api/groups/${id}/data_sources`, data),\n  removeDataSource: ({ id, dataSourceId }) => axios.delete(`api/groups/${id}/data_sources/${dataSourceId}`),\n  updateDataSource: ({ id, dataSourceId }, data) => axios.post(`api/groups/${id}/data_sources/${dataSourceId}`, data),\n};\n\nexport default Group;\n","import { isString } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport notification from \"@/services/notification\";\nimport Group from \"@/services/group\";\n\nfunction deleteGroup(event, group, onGroupDeleted) {\n  Modal.confirm({\n    title: \"Delete Group\",\n    content: \"Are you sure you want to delete this group?\",\n    okText: \"Yes\",\n    okType: \"danger\",\n    cancelText: \"No\",\n    onOk: () => {\n      Group.delete(group).then(() => {\n        notification.success(\"Group deleted successfully.\");\n        onGroupDeleted();\n      });\n    },\n  });\n}\n\nexport default function DeleteGroupButton({ group, title, onClick, children, ...props }) {\n  if (!group) {\n    return null;\n  }\n  const button = (\n    <Button {...props} type=\"danger\" onClick={event => deleteGroup(event, group, onClick)}>\n      {children}\n    </Button>\n  );\n\n  if (isString(title) && title !== \"\") {\n    return (\n      <Tooltip placement=\"top\" title={title} mouseLeaveDelay={0}>\n        {button}\n      </Tooltip>\n    );\n  }\n\n  return button;\n}\n\nDeleteGroupButton.propTypes = {\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  title: PropTypes.string,\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n};\n\nDeleteGroupButton.defaultProps = {\n  group: null,\n  title: null,\n  onClick: () => {},\n  children: null,\n};\n","import React from \"react\";\n\nimport Button from \"antd/lib/button\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport CreateGroupDialog from \"@/components/groups/CreateGroupDialog\";\nimport DeleteGroupButton from \"@/components/groups/DeleteGroupButton\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport Group from \"@/services/group\";\nimport { currentUser } from \"@/services/auth\";\n\nclass GroupsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom(\n      (text, group) => (\n        <div>\n          <a href={\"groups/\" + group.id}>{group.name}</a>\n          {group.type === \"builtin\" && <span className=\"label label-default m-l-10\">built-in</span>}\n        </div>\n      ),\n      {\n        field: \"name\",\n        width: null,\n      }\n    ),\n    Columns.custom(\n      (text, group) => (\n        <Button.Group>\n          <Button href={`groups/${group.id}`}>Members</Button>\n          {currentUser.isAdmin && <Button href={`groups/${group.id}/data_sources`}>Data Sources</Button>}\n        </Button.Group>\n      ),\n      {\n        width: \"1%\",\n        className: \"text-nowrap\",\n      }\n    ),\n    Columns.custom(\n      (text, group) => {\n        const canRemove = group.type !== \"builtin\";\n        return (\n          <DeleteGroupButton\n            className=\"w-100\"\n            disabled={!canRemove}\n            group={group}\n            title={canRemove ? null : \"Cannot delete built-in group\"}\n            onClick={() => this.onGroupDeleted()}>\n            Delete\n          </DeleteGroupButton>\n        );\n      },\n      {\n        width: \"1%\",\n        className: \"text-nowrap p-l-0\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n  ];\n\n  createGroup = () => {\n    CreateGroupDialog.showModal().onClose(group =>\n      Group.create(group).then(newGroup => navigateTo(`groups/${newGroup.id}`))\n    );\n  };\n\n  onGroupDeleted = () => {\n    this.props.controller.updatePagination({ page: 1 });\n    this.props.controller.update();\n  };\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div data-test=\"GroupList\">\n        {currentUser.isAdmin && (\n          <div className=\"m-b-15\">\n            <Button type=\"primary\" onClick={this.createGroup}>\n              <i className=\"fa fa-plus m-r-5\" />\n              New Group\n            </Button>\n          </div>\n        )}\n\n        {!controller.isLoaded && <LoadingState className=\"\" />}\n        {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n        {controller.isLoaded && !controller.isEmpty && (\n          <div className=\"table-responsive\">\n            <ItemsTable\n              items={controller.pageItems}\n              columns={this.listColumns}\n              showHeader={false}\n              context={this.actions}\n              orderByField={controller.orderByField}\n              orderByReverse={controller.orderByReverse}\n              toggleSorting={controller.toggleSorting}\n            />\n            <Paginator\n              totalCount={controller.totalItemsCount}\n              itemsPerPage={controller.itemsPerPage}\n              page={controller.page}\n              onChange={page => controller.updatePagination({ page })}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst GroupsListPage = wrapSettingsTab(\n  {\n    permission: \"list_users\",\n    title: \"Groups\",\n    path: \"groups\",\n    order: 3,\n  },\n  itemsList(\n    GroupsList,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest() {\n          return {};\n        },\n        getResource() {\n          return Group.query.bind(Group);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"name\", itemsPerPage: 10 })\n  )\n);\n\nexport default routeWithUserSession({\n  path: \"/groups\",\n  title: \"Groups\",\n  render: pageProps => <GroupsListPage {...pageProps} currentPage=\"groups\" />,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport { currentUser } from \"@/services/auth\";\nimport Group from \"@/services/group\";\n\nfunction updateGroupName(group, name, onChange) {\n  group.name = name;\n  Group.save(group);\n  onChange();\n}\n\nexport default function GroupName({ group, onChange, ...props }) {\n  if (!group) {\n    return null;\n  }\n\n  const canEdit = currentUser.isAdmin && group.type !== \"builtin\";\n\n  return (\n    <h3 {...props}>\n      <EditInPlace\n        className=\"edit-in-place\"\n        isEditable={canEdit}\n        ignoreBlanks\n        onDone={name => updateGroupName(group, name, onChange)}\n        value={group.name}\n      />\n    </h3>\n  );\n}\n\nGroupName.propTypes = {\n  group: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n  }),\n  onChange: PropTypes.func,\n};\n\nGroupName.defaultProps = {\n  group: null,\n  onChange: () => {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Divider from \"antd/lib/divider\";\n\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport { ControllerType } from \"@/components/items-list/ItemsList\";\nimport DeleteGroupButton from \"./DeleteGroupButton\";\n\nimport { currentUser } from \"@/services/auth\";\n\nexport default function DetailsPageSidebar({\n  controller,\n  group,\n  items,\n  canAddMembers,\n  onAddMembersClick,\n  canAddDataSources,\n  onAddDataSourcesClick,\n  onGroupDeleted,\n}) {\n  const canRemove = group && currentUser.isAdmin && group.type !== \"builtin\";\n\n  return (\n    <React.Fragment>\n      <Sidebar.Menu items={items} selected={controller.params.currentPage} />\n      <Sidebar.PageSizeSelect\n        className=\"m-b-10\"\n        options={controller.pageSizeOptions}\n        value={controller.itemsPerPage}\n        onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n      />\n      {canAddMembers && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddMembersClick}>\n          <i className=\"fa fa-plus m-r-5\" />\n          Add Members\n        </Button>\n      )}\n      {canAddDataSources && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddDataSourcesClick}>\n          <i className=\"fa fa-plus m-r-5\" />\n          Add Data Sources\n        </Button>\n      )}\n      {canRemove && (\n        <React.Fragment>\n          <Divider dashed className=\"m-t-10 m-b-10\" />\n          <DeleteGroupButton className=\"w-100\" group={group} onClick={onGroupDeleted}>\n            Delete Group\n          </DeleteGroupButton>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nDetailsPageSidebar.propTypes = {\n  controller: ControllerType.isRequired,\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  items: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n\n  canAddMembers: PropTypes.bool,\n  onAddMembersClick: PropTypes.func,\n\n  canAddDataSources: PropTypes.bool,\n  onAddDataSourcesClick: PropTypes.func,\n\n  onGroupDeleted: PropTypes.func,\n};\n\nDetailsPageSidebar.defaultProps = {\n  group: null,\n\n  canAddMembers: false,\n  onAddMembersClick: null,\n\n  canAddDataSources: false,\n  onAddDataSourcesClick: null,\n\n  onGroupDeleted: null,\n};\n","import { filter, map, includes, toLower } from \"lodash\";\nimport React from \"react\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Icon from \"antd/lib/icon\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport SelectItemsDialog from \"@/components/SelectItemsDialog\";\nimport { DataSourcePreviewCard } from \"@/components/PreviewCard\";\n\nimport GroupName from \"@/components/groups/GroupName\";\nimport ListItemAddon from \"@/components/groups/ListItemAddon\";\nimport Sidebar from \"@/components/groups/DetailsPageSidebar\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport notification from \"@/services/notification\";\nimport { currentUser } from \"@/services/auth\";\nimport Group from \"@/services/group\";\nimport DataSource from \"@/services/data-source\";\n\nclass GroupDataSources extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: \"users\",\n      href: `groups/${this.groupId}`,\n      title: \"Members\",\n    },\n    {\n      key: \"datasources\",\n      href: `groups/${this.groupId}/data_sources`,\n      title: \"Data Sources\",\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, datasource) => <DataSourcePreviewCard dataSource={datasource} withLink />, {\n      title: \"Name\",\n      field: \"name\",\n      width: null,\n    }),\n    Columns.custom(\n      (text, datasource) => {\n        const menu = (\n          <Menu\n            selectedKeys={[datasource.view_only ? \"viewonly\" : \"full\"]}\n            onClick={item => this.setDataSourcePermissions(datasource, item.key)}>\n            <Menu.Item key=\"full\">Full Access</Menu.Item>\n            <Menu.Item key=\"viewonly\">View Only</Menu.Item>\n          </Menu>\n        );\n\n        return (\n          <Dropdown trigger={[\"click\"]} overlay={menu}>\n            <Button className=\"w-100\">\n              {datasource.view_only ? \"View Only\" : \"Full Access\"}\n              <Icon type=\"down\" />\n            </Button>\n          </Dropdown>\n        );\n      },\n      {\n        width: \"1%\",\n        className: \"p-r-0\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n    Columns.custom(\n      (text, datasource) => (\n        <Button className=\"w-100\" type=\"danger\" onClick={() => this.removeGroupDataSource(datasource)}>\n          Remove\n        </Button>\n      ),\n      {\n        width: \"1%\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId })\n      .then(group => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch(error => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupDataSource = datasource => {\n    Group.removeDataSource({ id: this.groupId, dataSourceId: datasource.id })\n      .then(() => {\n        this.props.controller.updatePagination({ page: 1 });\n        this.props.controller.update();\n      })\n      .catch(() => {\n        notification.error(\"Failed to remove data source from group.\");\n      });\n  };\n\n  setDataSourcePermissions = (datasource, permission) => {\n    const viewOnly = permission !== \"full\";\n\n    Group.updateDataSource({ id: this.groupId, dataSourceId: datasource.id }, { view_only: viewOnly })\n      .then(() => {\n        datasource.view_only = viewOnly;\n        this.forceUpdate();\n      })\n      .catch(() => {\n        notification.error(\"Failed change data source permissions.\");\n      });\n  };\n\n  addDataSources = () => {\n    const allDataSources = DataSource.query();\n    const alreadyAddedDataSources = map(this.props.controller.allItems, ds => ds.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: \"Add Data Sources\",\n      inputPlaceholder: \"Search data sources...\",\n      selectedItemsTitle: \"New Data Sources\",\n      searchItems: searchTerm => {\n        searchTerm = toLower(searchTerm);\n        return allDataSources.then(items => filter(items, ds => includes(toLower(ds.name), searchTerm)));\n      },\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedDataSources, item.id);\n        return {\n          content: (\n            <DataSourcePreviewCard dataSource={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </DataSourcePreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? \"selected\" : \"\",\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <DataSourcePreviewCard dataSource={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </DataSourcePreviewCard>\n        ),\n      }),\n    }).onClose(items => {\n      const promises = map(items, ds => Group.addDataSource({ id: this.groupId }, { data_source_id: ds.id }));\n      return Promise.all(promises).then(() => this.props.controller.update());\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddDataSources={currentUser.isAdmin}\n              onAddDataSourcesClick={this.addDataSources}\n              onGroupDeleted={() => navigateTo(\"groups\")}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                <p>There are no data sources in this group yet.</p>\n                {currentUser.isAdmin && (\n                  <Button type=\"primary\" onClick={this.addDataSources}>\n                    <i className=\"fa fa-plus m-r-5\" />\n                    Add Data Sources\n                  </Button>\n                )}\n              </div>\n            )}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  showHeader={false}\n                  context={this.actions}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  totalCount={controller.totalItemsCount}\n                  itemsPerPage={controller.itemsPerPage}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst GroupDataSourcesPage = wrapSettingsTab(\n  null,\n  itemsList(\n    GroupDataSources,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest(unused, { params: { groupId } }) {\n          return { id: groupId };\n        },\n        getResource() {\n          return Group.dataSources.bind(Group);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"name\" })\n  )\n);\n\nexport default routeWithUserSession({\n  path: \"/groups/:groupId([0-9]+)/data_sources\",\n  title: \"Group Data Sources\",\n  render: pageProps => <GroupDataSourcesPage {...pageProps} currentPage=\"datasources\" />,\n});\n","import { includes, map } from \"lodash\";\nimport React from \"react\";\nimport Button from \"antd/lib/button\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport SelectItemsDialog from \"@/components/SelectItemsDialog\";\nimport { UserPreviewCard } from \"@/components/PreviewCard\";\n\nimport GroupName from \"@/components/groups/GroupName\";\nimport ListItemAddon from \"@/components/groups/ListItemAddon\";\nimport Sidebar from \"@/components/groups/DetailsPageSidebar\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport notification from \"@/services/notification\";\nimport { currentUser } from \"@/services/auth\";\nimport Group from \"@/services/group\";\nimport User from \"@/services/user\";\n\nclass GroupMembers extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: \"users\",\n      href: `groups/${this.groupId}`,\n      title: \"Members\",\n    },\n    {\n      key: \"datasources\",\n      href: `groups/${this.groupId}/data_sources`,\n      title: \"Data Sources\",\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, user) => <UserPreviewCard user={user} withLink />, {\n      title: \"Name\",\n      field: \"name\",\n      width: null,\n    }),\n    Columns.custom(\n      (text, user) => {\n        if (!this.group) {\n          return null;\n        }\n\n        // cannot remove self from built-in groups\n        if (this.group.type === \"builtin\" && currentUser.id === user.id) {\n          return null;\n        }\n        return (\n          <Button className=\"w-100\" type=\"danger\" onClick={event => this.removeGroupMember(event, user)}>\n            Remove\n          </Button>\n        );\n      },\n      {\n        width: \"1%\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId })\n      .then(group => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch(error => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupMember = (event, user) =>\n    Group.removeMember({ id: this.groupId, userId: user.id })\n      .then(() => {\n        this.props.controller.updatePagination({ page: 1 });\n        this.props.controller.update();\n      })\n      .catch(() => {\n        notification.error(\"Failed to remove member from group.\");\n      });\n\n  addMembers = () => {\n    const alreadyAddedUsers = map(this.props.controller.allItems, u => u.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: \"Add Members\",\n      inputPlaceholder: \"Search users...\",\n      selectedItemsTitle: \"New Members\",\n      searchItems: searchTerm => User.query({ q: searchTerm }).then(({ results }) => results),\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedUsers, item.id);\n        return {\n          content: (\n            <UserPreviewCard user={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </UserPreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? \"selected\" : \"\",\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <UserPreviewCard user={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </UserPreviewCard>\n        ),\n      }),\n    }).onClose(items => {\n      const promises = map(items, u => Group.addMember({ id: this.groupId }, { user_id: u.id }));\n      return Promise.all(promises).then(() => this.props.controller.update());\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddMembers={currentUser.isAdmin}\n              onAddMembersClick={this.addMembers}\n              onGroupDeleted={() => navigateTo(\"groups\")}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                <p>There are no members in this group yet.</p>\n                {currentUser.isAdmin && (\n                  <Button type=\"primary\" onClick={this.addMembers}>\n                    <i className=\"fa fa-plus m-r-5\" />\n                    Add Members\n                  </Button>\n                )}\n              </div>\n            )}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  showHeader={false}\n                  context={this.actions}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  totalCount={controller.totalItemsCount}\n                  itemsPerPage={controller.itemsPerPage}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst GroupMembersPage = wrapSettingsTab(\n  null,\n  itemsList(\n    GroupMembers,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest(unused, { params: { groupId } }) {\n          return { id: groupId };\n        },\n        getResource() {\n          return Group.members.bind(Group);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"name\" })\n  )\n);\n\nexport default routeWithUserSession({\n  path: \"/groups/:groupId([0-9]+)\",\n  title: \"Group Members\",\n  render: pageProps => <GroupMembersPage {...pageProps} currentPage=\"users\" />,\n});\n","import { axios } from \"@/services/axios\";\nimport notification from \"@/services/notification\";\n\nexport default {\n  get: () => axios.get(\"api/settings/organization\"),\n  save: (data, message = \"Settings changes saved.\") =>\n    axios\n      .post(\"api/settings/organization\", data)\n      .then(data => {\n        notification.success(message);\n        return data;\n      })\n      .catch(() => {\n        notification.error(\"Failed saving changes.\");\n      }),\n};\n","import React, { useState } from \"react\";\nimport Card from \"antd/lib/card\";\nimport Button from \"antd/lib/button\";\nimport Typography from \"antd/lib/typography\";\nimport { clientConfig } from \"@/services/auth\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport OrgSettings from \"@/services/organizationSettings\";\n\nconst Text = Typography.Text;\n\nfunction BeaconConsent() {\n  const [hide, setHide] = useState(false);\n\n  if (!clientConfig.showBeaconConsentMessage || hide) {\n    return null;\n  }\n\n  const hideConsentCard = () => {\n    clientConfig.showBeaconConsentMessage = false;\n    setHide(true);\n  };\n\n  const confirmConsent = confirm => {\n    let message = \"🙏 Thank you.\";\n\n    if (!confirm) {\n      message = \"Settings Saved.\";\n    }\n\n    OrgSettings.save({ beacon_consent: confirm }, message)\n      // .then(() => {\n      //   // const settings = get(response, 'settings');\n      //   // this.setState({ settings, formValues: { ...settings } });\n      // })\n      .finally(hideConsentCard);\n  };\n\n  return (\n    <DynamicComponent name=\"BeaconConsent\">\n      <div className=\"m-t-10 tiled\">\n        <Card\n          title={\n            <>\n              Would you be ok with sharing anonymous usage data with the Redash team?{\" \"}\n              <HelpTrigger type=\"USAGE_DATA_SHARING\" />\n            </>\n          }\n          bordered={false}>\n          <Text>Help Redash improve by automatically sending anonymous usage data:</Text>\n          <div className=\"m-t-5\">\n            <ul>\n              <li> Number of users, queries, dashboards, alerts, widgets and visualizations.</li>\n              <li> Types of data sources, alert destinations and visualizations.</li>\n            </ul>\n          </div>\n          <Text>All data is aggregated and will never include any sensitive or private data.</Text>\n          <div className=\"m-t-5\">\n            <Button type=\"primary\" className=\"m-r-5\" onClick={() => confirmConsent(true)}>\n              Yes\n            </Button>\n            <Button type=\"default\" onClick={() => confirmConsent(false)}>\n              No\n            </Button>\n          </div>\n          <div className=\"m-t-15\">\n            <Text type=\"secondary\">\n              You can change this setting anytime from the <a href=\"settings/organization\">Organization Settings</a>{\" \"}\n              page.\n            </Text>\n          </div>\n        </Card>\n      </div>\n    </DynamicComponent>\n  );\n}\n\nexport default BeaconConsent;\n","import React, { useEffect, useState } from \"react\";\nimport { axios } from \"@/services/axios\";\nimport PropTypes from \"prop-types\";\nimport { includes, isEmpty } from \"lodash\";\nimport Alert from \"antd/lib/alert\";\nimport Icon from \"antd/lib/icon\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport EmptyState from \"@/components/empty-state/EmptyState\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport BeaconConsent from \"@/components/BeaconConsent\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { messages } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\nimport { Dashboard } from \"@/services/dashboard\";\nimport { Query } from \"@/services/query\";\n\nimport \"./Home.less\";\n\nfunction DeprecatedEmbedFeatureAlert() {\n  return (\n    <Alert\n      className=\"m-b-15\"\n      type=\"warning\"\n      message={\n        <>\n          You have enabled <code>ALLOW_PARAMETERS_IN_EMBEDS</code>. This setting is now deprecated and should be turned\n          off. Parameters in embeds are supported by default.{\" \"}\n          <a\n            href=\"https://discuss.redash.io/t/support-for-parameters-in-embedded-visualizations/3337\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\">\n            Read more\n          </a>\n          .\n        </>\n      }\n    />\n  );\n}\n\nfunction EmailNotVerifiedAlert() {\n  const verifyEmail = () => {\n    axios.post(\"verification_email/\").then(data => {\n      notification.success(data.message);\n    });\n  };\n\n  return (\n    <Alert\n      className=\"m-b-15\"\n      type=\"warning\"\n      message={\n        <>\n          We have sent an email with a confirmation link to your email address. Please follow the link to verify your\n          email address.{\" \"}\n          <a className=\"clickable\" onClick={verifyEmail}>\n            Resend email\n          </a>\n          .\n        </>\n      }\n    />\n  );\n}\n\nfunction FavoriteList({ title, resource, itemUrl, emptyState }) {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    setLoading(true);\n    resource\n      .favorites()\n      .then(({ results }) => setItems(results))\n      .finally(() => setLoading(false));\n  }, [resource]);\n\n  return (\n    <>\n      <div className=\"d-flex align-items-center m-b-20\">\n        <p className=\"flex-fill f-500 c-black m-0\">{title}</p>\n        {loading && <Icon type=\"loading\" />}\n      </div>\n      {!isEmpty(items) && (\n        <div className=\"list-group\">\n          {items.map(item => (\n            <a key={itemUrl(item)} className=\"list-group-item\" href={itemUrl(item)}>\n              <span className=\"btn-favourite m-r-5\">\n                <i className=\"fa fa-star\" aria-hidden=\"true\" />\n              </span>\n              {item.name}\n              {item.is_draft && <span className=\"label label-default m-l-5\">Unpublished</span>}\n            </a>\n          ))}\n        </div>\n      )}\n      {isEmpty(items) && !loading && emptyState}\n    </>\n  );\n}\n\nFavoriteList.propTypes = {\n  title: PropTypes.string.isRequired,\n  resource: PropTypes.func.isRequired, // eslint-disable-line react/forbid-prop-types\n  itemUrl: PropTypes.func.isRequired,\n  emptyState: PropTypes.node,\n};\nFavoriteList.defaultProps = { emptyState: null };\n\nfunction DashboardAndQueryFavoritesList() {\n  return (\n    <div className=\"tile\">\n      <div className=\"t-body tb-padding\">\n        <div className=\"row home-favorites-list\">\n          <div className=\"col-sm-6 m-t-20\">\n            <FavoriteList\n              title=\"Favorite Dashboards\"\n              resource={Dashboard}\n              itemUrl={dashboard => `dashboard/${dashboard.slug}`}\n              emptyState={\n                <p>\n                  <span className=\"btn-favourite m-r-5\">\n                    <i className=\"fa fa-star\" aria-hidden=\"true\" />\n                  </span>\n                  Favorite <a href=\"dashboards\">Dashboards</a> will appear here\n                </p>\n              }\n            />\n          </div>\n          <div className=\"col-sm-6 m-t-20\">\n            <FavoriteList\n              title=\"Favorite Queries\"\n              resource={Query}\n              itemUrl={query => `queries/${query.id}`}\n              emptyState={\n                <p>\n                  <span className=\"btn-favourite m-r-5\">\n                    <i className=\"fa fa-star\" aria-hidden=\"true\" />\n                  </span>\n                  Favorite <a href=\"queries\">Queries</a> will appear here\n                </p>\n              }\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Home() {\n  useEffect(() => {\n    recordEvent(\"view\", \"page\", \"personal_homepage\");\n  }, []);\n\n  return (\n    <div className=\"home-page\">\n      <div className=\"container\">\n        {includes(messages, \"using-deprecated-embed-feature\") && <DeprecatedEmbedFeatureAlert />}\n        {includes(messages, \"email-not-verified\") && <EmailNotVerifiedAlert />}\n        <EmptyState\n          header=\"Welcome to Redash 👋\"\n          description=\"Connect to any data source, easily visualize and share your data\"\n          illustration=\"dashboard\"\n          helpLink=\"https://redash.io/help/user-guide/getting-started\"\n          showDashboardStep\n          showInviteStep\n          onboardingMode\n        />\n        <DynamicComponent name=\"HomeExtra\" />\n        <DashboardAndQueryFavoritesList />\n        <BeaconConsent />\n      </div>\n    </div>\n  );\n}\n\nexport default routeWithUserSession({\n  path: \"/\",\n  title: \"Redash\",\n  render: pageProps => <Home {...pageProps} />,\n});\n","import d3 from \"d3\";\nimport React, { useRef, useMemo, useCallback, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Resizable as ReactResizable } from \"react-resizable\";\nimport KeyboardShortcuts from \"@/services/KeyboardShortcuts\";\n\nimport \"./index.less\";\n\nexport default function Resizable({ toggleShortcut, direction, sizeAttribute, children }) {\n  const [size, setSize] = useState(0);\n  const elementRef = useRef();\n  const wasUsingTouchEventsRef = useRef(false);\n  const wasResizedRef = useRef(false);\n\n  const sizeProp = direction === \"horizontal\" ? \"width\" : \"height\";\n  sizeAttribute = sizeAttribute || sizeProp;\n\n  const getElementSize = useCallback(() => {\n    if (!elementRef.current) {\n      return 0;\n    }\n    return Math.floor(elementRef.current.getBoundingClientRect()[sizeProp]);\n  }, [sizeProp]);\n\n  const savedSize = useRef(null);\n  const toggle = useCallback(() => {\n    if (!elementRef.current) {\n      return;\n    }\n\n    const element = d3.select(elementRef.current);\n    let targetSize;\n    if (savedSize.current === null) {\n      targetSize = \"0px\";\n      savedSize.current = `${getElementSize()}px`;\n    } else {\n      targetSize = savedSize.current;\n      savedSize.current = null;\n    }\n\n    element\n      .style(sizeAttribute, savedSize.current || \"0px\")\n      .transition()\n      .duration(200)\n      .ease(\"swing\")\n      .style(sizeAttribute, targetSize);\n\n    // update state to new element's size\n    setSize(parseInt(targetSize) || 0);\n  }, [getElementSize, sizeAttribute]);\n\n  const resizeHandle = useMemo(\n    () => (\n      <span\n        className={`react-resizable-handle react-resizable-handle-${direction}`}\n        onClick={() => {\n          // On desktops resize uses `mousedown`/`mousemove`/`mouseup` events, and there is a conflict\n          // with this `click` handler: after user releases mouse - this handler will be executed.\n          // So we use `wasResized` flag to check if there was actual resize or user just pressed and released\n          // left mouse button (see also resize event handlers where ths flag is set).\n          // On mobile devices `touchstart`/`touchend` events wll be used, so it's safe to just execute this handler.\n          // To detect which set of events was actually used during particular resize operation, we pass\n          // `onMouseDown` handler to draggable core and check event type there (see also that handler's code).\n          if (wasUsingTouchEventsRef.current || !wasResizedRef.current) {\n            toggle();\n          }\n          wasUsingTouchEventsRef.current = false;\n          wasResizedRef.current = false;\n        }}\n      />\n    ),\n    [direction, toggle]\n  );\n\n  useEffect(() => {\n    if (toggleShortcut) {\n      const shortcuts = {\n        [toggleShortcut]: toggle,\n      };\n\n      KeyboardShortcuts.bind(shortcuts);\n      return () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      };\n    }\n  }, [toggleShortcut, toggle]);\n\n  const resizeEventHandlers = useMemo(\n    () => ({\n      onResizeStart: () => {\n        // use element's size as initial value (it will also check constraints set in CSS)\n        // updated here and in `draggableCore::onMouseDown` handler to ensure that right value will be used\n        setSize(getElementSize());\n      },\n      onResize: (unused, data) => {\n        // update element directly for better UI responsiveness\n        d3.select(elementRef.current).style(sizeAttribute, `${data.size[sizeProp]}px`);\n        setSize(data.size[sizeProp]);\n        wasResizedRef.current = true;\n      },\n      onResizeStop: () => {\n        if (wasResizedRef.current) {\n          savedSize.current = null;\n        }\n      },\n    }),\n    [sizeProp, getElementSize, sizeAttribute]\n  );\n\n  const draggableCoreOptions = useMemo(\n    () => ({\n      onMouseDown: e => {\n        // In some cases this handler is executed twice during the same resize operation - first time\n        // with `touchstart` event and second time with `mousedown` (probably emulated by browser).\n        // Therefore we set the flag only when we receive `touchstart` because in ths case it's definitely\n        // mobile browser (desktop browsers will also send `mousedown` but never `touchstart`).\n        if (e.type === \"touchstart\") {\n          wasUsingTouchEventsRef.current = true;\n        }\n\n        // use element's size as initial value (it will also check constraints set in CSS)\n        // updated here and in `onResizeStart` handler to ensure that right value will be used\n        setSize(getElementSize());\n      },\n    }),\n    [getElementSize]\n  );\n\n  if (!children) {\n    return null;\n  }\n\n  children = React.createElement(children.type, { ...children.props, ref: elementRef });\n\n  return (\n    <ReactResizable\n      className=\"resizable-component\"\n      axis={direction === \"horizontal\" ? \"x\" : \"y\"}\n      resizeHandles={[direction === \"horizontal\" ? \"e\" : \"s\"]}\n      handle={resizeHandle}\n      width={direction === \"horizontal\" ? size : 0}\n      height={direction === \"vertical\" ? size : 0}\n      minConstraints={[0, 0]}\n      {...resizeEventHandlers}\n      draggableOpts={draggableCoreOptions}>\n      {children}\n    </ReactResizable>\n  );\n}\n\nResizable.propTypes = {\n  direction: PropTypes.oneOf([\"horizontal\", \"vertical\"]),\n  sizeAttribute: PropTypes.string,\n  toggleShortcut: PropTypes.string,\n  children: PropTypes.element,\n};\n\nResizable.defaultProps = {\n  direction: \"horizontal\",\n  sizeAttribute: null, // \"width\"/\"height\" - depending on `direction`\n  toggleShortcut: null,\n  children: null,\n};\n","import { isNil, map } from \"lodash\";\nimport AceEditor from \"react-ace\";\nimport ace from \"brace\";\n\nimport \"brace/ext/language_tools\";\nimport \"brace/mode/json\";\nimport \"brace/mode/python\";\nimport \"brace/mode/sql\";\nimport \"brace/mode/yaml\";\nimport \"brace/theme/textmate\";\nimport \"brace/ext/searchbox\";\n\nconst langTools = ace.acequire(\"ace/ext/language_tools\");\nconst snippetsModule = ace.acequire(\"ace/snippets\");\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  ace.define(`ace/snippets/${mode}`, [\"require\", \"exports\", \"module\"], (require, exports) => {\n    exports.snippetText = \"\";\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets(\"python\");\ndefineDummySnippets(\"sql\");\ndefineDummySnippets(\"json\");\ndefineDummySnippets(\"yaml\");\n\nfunction buildTableColumnKeywords(table) {\n  const keywords = [];\n  table.columns.forEach(column => {\n    keywords.push({\n      caption: column,\n      name: `${table.name}.${column}`,\n      value: `${table.name}.${column}`,\n      score: 100,\n      meta: \"Column\",\n      className: \"completion\",\n    });\n  });\n  return keywords;\n}\n\nfunction buildKeywordsFromSchema(schema) {\n  const tableKeywords = [];\n  const columnKeywords = {};\n  const tableColumnKeywords = {};\n\n  schema.forEach(table => {\n    tableKeywords.push({\n      name: table.name,\n      value: table.name,\n      score: 100,\n      meta: \"Table\",\n    });\n    tableColumnKeywords[table.name] = buildTableColumnKeywords(table);\n    table.columns.forEach(c => {\n      columnKeywords[c] = \"Column\";\n    });\n  });\n\n  return {\n    table: tableKeywords,\n    column: map(columnKeywords, (v, k) => ({\n      name: k,\n      value: k,\n      score: 50,\n      meta: v,\n    })),\n    tableColumn: tableColumnKeywords,\n  };\n}\n\nconst schemaCompleterKeywords = {};\n\nexport function updateSchemaCompleter(editorKey, schema = null) {\n  schemaCompleterKeywords[editorKey] = isNil(schema) ? null : buildKeywordsFromSchema(schema);\n}\n\nlangTools.setCompleters([\n  langTools.snippetCompleter,\n  langTools.keyWordCompleter,\n  langTools.textCompleter,\n  {\n    identifierRegexps: [/[a-zA-Z_0-9.\\-\\u00A2-\\uFFFF]/],\n    getCompletions: (editor, session, pos, prefix, callback) => {\n      const { table, column, tableColumn } = schemaCompleterKeywords[editor.id] || {\n        table: [],\n        column: [],\n        tableColumn: [],\n      };\n\n      if (prefix.length === 0 || table.length === 0) {\n        callback(null, []);\n        return;\n      }\n\n      if (prefix[prefix.length - 1] === \".\") {\n        const tableName = prefix.substring(0, prefix.length - 1);\n        callback(null, table.concat(tableColumn[tableName]));\n        return;\n      }\n      callback(null, table.concat(column));\n    },\n  },\n]);\n\nexport { AceEditor, langTools, snippetsModule };\n","const items = new Map();\n\nfunction checkItems() {\n  if (items.size > 0) {\n    items.forEach((item, node) => {\n      const bounds = node.getBoundingClientRect();\n      // convert to int (because these numbers needed for comparisons), but preserve 1 decimal point\n      const width = Math.round(bounds.width * 10);\n      const height = Math.round(bounds.height * 10);\n\n      if (item.width !== width || item.height !== height) {\n        item.width = width;\n        item.height = height;\n        item.callback(node);\n      }\n    });\n\n    setTimeout(checkItems, 100);\n  }\n}\n\nexport default function observe(node, callback) {\n  if (node && !items.has(node)) {\n    const shouldTrigger = items.size === 0;\n    items.set(node, { callback });\n    if (shouldTrigger) {\n      checkItems();\n    }\n    return () => items.delete(node);\n  }\n  return () => {};\n}\n","import { axios } from \"@/services/axios\";\nimport { extend, map } from \"lodash\";\n\nclass QuerySnippet {\n  constructor(querySnippet) {\n    extend(this, querySnippet);\n  }\n\n  getSnippet() {\n    let name = this.trigger;\n    if (this.description !== \"\") {\n      name = `${this.trigger}: ${this.description}`;\n    }\n\n    return {\n      name,\n      content: this.snippet,\n      tabTrigger: this.trigger,\n    };\n  }\n}\n\nconst getQuerySnippet = querySnippet => new QuerySnippet(querySnippet);\n\nconst QuerySnippetService = {\n  get: data => axios.get(`api/query_snippets/${data.id}`).then(getQuerySnippet),\n  query: () => axios.get(\"api/query_snippets\").then(data => map(data, getQuerySnippet)),\n  create: data => axios.post(\"api/query_snippets\", data).then(getQuerySnippet),\n  save: data => axios.post(`api/query_snippets/${data.id}`, data).then(getQuerySnippet),\n  delete: data => axios.delete(`api/query_snippets/${data.id}`),\n};\n\nexport default QuerySnippetService;\n","import React, { useCallback } from \"react\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Button from \"antd/lib/button\";\nimport PropTypes from \"prop-types\";\nimport \"@/redash-font/style.less\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function AutocompleteToggle({ available, enabled, onToggle }) {\n  let tooltipMessage = \"Live Autocomplete Enabled\";\n  let icon = \"icon-flash\";\n  if (!enabled) {\n    tooltipMessage = \"Live Autocomplete Disabled\";\n    icon = \"icon-flash-off\";\n  }\n\n  if (!available) {\n    tooltipMessage = \"Live Autocomplete Not Available (Use Ctrl+Space to Trigger)\";\n    icon = \"icon-flash-off\";\n  }\n\n  const handleClick = useCallback(() => {\n    recordEvent(\"toggle_autocomplete\", \"screen\", \"query_editor\", { state: !enabled });\n    onToggle(!enabled);\n  }, [enabled, onToggle]);\n\n  return (\n    <Tooltip placement=\"top\" title={tooltipMessage}>\n      <Button className=\"query-editor-controls-button m-r-5\" disabled={!available} onClick={handleClick}>\n        <i className={\"icon \" + icon} />\n      </Button>\n    </Tooltip>\n  );\n}\n\nAutocompleteToggle.propTypes = {\n  available: PropTypes.bool.isRequired,\n  enabled: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n};\n","import { isFunction, map, filter, fromPairs } from \"lodash\";\nimport React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Button from \"antd/lib/button\";\nimport Select from \"antd/lib/select\";\nimport KeyboardShortcuts, { humanReadableShortcut } from \"@/services/KeyboardShortcuts\";\n\nimport AutocompleteToggle from \"./AutocompleteToggle\";\nimport \"./QueryEditorControls.less\";\n\nexport function ButtonTooltip({ title, shortcut, ...props }) {\n  shortcut = humanReadableShortcut(shortcut, 1); // show only primary shortcut\n  title =\n    title && shortcut ? (\n      <React.Fragment>\n        {title} (<i>{shortcut}</i>)\n      </React.Fragment>\n    ) : (\n      title || shortcut\n    );\n  return <Tooltip placement=\"top\" title={title} {...props} />;\n}\n\nButtonTooltip.propTypes = {\n  title: PropTypes.node,\n  shortcut: PropTypes.string,\n};\n\nButtonTooltip.defaultProps = {\n  title: null,\n  shortcut: null,\n};\n\nexport default function EditorControl({\n  addParameterButtonProps,\n  formatButtonProps,\n  saveButtonProps,\n  executeButtonProps,\n  autocompleteToggleProps,\n  dataSourceSelectorProps,\n}) {\n  useEffect(() => {\n    const buttons = filter(\n      [addParameterButtonProps, formatButtonProps, saveButtonProps, executeButtonProps],\n      b => b.shortcut && !b.disabled && isFunction(b.onClick)\n    );\n    if (buttons.length > 0) {\n      const shortcuts = fromPairs(map(buttons, b => [b.shortcut, b.onClick]));\n      KeyboardShortcuts.bind(shortcuts);\n      return () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      };\n    }\n  }, [addParameterButtonProps, formatButtonProps, saveButtonProps, executeButtonProps]);\n\n  return (\n    <div className=\"query-editor-controls\">\n      {addParameterButtonProps !== false && (\n        <ButtonTooltip title={addParameterButtonProps.title} shortcut={addParameterButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-r-5\"\n            disabled={addParameterButtonProps.disabled}\n            onClick={addParameterButtonProps.onClick}>\n            {\"{{\"}&nbsp;{\"}}\"}\n          </Button>\n        </ButtonTooltip>\n      )}\n      {formatButtonProps !== false && (\n        <ButtonTooltip title={formatButtonProps.title} shortcut={formatButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-r-5\"\n            disabled={formatButtonProps.disabled}\n            onClick={formatButtonProps.onClick}>\n            <span className=\"zmdi zmdi-format-indent-increase\" />\n            {formatButtonProps.text}\n          </Button>\n        </ButtonTooltip>\n      )}\n      {autocompleteToggleProps !== false && (\n        <AutocompleteToggle\n          available={autocompleteToggleProps.available}\n          enabled={autocompleteToggleProps.enabled}\n          onToggle={autocompleteToggleProps.onToggle}\n        />\n      )}\n      {dataSourceSelectorProps === false && <span className=\"query-editor-controls-spacer\" />}\n      {dataSourceSelectorProps !== false && (\n        <Select\n          className=\"w-100 flex-fill datasource-small\"\n          disabled={dataSourceSelectorProps.disabled}\n          value={dataSourceSelectorProps.value}\n          onChange={dataSourceSelectorProps.onChange}>\n          {map(dataSourceSelectorProps.options, option => (\n            <Select.Option key={`option-${option.value}`} value={option.value}>\n              {option.label}\n            </Select.Option>\n          ))}\n        </Select>\n      )}\n      {saveButtonProps !== false && (\n        <ButtonTooltip title={saveButtonProps.title} shortcut={saveButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-l-5\"\n            disabled={saveButtonProps.disabled}\n            loading={saveButtonProps.loading}\n            onClick={saveButtonProps.onClick}\n            data-test=\"SaveButton\">\n            {!saveButtonProps.loading && <span className=\"fa fa-floppy-o\" />}\n            {saveButtonProps.text}\n          </Button>\n        </ButtonTooltip>\n      )}\n      {executeButtonProps !== false && (\n        <ButtonTooltip title={executeButtonProps.title} shortcut={executeButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-l-5\"\n            type=\"primary\"\n            disabled={executeButtonProps.disabled}\n            onClick={executeButtonProps.onClick}\n            data-test=\"ExecuteButton\">\n            <span className=\"zmdi zmdi-play\" />\n            {executeButtonProps.text}\n          </Button>\n        </ButtonTooltip>\n      )}\n    </div>\n  );\n}\n\nconst ButtonPropsPropType = PropTypes.oneOfType([\n  PropTypes.bool, // `false` to hide button\n  PropTypes.shape({\n    title: PropTypes.node,\n    disabled: PropTypes.bool,\n    loading: PropTypes.bool,\n    onClick: PropTypes.func,\n    text: PropTypes.node,\n    shortcut: PropTypes.string,\n  }),\n]);\n\nEditorControl.propTypes = {\n  addParameterButtonProps: ButtonPropsPropType,\n  formatButtonProps: ButtonPropsPropType,\n  saveButtonProps: ButtonPropsPropType,\n  executeButtonProps: ButtonPropsPropType,\n  autocompleteToggleProps: PropTypes.oneOfType([\n    PropTypes.bool, // `false` to hide\n    PropTypes.shape({\n      available: PropTypes.bool,\n      enabled: PropTypes.bool,\n      onToggle: PropTypes.func,\n    }),\n  ]),\n  dataSourceSelectorProps: PropTypes.oneOfType([\n    PropTypes.bool, // `false` to hide\n    PropTypes.shape({\n      disabled: PropTypes.bool,\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      options: PropTypes.arrayOf(\n        PropTypes.shape({\n          value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n          label: PropTypes.node,\n        })\n      ),\n      onChange: PropTypes.func,\n    }),\n  ]),\n};\n\nEditorControl.defaultProps = {\n  addParameterButtonProps: false,\n  formatButtonProps: false,\n  saveButtonProps: false,\n  executeButtonProps: false,\n  autocompleteToggleProps: false,\n  dataSourceSelectorProps: false,\n};\n","import React, { useEffect, useMemo, useState, useCallback, useImperativeHandle } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { AceEditor, snippetsModule, updateSchemaCompleter } from \"./ace\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport QuerySnippet from \"@/services/query-snippet\";\n\nimport QueryEditorControls from \"./QueryEditorControls\";\nimport \"./index.less\";\n\nconst editorProps = { $blockScrolling: Infinity };\n\nconst QueryEditor = React.forwardRef(function(\n  { className, syntax, value, autocompleteEnabled, schema, onChange, onSelectionChange, ...props },\n  ref\n) {\n  const [container, setContainer] = useState(null);\n  const [editorRef, setEditorRef] = useState(null);\n\n  // For some reason, value for AceEditor should be managed in this way - otherwise it goes berserk when selecting text\n  const [currentValue, setCurrentValue] = useState(value);\n\n  useEffect(() => {\n    setCurrentValue(value);\n  }, [value]);\n\n  const handleChange = useCallback(\n    str => {\n      setCurrentValue(str);\n      onChange(str);\n    },\n    [onChange]\n  );\n\n  const editorOptions = useMemo(\n    () => ({\n      behavioursEnabled: true,\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: autocompleteEnabled,\n      autoScrollEditorIntoView: true,\n    }),\n    [autocompleteEnabled]\n  );\n\n  useEffect(() => {\n    if (editorRef) {\n      const editorId = editorRef.editor.id;\n      updateSchemaCompleter(editorId, schema);\n      return () => {\n        updateSchemaCompleter(editorId, null);\n      };\n    }\n  }, [schema, editorRef]);\n\n  useEffect(() => {\n    function resize() {\n      if (editorRef) {\n        editorRef.editor.resize();\n      }\n    }\n\n    if (container) {\n      resize();\n      const unwatch = resizeObserver(container, resize);\n      return unwatch;\n    }\n  }, [container, editorRef]);\n\n  const handleSelectionChange = useCallback(\n    selection => {\n      const rawSelectedQueryText = editorRef.editor.session.doc.getTextRange(selection.getRange());\n      const selectedQueryText = rawSelectedQueryText.length > 1 ? rawSelectedQueryText : null;\n      onSelectionChange(selectedQueryText);\n    },\n    [editorRef, onSelectionChange]\n  );\n\n  const initEditor = useCallback(editor => {\n    // Release Cmd/Ctrl+L to the browser\n    editor.commands.bindKey({ win: \"Ctrl+L\", mac: \"Cmd+L\" }, null);\n\n    // Release Cmd/Ctrl+Shift+F for format query action\n    editor.commands.bindKey({ win: \"Ctrl+Shift+F\", mac: \"Cmd+Shift+F\" }, null);\n\n    // Release Ctrl+P for open new parameter dialog\n    editor.commands.bindKey({ win: \"Ctrl+P\", mac: null }, null);\n    // Lineup only mac\n    editor.commands.bindKey({ win: null, mac: \"Ctrl+P\" }, \"golineup\");\n\n    // Reset Completer in case dot is pressed\n    editor.commands.on(\"afterExec\", e => {\n      if (e.command.name === \"insertstring\" && e.args === \".\" && editor.completer) {\n        editor.completer.showPopup(editor);\n      }\n    });\n\n    QuerySnippet.query().then(snippets => {\n      const snippetManager = snippetsModule.snippetManager;\n      const m = {\n        snippetText: \"\",\n      };\n      m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n      snippets.forEach(snippet => {\n        m.snippets.push(snippet.getSnippet());\n      });\n      snippetManager.register(m.snippets || [], m.scope);\n    });\n\n    editor.focus();\n  }, []);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      paste: text => {\n        if (editorRef) {\n          const { editor } = editorRef;\n          editor.session.doc.replace(editor.selection.getRange(), text);\n          const range = editor.selection.getRange();\n          onChange(editor.session.getValue());\n          editor.selection.setRange(range);\n        }\n      },\n      focus: () => {\n        if (editorRef) {\n          editorRef.editor.focus();\n        }\n      },\n    }),\n    [editorRef, onChange]\n  );\n\n  return (\n    <div className={cx(\"query-editor-container\", className)} {...props} ref={setContainer}>\n      <AceEditor\n        ref={setEditorRef}\n        theme=\"textmate\"\n        mode={syntax || \"sql\"}\n        value={currentValue}\n        editorProps={editorProps}\n        width=\"100%\"\n        height=\"100%\"\n        setOptions={editorOptions}\n        showPrintMargin={false}\n        wrapEnabled={false}\n        onLoad={initEditor}\n        onChange={handleChange}\n        onSelectionChange={handleSelectionChange}\n      />\n    </div>\n  );\n});\n\nQueryEditor.propTypes = {\n  className: PropTypes.string,\n  syntax: PropTypes.string,\n  value: PropTypes.string,\n  autocompleteEnabled: PropTypes.bool,\n  schema: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      size: PropTypes.number,\n      columns: PropTypes.arrayOf(PropTypes.string).isRequired,\n    })\n  ),\n  onChange: PropTypes.func,\n  onSelectionChange: PropTypes.func,\n};\n\nQueryEditor.defaultProps = {\n  className: null,\n  syntax: null,\n  value: null,\n  autocompleteEnabled: true,\n  schema: [],\n  onChange: () => {},\n  onSelectionChange: () => {},\n};\n\nQueryEditor.Controls = QueryEditorControls;\n\nexport default QueryEditor;\n","import { isNil, isEmpty } from \"lodash\";\nimport { useMemo } from \"react\";\nimport { currentUser } from \"@/services/auth\";\n\nexport default function useQueryFlags(query, dataSource = null) {\n  dataSource = dataSource || { view_only: true };\n\n  return useMemo(\n    () => ({\n      // state flags\n      isNew: isNil(query.id),\n      isDraft: query.is_draft,\n      isArchived: query.is_archived,\n\n      // permissions flags\n      canCreate: currentUser.hasPermission(\"create_query\"),\n      canView: currentUser.hasPermission(\"view_query\"),\n      canEdit: currentUser.hasPermission(\"edit_query\") && query.can_edit,\n      canViewSource: currentUser.hasPermission(\"view_source\"),\n      canExecute:\n        !isEmpty(query.query) &&\n        (query.is_safe || (currentUser.hasPermission(\"execute_query\") && !dataSource.view_only)),\n      canFork: currentUser.hasPermission(\"edit_query\") && !dataSource.view_only,\n      canSchedule: currentUser.hasPermission(\"schedule_query\"),\n    }),\n    [query, dataSource.view_only]\n  );\n}\n","import { extend, isFunction } from \"lodash\";\nimport React, { useCallback, useRef } from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport { Query } from \"@/services/query\";\nimport notification from \"@/services/notification\";\n\nfunction confirmArchive() {\n  return new Promise((resolve, reject) => {\n    Modal.confirm({\n      title: \"Archive Query\",\n      content: (\n        <React.Fragment>\n          <div className=\"m-b-5\">Are you sure you want to archive this query?</div>\n          <div>All alerts and dashboard widgets created with its visualizations will be deleted.</div>\n        </React.Fragment>\n      ),\n      okText: \"Archive\",\n      okType: \"danger\",\n      onOk: () => {\n        resolve();\n      },\n      onCancel: () => {\n        reject();\n      },\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  });\n}\n\nfunction doArchiveQuery(query) {\n  return Query.delete({ id: query.id })\n    .then(() => {\n      return extend(query.clone(), { is_archived: true, schedule: null });\n    })\n    .catch(error => {\n      notification.error(\"Query could not be archived.\");\n      return Promise.reject(error);\n    });\n}\n\nexport default function useArchiveQuery(query, onChange) {\n  const onChangeRef = useRef();\n  onChangeRef.current = isFunction(onChange) ? onChange : () => {};\n\n  return useCallback(() => {\n    confirmArchive()\n      .then(() => doArchiveQuery(query))\n      .then(updatedQuery => {\n        onChangeRef.current(updatedQuery);\n      });\n  }, [query]);\n}\n","import { isNil, isObject, isFunction, extend, keys, map, omit, pick, uniq, get } from \"lodash\";\nimport React, { useRef, useCallback } from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport { Query } from \"@/services/query\";\nimport notification from \"@/services/notification\";\n\nclass SaveQueryError extends Error {\n  constructor(message, detailedMessage = null) {\n    super(message);\n    this.detailedMessage = detailedMessage;\n  }\n}\n\nclass SaveQueryConflictError extends SaveQueryError {\n  constructor() {\n    super(\n      \"Changes not saved\",\n      <React.Fragment>\n        <div className=\"m-b-5\">It seems like the query has been modified by another user.</div>\n        <div>Please copy/backup your changes and reload this page.</div>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction confirmOverwrite() {\n  return new Promise((resolve, reject) => {\n    Modal.confirm({\n      title: \"Overwrite Query\",\n      content: (\n        <React.Fragment>\n          <div className=\"m-b-5\">It seems like the query has been modified by another user.</div>\n          <div>Are you sure you want to overwrite the query with your version?</div>\n        </React.Fragment>\n      ),\n      okText: \"Overwrite\",\n      okType: \"danger\",\n      onOk: () => {\n        resolve();\n      },\n      onCancel: () => {\n        reject();\n      },\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  });\n}\n\nfunction doSaveQuery(data, { canOverwrite = false } = {}) {\n  // omit parameter properties that don't need to be stored\n  if (isObject(data.options) && data.options.parameters) {\n    data.options = {\n      ...data.options,\n      parameters: map(data.options.parameters, p => p.toSaveableObject()),\n    };\n  }\n\n  return Query.save(data).catch(error => {\n    if (get(error, \"response.status\") === 409) {\n      if (canOverwrite) {\n        return confirmOverwrite()\n          .then(() => Query.save(omit(data, [\"version\"])))\n          .catch(() => Promise.reject(new SaveQueryConflictError()));\n      }\n      return Promise.reject(new SaveQueryConflictError());\n    }\n    return Promise.reject(new SaveQueryError(\"Query could not be saved\"));\n  });\n}\n\nexport default function useUpdateQuery(query, onChange) {\n  const onChangeRef = useRef();\n  onChangeRef.current = isFunction(onChange) ? onChange : () => {};\n\n  return useCallback(\n    (data = null, { successMessage = \"Query saved\" } = {}) => {\n      if (isObject(data)) {\n        // Don't save new query with partial data\n        if (query.isNew()) {\n          onChangeRef.current(extend(query.clone(), data));\n          return;\n        }\n        data = { ...data, id: query.id, version: query.version };\n      } else {\n        data = pick(query, [\n          \"id\",\n          \"version\",\n          \"schedule\",\n          \"query\",\n          \"description\",\n          \"name\",\n          \"data_source_id\",\n          \"options\",\n          \"latest_query_data_id\",\n          \"is_draft\",\n        ]);\n      }\n\n      return doSaveQuery(data, { canOverwrite: query.can_edit })\n        .then(updatedQuery => {\n          if (!isNil(successMessage)) {\n            notification.success(successMessage);\n          }\n          onChangeRef.current(\n            extend(\n              query.clone(),\n              // if server returned completely new object (currently possible only when saving new query) -\n              // update all fields; otherwise pick only changed fields\n              updatedQuery.id !== query.id ? updatedQuery : pick(updatedQuery, uniq([\"id\", \"version\", ...keys(data)]))\n            )\n          );\n        })\n        .catch(error => {\n          const notificationOptions = {};\n          if (error instanceof SaveQueryConflictError) {\n            notificationOptions.duration = null;\n          }\n          notification.error(error.message, error.detailedMessage, notificationOptions);\n        });\n    },\n    [query]\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport \"./CodeBlock.less\";\n\nexport default class CodeBlock extends React.Component {\n  static propTypes = {\n    copyable: PropTypes.bool,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    copyable: false,\n    children: null,\n  };\n\n  state = { copied: null };\n\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n    this.copyFeatureEnabled = props.copyable && document.queryCommandSupported(\"copy\");\n    this.resetCopyState = null;\n  }\n\n  componentWillUnmount() {\n    if (this.resetCopyState) {\n      clearTimeout(this.resetCopyState);\n    }\n  }\n\n  copy = () => {\n    // select text\n    window.getSelection().selectAllChildren(this.ref.current);\n\n    // copy\n    try {\n      const success = document.execCommand(\"copy\");\n      if (!success) {\n        throw new Error();\n      }\n      this.setState({ copied: \"Copied!\" });\n    } catch (err) {\n      this.setState({\n        copied: \"Copy failed\",\n      });\n    }\n\n    // reset selection\n    window.getSelection().removeAllRanges();\n\n    // reset tooltip\n    this.resetCopyState = setTimeout(() => this.setState({ copied: null }), 2000);\n  };\n\n  render() {\n    const { copyable, children, ...props } = this.props;\n\n    const copyButton = (\n      <Tooltip title={this.state.copied || \"Copy\"}>\n        <Button icon=\"copy\" type=\"dashed\" size=\"small\" onClick={this.copy} />\n      </Tooltip>\n    );\n\n    return (\n      <div className=\"code-block\">\n        <code {...props} ref={this.ref}>\n          {children}\n        </code>\n        {this.copyFeatureEnabled && copyButton}\n      </div>\n    );\n  }\n}\n","import { extend } from \"lodash\";\nimport React, { useMemo, useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport Button from \"antd/lib/button\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport CodeBlock from \"@/components/CodeBlock\";\nimport { axios } from \"@/services/axios\";\nimport { clientConfig } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\n\nimport \"./index.less\";\n\nfunction ApiKeyDialog({ dialog, ...props }) {\n  const [query, setQuery] = useState(props.query);\n  const [updatingApiKey, setUpdatingApiKey] = useState(false);\n\n  const regenerateQueryApiKey = useCallback(() => {\n    setUpdatingApiKey(true);\n    axios\n      .post(`api/queries/${query.id}/regenerate_api_key`)\n      .then(data => {\n        setUpdatingApiKey(false);\n        setQuery(extend(query.clone(), { api_key: data.api_key }));\n      })\n      .catch(() => {\n        setUpdatingApiKey(false);\n        notification.error(\"Failed to update API key\");\n      });\n  }, [query]);\n\n  const { csvUrl, jsonUrl } = useMemo(\n    () => ({\n      csvUrl: `${clientConfig.basePath}api/queries/${query.id}/results.csv?api_key=${query.api_key}`,\n      jsonUrl: `${clientConfig.basePath}api/queries/${query.id}/results.json?api_key=${query.api_key}`,\n    }),\n    [query.id, query.api_key]\n  );\n\n  return (\n    <Modal {...dialog.props} width={600} footer={<Button onClick={() => dialog.close(query)}>Close</Button>}>\n      <div className=\"query-api-key-dialog-wrapper\">\n        <h5>API Key</h5>\n        <div className=\"m-b-20\">\n          <Input.Group compact>\n            <Input readOnly value={query.api_key} />\n            {query.can_edit && (\n              <Button disabled={updatingApiKey} loading={updatingApiKey} onClick={regenerateQueryApiKey}>\n                Regenerate\n              </Button>\n            )}\n          </Input.Group>\n        </div>\n\n        <h5>Example API Calls:</h5>\n        <div className=\"m-b-10\">\n          <label>Results in CSV format:</label>\n          <CodeBlock copyable>{csvUrl}</CodeBlock>\n        </div>\n        <div>\n          <label>Results in JSON format:</label>\n          <CodeBlock copyable>{jsonUrl}</CodeBlock>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nApiKeyDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  query: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    api_key: PropTypes.string,\n    can_edit: PropTypes.bool,\n  }).isRequired,\n};\n\nexport default wrapDialog(ApiKeyDialog);\n","import { extend, map, filter, reduce } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Icon from \"antd/lib/icon\";\nimport useMedia from \"use-media\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport FavoritesControl from \"@/components/FavoritesControl\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport getTags from \"@/services/getTags\";\nimport { clientConfig } from \"@/services/auth\";\nimport useQueryFlags from \"../hooks/useQueryFlags\";\nimport useArchiveQuery from \"../hooks/useArchiveQuery\";\nimport usePublishQuery from \"../hooks/usePublishQuery\";\nimport useUnpublishQuery from \"../hooks/useUnpublishQuery\";\nimport useUpdateQueryTags from \"../hooks/useUpdateQueryTags\";\nimport useRenameQuery from \"../hooks/useRenameQuery\";\nimport useDuplicateQuery from \"../hooks/useDuplicateQuery\";\nimport useApiKeyDialog from \"../hooks/useApiKeyDialog\";\nimport usePermissionsEditorDialog from \"../hooks/usePermissionsEditorDialog\";\n\nimport \"./QueryPageHeader.less\";\n\nfunction getQueryTags() {\n  return getTags(\"api/queries/tags\").then(tags => map(tags, t => t.name));\n}\n\nfunction createMenu(menu) {\n  const handlers = {};\n\n  const groups = map(menu, group =>\n    filter(\n      map(group, (props, key) => {\n        props = extend({ isAvailable: true, isEnabled: true, onClick: () => {} }, props);\n        if (props.isAvailable) {\n          handlers[key] = props.onClick;\n          return (\n            <Menu.Item key={key} disabled={!props.isEnabled}>\n              {props.title}\n            </Menu.Item>\n          );\n        }\n        return null;\n      })\n    )\n  );\n\n  return (\n    <Menu onClick={({ key }) => handlers[key]()}>\n      {reduce(\n        filter(groups, group => group.length > 0),\n        (result, items, key) => {\n          const divider = result.length > 0 ? <Menu.Divider key={`divider${key}`} /> : null;\n          return [...result, divider, ...items];\n        },\n        []\n      )}\n    </Menu>\n  );\n}\n\nexport default function QueryPageHeader({\n  query,\n  dataSource,\n  sourceMode,\n  selectedVisualization,\n  headerExtra,\n  tagsExtra,\n  onChange,\n}) {\n  const isDesktop = useMedia({ minWidth: 768 });\n  const queryFlags = useQueryFlags(query, dataSource);\n  const updateName = useRenameQuery(query, onChange);\n  const updateTags = useUpdateQueryTags(query, onChange);\n  const archiveQuery = useArchiveQuery(query, onChange);\n  const publishQuery = usePublishQuery(query, onChange);\n  const unpublishQuery = useUnpublishQuery(query, onChange);\n  const [isDuplicating, duplicateQuery] = useDuplicateQuery(query);\n  const openApiKeyDialog = useApiKeyDialog(query, onChange);\n  const openPermissionsEditorDialog = usePermissionsEditorDialog(query);\n\n  const moreActionsMenu = useMemo(\n    () =>\n      createMenu([\n        {\n          fork: {\n            isEnabled: !queryFlags.isNew && queryFlags.canFork && !isDuplicating,\n            title: (\n              <React.Fragment>\n                Fork\n                <i className=\"fa fa-external-link m-l-5\" />\n              </React.Fragment>\n            ),\n            onClick: duplicateQuery,\n          },\n        },\n        {\n          archive: {\n            isAvailable: !queryFlags.isNew && queryFlags.canEdit && !queryFlags.isArchived,\n            title: \"Archive\",\n            onClick: archiveQuery,\n          },\n          managePermissions: {\n            isAvailable:\n              !queryFlags.isNew && queryFlags.canEdit && !queryFlags.isArchived && clientConfig.showPermissionsControl,\n            title: \"Manage Permissions\",\n            onClick: openPermissionsEditorDialog,\n          },\n          publish: {\n            isAvailable:\n              !isDesktop && queryFlags.isDraft && !queryFlags.isArchived && !queryFlags.isNew && queryFlags.canEdit,\n            title: \"Publish\",\n            onClick: publishQuery,\n          },\n          unpublish: {\n            isAvailable: !queryFlags.isNew && queryFlags.canEdit && !queryFlags.isDraft,\n            title: \"Unpublish\",\n            onClick: unpublishQuery,\n          },\n        },\n        {\n          showAPIKey: {\n            isAvailable: !queryFlags.isNew,\n            title: \"Show API Key\",\n            onClick: openApiKeyDialog,\n          },\n        },\n      ]),\n    [\n      queryFlags.isNew,\n      queryFlags.canFork,\n      queryFlags.canEdit,\n      queryFlags.isArchived,\n      queryFlags.isDraft,\n      isDuplicating,\n      duplicateQuery,\n      archiveQuery,\n      openPermissionsEditorDialog,\n      isDesktop,\n      publishQuery,\n      unpublishQuery,\n      openApiKeyDialog,\n    ]\n  );\n\n  return (\n    <div className=\"query-page-header\">\n      <div className=\"title-with-tags\">\n        <div className=\"page-title\">\n          <div className=\"d-flex align-items-center\">\n            {!queryFlags.isNew && <FavoritesControl item={query} />}\n            <h3>\n              <EditInPlace isEditable={queryFlags.canEdit} onDone={updateName} ignoreBlanks value={query.name} />\n            </h3>\n          </div>\n        </div>\n        <div className=\"query-tags\">\n          <QueryTagsControl\n            tags={query.tags}\n            isDraft={queryFlags.isDraft}\n            isArchived={queryFlags.isArchived}\n            canEdit={queryFlags.canEdit}\n            getAvailableTags={getQueryTags}\n            onEdit={updateTags}\n            tagsExtra={tagsExtra}\n          />\n        </div>\n      </div>\n      <div className=\"header-actions\">\n        {headerExtra}\n        {isDesktop && queryFlags.isDraft && !queryFlags.isArchived && !queryFlags.isNew && queryFlags.canEdit && (\n          <Button className=\"m-r-5\" onClick={publishQuery}>\n            <i className=\"fa fa-paper-plane m-r-5\" /> Publish\n          </Button>\n        )}\n\n        {!queryFlags.isNew && queryFlags.canViewSource && (\n          <span>\n            {!sourceMode && (\n              <Button className=\"m-r-5\" href={query.getUrl(true, selectedVisualization)}>\n                <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\" />\n                <span className=\"m-l-5\">Edit Source</span>\n              </Button>\n            )}\n            {sourceMode && (\n              <Button\n                className=\"m-r-5\"\n                href={query.getUrl(false, selectedVisualization)}\n                data-test=\"QueryPageShowDataOnly\">\n                <i className=\"fa fa-table\" aria-hidden=\"true\" />\n                <span className=\"m-l-5\">Show Data Only</span>\n              </Button>\n            )}\n          </span>\n        )}\n\n        {!queryFlags.isNew && (\n          <Dropdown overlay={moreActionsMenu} trigger={[\"click\"]}>\n            <Button>\n              <Icon type=\"ellipsis\" rotate={90} />\n            </Button>\n          </Dropdown>\n        )}\n      </div>\n    </div>\n  );\n}\n\nQueryPageHeader.propTypes = {\n  query: PropTypes.shape({\n    id: PropTypes.number,\n    name: PropTypes.string,\n    tags: PropTypes.arrayOf(PropTypes.string),\n  }).isRequired,\n  dataSource: PropTypes.object,\n  sourceMode: PropTypes.bool,\n  selectedVisualization: PropTypes.number,\n  headerExtra: PropTypes.node,\n  tagsExtra: PropTypes.node,\n  onChange: PropTypes.func,\n};\n\nQueryPageHeader.defaultProps = {\n  dataSource: null,\n  sourceMode: false,\n  selectedVisualization: null,\n  headerExtra: null,\n  tagsExtra: null,\n  onChange: () => {},\n};\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { clientConfig } from \"@/services/auth\";\n\nexport default function useRenameQuery(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(\n    name => {\n      recordEvent(\"edit_name\", \"query\", query.id);\n      const changes = { name };\n      const options = {};\n\n      if (query.is_draft && clientConfig.autoPublishNamedQueries && name !== \"New Query\") {\n        changes.is_draft = false;\n        options.successMessage = \"Query saved and published\";\n      }\n\n      updateQuery(changes, options);\n    },\n    [query.id, query.is_draft, updateQuery]\n  );\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useUpdateQueryTags(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(\n    tags => {\n      recordEvent(\"edit_tags\", \"query\", query.id);\n      updateQuery({ tags });\n    },\n    [query.id, updateQuery]\n  );\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function usePublishQuery(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(() => {\n    recordEvent(\"toggle_published\", \"query\", query.id);\n    updateQuery({ is_draft: false });\n  }, [query.id, updateQuery]);\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useUnpublishQuery(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(() => {\n    recordEvent(\"toggle_published\", \"query\", query.id);\n    updateQuery({ is_draft: true });\n  }, [query.id, updateQuery]);\n}\n","import { noop } from \"lodash\";\nimport { useCallback, useState } from \"react\";\nimport { Query } from \"@/services/query\";\n\nexport default function useDuplicateQuery(query) {\n  const [isDuplicating, setIsDuplicating] = useState(false);\n\n  const duplicateQuery = useCallback(() => {\n    // To prevent opening the same tab, name must be unique for each browser\n    const tabName = `duplicatedQueryTab/${Math.random().toString()}`;\n\n    // We should open tab here because this moment is a part of user interaction;\n    // later browser will block such attempts\n    const tab = window.open(\"\", tabName);\n\n    setIsDuplicating(true);\n    Query.fork({ id: query.id })\n      .then(newQuery => {\n        tab.location = newQuery.getUrl(true);\n      })\n      .finally(() => {\n        setIsDuplicating(false);\n      });\n  }, [query.id]);\n\n  return [isDuplicating, isDuplicating ? noop : duplicateQuery];\n}\n","import { isFunction } from \"lodash\";\nimport { useRef, useCallback } from \"react\";\nimport ApiKeyDialog from \"@/components/queries/ApiKeyDialog\";\n\nexport default function useApiKeyDialog(query, onChange) {\n  const onChangeRef = useRef();\n  onChangeRef.current = isFunction(onChange) ? onChange : () => {};\n\n  return useCallback(() => {\n    ApiKeyDialog.showModal({ query }).onClose(updatedQuery => {\n      onChangeRef.current(updatedQuery);\n    });\n  }, [query]);\n}\n","import { useCallback } from \"react\";\nimport PermissionsEditorDialog from \"@/components/PermissionsEditorDialog\";\n\nexport default function usePermissionsEditorDialog(query) {\n  return useCallback(() => {\n    PermissionsEditorDialog.showModal({\n      aclUrl: `api/queries/${query.id}/acl`,\n      context: \"query\",\n      author: query.user,\n    });\n  }, [query.id, query.user]);\n}\n","import { isFunction } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { Moment } from \"@/components/proptypes\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\nimport { IMG_ROOT } from \"@/services/data-source\";\n\nimport \"./QueryMetadata.less\";\n\nexport default function QueryMetadata({ query, dataSource, layout, onEditSchedule }) {\n  return (\n    <div className={`query-metadata query-metadata-${layout}`}>\n      <div className=\"query-metadata-item\">\n        <img className=\"profile__image_thumb\" src={query.user.profile_image_url} alt=\"Avatar\" />\n        <div className=\"query-metadata-property\">\n          <strong className={cx(\"query-metadata-label\", { \"text-muted\": query.user.is_disabled })}>\n            {query.user.name}\n          </strong>\n          <span className=\"query-metadata-value\">\n            created{\" \"}\n            <strong>\n              <TimeAgo date={query.created_at} />\n            </strong>\n          </span>\n        </div>\n      </div>\n      <div className=\"query-metadata-item\">\n        <img className=\"profile__image_thumb\" src={query.last_modified_by.profile_image_url} alt=\"Avatar\" />\n        <div className=\"query-metadata-property\">\n          <strong className={cx(\"query-metadata-label\", { \"text-muted\": query.last_modified_by.is_disabled })}>\n            {query.last_modified_by.name}\n          </strong>\n          <span className=\"query-metadata-value\">\n            updated{\" \"}\n            <strong>\n              <TimeAgo date={query.updated_at} />\n            </strong>\n          </span>\n        </div>\n      </div>\n      <div className=\"query-metadata-space\" />\n      {dataSource && (\n        <div className=\"query-metadata-item\">\n          Data Source:\n          <img src={`${IMG_ROOT}/${dataSource.type}.png`} width=\"20\" alt={dataSource.type} />\n          <div className=\"query-metadata-property\">\n            <div className=\"query-metadata-label\">{dataSource.name}</div>\n          </div>\n        </div>\n      )}\n      <div className=\"query-metadata-item\">\n        <div className=\"query-metadata-property\">\n          <span className=\"query-metadata-label\">\n            <span className=\"zmdi zmdi-refresh m-r-5\" />\n            Refresh Schedule\n          </span>\n          <span className=\"query-metadata-value\">\n            <SchedulePhrase\n              isLink={isFunction(onEditSchedule)}\n              isNew={query.isNew()}\n              schedule={query.schedule}\n              onClick={onEditSchedule}\n            />\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nQueryMetadata.propTypes = {\n  layout: PropTypes.oneOf([\"table\", \"horizontal\"]),\n  query: PropTypes.shape({\n    created_at: PropTypes.oneOfType([PropTypes.string, Moment]).isRequired,\n    updated_at: PropTypes.oneOfType([PropTypes.string, Moment]).isRequired,\n    user: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      profile_image_url: PropTypes.string.isRequired,\n      is_disabled: PropTypes.bool,\n    }).isRequired,\n    last_modified_by: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      profile_image_url: PropTypes.string.isRequired,\n      is_disabled: PropTypes.bool,\n    }).isRequired,\n    schedule: PropTypes.object,\n  }).isRequired,\n  dataSource: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n  onEditSchedule: PropTypes.func,\n};\n\nQueryMetadata.defaultProps = {\n  layout: \"table\",\n  dataSource: null,\n  onEditSchedule: null,\n};\n","import React, { useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { find, orderBy } from \"lodash\";\nimport useMedia from \"use-media\";\nimport Tabs from \"antd/lib/tabs\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\n\nimport \"./QueryVisualizationTabs.less\";\n\nconst { TabPane } = Tabs;\n\nfunction EmptyState({ title, message, refreshButton }) {\n  return (\n    <div className=\"query-results-empty-state\">\n      <div className=\"empty-state-content\">\n        <div>\n          <img src=\"/static/images/illustrations/no-query-results.svg\" alt=\"No Query Results Illustration\" />\n        </div>\n        <h3>{title}</h3>\n        <div className=\"m-b-20\">{message}</div>\n        {refreshButton}\n      </div>\n    </div>\n  );\n}\n\nEmptyState.propTypes = {\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  refreshButton: PropTypes.node,\n};\n\nEmptyState.defaultProps = {\n  refreshButton: null,\n};\n\nfunction TabWithDeleteButton({ visualizationName, canDelete, onDelete, ...props }) {\n  const handleDelete = useCallback(\n    e => {\n      e.stopPropagation();\n      Modal.confirm({\n        title: \"Delete Visualization\",\n        content: \"Are you sure you want to delete this visualization?\",\n        okText: \"Delete\",\n        okType: \"danger\",\n        onOk: onDelete,\n        maskClosable: true,\n        autoFocusButton: null,\n      });\n    },\n    [onDelete]\n  );\n\n  return (\n    <span {...props}>\n      {visualizationName}\n      {canDelete && (\n        <a className=\"delete-visualization-button\" onClick={handleDelete}>\n          <i className=\"zmdi zmdi-close\" />\n        </a>\n      )}\n    </span>\n  );\n}\n\nTabWithDeleteButton.propTypes = {\n  visualizationName: PropTypes.string.isRequired,\n  canDelete: PropTypes.bool,\n  onDelete: PropTypes.func,\n};\nTabWithDeleteButton.defaultProps = { canDelete: false, onDelete: () => {} };\n\nconst defaultVisualizations = [\n  {\n    type: \"TABLE\",\n    name: \"Table\",\n    id: null,\n    options: {},\n  },\n];\n\nexport default function QueryVisualizationTabs({\n  queryResult,\n  selectedTab,\n  showNewVisualizationButton,\n  canDeleteVisualizations,\n  onChangeTab,\n  onAddVisualization,\n  onDeleteVisualization,\n  refreshButton,\n  ...props\n}) {\n  const visualizations = useMemo(\n    () => (props.visualizations.length > 0 ? props.visualizations : defaultVisualizations),\n    [props.visualizations]\n  );\n\n  const tabsProps = {};\n  if (find(visualizations, { id: selectedTab })) {\n    tabsProps.activeKey = `${selectedTab}`;\n  }\n\n  if (showNewVisualizationButton) {\n    tabsProps.tabBarExtraContent = (\n      <Button\n        className=\"add-visualization-button\"\n        data-test=\"NewVisualization\"\n        type=\"link\"\n        onClick={() => onAddVisualization()}>\n        <i className=\"fa fa-plus\" />\n        <span className=\"m-l-5 hidden-xs\">Add Visualization</span>\n      </Button>\n    );\n  }\n\n  const orderedVisualizations = useMemo(() => orderBy(visualizations, [\"id\"]), [visualizations]);\n  const isFirstVisualization = useCallback(visId => visId === orderedVisualizations[0].id, [orderedVisualizations]);\n  const isMobile = useMedia({ maxWidth: 768 });\n\n  return (\n    <Tabs\n      {...tabsProps}\n      type=\"card\"\n      className={cx(\"query-visualization-tabs card-style\")}\n      data-test=\"QueryPageVisualizationTabs\"\n      animated={false}\n      tabBarGutter={0}\n      onChange={activeKey => onChangeTab(+activeKey)}\n      destroyInactiveTabPane>\n      {orderedVisualizations.map(visualization => (\n        <TabPane\n          key={`${visualization.id}`}\n          data-test={`QueryPageVisualization${selectedTab}`}\n          tab={\n            <TabWithDeleteButton\n              data-test={`QueryPageVisualizationTab${visualization.id}`}\n              canDelete={!isMobile && canDeleteVisualizations && !isFirstVisualization(visualization.id)}\n              visualizationName={visualization.name}\n              onDelete={() => onDeleteVisualization(visualization.id)}\n            />\n          }>\n          {queryResult ? (\n            <VisualizationRenderer visualization={visualization} queryResult={queryResult} context=\"query\" />\n          ) : (\n            <EmptyState\n              title=\"Query Has no Result\"\n              message=\"Execute/Refresh the query to show results.\"\n              refreshButton={refreshButton}\n            />\n          )}\n        </TabPane>\n      ))}\n    </Tabs>\n  );\n}\n\nQueryVisualizationTabs.propTypes = {\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  visualizations: PropTypes.arrayOf(PropTypes.object),\n  selectedTab: PropTypes.number,\n  showNewVisualizationButton: PropTypes.bool,\n  canDeleteVisualizations: PropTypes.bool,\n  onChangeTab: PropTypes.func,\n  onAddVisualization: PropTypes.func,\n  onDeleteVisualization: PropTypes.func,\n  refreshButton: PropTypes.node,\n};\n\nQueryVisualizationTabs.defaultProps = {\n  queryResult: null,\n  visualizations: [],\n  selectedTab: null,\n  showNewVisualizationButton: false,\n  canDeleteVisualizations: false,\n  onChangeTab: () => {},\n  onAddVisualization: () => {},\n  onDeleteVisualization: () => {},\n  refreshButton: null,\n};\n","import { includes } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"antd/lib/alert\";\nimport Button from \"antd/lib/button\";\nimport Timer from \"@/components/Timer\";\n\nexport default function QueryExecutionStatus({ status, updatedAt, error, isCancelling, onCancel }) {\n  const alertType = status === \"failed\" ? \"error\" : \"info\";\n  const showTimer = status !== \"failed\" && updatedAt;\n  const isCancelButtonAvailable = includes([\"waiting\", \"processing\"], status);\n  let message = isCancelling ? <React.Fragment>Cancelling&hellip;</React.Fragment> : null;\n\n  switch (status) {\n    case \"waiting\":\n      if (!isCancelling) {\n        message = <React.Fragment>Query in queue&hellip;</React.Fragment>;\n      }\n      break;\n    case \"processing\":\n      if (!isCancelling) {\n        message = <React.Fragment>Executing query&hellip;</React.Fragment>;\n      }\n      break;\n    case \"loading-result\":\n      message = <React.Fragment>Loading results&hellip;</React.Fragment>;\n      break;\n    case \"failed\":\n      message = (\n        <React.Fragment>\n          Error running query: <strong>{error}</strong>\n        </React.Fragment>\n      );\n      break;\n    // no default\n  }\n\n  return (\n    <Alert\n      data-test=\"QueryExecutionStatus\"\n      type={alertType}\n      message={\n        <div className=\"d-flex align-items-center\">\n          <div className=\"flex-fill p-t-5 p-b-5\">\n            {message} {showTimer && <Timer from={updatedAt} />}\n          </div>\n          <div>\n            {isCancelButtonAvailable && (\n              <Button className=\"m-l-10\" type=\"primary\" size=\"small\" disabled={isCancelling} onClick={onCancel}>\n                Cancel\n              </Button>\n            )}\n          </div>\n        </div>\n      }\n    />\n  );\n}\n\nQueryExecutionStatus.propTypes = {\n  status: PropTypes.string,\n  updatedAt: PropTypes.any,\n  error: PropTypes.string,\n  isCancelling: PropTypes.bool,\n  onCancel: PropTypes.func,\n};\n\nQueryExecutionStatus.defaultProps = {\n  status: \"waiting\",\n  updatedAt: null,\n  error: null,\n  isCancelling: true,\n  onCancel: () => {},\n};\n","import { isNil, map, filter, some, includes } from \"lodash\";\nimport React, { useState, useCallback, useMemo, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport Input from \"antd/lib/input\";\nimport Button from \"antd/lib/button\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport AutoSizer from \"react-virtualized/dist/commonjs/AutoSizer\";\nimport List from \"react-virtualized/dist/commonjs/List\";\n\nconst SchemaItemType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  columns: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nconst schemaTableHeight = 22;\nconst schemaColumnHeight = 18;\n\nfunction SchemaItem({ item, expanded, onToggle, onSelect, ...props }) {\n  const handleSelect = useCallback(\n    (event, ...args) => {\n      event.preventDefault();\n      event.stopPropagation();\n      onSelect(...args);\n    },\n    [onSelect]\n  );\n\n  if (!item) {\n    return null;\n  }\n\n  return (\n    <div {...props}>\n      <div className=\"table-name\" onClick={onToggle}>\n        <i className=\"fa fa-table m-r-5\" />\n        <strong>\n          <span title={item.name}>{item.name}</span>\n          {!isNil(item.size) && <span> ({item.size})</span>}\n        </strong>\n        <i\n          className=\"fa fa-angle-double-right copy-to-editor\"\n          aria-hidden=\"true\"\n          onClick={e => handleSelect(e, item.name)}\n        />\n      </div>\n      {expanded && (\n        <div>\n          {map(item.columns, column => (\n            <div key={column} className=\"table-open\">\n              {column}\n              <i\n                className=\"fa fa-angle-double-right copy-to-editor\"\n                aria-hidden=\"true\"\n                onClick={e => handleSelect(e, column)}\n              />\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nSchemaItem.propTypes = {\n  item: SchemaItemType,\n  expanded: PropTypes.bool,\n  onToggle: PropTypes.func,\n  onSelect: PropTypes.func,\n};\n\nSchemaItem.defaultProps = {\n  item: null,\n  expanded: false,\n  onToggle: () => {},\n  onSelect: () => {},\n};\n\nfunction applyFilter(schema, filterString) {\n  const filters = filter(filterString.toLowerCase().split(/\\s+/), s => s.length > 0);\n\n  // Empty string: return original schema\n  if (filters.length === 0) {\n    return schema;\n  }\n\n  // Single word: matches table or column\n  if (filters.length === 1) {\n    const nameFilter = filters[0];\n    const columnFilter = filters[0];\n    return filter(\n      schema,\n      item =>\n        includes(item.name.toLowerCase(), nameFilter) ||\n        some(item.columns, column => includes(column.toLowerCase(), columnFilter))\n    );\n  }\n\n  // Two (or more) words: first matches table, seconds matches column\n  const nameFilter = filters[0];\n  const columnFilter = filters[1];\n  return filter(\n    map(schema, item => {\n      if (includes(item.name.toLowerCase(), nameFilter)) {\n        item = { ...item, columns: filter(item.columns, column => includes(column.toLowerCase(), columnFilter)) };\n        return item.columns.length > 0 ? item : null;\n      }\n    })\n  );\n}\n\nexport default function SchemaBrowser({ schema, onRefresh, onItemSelect, ...props }) {\n  const [filterString, setFilterString] = useState(\"\");\n  const filteredSchema = useMemo(() => applyFilter(schema, filterString), [schema, filterString]);\n  const [expandedFlags, setExpandedFlags] = useState({});\n  const [handleFilterChange] = useDebouncedCallback(setFilterString, 500);\n  const [listRef, setListRef] = useState(null);\n\n  useEffect(() => {\n    setExpandedFlags({});\n  }, [schema]);\n\n  useEffect(() => {\n    if (listRef) {\n      listRef.recomputeRowHeights();\n    }\n  }, [listRef, filteredSchema, expandedFlags]);\n\n  if (schema.length === 0) {\n    return null;\n  }\n\n  function toggleTable(tableName) {\n    setExpandedFlags({\n      ...expandedFlags,\n      [tableName]: !expandedFlags[tableName],\n    });\n  }\n\n  return (\n    <div className=\"schema-container\" {...props}>\n      <div className=\"schema-control\">\n        <Input\n          className=\"m-r-5\"\n          placeholder=\"Search schema...\"\n          disabled={schema.length === 0}\n          onChange={event => handleFilterChange(event.target.value)}\n        />\n\n        <Tooltip title=\"Refresh Schema\">\n          <Button onClick={onRefresh}>\n            <i className=\"zmdi zmdi-refresh\" />\n          </Button>\n        </Tooltip>\n      </div>\n      <div className=\"schema-browser\">\n        <AutoSizer>\n          {({ width, height }) => (\n            <List\n              ref={setListRef}\n              width={width}\n              height={height}\n              rowCount={filteredSchema.length}\n              rowHeight={({ index }) => {\n                const item = filteredSchema[index];\n                const columnCount = expandedFlags[item.name] ? item.columns.length : 0;\n                return schemaTableHeight + schemaColumnHeight * columnCount;\n              }}\n              rowRenderer={({ key, index, style }) => {\n                const item = filteredSchema[index];\n                return (\n                  <SchemaItem\n                    key={key}\n                    style={style}\n                    item={item}\n                    expanded={expandedFlags[item.name]}\n                    onToggle={() => toggleTable(item.name)}\n                    onSelect={onItemSelect}\n                  />\n                );\n              }}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    </div>\n  );\n}\n\nSchemaBrowser.propTypes = {\n  schema: PropTypes.arrayOf(SchemaItemType),\n  onRefresh: PropTypes.func,\n  onItemSelect: PropTypes.func,\n};\n\nSchemaBrowser.defaultProps = {\n  schema: [],\n  onRefresh: () => {},\n  onItemSelect: () => {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Card from \"antd/lib/card\";\nimport Icon from \"antd/lib/icon\";\nimport Button from \"antd/lib/button\";\nimport Typography from \"antd/lib/typography\";\nimport { currentUser } from \"@/services/auth\";\n\nimport useQueryFlags from \"../hooks/useQueryFlags\";\nimport \"./QuerySourceAlerts.less\";\n\nexport default function QuerySourceAlerts({ query, dataSourcesAvailable }) {\n  const queryFlags = useQueryFlags(query); // we don't use flags that depend on data source\n\n  let message = null;\n  if (queryFlags.isNew && !queryFlags.canCreate) {\n    message = (\n      <React.Fragment>\n        <Typography.Title level={4}>\n          You don't have permission to create new queries on any of the data sources available to you.\n        </Typography.Title>\n        <p>\n          <Typography.Text type=\"secondary\">\n            You can either <a href=\"queries\">browse existing queries</a>, or ask for additional permissions from your\n            Redash admin.\n          </Typography.Text>\n        </p>\n      </React.Fragment>\n    );\n  } else if (!dataSourcesAvailable) {\n    if (currentUser.isAdmin) {\n      message = (\n        <React.Fragment>\n          <Typography.Title level={4}>\n            Looks like no data sources were created yet or none of them available to the group(s) you're member of.\n          </Typography.Title>\n          <p>\n            <Typography.Text type=\"secondary\">Please create one first, and then start querying.</Typography.Text>\n          </p>\n\n          <div className=\"query-source-alerts-actions\">\n            <Button type=\"primary\" href=\"data_sources/new\">\n              Create Data Source\n            </Button>\n            <Button type=\"default\" href=\"groups\">\n              Manage Group Permissions\n            </Button>\n          </div>\n        </React.Fragment>\n      );\n    } else {\n      message = (\n        <React.Fragment>\n          <Typography.Title level={4}>\n            Looks like no data sources were created yet or none of them available to the group(s) you're member of.\n          </Typography.Title>\n          <p>\n            <Typography.Text type=\"secondary\">Please ask your Redash admin to create one first.</Typography.Text>\n          </p>\n        </React.Fragment>\n      );\n    }\n  }\n\n  if (!message) {\n    return null;\n  }\n\n  return (\n    <div className=\"query-source-alerts\">\n      <Card>\n        <div className=\"query-source-alerts-icon\">\n          <Icon type=\"warning\" theme=\"filled\" />\n        </div>\n        {message}\n      </Card>\n    </div>\n  );\n}\n\nQuerySourceAlerts.propTypes = {\n  query: PropTypes.object.isRequired,\n  dataSourcesAvailable: PropTypes.bool,\n};\n\nQuerySourceAlerts.defaultProps = {\n  dataSourcesAvailable: false,\n};\n","import React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport { Query } from \"@/services/query\";\n\nexport default function wrapQueryPage(WrappedComponent) {\n  function QueryPageWrapper({ queryId, onError, ...props }) {\n    const [query, setQuery] = useState(null);\n    const onErrorRef = useRef();\n    onErrorRef.current = onError;\n\n    useEffect(() => {\n      let isCancelled = false;\n      const promise = queryId ? Query.get({ id: queryId }) : Promise.resolve(Query.newQuery());\n      promise\n        .then(result => {\n          if (!isCancelled) {\n            setQuery(result);\n          }\n        })\n        .catch(error => onErrorRef.current(error));\n\n      return () => {\n        isCancelled = true;\n      };\n    }, [queryId]);\n\n    if (!query) {\n      return <LoadingState className=\"flex-fill\" />;\n    }\n\n    return <WrappedComponent query={query} onError={onError} {...props} />;\n  }\n\n  QueryPageWrapper.propTypes = {\n    queryId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  };\n\n  QueryPageWrapper.defaultProps = {\n    queryId: null,\n  };\n\n  return QueryPageWrapper;\n}\n","import { isString } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport List from \"antd/lib/list\";\nimport Icon from \"antd/lib/icon\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport { Dashboard } from \"@/services/dashboard\";\nimport notification from \"@/services/notification\";\nimport useSearchResults from \"@/lib/hooks/useSearchResults\";\n\nimport \"./add-to-dashboard-dialog.less\";\n\nfunction AddToDashboardDialog({ dialog, visualization }) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const [doSearch, dashboards, isLoading] = useSearchResults(\n    term => {\n      if (isString(term) && term !== \"\") {\n        return Dashboard.query({ q: term })\n          .then(results => results.results)\n          .catch(() => []);\n      }\n      return Promise.resolve([]);\n    },\n    { initialResults: [] }\n  );\n\n  const [selectedDashboard, setSelectedDashboard] = useState(null);\n\n  const [saveInProgress, setSaveInProgress] = useState(false);\n\n  useEffect(() => {\n    doSearch(searchTerm);\n  }, [doSearch, searchTerm]);\n\n  function addWidgetToDashboard() {\n    // Load dashboard with all widgets\n    Dashboard.get({ slug: selectedDashboard.slug })\n      .then(dashboard => {\n        dashboard.addWidget(visualization);\n        return dashboard;\n      })\n      .then(dashboard => {\n        dialog.close();\n        const key = `notification-${Math.random()\n          .toString(36)\n          .substr(2, 10)}`;\n        notification.success(\n          \"Widget added to dashboard\",\n          <React.Fragment>\n            <a href={`dashboard/${dashboard.slug}`} onClick={() => notification.close(key)}>\n              {dashboard.name}\n            </a>\n            <QueryTagsControl isDraft={dashboard.is_draft} tags={dashboard.tags} />\n          </React.Fragment>,\n          { key }\n        );\n      })\n      .catch(() => {\n        notification.error(\"Widget not added.\");\n      })\n      .finally(() => {\n        setSaveInProgress(false);\n      });\n  }\n\n  const items = selectedDashboard ? [selectedDashboard] : dashboards;\n\n  return (\n    <Modal\n      {...dialog.props}\n      title=\"Add to Dashboard\"\n      okButtonProps={{ disabled: !selectedDashboard || saveInProgress, loading: saveInProgress }}\n      cancelButtonProps={{ disabled: saveInProgress }}\n      onOk={addWidgetToDashboard}>\n      <label htmlFor=\"add-to-dashboard-dialog-dashboard\">Choose the dashboard to add this query to:</label>\n\n      {!selectedDashboard && (\n        <Input\n          id=\"add-to-dashboard-dialog-dashboard\"\n          className=\"w-100\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search a dashboard by name\"\n          value={searchTerm}\n          onChange={event => setSearchTerm(event.target.value)}\n          suffix={\n            <Icon type=\"close\" className={searchTerm === \"\" ? \"hidden\" : null} onClick={() => setSearchTerm(\"\")} />\n          }\n        />\n      )}\n\n      {(items.length > 0 || isLoading) && (\n        <List\n          className={selectedDashboard ? \"add-to-dashboard-dialog-selection\" : \"add-to-dashboard-dialog-search-results\"}\n          bordered\n          itemLayout=\"horizontal\"\n          loading={isLoading}\n          dataSource={items}\n          renderItem={d => (\n            <List.Item\n              key={`dashboard-${d.id}`}\n              actions={selectedDashboard ? [<Icon type=\"close\" onClick={() => setSelectedDashboard(null)} />] : []}\n              onClick={selectedDashboard ? null : () => setSelectedDashboard(d)}>\n              <div className=\"add-to-dashboard-dialog-item-content\">\n                {d.name}\n                <QueryTagsControl isDraft={d.is_draft} tags={d.tags} />\n              </div>\n            </List.Item>\n          )}\n        />\n      )}\n    </Modal>\n  );\n}\n\nAddToDashboardDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  visualization: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nexport default wrapDialog(AddToDashboardDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"antd/lib/alert\";\nimport Button from \"antd/lib/button\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Form from \"antd/lib/form\";\nimport InputNumber from \"antd/lib/input-number\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { clientConfig } from \"@/services/auth\";\nimport CodeBlock from \"@/components/CodeBlock\";\nimport \"./EmbedQueryDialog.less\";\n\nclass EmbedQueryDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    visualization: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  };\n\n  state = {\n    enableChangeIframeSize: false,\n    iframeWidth: 720,\n    iframeHeight: 391,\n  };\n\n  constructor(props) {\n    super(props);\n    const { query, visualization } = props;\n    this.embedUrl = `${clientConfig.basePath}embed/query/${query.id}/visualization/${visualization.id}?api_key=${\n      query.api_key\n    }&${query.getParameters().toUrlParams()}`;\n\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(query, visualization);\n    }\n  }\n\n  render() {\n    const { query, dialog } = this.props;\n    const { enableChangeIframeSize, iframeWidth, iframeHeight } = this.state;\n\n    return (\n      <Modal\n        {...dialog.props}\n        className=\"embed-query-dialog\"\n        title=\"Embed Query\"\n        footer={<Button onClick={dialog.dismiss}>Close</Button>}>\n        {query.is_safe ? (\n          <React.Fragment>\n            <h5 className=\"m-t-0\">Public URL</h5>\n            <div className=\"m-b-30\">\n              <CodeBlock data-test=\"EmbedIframe\" copyable>\n                {this.embedUrl}\n              </CodeBlock>\n            </div>\n            <h5 className=\"m-t-0\">IFrame Embed</h5>\n            <div>\n              <CodeBlock copyable>\n                {`<iframe src=\"${this.embedUrl}\" width=\"${iframeWidth}\" height=\"${iframeHeight}\"></iframe>`}\n              </CodeBlock>\n              <Form className=\"m-t-10\" layout=\"inline\">\n                <Form.Item>\n                  <Checkbox\n                    checked={enableChangeIframeSize}\n                    onChange={e => this.setState({ enableChangeIframeSize: e.target.checked })}\n                  />\n                </Form.Item>\n                <Form.Item label=\"Width\">\n                  <InputNumber\n                    className=\"size-input\"\n                    value={iframeWidth}\n                    onChange={value => this.setState({ iframeWidth: value })}\n                    size=\"small\"\n                    disabled={!enableChangeIframeSize}\n                  />\n                </Form.Item>\n                <Form.Item label=\"Height\">\n                  <InputNumber\n                    className=\"size-input\"\n                    value={iframeHeight}\n                    onChange={value => this.setState({ iframeHeight: value })}\n                    size=\"small\"\n                    disabled={!enableChangeIframeSize}\n                  />\n                </Form.Item>\n              </Form>\n            </div>\n            {this.snapshotUrl && (\n              <React.Fragment>\n                <h5>Image Embed</h5>\n                <CodeBlock copyable>{this.snapshotUrl}</CodeBlock>\n              </React.Fragment>\n            )}\n          </React.Fragment>\n        ) : (\n          <Alert\n            message=\"Currently it is not possible to embed queries that contain text parameters.\"\n            type=\"error\"\n            data-test=\"EmbedErrorAlert\"\n          />\n        )}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EmbedQueryDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default function QueryResultsLink(props) {\n  let href = \"\";\n\n  const { query, queryResult, fileType } = props;\n  const resultId = queryResult.getId && queryResult.getId();\n  const resultData = queryResult.getData && queryResult.getData();\n\n  if (resultId && resultData && query.name) {\n    if (query.id) {\n      href = `api/queries/${query.id}/results/${resultId}.${fileType}${props.embed ? `?api_key=${props.apiKey}` : \"\"}`;\n    } else {\n      href = `api/query_results/${resultId}.${fileType}`;\n    }\n  }\n\n  return (\n    <a target=\"_blank\" rel=\"noopener noreferrer\" disabled={props.disabled} href={href} download>\n      {props.children}\n    </a>\n  );\n}\n\nQueryResultsLink.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  fileType: PropTypes.string,\n  disabled: PropTypes.bool.isRequired,\n  embed: PropTypes.bool,\n  apiKey: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n};\n\nQueryResultsLink.defaultProps = {\n  queryResult: {},\n  fileType: \"csv\",\n  embed: false,\n  apiKey: \"\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Button from \"antd/lib/button\";\nimport Icon from \"antd/lib/icon\";\n\nimport QueryResultsLink from \"./QueryResultsLink\";\n\nexport default function QueryControlDropdown(props) {\n  const menu = (\n    <Menu>\n      {!props.query.isNew() && (!props.query.is_draft || !props.query.is_archived) && (\n        <Menu.Item>\n          <a target=\"_self\" onClick={() => props.openAddToDashboardForm(props.selectedTab)}>\n            <Icon type=\"plus-circle\" theme=\"filled\" /> Add to Dashboard\n          </a>\n        </Menu.Item>\n      )}\n      {!props.query.isNew() && (\n        <Menu.Item>\n          <a onClick={() => props.showEmbedDialog(props.query, props.selectedTab)} data-test=\"ShowEmbedDialogButton\">\n            <Icon type=\"share-alt\" /> Embed Elsewhere\n          </a>\n        </Menu.Item>\n      )}\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"csv\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}>\n          <Icon type=\"file\" /> Download as CSV File\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"tsv\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}>\n          <Icon type=\"file\" /> Download as TSV File\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"xlsx\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}>\n          <Icon type=\"file-excel\" /> Download as Excel File\n        </QueryResultsLink>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Dropdown trigger={[\"click\"]} overlay={menu} overlayClassName=\"query-control-dropdown-overlay\">\n      <Button data-test=\"QueryControlDropdownButton\">\n        <Icon type=\"ellipsis\" rotate={90} />\n      </Button>\n    </Dropdown>\n  );\n}\n\nQueryControlDropdown.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  queryExecuting: PropTypes.bool.isRequired,\n  showEmbedDialog: PropTypes.func.isRequired,\n  embed: PropTypes.bool,\n  apiKey: PropTypes.string,\n  selectedTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  openAddToDashboardForm: PropTypes.func.isRequired,\n};\n\nQueryControlDropdown.defaultProps = {\n  queryResult: {},\n  embed: false,\n  apiKey: \"\",\n  selectedTab: \"\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Icon from \"antd/lib/icon\";\n\nexport default function EditVisualizationButton(props) {\n  return (\n    <Button\n      data-test=\"EditVisualization\"\n      className=\"edit-visualization\"\n      onClick={() => props.openVisualizationEditor(props.selectedTab)}>\n      <Icon type=\"form\" />\n      <span className=\"hidden-xs hidden-s hidden-m\">Edit Visualization</span>\n    </Button>\n  );\n}\n\nEditVisualizationButton.propTypes = {\n  openVisualizationEditor: PropTypes.func.isRequired,\n  selectedTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\n\nEditVisualizationButton.defaultProps = {\n  selectedTab: \"\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport useAddToDashboardDialog from \"../hooks/useAddToDashboardDialog\";\nimport useEmbedDialog from \"../hooks/useEmbedDialog\";\nimport QueryControlDropdown from \"@/components/EditVisualizationButton/QueryControlDropdown\";\nimport EditVisualizationButton from \"@/components/EditVisualizationButton\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport { durationHumanize, pluralize, prettySize } from \"@/lib/utils\";\n\nimport \"./QueryExecutionMetadata.less\";\n\nexport default function QueryExecutionMetadata({\n  query,\n  queryResult,\n  isQueryExecuting,\n  selectedVisualization,\n  showEditVisualizationButton,\n  onEditVisualization,\n  extraActions,\n}) {\n  const queryResultData = useQueryResultData(queryResult);\n  const openAddToDashboardDialog = useAddToDashboardDialog(query);\n  const openEmbedDialog = useEmbedDialog(query);\n  return (\n    <div className=\"query-execution-metadata\">\n      <span className=\"m-r-5\">\n        <QueryControlDropdown\n          query={query}\n          queryResult={queryResult}\n          queryExecuting={isQueryExecuting}\n          showEmbedDialog={openEmbedDialog}\n          embed={false}\n          apiKey={query.api_key}\n          selectedTab={selectedVisualization}\n          openAddToDashboardForm={openAddToDashboardDialog}\n        />\n      </span>\n      {extraActions}\n      {showEditVisualizationButton && (\n        <EditVisualizationButton openVisualizationEditor={onEditVisualization} selectedTab={selectedVisualization} />\n      )}\n      <span className=\"m-l-5 m-r-10\">\n        <span>\n          <strong>{queryResultData.rows.length}</strong> {pluralize(\"row\", queryResultData.rows.length)}\n        </span>\n        <span className=\"m-l-5\">\n          {!isQueryExecuting && (\n            <React.Fragment>\n              <strong>{durationHumanize(queryResultData.runtime)}</strong>\n              <span className=\"hidden-xs\"> runtime</span>\n            </React.Fragment>\n          )}\n          {isQueryExecuting && <span>Running&hellip;</span>}\n        </span>\n        {queryResultData.metadata.data_scanned && (\n          <span className=\"m-l-5\">\n            Data Scanned\n            <strong>{prettySize(queryResultData.metadata.data_scanned)}</strong>\n          </span>\n        )}\n      </span>\n      <div>\n        <span className=\"m-r-10\">\n          <span className=\"hidden-xs\">Refreshed </span>\n          <strong>\n            <TimeAgo date={queryResultData.retrievedAt} placeholder=\"-\" />\n          </strong>\n        </span>\n      </div>\n    </div>\n  );\n}\n\nQueryExecutionMetadata.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  isQueryExecuting: PropTypes.bool,\n  selectedVisualization: PropTypes.number,\n  showEditVisualizationButton: PropTypes.bool,\n  onEditVisualization: PropTypes.func,\n  extraActions: PropTypes.node,\n};\n\nQueryExecutionMetadata.defaultProps = {\n  isQueryExecuting: false,\n  selectedVisualization: null,\n  showEditVisualizationButton: false,\n  onEditVisualization: () => {},\n  extraActions: null,\n};\n","import { find } from \"lodash\";\nimport { useCallback } from \"react\";\nimport AddToDashboardDialog from \"@/components/queries/AddToDashboardDialog\";\n\nexport default function useAddToDashboardDialog(query) {\n  return useCallback(\n    visualizationId => {\n      const visualization = find(query.visualizations, { id: visualizationId });\n      AddToDashboardDialog.showModal({ visualization });\n    },\n    [query.visualizations]\n  );\n}\n","import { find } from \"lodash\";\nimport { useCallback } from \"react\";\nimport EmbedQueryDialog from \"@/components/queries/EmbedQueryDialog\";\n\nexport default function useEmbedDialog(query) {\n  return useCallback(\n    (unusedQuery, visualizationId) => {\n      const visualization = find(query.visualizations, { id: visualizationId });\n      EmbedQueryDialog.showModal({ query, visualization });\n    },\n    [query]\n  );\n}\n","import { useState, useEffect, useMemo } from \"react\";\nimport { first, orderBy, find } from \"lodash\";\nimport location from \"@/services/location\";\n\nexport default function useVisualizationTabHandler(visualizations) {\n  const firstVisualization = useMemo(() => first(orderBy(visualizations, [\"id\"])) || {}, [visualizations]);\n  const [selectedTab, setSelectedTab] = useState(+location.hash || firstVisualization.id);\n\n  useEffect(() => {\n    const hashValue = selectedTab !== firstVisualization.id ? `${selectedTab}` : null;\n    if (location.hash !== hashValue) {\n      location.setHash(hashValue);\n    }\n\n    const unlisten = location.listen(() => {\n      if (location.hash !== hashValue) {\n        setSelectedTab(+location.hash || firstVisualization.id);\n      }\n    });\n    return unlisten;\n  }, [firstVisualization.id, selectedTab]);\n\n  // make sure selectedTab is in visualizations\n  useEffect(() => {\n    if (!find(visualizations, { id: selectedTab })) {\n      setSelectedTab(firstVisualization.id);\n    }\n  }, [firstVisualization.id, selectedTab, visualizations]);\n\n  return useMemo(() => [selectedTab, setSelectedTab], [selectedTab]);\n}\n","const PREFIX = \"localOptions:\";\n\nfunction get(key, defaultValue = undefined) {\n  const fullKey = PREFIX + key;\n  if (fullKey in window.localStorage) {\n    return JSON.parse(window.localStorage.getItem(fullKey));\n  }\n  return defaultValue;\n}\n\nfunction set(key, value) {\n  const fullKey = PREFIX + key;\n  window.localStorage.setItem(fullKey, JSON.stringify(value));\n}\n\nexport default {\n  get,\n  set,\n};\n","import { find } from \"lodash\";\nimport debug from \"debug\";\nimport recordEvent from \"@/services/recordEvent\";\nimport redashIconUrl from \"@/assets/images/redash_icon_small.png\";\n\nconst logger = debug(\"redash:notifications\");\n\nconst Notification = window.Notification || null;\nif (!Notification) {\n  logger(\"HTML5 notifications are not supported.\");\n}\n\nconst hidden = find([\"hidden\", \"webkitHidden\", \"mozHidden\", \"msHidden\"], prop => prop in document);\n\nfunction isPageVisible() {\n  return !document[hidden];\n}\n\nfunction getPermissions() {\n  if (Notification && Notification.permission === \"default\") {\n    Notification.requestPermission();\n  }\n}\n\nfunction showNotification(title, content) {\n  if (!Notification || isPageVisible() || Notification.permission !== \"granted\") {\n    return;\n  }\n\n  // using the 'tag' to avoid showing duplicate notifications\n  const notification = new Notification(title, {\n    tag: title + content,\n    body: content,\n    icon: redashIconUrl,\n  });\n  notification.onclick = function onClick() {\n    window.focus();\n    this.close();\n    recordEvent(\"click\", \"notification\");\n  };\n}\n\nexport default {\n  getPermissions,\n  showNotification,\n};\n","import { useReducer, useCallback, useEffect, useRef } from \"react\";\nimport location from \"@/services/location\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { ExecutionStatus } from \"@/services/query-result\";\nimport notifications from \"@/services/notifications\";\n\nfunction getMaxAge() {\n  const { maxAge } = location.search;\n  return maxAge !== undefined ? maxAge : -1;\n}\n\nconst reducer = (prevState, updatedProperty) => ({\n  ...prevState,\n  ...updatedProperty,\n});\n\n// This is currently specific to a Query page, we can refactor\n// it slightly to make it suitable for dashboard widgets instead of the other solution it\n// has in there.\nexport default function useQueryExecute(query) {\n  const [executionState, setExecutionState] = useReducer(reducer, {\n    queryResult: null,\n    isExecuting: false,\n    loadedInitialResults: false,\n    executionStatus: null,\n    isCancelling: false,\n    cancelCallback: null,\n    error: null,\n  });\n\n  const queryResultInExecution = useRef(null);\n  // Clear executing queryResult when component is unmounted to avoid errors\n  useEffect(() => {\n    return () => {\n      queryResultInExecution.current = null;\n    };\n  }, []);\n\n  const executeQuery = useCallback(\n    (maxAge = 0, queryExecutor) => {\n      let newQueryResult;\n      if (queryExecutor) {\n        newQueryResult = queryExecutor();\n      } else {\n        newQueryResult = query.getQueryResult(maxAge);\n      }\n\n      recordEvent(\"execute\", \"query\", query.id);\n      notifications.getPermissions();\n\n      queryResultInExecution.current = newQueryResult;\n\n      setExecutionState({\n        updatedAt: newQueryResult.getUpdatedAt(),\n        executionStatus: newQueryResult.getStatus(),\n        isExecuting: true,\n        cancelCallback: () => {\n          recordEvent(\"cancel_execute\", \"query\", query.id);\n          setExecutionState({ isCancelling: true });\n          newQueryResult.cancelExecution();\n        },\n      });\n\n      const onStatusChange = status => {\n        if (queryResultInExecution.current === newQueryResult) {\n          setExecutionState({ updatedAt: newQueryResult.getUpdatedAt(), executionStatus: status });\n        }\n      };\n\n      newQueryResult\n        .toPromise(onStatusChange)\n        .then(queryResult => {\n          if (queryResultInExecution.current === newQueryResult) {\n            // TODO: this should probably belong in the QueryEditor page.\n            if (queryResult && queryResult.query_result.query === query.query) {\n              query.latest_query_data_id = queryResult.getId();\n              query.queryResult = queryResult;\n            }\n\n            if (executionState.loadedInitialResults) {\n              notifications.showNotification(\"Redash\", `${query.name} updated.`);\n            }\n\n            setExecutionState({\n              queryResult,\n              loadedInitialResults: true,\n              error: null,\n              isExecuting: false,\n              isCancelling: false,\n              executionStatus: null,\n            });\n          }\n        })\n        .catch(queryResult => {\n          if (queryResultInExecution.current === newQueryResult) {\n            if (executionState.loadedInitialResults) {\n              notifications.showNotification(\"Redash\", `${query.name} failed to run: ${queryResult.getError()}`);\n            }\n\n            setExecutionState({\n              queryResult,\n              loadedInitialResults: true,\n              error: queryResult.getError(),\n              isExecuting: false,\n              isCancelling: false,\n              executionStatus: ExecutionStatus.FAILED,\n            });\n          }\n        });\n    },\n    [executionState.loadedInitialResults, query]\n  );\n\n  const queryRef = useRef(query);\n  const executeQueryRef = useRef(executeQuery);\n  queryRef.current = query;\n  executeQueryRef.current = executeQuery;\n\n  useEffect(() => {\n    // TODO: this belongs on the query page?\n    // loadedInitialResults can be removed if so\n    if (queryRef.current.hasResult() || queryRef.current.paramsRequired()) {\n      executeQueryRef.current(getMaxAge());\n    } else {\n      setExecutionState({ loadedInitialResults: true });\n    }\n  }, []);\n\n  return { ...executionState, ...{ executeQuery } };\n}\n","import { filter, find } from \"lodash\";\nimport { useState, useMemo, useEffect } from \"react\";\nimport DataSource from \"@/services/data-source\";\n\nexport default function useQueryDataSources(query) {\n  const [allDataSources, setAllDataSources] = useState([]);\n  const [dataSourcesLoaded, setDataSourcesLoaded] = useState(false);\n  const dataSources = useMemo(() => filter(allDataSources, ds => !ds.view_only || ds.id === query.data_source_id), [\n    allDataSources,\n    query.data_source_id,\n  ]);\n  const dataSource = useMemo(() => find(dataSources, { id: query.data_source_id }) || null, [\n    query.data_source_id,\n    dataSources,\n  ]);\n\n  useEffect(() => {\n    let cancelDataSourceLoading = false;\n    DataSource.query().then(data => {\n      if (!cancelDataSourceLoading) {\n        setDataSourcesLoaded(true);\n        setAllDataSources(data);\n      }\n    });\n\n    return () => {\n      cancelDataSourceLoading = true;\n    };\n  }, []);\n\n  return useMemo(() => ({ dataSourcesLoaded, dataSources, dataSource }), [dataSourcesLoaded, dataSources, dataSource]);\n}\n","import { reduce, has } from \"lodash\";\nimport { useCallback, useEffect, useRef, useState, useMemo } from \"react\";\nimport { axios } from \"@/services/axios\";\nimport DataSource, { SCHEMA_NOT_SUPPORTED } from \"@/services/data-source\";\nimport notification from \"@/services/notification\";\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction getSchema(dataSource, refresh = undefined) {\n  if (!dataSource) {\n    return Promise.resolve([]);\n  }\n\n  const fetchSchemaFromJob = data => {\n    return axios.get(`api/jobs/${data.job.id}`).then(data => {\n      if (data.job.status < 3) {\n        return sleep(1000).then(() => fetchSchemaFromJob(data));\n      } else if (data.job.status === 3) {\n        return data.job.result;\n      } else if (data.job.status === 4 && data.job.error.code === SCHEMA_NOT_SUPPORTED) {\n        return [];\n      } else {\n        return Promise.reject(new Error(data.job.error));\n      }\n    });\n  };\n\n  return DataSource.fetchSchema(dataSource, refresh)\n    .then(data => {\n      if (has(data, \"job\")) {\n        return fetchSchemaFromJob(data);\n      }\n      return has(data, \"schema\") ? data.schema : Promise.reject();\n    })\n    .catch(() => {\n      notification.error(\"Schema refresh failed.\", \"Please try again later.\");\n      return Promise.resolve([]);\n    });\n}\n\nfunction prepareSchema(schema) {\n  schema.tokensCount = reduce(schema, (totalLength, table) => totalLength + table.columns.length, 0);\n  return schema;\n}\n\nexport default function useDataSourceSchema(dataSource) {\n  const [schema, setSchema] = useState(prepareSchema([]));\n  const refreshSchemaTokenRef = useRef(null);\n\n  const reloadSchema = useCallback(\n    (refresh = undefined) => {\n      const refreshToken = Math.random()\n        .toString(36)\n        .substr(2);\n      refreshSchemaTokenRef.current = refreshToken;\n      getSchema(dataSource, refresh).then(data => {\n        if (refreshSchemaTokenRef.current === refreshToken) {\n          setSchema(prepareSchema(data));\n        }\n      });\n    },\n    [dataSource]\n  );\n\n  useEffect(() => {\n    reloadSchema();\n  }, [reloadSchema]);\n\n  useEffect(() => {\n    return () => {\n      // cancel pending operations\n      refreshSchemaTokenRef.current = null;\n    };\n  }, []);\n\n  return useMemo(() => [schema, reloadSchema], [schema, reloadSchema]);\n}\n","import { isUndefined } from \"lodash\";\nimport { useEffect, useMemo, useState, useCallback } from \"react\";\n\nexport default function useQueryParameters(query) {\n  const parameters = useMemo(() => query.getParametersDefs(), [query]);\n  const [dirtyFlag, setDirtyFlag] = useState(query.getParameters().hasPendingValues());\n\n  const updateDirtyFlag = useCallback(\n    flag => {\n      flag = isUndefined(flag) ? query.getParameters().hasPendingValues() : flag;\n      setDirtyFlag(flag);\n    },\n    [query]\n  );\n\n  useEffect(() => {\n    const updatedDirtyParameters = query.getParameters().hasPendingValues();\n    if (updatedDirtyParameters !== dirtyFlag) {\n      setDirtyFlag(updatedDirtyParameters);\n    }\n  }, [query, parameters, dirtyFlag]);\n\n  return useMemo(() => [parameters, dirtyFlag, updateDirtyFlag], [parameters, dirtyFlag, updateDirtyFlag]);\n}\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport TimePicker from \"antd/lib/time-picker\";\nimport Select from \"antd/lib/select\";\nimport Radio from \"antd/lib/radio\";\nimport { capitalize, clone, isEqual, omitBy, isNil } from \"lodash\";\nimport moment from \"moment\";\nimport { secondsToInterval, durationHumanize, pluralize, IntervalEnum, localizeTime } from \"@/lib/utils\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { RefreshScheduleType, RefreshScheduleDefault, Moment } from \"../proptypes\";\n\nimport \"./ScheduleDialog.css\";\n\nconst WEEKDAYS_SHORT = moment.weekdaysShort();\nconst WEEKDAYS_FULL = moment.weekdays();\nconst DATE_FORMAT = \"YYYY-MM-DD\";\nconst HOUR_FORMAT = \"HH:mm\";\nconst { Option, OptGroup } = Select;\n\nexport function TimeEditor(props) {\n  const [time, setTime] = useState(props.defaultValue);\n  const showUtc = time && !time.isUTC();\n\n  function onChange(newTime) {\n    setTime(newTime);\n    props.onChange(newTime);\n  }\n\n  return (\n    <React.Fragment>\n      <TimePicker allowClear={false} value={time} format={HOUR_FORMAT} minuteStep={5} onChange={onChange} />\n      {showUtc && (\n        <span className=\"utc\" data-testid=\"utc\">\n          ({moment.utc(time).format(HOUR_FORMAT)} UTC)\n        </span>\n      )}\n    </React.Fragment>\n  );\n}\n\nTimeEditor.propTypes = {\n  defaultValue: Moment,\n  onChange: PropTypes.func.isRequired,\n};\n\nTimeEditor.defaultProps = {\n  defaultValue: null,\n};\n\nclass ScheduleDialog extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    refreshOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n  };\n\n  state = this.getState();\n\n  getState() {\n    const newSchedule = clone(this.props.schedule || ScheduleDialog.defaultProps.schedule);\n    const { time, interval: seconds, day_of_week: day } = newSchedule;\n    const { interval } = secondsToInterval(seconds);\n    const [hour, minute] = time ? localizeTime(time).split(\":\") : [null, null];\n\n    return {\n      hour,\n      minute,\n      seconds,\n      interval,\n      dayOfWeek: day ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(day)] : null,\n      newSchedule,\n    };\n  }\n\n  get intervals() {\n    const ret = {\n      [IntervalEnum.NEVER]: [],\n    };\n    this.props.refreshOptions.forEach(seconds => {\n      const { count, interval } = secondsToInterval(seconds);\n      if (!(interval in ret)) {\n        ret[interval] = [];\n      }\n      ret[interval].push([count, seconds]);\n    });\n\n    Object.defineProperty(this, \"intervals\", { value: ret }); // memoize\n\n    return ret;\n  }\n\n  set newSchedule(newProps) {\n    this.setState(prevState => ({\n      newSchedule: Object.assign(prevState.newSchedule, newProps),\n    }));\n  }\n\n  setTime = time => {\n    this.newSchedule = {\n      time: moment(time)\n        .utc()\n        .format(HOUR_FORMAT),\n    };\n  };\n\n  setInterval = newSeconds => {\n    const { newSchedule } = this.state;\n    const { interval: newInterval } = secondsToInterval(newSeconds);\n\n    // resets to defaults\n    if (newInterval === IntervalEnum.NEVER) {\n      newSchedule.until = null;\n    }\n    if ([IntervalEnum.NEVER, IntervalEnum.MINUTES, IntervalEnum.HOURS].indexOf(newInterval) !== -1) {\n      newSchedule.time = null;\n    }\n    if (newInterval !== IntervalEnum.WEEKS) {\n      newSchedule.day_of_week = null;\n    }\n    if (\n      (newInterval === IntervalEnum.DAYS || newInterval === IntervalEnum.WEEKS) &&\n      (!this.state.minute || !this.state.hour)\n    ) {\n      newSchedule.time = moment()\n        .hour(\"00\")\n        .minute(\"15\")\n        .utc()\n        .format(HOUR_FORMAT);\n    }\n    if (newInterval === IntervalEnum.WEEKS && !this.state.dayOfWeek) {\n      newSchedule.day_of_week = WEEKDAYS_FULL[0];\n    }\n\n    newSchedule.interval = newSeconds;\n\n    const [hour, minute] = newSchedule.time ? localizeTime(newSchedule.time).split(\":\") : [null, null];\n\n    this.setState({\n      interval: newInterval,\n      seconds: newSeconds,\n      hour,\n      minute,\n      dayOfWeek: newSchedule.day_of_week ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(newSchedule.day_of_week)] : null,\n    });\n\n    this.newSchedule = newSchedule;\n  };\n\n  setScheduleUntil = (_, date) => {\n    this.newSchedule = { until: date };\n  };\n\n  setWeekday = e => {\n    const dayOfWeek = e.target.value;\n    this.setState({ dayOfWeek });\n    this.newSchedule = {\n      day_of_week: dayOfWeek ? WEEKDAYS_FULL[WEEKDAYS_SHORT.indexOf(dayOfWeek)] : null,\n    };\n  };\n\n  setUntilToggle = e => {\n    const date = e.target.value ? moment().format(DATE_FORMAT) : null;\n    this.setScheduleUntil(null, date);\n  };\n\n  save() {\n    const { newSchedule } = this.state;\n    const hasChanged = () => {\n      const newCompact = omitBy(newSchedule, isNil);\n      const oldCompact = omitBy(this.props.schedule, isNil);\n      return !isEqual(newCompact, oldCompact);\n    };\n\n    // save if changed\n    if (hasChanged()) {\n      if (newSchedule.interval) {\n        this.props.dialog.close(clone(newSchedule));\n      } else {\n        this.props.dialog.close(null);\n      }\n    }\n    this.props.dialog.dismiss();\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const {\n      interval,\n      minute,\n      hour,\n      seconds,\n      newSchedule: { until },\n    } = this.state;\n\n    return (\n      <Modal {...dialog.props} title=\"Refresh Schedule\" className=\"schedule\" onOk={() => this.save()}>\n        <div className=\"schedule-component\">\n          <h5>Refresh every</h5>\n          <div data-testid=\"interval\">\n            <Select className=\"input\" value={seconds} onChange={this.setInterval} dropdownMatchSelectWidth={false}>\n              <Option value={null} key=\"never\">\n                Never\n              </Option>\n              {Object.keys(this.intervals).map(int => (\n                <OptGroup label={capitalize(pluralize(int))} key={int}>\n                  {this.intervals[int].map(([cnt, secs]) => (\n                    <Option value={secs} key={cnt}>\n                      {durationHumanize(secs)}\n                    </Option>\n                  ))}\n                </OptGroup>\n              ))}\n            </Select>\n          </div>\n        </div>\n        {[IntervalEnum.DAYS, IntervalEnum.WEEKS].indexOf(interval) !== -1 ? (\n          <div className=\"schedule-component\">\n            <h5>On time</h5>\n            <div data-testid=\"time\">\n              <TimeEditor\n                defaultValue={\n                  hour\n                    ? moment()\n                        .hour(hour)\n                        .minute(minute)\n                    : null\n                }\n                onChange={this.setTime}\n              />\n            </div>\n          </div>\n        ) : null}\n        {IntervalEnum.WEEKS === interval ? (\n          <div className=\"schedule-component\">\n            <h5>On day</h5>\n            <div data-testid=\"weekday\">\n              <Radio.Group size=\"medium\" defaultValue={this.state.dayOfWeek} onChange={this.setWeekday}>\n                {WEEKDAYS_SHORT.map(day => (\n                  <Radio.Button value={day} key={day} className=\"input\">\n                    {day[0]}\n                  </Radio.Button>\n                ))}\n              </Radio.Group>\n            </div>\n          </div>\n        ) : null}\n        {interval !== IntervalEnum.NEVER ? (\n          <div className=\"schedule-component\">\n            <h5>Ends</h5>\n            <div className=\"ends\" data-testid=\"ends\">\n              <Radio.Group size=\"medium\" value={!!until} onChange={this.setUntilToggle}>\n                <Radio value={false}>Never</Radio>\n                <Radio value>On</Radio>\n              </Radio.Group>\n              {until ? (\n                <DatePicker\n                  size=\"small\"\n                  className=\"datepicker\"\n                  value={moment(until)}\n                  allowClear={false}\n                  format={DATE_FORMAT}\n                  onChange={this.setScheduleUntil}\n                />\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ScheduleDialog);\n","import { isArray, intersection } from \"lodash\";\nimport { useCallback } from \"react\";\nimport ScheduleDialog from \"@/components/queries/ScheduleDialog\";\nimport { clientConfig } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport useQueryFlags from \"./useQueryFlags\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useEditScheduleDialog(query, onChange) {\n  // We won't use flags that depend on data source\n  const queryFlags = useQueryFlags(query);\n\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(() => {\n    if (!queryFlags.canEdit || !queryFlags.canSchedule) {\n      return;\n    }\n\n    const intervals = clientConfig.queryRefreshIntervals;\n    const allowedIntervals = policy.getQueryRefreshIntervals();\n    const refreshOptions = isArray(allowedIntervals) ? intersection(intervals, allowedIntervals) : intervals;\n\n    ScheduleDialog.showModal({\n      schedule: query.schedule,\n      refreshOptions,\n    }).onClose(schedule => {\n      recordEvent(\"edit_schedule\", \"query\", query.id);\n      updateQuery({ schedule });\n    });\n  }, [query.id, query.schedule, queryFlags.canEdit, queryFlags.canSchedule, updateQuery]);\n}\n","import { axios } from \"@/services/axios\";\n\nconst saveOrCreateUrl = data => (data.id ? `api/visualizations/${data.id}` : \"api/visualizations\");\n\nconst Visualization = {\n  save: data => axios.post(saveOrCreateUrl(data), data),\n  delete: data => axios.delete(`api/visualizations/${data.id}`),\n};\n\nexport default Visualization;\n","import { isEqual, extend, map, sortBy, findIndex, filter, pick, omit } from \"lodash\";\nimport React, { useState, useMemo, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Select from \"antd/lib/select\";\nimport Input from \"antd/lib/input\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport Filters, { filterData } from \"@/components/Filters\";\nimport notification from \"@/services/notification\";\nimport Visualization from \"@/services/visualization\";\nimport recordEvent from \"@/services/recordEvent\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport {\n  registeredVisualizations,\n  getDefaultVisualization,\n  newVisualization,\n  VisualizationType,\n} from \"@redash/viz/lib\";\nimport { Renderer, Editor } from \"@/components/visualizations/visualizationComponents\";\n\nimport \"./EditVisualizationDialog.less\";\n\nfunction updateQueryVisualizations(query, visualization) {\n  const index = findIndex(query.visualizations, v => v.id === visualization.id);\n  if (index > -1) {\n    query.visualizations[index] = visualization;\n  } else {\n    // new visualization\n    query.visualizations.push(visualization);\n  }\n  query.visualizations = [...query.visualizations]; // clone array\n}\n\nfunction saveVisualization(visualization) {\n  if (visualization.id) {\n    recordEvent(\"update\", \"visualization\", visualization.id, { type: visualization.type });\n  } else {\n    recordEvent(\"create\", \"visualization\", null, { type: visualization.type });\n  }\n\n  return Visualization.save(visualization)\n    .then(result => {\n      notification.success(\"Visualization saved\");\n      return result;\n    })\n    .catch(error => {\n      notification.error(\"Visualization could not be saved\");\n      return Promise.reject(error);\n    });\n}\n\nfunction confirmDialogClose(isDirty) {\n  return new Promise((resolve, reject) => {\n    if (isDirty) {\n      Modal.confirm({\n        title: \"Visualization Editor\",\n        content: \"Are you sure you want to close the editor without saving?\",\n        okText: \"Yes\",\n        cancelText: \"No\",\n        onOk: () => resolve(),\n        onCancel: () => reject(),\n      });\n    } else {\n      resolve();\n    }\n  });\n}\n\nfunction EditVisualizationDialog({ dialog, visualization, query, queryResult }) {\n  const errorHandlerRef = useRef();\n\n  const isNew = !visualization;\n\n  const data = useQueryResultData(queryResult);\n  const [filters, setFilters] = useState(data.filters);\n\n  const filteredData = useMemo(\n    () => ({\n      columns: data.columns,\n      rows: filterData(data.rows, filters),\n    }),\n    [data, filters]\n  );\n\n  const defaultState = useMemo(() => {\n    const config = visualization ? registeredVisualizations[visualization.type] : getDefaultVisualization();\n    const options = config.getOptions(isNew ? {} : visualization.options, data);\n    return {\n      type: config.type,\n      name: isNew ? config.name : visualization.name,\n      options,\n      originalOptions: options,\n    };\n  }, [data, isNew, visualization]);\n\n  const [type, setType] = useState(defaultState.type);\n  const [name, setName] = useState(defaultState.name);\n  const [nameChanged, setNameChanged] = useState(false);\n  const [options, setOptions] = useState(defaultState.options);\n\n  const [saveInProgress, setSaveInProgress] = useState(false);\n\n  useEffect(() => {\n    if (errorHandlerRef.current) {\n      errorHandlerRef.current.reset();\n    }\n  }, [data, options]);\n\n  function onTypeChanged(newType) {\n    setType(newType);\n\n    const config = registeredVisualizations[newType];\n    if (!nameChanged) {\n      setName(config.name);\n    }\n\n    setOptions(config.getOptions(isNew ? {} : visualization.options, data));\n  }\n\n  function onNameChanged(newName) {\n    setName(newName);\n    setNameChanged(newName !== name);\n  }\n\n  function onOptionsChanged(newOptions) {\n    const config = registeredVisualizations[type];\n    setOptions(config.getOptions(newOptions, data));\n  }\n\n  function save() {\n    setSaveInProgress(true);\n    let visualizationOptions = options;\n    if (type === \"TABLE\") {\n      visualizationOptions = omit(visualizationOptions, [\"paginationSize\"]);\n    }\n\n    const visualizationData = extend(newVisualization(type), visualization, {\n      name,\n      options: visualizationOptions,\n      query_id: query.id,\n    });\n    saveVisualization(visualizationData).then(savedVisualization => {\n      updateQueryVisualizations(query, savedVisualization);\n      dialog.close(savedVisualization);\n    });\n  }\n\n  function dismiss() {\n    const optionsChanged = !isEqual(options, defaultState.originalOptions);\n    confirmDialogClose(nameChanged || optionsChanged).then(dialog.dismiss);\n  }\n\n  // When editing existing visualization chart type selector is disabled, so add only existing visualization's\n  // descriptor there (to properly render the component). For new visualizations show all types except of deprecated\n  const availableVisualizations = isNew\n    ? filter(sortBy(registeredVisualizations, [\"name\"]), vis => !vis.isDeprecated)\n    : pick(registeredVisualizations, [type]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      wrapClassName=\"ant-modal-fullscreen\"\n      title=\"Visualization Editor\"\n      okText=\"Save\"\n      okButtonProps={{\n        loading: saveInProgress,\n        disabled: saveInProgress,\n      }}\n      onOk={save}\n      onCancel={dismiss}\n      wrapProps={{ \"data-test\": \"EditVisualizationDialog\" }}>\n      <div className=\"edit-visualization-dialog\">\n        <div className=\"visualization-settings\">\n          <div className=\"m-b-15\">\n            <label htmlFor=\"visualization-type\">Visualization Type</label>\n            <Select\n              data-test=\"VisualizationType\"\n              id=\"visualization-type\"\n              className=\"w-100\"\n              disabled={!isNew}\n              value={type}\n              onChange={onTypeChanged}>\n              {map(availableVisualizations, vis => (\n                <Select.Option key={vis.type} data-test={\"VisualizationType.\" + vis.type}>\n                  {vis.name}\n                </Select.Option>\n              ))}\n            </Select>\n          </div>\n          <div className=\"m-b-15\">\n            <label htmlFor=\"visualization-name\">Visualization Name</label>\n            <Input\n              data-test=\"VisualizationName\"\n              id=\"visualization-name\"\n              className=\"w-100\"\n              value={name}\n              onChange={event => onNameChanged(event.target.value)}\n            />\n          </div>\n          <div data-test=\"VisualizationEditor\">\n            <Editor\n              type={type}\n              data={data}\n              options={options}\n              visualizationName={name}\n              onOptionsChange={onOptionsChanged}\n            />\n          </div>\n        </div>\n        <div className=\"visualization-preview\">\n          <label htmlFor=\"visualization-preview\" className=\"invisible hidden-xs\">\n            Preview\n          </label>\n          <Filters filters={filters} onChange={setFilters} />\n          <div className=\"scrollbox\" data-test=\"VisualizationPreview\">\n            <Renderer\n              type={type}\n              data={filteredData}\n              options={options}\n              visualizationName={name}\n              onOptionsChange={onOptionsChanged}\n            />\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nEditVisualizationDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  visualization: VisualizationType,\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nEditVisualizationDialog.defaultProps = {\n  visualization: null,\n};\n\nexport default wrapDialog(EditVisualizationDialog);\n","import { isFunction, extend, filter, find } from \"lodash\";\nimport { useCallback, useRef } from \"react\";\nimport EditVisualizationDialog from \"@/components/visualizations/EditVisualizationDialog\";\n\nexport default function useEditVisualizationDialog(query, queryResult, onChange) {\n  const onChangeRef = useRef();\n  onChangeRef.current = isFunction(onChange) ? onChange : () => {};\n\n  return useCallback(\n    (visualizationId = null) => {\n      const visualization = find(query.visualizations, { id: visualizationId }) || null;\n      EditVisualizationDialog.showModal({\n        query,\n        visualization,\n        queryResult,\n      }).onClose(updatedVisualization => {\n        const filteredVisualizations = filter(query.visualizations, v => v.id !== updatedVisualization.id);\n        onChangeRef.current(\n          extend(query.clone(), { visualizations: [...filteredVisualizations, updatedVisualization] }),\n          updatedVisualization\n        );\n      });\n    },\n    [query, queryResult]\n  );\n}\n","import { extend, filter, isFunction } from \"lodash\";\nimport { useRef, useCallback } from \"react\";\nimport Visualization from \"@/services/visualization\";\nimport notification from \"@/services/notification\";\n\nexport default function useDeleteVisualization(query, onChange) {\n  const onChangeRef = useRef();\n  onChangeRef.current = isFunction(onChange) ? onChange : () => {};\n\n  return useCallback(\n    visualizationId =>\n      Visualization.delete({ id: visualizationId })\n        .then(() => {\n          const filteredVisualizations = filter(query.visualizations, v => v.id !== visualizationId);\n          onChangeRef.current(extend(query.clone(), { visualizations: filteredVisualizations }));\n        })\n        .catch(() => {\n          notification.error(\"Error deleting visualization.\", \"Maybe it's used in a dashboard?\");\n        }),\n    [query]\n  );\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useUpdateQueryDescription(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(\n    description => {\n      recordEvent(\"edit_description\", \"query\", query.id);\n      updateQuery({ description });\n    },\n    [query.id, updateQuery]\n  );\n}\n","import { isEmpty, find, map, extend, includes } from \"lodash\";\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport useMedia from \"use-media\";\nimport Button from \"antd/lib/button\";\nimport Select from \"antd/lib/select\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Resizable from \"@/components/Resizable\";\nimport Parameters from \"@/components/Parameters\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport QueryEditor from \"@/components/queries/QueryEditor\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { ExecutionStatus } from \"@/services/query-result\";\n\nimport QueryPageHeader from \"./components/QueryPageHeader\";\nimport QueryMetadata from \"./components/QueryMetadata\";\nimport QueryVisualizationTabs from \"./components/QueryVisualizationTabs\";\nimport QueryExecutionStatus from \"./components/QueryExecutionStatus\";\nimport SchemaBrowser from \"./components/SchemaBrowser\";\nimport QuerySourceAlerts from \"./components/QuerySourceAlerts\";\nimport wrapQueryPage from \"./components/wrapQueryPage\";\nimport QueryExecutionMetadata from \"./components/QueryExecutionMetadata\";\n\nimport useQuery from \"./hooks/useQuery\";\nimport useVisualizationTabHandler from \"./hooks/useVisualizationTabHandler\";\nimport useAutocompleteFlags from \"./hooks/useAutocompleteFlags\";\nimport useQueryExecute from \"./hooks/useQueryExecute\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport useQueryDataSources from \"./hooks/useQueryDataSources\";\nimport useDataSourceSchema from \"./hooks/useDataSourceSchema\";\nimport useQueryFlags from \"./hooks/useQueryFlags\";\nimport useQueryParameters from \"./hooks/useQueryParameters\";\nimport useAddNewParameterDialog from \"./hooks/useAddNewParameterDialog\";\nimport useEditScheduleDialog from \"./hooks/useEditScheduleDialog\";\nimport useAddVisualizationDialog from \"./hooks/useAddVisualizationDialog\";\nimport useEditVisualizationDialog from \"./hooks/useEditVisualizationDialog\";\nimport useDeleteVisualization from \"./hooks/useDeleteVisualization\";\nimport useFormatQuery from \"./hooks/useFormatQuery\";\nimport useUpdateQuery from \"./hooks/useUpdateQuery\";\nimport useUpdateQueryDescription from \"./hooks/useUpdateQueryDescription\";\nimport useUnsavedChangesAlert from \"./hooks/useUnsavedChangesAlert\";\n\nimport \"./QuerySource.less\";\n\nfunction chooseDataSourceId(dataSourceIds, availableDataSources) {\n  dataSourceIds = map(dataSourceIds, v => parseInt(v, 10));\n  availableDataSources = map(availableDataSources, ds => ds.id);\n  return find(dataSourceIds, id => includes(availableDataSources, id)) || null;\n}\n\nfunction QuerySource(props) {\n  const { query, setQuery, isDirty, saveQuery } = useQuery(props.query);\n  const { dataSourcesLoaded, dataSources, dataSource } = useQueryDataSources(query);\n  const [schema, refreshSchema] = useDataSourceSchema(dataSource);\n  const queryFlags = useQueryFlags(query, dataSource);\n  const [parameters, areParametersDirty, updateParametersDirtyFlag] = useQueryParameters(query);\n  const [selectedVisualization, setSelectedVisualization] = useVisualizationTabHandler(query.visualizations);\n  const isMobile = !useMedia({ minWidth: 768 });\n\n  useUnsavedChangesAlert(isDirty);\n\n  const {\n    queryResult,\n    isExecuting: isQueryExecuting,\n    executionStatus,\n    executeQuery,\n    error: executionError,\n    cancelCallback: cancelExecution,\n    isCancelling: isExecutionCancelling,\n    updatedAt,\n    loadedInitialResults,\n  } = useQueryExecute(query);\n\n  const queryResultData = useQueryResultData(queryResult);\n\n  const editorRef = useRef(null);\n  const [autocompleteAvailable, autocompleteEnabled, toggleAutocomplete] = useAutocompleteFlags(schema);\n\n  const [handleQueryEditorChange] = useDebouncedCallback(queryText => {\n    setQuery(extend(query.clone(), { query: queryText }));\n  }, 100);\n\n  useEffect(() => {\n    // TODO: ignore new pages?\n    recordEvent(\"view_source\", \"query\", query.id);\n  }, [query.id]);\n\n  useEffect(() => {\n    document.title = query.name;\n  }, [query.name]);\n\n  const updateQuery = useUpdateQuery(query, setQuery);\n  const updateQueryDescription = useUpdateQueryDescription(query, setQuery);\n  const formatQuery = useFormatQuery(query, dataSource ? dataSource.syntax : null, setQuery);\n\n  const handleDataSourceChange = useCallback(\n    dataSourceId => {\n      if (dataSourceId) {\n        try {\n          localStorage.setItem(\"lastSelectedDataSourceId\", dataSourceId);\n        } catch (e) {\n          // `localStorage.setItem` may throw exception if there are no enough space - in this case it could be ignored\n        }\n      }\n      if (query.data_source_id !== dataSourceId) {\n        recordEvent(\"update_data_source\", \"query\", query.id, { dataSourceId });\n        const updates = {\n          data_source_id: dataSourceId,\n          latest_query_data_id: null,\n          latest_query_data: null,\n        };\n        setQuery(extend(query.clone(), updates));\n        updateQuery(updates, { successMessage: null }); // show message only on error\n      }\n    },\n    [query, setQuery, updateQuery]\n  );\n\n  useEffect(() => {\n    // choose data source id for new queries\n    if (dataSourcesLoaded && queryFlags.isNew) {\n      const firstDataSourceId = dataSources.length > 0 ? dataSources[0].id : null;\n      handleDataSourceChange(\n        chooseDataSourceId(\n          [query.data_source_id, localStorage.getItem(\"lastSelectedDataSourceId\"), firstDataSourceId],\n          dataSources\n        )\n      );\n    }\n  }, [query.data_source_id, queryFlags.isNew, dataSourcesLoaded, dataSources, handleDataSourceChange]);\n\n  const editSchedule = useEditScheduleDialog(query, setQuery);\n  const openAddNewParameterDialog = useAddNewParameterDialog(query, (newQuery, param) => {\n    if (editorRef.current) {\n      editorRef.current.paste(param.toQueryTextFragment());\n      editorRef.current.focus();\n    }\n    setQuery(newQuery);\n  });\n\n  const handleSchemaItemSelect = useCallback(schemaItem => {\n    if (editorRef.current) {\n      editorRef.current.paste(schemaItem);\n    }\n  }, []);\n\n  const [selectedText, setSelectedText] = useState(null);\n\n  const doExecuteQuery = useCallback(\n    (skipParametersDirtyFlag = false) => {\n      if (!queryFlags.canExecute || (!skipParametersDirtyFlag && (areParametersDirty || isQueryExecuting))) {\n        return;\n      }\n      if (isDirty || !isEmpty(selectedText)) {\n        executeQuery(null, () => {\n          return query.getQueryResultByText(0, selectedText);\n        });\n      } else {\n        executeQuery();\n      }\n    },\n    [query, queryFlags.canExecute, areParametersDirty, isQueryExecuting, isDirty, selectedText, executeQuery]\n  );\n\n  const [isQuerySaving, setIsQuerySaving] = useState(false);\n\n  const doSaveQuery = useCallback(() => {\n    if (!isQuerySaving) {\n      setIsQuerySaving(true);\n      saveQuery().finally(() => setIsQuerySaving(false));\n    }\n  }, [isQuerySaving, saveQuery]);\n\n  const addVisualization = useAddVisualizationDialog(query, queryResult, doSaveQuery, (newQuery, visualization) => {\n    setQuery(newQuery);\n    setSelectedVisualization(visualization.id);\n  });\n  const editVisualization = useEditVisualizationDialog(query, queryResult, newQuery => setQuery(newQuery));\n  const deleteVisualization = useDeleteVisualization(query, setQuery);\n\n  return (\n    <div className={cx(\"query-page-wrapper\", { \"query-fixed-layout\": !isMobile })}>\n      <QuerySourceAlerts query={query} dataSourcesAvailable={!dataSourcesLoaded || dataSources.length > 0} />\n      <div className=\"container p-b-10\">\n        <QueryPageHeader\n          query={query}\n          dataSource={dataSource}\n          sourceMode\n          selectedVisualization={selectedVisualization}\n          onChange={setQuery}\n        />\n      </div>\n      <main className=\"query-fullscreen\">\n        <Resizable direction=\"horizontal\" sizeAttribute=\"flex-basis\" toggleShortcut=\"Alt+Shift+D, Alt+D\">\n          <nav>\n            {dataSourcesLoaded && (\n              <div className=\"editor__left__data-source\">\n                <Select\n                  className=\"w-100\"\n                  data-test=\"SelectDataSource\"\n                  placeholder=\"Choose data source...\"\n                  value={dataSource ? dataSource.id : undefined}\n                  disabled={!queryFlags.canEdit || !dataSourcesLoaded || dataSources.length === 0}\n                  loading={!dataSourcesLoaded}\n                  optionFilterProp=\"data-name\"\n                  showSearch\n                  onChange={handleDataSourceChange}>\n                  {map(dataSources, ds => (\n                    <Select.Option\n                      key={`ds-${ds.id}`}\n                      value={ds.id}\n                      data-name={ds.name}\n                      data-test={`SelectDataSource${ds.id}`}>\n                      <img src={`/static/images/db-logos/${ds.type}.png`} width=\"20\" alt={ds.name} />\n                      <span>{ds.name}</span>\n                    </Select.Option>\n                  ))}\n                </Select>\n              </div>\n            )}\n            <div className=\"editor__left__schema\">\n              <SchemaBrowser\n                schema={schema}\n                onRefresh={() => refreshSchema(true)}\n                onItemSelect={handleSchemaItemSelect}\n              />\n            </div>\n\n            {!query.isNew() && (\n              <div className=\"query-page-query-description\">\n                <EditInPlace\n                  isEditable={queryFlags.canEdit}\n                  markdown\n                  ignoreBlanks={false}\n                  placeholder=\"Add description\"\n                  value={query.description}\n                  onDone={updateQueryDescription}\n                  multiline\n                />\n              </div>\n            )}\n\n            {!query.isNew() && <QueryMetadata layout=\"table\" query={query} onEditSchedule={editSchedule} />}\n          </nav>\n        </Resizable>\n\n        <div className=\"content\">\n          <div className=\"flex-fill p-relative\">\n            <div\n              className=\"p-absolute d-flex flex-column p-l-15 p-r-15\"\n              style={{ left: 0, top: 0, right: 0, bottom: 0, overflow: \"auto\" }}>\n              <Resizable direction=\"vertical\" sizeAttribute=\"flex-basis\">\n                <div className=\"row editor\">\n                  <section className=\"query-editor-wrapper\" data-test=\"QueryEditor\">\n                    <QueryEditor\n                      ref={editorRef}\n                      data-executing={isQueryExecuting ? \"true\" : null}\n                      syntax={dataSource ? dataSource.syntax : null}\n                      value={query.query}\n                      schema={schema}\n                      autocompleteEnabled={autocompleteAvailable && autocompleteEnabled}\n                      onChange={handleQueryEditorChange}\n                      onSelectionChange={setSelectedText}\n                    />\n\n                    <QueryEditor.Controls\n                      addParameterButtonProps={{\n                        title: \"Add New Parameter\",\n                        shortcut: \"mod+p\",\n                        onClick: openAddNewParameterDialog,\n                      }}\n                      formatButtonProps={{\n                        title: \"Format Query\",\n                        shortcut: \"mod+shift+f\",\n                        onClick: formatQuery,\n                      }}\n                      saveButtonProps={\n                        queryFlags.canEdit && {\n                          text: (\n                            <React.Fragment>\n                              <span className=\"hidden-xs\">Save</span>\n                              {isDirty && !isQuerySaving ? \"*\" : null}\n                            </React.Fragment>\n                          ),\n                          shortcut: \"mod+s\",\n                          onClick: doSaveQuery,\n                          loading: isQuerySaving,\n                        }\n                      }\n                      executeButtonProps={{\n                        disabled: !queryFlags.canExecute || isQueryExecuting || areParametersDirty,\n                        shortcut: \"mod+enter, alt+enter, ctrl+enter\",\n                        onClick: doExecuteQuery,\n                        text: (\n                          <span className=\"hidden-xs\">{selectedText === null ? \"Execute\" : \"Execute Selected\"}</span>\n                        ),\n                      }}\n                      autocompleteToggleProps={{\n                        available: autocompleteAvailable,\n                        enabled: autocompleteEnabled,\n                        onToggle: toggleAutocomplete,\n                      }}\n                      dataSourceSelectorProps={\n                        dataSource\n                          ? {\n                              disabled: !queryFlags.canEdit,\n                              value: dataSource.id,\n                              onChange: handleDataSourceChange,\n                              options: map(dataSources, ds => ({ value: ds.id, label: ds.name })),\n                            }\n                          : false\n                      }\n                    />\n                  </section>\n                </div>\n              </Resizable>\n\n              {!queryFlags.isNew && <QueryMetadata layout=\"horizontal\" query={query} onEditSchedule={editSchedule} />}\n\n              <section className=\"query-results-wrapper\">\n                {query.hasParameters() && (\n                  <div className=\"query-parameters-wrapper\">\n                    <Parameters\n                      editable={queryFlags.canEdit}\n                      disableUrlUpdate={queryFlags.isNew}\n                      parameters={parameters}\n                      onPendingValuesChange={() => updateParametersDirtyFlag()}\n                      onValuesChange={() => {\n                        updateParametersDirtyFlag(false);\n                        doExecuteQuery(true);\n                      }}\n                      onParametersEdit={() => {\n                        // save if query clean\n                        // https://discuss.redash.io/t/query-unsaved-changes-indication/3302/5\n                        if (!isDirty) {\n                          saveQuery();\n                        }\n                      }}\n                    />\n                  </div>\n                )}\n                {(executionError || isQueryExecuting) && (\n                  <div className=\"query-alerts\">\n                    <QueryExecutionStatus\n                      status={executionStatus}\n                      updatedAt={updatedAt}\n                      error={executionError}\n                      isCancelling={isExecutionCancelling}\n                      onCancel={cancelExecution}\n                    />\n                  </div>\n                )}\n\n                <React.Fragment>\n                  {queryResultData.log.length > 0 && (\n                    <div className=\"query-results-log\">\n                      <p>Log Information:</p>\n                      {map(queryResultData.log, (line, index) => (\n                        <p key={`log-line-${index}`} className=\"query-log-line\">\n                          {line}\n                        </p>\n                      ))}\n                    </div>\n                  )}\n                  {loadedInitialResults && !(queryFlags.isNew && !queryResult) && (\n                    <QueryVisualizationTabs\n                      queryResult={queryResult}\n                      visualizations={query.visualizations}\n                      showNewVisualizationButton={queryFlags.canEdit && queryResultData.status === ExecutionStatus.DONE}\n                      canDeleteVisualizations={queryFlags.canEdit}\n                      selectedTab={selectedVisualization}\n                      onChangeTab={setSelectedVisualization}\n                      onAddVisualization={addVisualization}\n                      onDeleteVisualization={deleteVisualization}\n                      refreshButton={\n                        <Button\n                          type=\"primary\"\n                          disabled={!queryFlags.canExecute || areParametersDirty}\n                          loading={isQueryExecuting}\n                          onClick={doExecuteQuery}>\n                          {!isQueryExecuting && <i className=\"zmdi zmdi-refresh m-r-5\" aria-hidden=\"true\" />}\n                          Refresh Now\n                        </Button>\n                      }\n                    />\n                  )}\n                </React.Fragment>\n              </section>\n            </div>\n          </div>\n          {queryResult && !queryResult.getError() && (\n            <div className=\"bottom-controller-container\">\n              <QueryExecutionMetadata\n                query={query}\n                queryResult={queryResult}\n                selectedVisualization={selectedVisualization}\n                isQueryExecuting={isQueryExecuting}\n                showEditVisualizationButton={!queryFlags.isNew && queryFlags.canEdit}\n                onEditVisualization={editVisualization}\n              />\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nQuerySource.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nconst QuerySourcePage = wrapQueryPage(QuerySource);\n\nexport default [\n  routeWithUserSession({\n    path: \"/queries/new\",\n    render: pageProps => <QuerySourcePage {...pageProps} />,\n    bodyClass: \"fixed-layout\",\n  }),\n  routeWithUserSession({\n    path: \"/queries/:queryId([0-9]+)/source\",\n    render: pageProps => <QuerySourcePage {...pageProps} />,\n    bodyClass: \"fixed-layout\",\n  }),\n];\n","import { useState, useMemo } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\n\nexport default function useQuery(originalQuery) {\n  const [query, setQuery] = useState(originalQuery);\n  const [originalQuerySource, setOriginalQuerySource] = useState(originalQuery.query);\n\n  const updateQuery = useUpdateQuery(query, updatedQuery => {\n    // It's important to update URL first, and only then update state\n    if (updatedQuery.id !== query.id) {\n      // Don't reload page when saving new query\n      navigateTo(updatedQuery.getUrl(true), true);\n    }\n    setQuery(updatedQuery);\n    setOriginalQuerySource(updatedQuery.query);\n  });\n\n  return useMemo(\n    () => ({\n      query,\n      setQuery,\n      isDirty: query.query !== originalQuerySource,\n      saveQuery: () => updateQuery(),\n    }),\n    [query, originalQuerySource, updateQuery]\n  );\n}\n","import { useRef, useEffect } from \"react\";\nimport location from \"@/services/location\";\n\nexport default function useUnsavedChangesAlert(shouldShowAlert = false) {\n  const shouldShowAlertRef = useRef();\n  shouldShowAlertRef.current = shouldShowAlert;\n\n  useEffect(() => {\n    const unloadMessage = \"You will lose your changes if you leave\";\n    const confirmMessage = `${unloadMessage}\\n\\nAre you sure you want to leave this page?`;\n    // store original handler (if any)\n    const savedOnBeforeUnload = window.onbeforeunload;\n\n    window.onbeforeunload = function onbeforeunload() {\n      return shouldShowAlertRef.current ? unloadMessage : undefined;\n    };\n\n    const unsubscribe = location.confirmChange((nextLocation, currentLocation) => {\n      if (shouldShowAlertRef.current && nextLocation.path !== currentLocation.path) {\n        return confirmMessage;\n      }\n    });\n\n    return () => {\n      window.onbeforeunload = savedOnBeforeUnload;\n      unsubscribe();\n    };\n  }, []);\n}\n","import { useCallback, useMemo, useState } from \"react\";\nimport localOptions from \"@/lib/localOptions\";\n\nexport default function useAutocompleteFlags(schema) {\n  const isAvailable = useMemo(() => schema.tokensCount <= 5000, [schema]);\n  const [isEnabled, setIsEnabled] = useState(localOptions.get(\"liveAutocomplete\", true));\n\n  const toggleAutocomplete = useCallback(state => {\n    setIsEnabled(state);\n    localOptions.set(\"liveAutocomplete\", state);\n  }, []);\n\n  return useMemo(() => [isAvailable, isEnabled, toggleAutocomplete], [isAvailable, isEnabled, toggleAutocomplete]);\n}\n","import { isFunction, extend, get } from \"lodash\";\nimport { useCallback, useRef } from \"react\";\nimport { Query } from \"@/services/query\";\nimport notification from \"@/services/notification\";\n\nexport default function useFormatQuery(query, syntax, onChange) {\n  const onChangeRef = useRef();\n  onChangeRef.current = isFunction(onChange) ? onChange : () => {};\n\n  return useCallback(() => {\n    Query.format(syntax || \"sql\", query.query)\n      .then(queryText => {\n        onChangeRef.current(extend(query.clone(), { query: queryText }));\n      })\n      .catch(error =>\n        notification.error(get(error, \"response.data.message\", \"Failed to format query: unknown error.\"))\n      );\n  }, [query, syntax]);\n}\n","import { isFunction, map } from \"lodash\";\nimport { useCallback, useRef } from \"react\";\nimport EditParameterSettingsDialog from \"@/components/EditParameterSettingsDialog\";\n\nexport default function useAddNewParameterDialog(query, onParameterAdded) {\n  const onParameterAddedRef = useRef();\n  onParameterAddedRef.current = isFunction(onParameterAdded) ? onParameterAdded : () => {};\n\n  return useCallback(() => {\n    EditParameterSettingsDialog.showModal({\n      parameter: {\n        title: null,\n        name: \"\",\n        type: \"text\",\n        value: null,\n      },\n      existingParams: map(query.getParameters().get(), p => p.name),\n    }).onClose(param => {\n      const newQuery = query.clone();\n      param = newQuery.getParameters().add(param);\n      onParameterAddedRef.current(newQuery, param);\n    });\n  }, [query]);\n}\n","import { useState, useCallback, useEffect } from \"react\";\nimport useQueryFlags from \"./useQueryFlags\";\nimport useEditVisualizationDialog from \"./useEditVisualizationDialog\";\n\nexport default function useAddVisualizationDialog(query, queryResult, saveQuery, onChange) {\n  const queryFlags = useQueryFlags(query);\n  const editVisualization = useEditVisualizationDialog(query, queryResult, onChange);\n  const [shouldOpenDialog, setShouldOpenDialog] = useState(false);\n\n  useEffect(() => {\n    if (!queryFlags.isNew && shouldOpenDialog) {\n      setShouldOpenDialog(false);\n      editVisualization();\n    }\n  }, [queryFlags.isNew, shouldOpenDialog, editVisualization]);\n\n  return useCallback(() => {\n    if (queryFlags.isNew) {\n      setShouldOpenDialog(true);\n      saveQuery();\n    } else {\n      editVisualization();\n    }\n  }, [queryFlags.isNew, saveQuery, editVisualization]);\n}\n","import React, { useState, useMemo, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport KeyboardShortcuts from \"@/services/KeyboardShortcuts\";\nimport { ButtonTooltip } from \"@/components/queries/QueryEditor/QueryEditorControls\";\n\nexport default function QueryViewButton({ title, shortcut, disabled, children, onClick, ...props }) {\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n\n  const eventHandlers = useMemo(\n    () => ({\n      onMouseEnter: () => setTooltipVisible(true),\n      onMouseLeave: () => setTooltipVisible(false),\n    }),\n    []\n  );\n\n  useEffect(() => {\n    if (disabled) {\n      setTooltipVisible(false);\n    }\n  }, [disabled]);\n\n  useEffect(() => {\n    if (shortcut) {\n      const shortcuts = {\n        [shortcut]: onClick,\n      };\n\n      KeyboardShortcuts.bind(shortcuts);\n      return () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      };\n    }\n  }, [shortcut, onClick]);\n\n  return (\n    <ButtonTooltip title={title} shortcut={shortcut} visible={tooltipVisible}>\n      <span {...eventHandlers}>\n        <Button\n          data-test=\"ExecuteButton\"\n          disabled={disabled}\n          onClick={onClick}\n          style={disabled ? { pointerEvents: \"none\" } : {}}\n          {...props}>\n          {children}\n        </Button>\n      </span>\n    </ButtonTooltip>\n  );\n}\n\nQueryViewButton.propTypes = {\n  className: PropTypes.string,\n  shortcut: PropTypes.string,\n  disabled: PropTypes.bool,\n  children: PropTypes.node,\n  onClick: PropTypes.func,\n};\n\nQueryViewButton.defaultProps = {\n  className: null,\n  shortcut: null,\n  disabled: false,\n  children: null,\n  onClick: () => {},\n};\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport useMedia from \"use-media\";\nimport Button from \"antd/lib/button\";\nimport Icon from \"antd/lib/icon\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport Parameters from \"@/components/Parameters\";\n\nimport { ExecutionStatus } from \"@/services/query-result\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\n\nimport QueryPageHeader from \"./components/QueryPageHeader\";\nimport QueryVisualizationTabs from \"./components/QueryVisualizationTabs\";\nimport QueryExecutionStatus from \"./components/QueryExecutionStatus\";\nimport QueryMetadata from \"./components/QueryMetadata\";\nimport wrapQueryPage from \"./components/wrapQueryPage\";\nimport QueryViewButton from \"./components/QueryViewButton\";\nimport QueryExecutionMetadata from \"./components/QueryExecutionMetadata\";\n\nimport useVisualizationTabHandler from \"./hooks/useVisualizationTabHandler\";\nimport useQueryExecute from \"./hooks/useQueryExecute\";\nimport useQueryDataSources from \"./hooks/useQueryDataSources\";\nimport useUpdateQueryDescription from \"./hooks/useUpdateQueryDescription\";\nimport useQueryFlags from \"./hooks/useQueryFlags\";\nimport useQueryParameters from \"./hooks/useQueryParameters\";\nimport useEditScheduleDialog from \"./hooks/useEditScheduleDialog\";\nimport useEditVisualizationDialog from \"./hooks/useEditVisualizationDialog\";\nimport useDeleteVisualization from \"./hooks/useDeleteVisualization\";\nimport useFullscreenHandler from \"../../lib/hooks/useFullscreenHandler\";\n\nimport \"./QueryView.less\";\n\nfunction QueryView(props) {\n  const [query, setQuery] = useState(props.query);\n  const { dataSource } = useQueryDataSources(query);\n  const queryFlags = useQueryFlags(query, dataSource);\n  const [parameters, areParametersDirty, updateParametersDirtyFlag] = useQueryParameters(query);\n  const [selectedVisualization, setSelectedVisualization] = useVisualizationTabHandler(query.visualizations);\n  const isDesktop = useMedia({ minWidth: 768 });\n  const isFixedLayout = useMedia({ minHeight: 500 }) && isDesktop;\n  const [fullscreen, toggleFullscreen] = useFullscreenHandler(isDesktop);\n  const [addingDescription, setAddingDescription] = useState(false);\n\n  const {\n    queryResult,\n    loadedInitialResults,\n    isExecuting,\n    executionStatus,\n    executeQuery,\n    error: executionError,\n    cancelCallback: cancelExecution,\n    isCancelling: isExecutionCancelling,\n    updatedAt,\n  } = useQueryExecute(query);\n\n  const queryResultData = useQueryResultData(queryResult);\n\n  const updateQueryDescription = useUpdateQueryDescription(query, setQuery);\n  const editSchedule = useEditScheduleDialog(query, setQuery);\n  const addVisualization = useEditVisualizationDialog(query, queryResult, (newQuery, visualization) => {\n    setQuery(newQuery);\n    setSelectedVisualization(visualization.id);\n  });\n  const editVisualization = useEditVisualizationDialog(query, queryResult, newQuery => setQuery(newQuery));\n  const deleteVisualization = useDeleteVisualization(query, setQuery);\n\n  const doExecuteQuery = useCallback(\n    (skipParametersDirtyFlag = false) => {\n      if (!queryFlags.canExecute || (!skipParametersDirtyFlag && (areParametersDirty || isExecuting))) {\n        return;\n      }\n      executeQuery();\n    },\n    [areParametersDirty, executeQuery, isExecuting, queryFlags.canExecute]\n  );\n\n  useEffect(() => {\n    document.title = query.name;\n  }, [query.name]);\n\n  return (\n    <div\n      className={cx(\"query-page-wrapper\", {\n        \"query-view-fullscreen\": fullscreen,\n        \"query-fixed-layout\": isFixedLayout,\n      })}>\n      <div className=\"container\">\n        <QueryPageHeader\n          query={query}\n          dataSource={dataSource}\n          onChange={setQuery}\n          selectedVisualization={selectedVisualization}\n          headerExtra={\n            <QueryViewButton\n              className=\"m-r-5\"\n              type=\"primary\"\n              shortcut=\"mod+enter, alt+enter, ctrl+enter\"\n              disabled={!queryFlags.canExecute || isExecuting || areParametersDirty}\n              onClick={doExecuteQuery}>\n              Refresh\n            </QueryViewButton>\n          }\n          tagsExtra={\n            !query.description &&\n            queryFlags.canEdit &&\n            !addingDescription &&\n            !fullscreen && (\n              <a className=\"label label-tag hidden-xs\" role=\"none\" onClick={() => setAddingDescription(true)}>\n                <i className=\"zmdi zmdi-plus m-r-5\" />\n                Add description\n              </a>\n            )\n          }\n        />\n        {(query.description || addingDescription) && (\n          <div className={cx(\"m-t-5\", { hidden: fullscreen })}>\n            <EditInPlace\n              className=\"w-100\"\n              value={query.description}\n              isEditable={queryFlags.canEdit}\n              onDone={updateQueryDescription}\n              onStopEditing={() => setAddingDescription(false)}\n              placeholder=\"Add description\"\n              ignoreBlanks={false}\n              editorProps={{ autosize: { minRows: 2, maxRows: 4 } }}\n              defaultEditing={addingDescription}\n              multiline\n            />\n          </div>\n        )}\n      </div>\n      <div className=\"query-view-content\">\n        {query.hasParameters() && (\n          <div className={cx(\"bg-white tiled p-15 m-t-15 m-l-15 m-r-15\", { hidden: fullscreen })}>\n            <Parameters\n              parameters={parameters}\n              onValuesChange={() => {\n                updateParametersDirtyFlag(false);\n                doExecuteQuery(true);\n              }}\n              onPendingValuesChange={() => updateParametersDirtyFlag()}\n            />\n          </div>\n        )}\n        <div className=\"query-results m-t-15\">\n          {loadedInitialResults && (\n            <QueryVisualizationTabs\n              queryResult={queryResult}\n              visualizations={query.visualizations}\n              showNewVisualizationButton={queryFlags.canEdit && queryResultData.status === ExecutionStatus.DONE}\n              canDeleteVisualizations={queryFlags.canEdit}\n              selectedTab={selectedVisualization}\n              onChangeTab={setSelectedVisualization}\n              onAddVisualization={addVisualization}\n              onDeleteVisualization={deleteVisualization}\n              refreshButton={\n                <Button\n                  type=\"primary\"\n                  disabled={!queryFlags.canExecute || areParametersDirty}\n                  loading={isExecuting}\n                  onClick={doExecuteQuery}>\n                  {!isExecuting && <i className=\"zmdi zmdi-refresh m-r-5\" aria-hidden=\"true\" />}\n                  Refresh Now\n                </Button>\n              }\n            />\n          )}\n          <div className=\"query-results-footer\">\n            {queryResult && !queryResult.getError() && (\n              <QueryExecutionMetadata\n                query={query}\n                queryResult={queryResult}\n                selectedVisualization={selectedVisualization}\n                isQueryExecuting={isExecuting}\n                showEditVisualizationButton={queryFlags.canEdit}\n                onEditVisualization={editVisualization}\n                extraActions={\n                  <QueryViewButton\n                    className=\"icon-button m-r-5 hidden-xs\"\n                    title=\"Toggle Fullscreen\"\n                    type=\"default\"\n                    shortcut=\"alt+f\"\n                    onClick={toggleFullscreen}>\n                    <Icon type={fullscreen ? \"fullscreen-exit\" : \"fullscreen\"} />\n                  </QueryViewButton>\n                }\n              />\n            )}\n            {(executionError || isExecuting) && (\n              <div className=\"query-execution-status\">\n                <QueryExecutionStatus\n                  status={executionStatus}\n                  error={executionError}\n                  isCancelling={isExecutionCancelling}\n                  onCancel={cancelExecution}\n                  updatedAt={updatedAt}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        <div className={cx(\"p-t-15 p-r-15 p-l-15\", { hidden: fullscreen })}>\n          <QueryMetadata layout=\"horizontal\" query={query} dataSource={dataSource} onEditSchedule={editSchedule} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nQueryView.propTypes = { query: PropTypes.object.isRequired }; // eslint-disable-line react/forbid-prop-types\n\nconst QueryViewPage = wrapQueryPage(QueryView);\n\nexport default routeWithUserSession({\n  path: \"/queries/:queryId([0-9]+)\",\n  render: pageProps => <QueryViewPage {...pageProps} />,\n});\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { find, has } from \"lodash\";\nimport moment from \"moment\";\nimport { markdown } from \"markdown\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Icon from \"antd/lib/icon\";\nimport Menu from \"antd/lib/menu\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport HtmlContent from \"@redash/viz/lib/components/HtmlContent\";\nimport routeWithApiKeySession from \"@/components/ApplicationArea/routeWithApiKeySession\";\nimport { Query } from \"@/services/query\";\nimport location from \"@/services/location\";\nimport { formatDateTime } from \"@/lib/utils\";\nimport Parameters from \"@/components/Parameters\";\nimport { Moment } from \"@/components/proptypes\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport Timer from \"@/components/Timer\";\nimport QueryResultsLink from \"@/components/EditVisualizationButton/QueryResultsLink\";\nimport VisualizationName from \"@/components/visualizations/VisualizationName\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\nimport { VisualizationType } from \"@redash/viz/lib\";\nimport logoUrl from \"@/assets/images/redash_icon_small.png\";\n\nfunction VisualizationEmbedHeader({ queryName, queryDescription, visualization }) {\n  return (\n    <div className=\"embed-heading p-b-10 p-r-15 p-l-15\">\n      <h3>\n        <img src={logoUrl} alt=\"Redash Logo\" style={{ height: \"24px\", verticalAlign: \"text-bottom\" }} />\n        <VisualizationName visualization={visualization} /> {queryName}\n        {queryDescription && (\n          <small>\n            <HtmlContent className=\"markdown text-muted\">{markdown.toHTML(queryDescription || \"\")}</HtmlContent>\n          </small>\n        )}\n      </h3>\n    </div>\n  );\n}\n\nVisualizationEmbedHeader.propTypes = {\n  queryName: PropTypes.string.isRequired,\n  queryDescription: PropTypes.string,\n  visualization: VisualizationType.isRequired,\n};\n\nVisualizationEmbedHeader.defaultProps = { queryDescription: \"\" };\n\nfunction VisualizationEmbedFooter({\n  query,\n  queryResults,\n  updatedAt,\n  refreshStartedAt,\n  queryUrl,\n  hideTimestamp,\n  apiKey,\n}) {\n  const downloadMenu = (\n    <Menu>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"csv\"\n          query={query}\n          queryResult={queryResults}\n          apiKey={apiKey}\n          disabled={!queryResults || !queryResults.getData || !queryResults.getData()}\n          embed>\n          <Icon type=\"file\" /> Download as CSV File\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"tsv\"\n          query={query}\n          queryResult={queryResults}\n          apiKey={apiKey}\n          disabled={!queryResults || !queryResults.getData || !queryResults.getData()}\n          embed>\n          <Icon type=\"file\" /> Download as TSV File\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"xlsx\"\n          query={query}\n          queryResult={queryResults}\n          apiKey={apiKey}\n          disabled={!queryResults || !queryResults.getData || !queryResults.getData()}\n          embed>\n          <Icon type=\"file-excel\" /> Download as Excel File\n        </QueryResultsLink>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <div className=\"tile__bottom-control\">\n      {!hideTimestamp && (\n        <span>\n          <a className=\"small hidden-print\">\n            <i className=\"zmdi zmdi-time-restore\" />{\" \"}\n            {refreshStartedAt ? <Timer from={refreshStartedAt} /> : <TimeAgo date={updatedAt} />}\n          </a>\n          <span className=\"small visible-print\">\n            <i className=\"zmdi zmdi-time-restore\" /> {formatDateTime(updatedAt)}\n          </span>\n        </span>\n      )}\n      {queryUrl && (\n        <span className=\"hidden-print\">\n          <Tooltip title=\"Open in Redash\">\n            <Button className=\"icon-button\" href={queryUrl} target=\"_blank\">\n              <i className=\"fa fa-external-link\" />\n            </Button>\n          </Tooltip>\n          {!query.hasParameters() && (\n            <Dropdown overlay={downloadMenu} disabled={!queryResults} trigger={[\"click\"]} placement=\"topLeft\">\n              <Button loading={!queryResults && !!refreshStartedAt} className=\"m-l-5\">\n                Download Dataset\n                <i className=\"fa fa-caret-up m-l-5\" />\n              </Button>\n            </Dropdown>\n          )}\n        </span>\n      )}\n    </div>\n  );\n}\n\nVisualizationEmbedFooter.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResults: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  updatedAt: PropTypes.string,\n  refreshStartedAt: Moment,\n  queryUrl: PropTypes.string,\n  hideTimestamp: PropTypes.bool,\n  apiKey: PropTypes.string,\n};\n\nVisualizationEmbedFooter.defaultProps = {\n  queryResults: null,\n  updatedAt: null,\n  refreshStartedAt: null,\n  queryUrl: null,\n  hideTimestamp: false,\n  apiKey: null,\n};\n\nfunction VisualizationEmbed({ queryId, visualizationId, apiKey, onError }) {\n  const [query, setQuery] = useState(null);\n  const [error, setError] = useState(null);\n  const [refreshStartedAt, setRefreshStartedAt] = useState(null);\n  const [queryResults, setQueryResults] = useState(null);\n\n  const onErrorRef = useRef();\n  onErrorRef.current = onError;\n\n  useEffect(() => {\n    let isCancelled = false;\n    Query.get({ id: queryId })\n      .then(result => {\n        if (!isCancelled) {\n          setQuery(result);\n        }\n      })\n      .catch(error => onErrorRef.current(error));\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [queryId]);\n\n  const refreshQueryResults = useCallback(() => {\n    if (query) {\n      setError(null);\n      setRefreshStartedAt(moment());\n      query\n        .getQueryResultPromise()\n        .then(result => {\n          setQueryResults(result);\n        })\n        .catch(err => {\n          setError(err.getError());\n        })\n        .finally(() => setRefreshStartedAt(null));\n    }\n  }, [query]);\n\n  useEffect(() => {\n    document.querySelector(\"body\").classList.add(\"headless\");\n    refreshQueryResults();\n  }, [refreshQueryResults]);\n\n  if (!query) {\n    return null;\n  }\n\n  const hideHeader = has(location.search, \"hide_header\");\n  const hideParametersUI = has(location.search, \"hide_parameters\");\n  const hideQueryLink = has(location.search, \"hide_link\");\n  const hideTimestamp = has(location.search, \"hide_timestamp\");\n\n  const showQueryDescription = has(location.search, \"showDescription\");\n  visualizationId = parseInt(visualizationId, 10);\n  const visualization = find(query.visualizations, vis => vis.id === visualizationId);\n\n  if (!visualization) {\n    // call error handler async, otherwise it will destroy the component on render phase\n    setTimeout(() => {\n      onError(new Error(\"Visualization does not exist\"));\n    }, 10);\n    return null;\n  }\n\n  return (\n    <div className=\"tile m-l-10 m-r-10 p-t-10 embed__vis\" data-test=\"VisualizationEmbed\">\n      {!hideHeader && (\n        <VisualizationEmbedHeader\n          queryName={query.name}\n          queryDescription={showQueryDescription ? query.description : null}\n          visualization={visualization}\n        />\n      )}\n      <div className=\"col-md-12 query__vis\">\n        {!hideParametersUI && query.hasParameters() && (\n          <div className=\"p-t-15 p-b-10\">\n            <Parameters parameters={query.getParametersDefs()} onValuesChange={refreshQueryResults} />\n          </div>\n        )}\n        {error && <div className=\"alert alert-danger\" data-test=\"ErrorMessage\">{`Error: ${error}`}</div>}\n        {!error && queryResults && (\n          <VisualizationRenderer visualization={visualization} queryResult={queryResults} context=\"widget\" />\n        )}\n        {!queryResults && refreshStartedAt && (\n          <div className=\"d-flex justify-content-center\">\n            <div className=\"spinner\">\n              <i className=\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\" />\n            </div>\n          </div>\n        )}\n      </div>\n      <VisualizationEmbedFooter\n        query={query}\n        queryResults={queryResults}\n        updatedAt={queryResults ? queryResults.getUpdatedAt() : undefined}\n        refreshStartedAt={refreshStartedAt}\n        queryUrl={!hideQueryLink ? query.getUrl() : null}\n        hideTimestamp={hideTimestamp}\n        apiKey={apiKey}\n      />\n    </div>\n  );\n}\n\nVisualizationEmbed.propTypes = {\n  queryId: PropTypes.string.isRequired,\n  visualizationId: PropTypes.string,\n  apiKey: PropTypes.string.isRequired,\n  onError: PropTypes.func,\n};\n\nVisualizationEmbed.defaultProps = {\n  onError: () => {},\n};\n\nexport default routeWithApiKeySession({\n  path: \"/embed/query/:queryId/visualization/:visualizationId\",\n  render: pageProps => <VisualizationEmbed {...pageProps} />,\n  getApiKey: () => location.search.api_key,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport BigMessage from \"@/components/BigMessage\";\nimport NoTaggedObjectsFound from \"@/components/NoTaggedObjectsFound\";\nimport EmptyState from \"@/components/empty-state/EmptyState\";\n\nexport default function QueriesListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== \"\") {\n    return <BigMessage message=\"Sorry, we couldn't find anything.\" icon=\"fa-search\" />;\n  }\n  if (selectedTags.length > 0) {\n    return <NoTaggedObjectsFound objectType=\"queries\" tags={selectedTags} />;\n  }\n  switch (page) {\n    case \"favorites\":\n      return <BigMessage message=\"Mark queries as Favorite to list them here.\" icon=\"fa-star\" />;\n    case \"archive\":\n      return <BigMessage message=\"Archived queries will be listed here.\" icon=\"fa-archive\" />;\n    case \"my\":\n      return (\n        <div className=\"tiled bg-white p-15\">\n          <a href=\"queries/new\" className=\"btn btn-primary btn-sm\">\n            Create your first query\n          </a>{\" \"}\n          to populate My Queries list. Need help? Check out our{\" \"}\n          <a href=\"https://redash.io/help/user-guide/querying/writing-queries\">query writing documentation</a>.\n        </div>\n      );\n    default:\n      return (\n        <EmptyState\n          icon=\"fa fa-code\"\n          illustration=\"query\"\n          description=\"Getting the data from your datasources.\"\n          helpLink=\"https://help.redash.io/category/21-querying\"\n        />\n      );\n  }\n}\n\nQueriesListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import React from \"react\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Paginator from \"@/components/Paginator\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { UrlStateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\n\nimport { Query } from \"@/services/query\";\nimport { currentUser } from \"@/services/auth\";\nimport location from \"@/services/location\";\n\nimport QueriesListEmptyState from \"./QueriesListEmptyState\";\n\nimport \"./queries-list.css\";\n\nclass QueriesList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: \"all\",\n      href: \"queries\",\n      title: \"All Queries\",\n    },\n    {\n      key: \"favorites\",\n      href: \"queries/favorites\",\n      title: \"Favorites\",\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n    },\n    {\n      key: \"archive\",\n      href: \"queries/archive\",\n      title: \"Archived\",\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-archive\" />,\n    },\n    {\n      key: \"my\",\n      href: \"queries/my\",\n      title: \"My Queries\",\n      icon: () => <Sidebar.ProfileImage user={currentUser} />,\n      isAvailable: () => currentUser.hasPermission(\"create_query\"),\n    },\n  ];\n\n  listColumns = [\n    Columns.favorites({ className: \"p-r-0\" }),\n    Columns.custom.sortable(\n      (text, item) => (\n        <React.Fragment>\n          <a className=\"table-main-title\" href={\"queries/\" + item.id}>\n            {item.name}\n          </a>\n          <QueryTagsControl\n            className=\"d-block\"\n            tags={item.tags}\n            isDraft={item.is_draft}\n            isArchived={item.is_archived}\n          />\n        </React.Fragment>\n      ),\n      {\n        title: \"Name\",\n        field: \"name\",\n        width: null,\n      }\n    ),\n    Columns.custom((text, item) => item.user.name, { title: \"Created By\" }),\n    Columns.dateTime.sortable({ title: \"Created At\", field: \"created_at\" }),\n    Columns.dateTime.sortable({ title: \"Last Executed At\", field: \"retrieved_at\", orderByField: \"executed_at\" }),\n    Columns.custom.sortable((text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />, {\n      title: \"Refresh Schedule\",\n      field: \"schedule\",\n    }),\n  ];\n\n  componentDidMount() {\n    this.unlistenLocationChanges = location.listen((unused, action) => {\n      const searchTerm = location.search.q || \"\";\n      if (action === \"PUSH\" && searchTerm !== this.props.controller.searchTerm) {\n        this.props.controller.updateSearch(searchTerm);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.unlistenLocationChanges) {\n      this.unlistenLocationChanges();\n      this.unlistenLocationChanges = null;\n    }\n  }\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div className=\"page-queries-list\">\n        <div className=\"container\">\n          <PageHeader title={controller.params.pageTitle} />\n          <Layout className=\"m-l-15 m-r-15\">\n            <Layout.Sidebar className=\"m-b-0\">\n              <Sidebar.SearchInput\n                placeholder=\"Search Queries...\"\n                value={controller.searchTerm}\n                onChange={controller.updateSearch}\n              />\n              <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n              <Sidebar.Tags url=\"api/queries/tags\" onChange={controller.updateSelectedTags} />\n              <Sidebar.PageSizeSelect\n                className=\"m-b-10\"\n                options={controller.pageSizeOptions}\n                value={controller.itemsPerPage}\n                onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              />\n            </Layout.Sidebar>\n            <Layout.Content>\n              {!controller.isLoaded && <LoadingState />}\n              {controller.isLoaded && controller.isEmpty && (\n                <QueriesListEmptyState\n                  page={controller.params.currentPage}\n                  searchTerm={controller.searchTerm}\n                  selectedTags={controller.selectedTags}\n                />\n              )}\n              {controller.isLoaded && !controller.isEmpty && (\n                <div className=\"bg-white tiled table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )}\n            </Layout.Content>\n          </Layout>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst QueriesListPage = itemsList(\n  QueriesList,\n  () =>\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Query.query.bind(Query),\n          my: Query.myQueries.bind(Query),\n          favorites: Query.favorites.bind(Query),\n          archive: Query.archive.bind(Query),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return item => new Query(item);\n      },\n    }),\n  () => new UrlStateStorage({ orderByField: \"created_at\", orderByReverse: true })\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/queries\",\n    title: \"Queries\",\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"all\" />,\n  }),\n  routeWithUserSession({\n    path: \"/queries/favorites\",\n    title: \"Favorite Queries\",\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"favorites\" />,\n  }),\n  routeWithUserSession({\n    path: \"/queries/archive\",\n    title: \"Archived Queries\",\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"archive\" />,\n  }),\n  routeWithUserSession({\n    path: \"/queries/my\",\n    title: \"My Queries\",\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"my\" />,\n  }),\n];\n","import { isNil, get } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\n\nfunction QuerySnippetDialog({ querySnippet, dialog, readOnly }) {\n  const handleSubmit = useCallback(\n    (values, successCallback, errorCallback) => {\n      const querySnippetId = get(querySnippet, \"id\");\n\n      if (isNil(values.description)) {\n        values.description = \"\";\n      }\n\n      dialog\n        .close(querySnippetId ? { id: querySnippetId, ...values } : values)\n        .then(() => successCallback(\"Saved.\"))\n        .catch(() => errorCallback(\"Failed saving snippet.\"));\n    },\n    [dialog, querySnippet]\n  );\n\n  const isEditing = !!get(querySnippet, \"id\");\n\n  const formFields = [\n    { name: \"trigger\", title: \"Trigger\", type: \"text\", required: true, autoFocus: !isEditing },\n    { name: \"description\", title: \"Description\", type: \"text\" },\n    { name: \"snippet\", title: \"Snippet\", type: \"ace\", required: true },\n  ].map(field => ({ ...field, readOnly, initialValue: get(querySnippet, field.name, \"\") }));\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={isEditing ? querySnippet.trigger : \"Create Query Snippet\"}\n      footer={[\n        <Button key=\"cancel\" {...dialog.props.cancelButtonProps} onClick={dialog.dismiss}>\n          {readOnly ? \"Close\" : \"Cancel\"}\n        </Button>,\n        !readOnly && (\n          <Button\n            key=\"submit\"\n            {...dialog.props.okButtonProps}\n            disabled={readOnly || dialog.props.okButtonProps.disabled}\n            htmlType=\"submit\"\n            type=\"primary\"\n            form=\"querySnippetForm\"\n            data-test=\"SaveQuerySnippetButton\">\n            {isEditing ? \"Save\" : \"Create\"}\n          </Button>\n        ),\n      ]}\n      wrapProps={{\n        \"data-test\": \"QuerySnippetDialog\",\n      }}>\n      <DynamicForm id=\"querySnippetForm\" fields={formFields} onSubmit={handleSubmit} hideSubmitButton feedbackIcons />\n    </Modal>\n  );\n}\n\nQuerySnippetDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  querySnippet: PropTypes.object,\n  readOnly: PropTypes.bool,\n};\n\nQuerySnippetDialog.defaultProps = {\n  querySnippet: null,\n  readOnly: false,\n};\n\nexport default wrapDialog(QuerySnippetDialog);\n","import { get } from \"lodash\";\nimport React from \"react\";\n\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\nimport QuerySnippetDialog from \"@/components/query-snippets/QuerySnippetDialog\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport QuerySnippet from \"@/services/query-snippet\";\nimport { currentUser } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport notification from \"@/services/notification\";\nimport \"./QuerySnippetsList.less\";\n\nconst canEditQuerySnippet = querySnippet => currentUser.isAdmin || currentUser.id === get(querySnippet, \"user.id\");\n\nclass QuerySnippetsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom.sortable(\n      (text, querySnippet) => (\n        <div>\n          <a className=\"table-main-title clickable\" onClick={() => this.showSnippetDialog(querySnippet)}>\n            {querySnippet.trigger}\n          </a>\n        </div>\n      ),\n      {\n        title: \"Trigger\",\n        field: \"trigger\",\n        className: \"text-nowrap\",\n      }\n    ),\n    Columns.custom.sortable(text => text, {\n      title: \"Description\",\n      field: \"description\",\n      className: \"text-nowrap\",\n    }),\n    Columns.custom(snippet => <code className=\"snippet-content\">{snippet}</code>, {\n      title: \"Snippet\",\n      field: \"snippet\",\n    }),\n    Columns.avatar({ field: \"user\", className: \"p-l-0 p-r-0\" }, name => `Created by ${name}`),\n    Columns.date.sortable({\n      title: \"Created At\",\n      field: \"created_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n    Columns.custom(\n      (text, querySnippet) =>\n        canEditQuerySnippet(querySnippet) && (\n          <Button type=\"danger\" className=\"w-100\" onClick={e => this.deleteQuerySnippet(e, querySnippet)}>\n            Delete\n          </Button>\n        ),\n      {\n        width: \"1%\",\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    const { isNewOrEditPage, querySnippetId } = this.props.controller.params;\n\n    if (isNewOrEditPage) {\n      if (querySnippetId === \"new\") {\n        if (policy.isCreateQuerySnippetEnabled()) {\n          this.showSnippetDialog();\n        } else {\n          navigateTo(\"query_snippets\", true);\n        }\n      } else {\n        QuerySnippet.get({ id: querySnippetId })\n          .then(this.showSnippetDialog)\n          .catch(error => {\n            this.props.controller.handleError(error);\n          });\n      }\n    }\n  }\n\n  saveQuerySnippet = querySnippet => {\n    const saveSnippet = querySnippet.id ? QuerySnippet.save : QuerySnippet.create;\n    return saveSnippet(querySnippet);\n  };\n\n  deleteQuerySnippet = (event, querySnippet) => {\n    Modal.confirm({\n      title: \"Delete Query Snippet\",\n      content: \"Are you sure you want to delete this query snippet?\",\n      okText: \"Yes\",\n      okType: \"danger\",\n      cancelText: \"No\",\n      onOk: () => {\n        QuerySnippet.delete(querySnippet)\n          .then(() => {\n            notification.success(\"Query snippet deleted successfully.\");\n            this.props.controller.update();\n          })\n          .catch(() => {\n            notification.error(\"Failed deleting query snippet.\");\n          });\n      },\n    });\n  };\n\n  showSnippetDialog = (querySnippet = null) => {\n    const canSave = !querySnippet || canEditQuerySnippet(querySnippet);\n    navigateTo(\"query_snippets/\" + get(querySnippet, \"id\", \"new\"), true);\n    const goToSnippetsList = () => navigateTo(\"query_snippets\", true);\n    QuerySnippetDialog.showModal({\n      querySnippet,\n      readOnly: !canSave,\n    })\n      .onClose(querySnippet =>\n        this.saveQuerySnippet(querySnippet).then(() => {\n          this.props.controller.update();\n          goToSnippetsList();\n        })\n      )\n      .onDismiss(goToSnippetsList);\n  };\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button\n            type=\"primary\"\n            onClick={() => this.showSnippetDialog()}\n            disabled={!policy.isCreateQuerySnippetEnabled()}>\n            <i className=\"fa fa-plus m-r-5\" />\n            New Query Snippet\n          </Button>\n        </div>\n\n        {!controller.isLoaded && <LoadingState className=\"\" />}\n        {controller.isLoaded && controller.isEmpty && (\n          <div className=\"text-center\">\n            There are no query snippets yet.\n            {policy.isCreateQuerySnippetEnabled() && (\n              <div className=\"m-t-5\">\n                <a className=\"clickable\" onClick={() => this.showSnippetDialog()}>\n                  Click here\n                </a>{\" \"}\n                to add one.\n              </div>\n            )}\n          </div>\n        )}\n        {controller.isLoaded && !controller.isEmpty && (\n          <div className=\"table-responsive\">\n            <ItemsTable\n              items={controller.pageItems}\n              columns={this.listColumns}\n              context={this.actions}\n              orderByField={controller.orderByField}\n              orderByReverse={controller.orderByReverse}\n              toggleSorting={controller.toggleSorting}\n            />\n            <Paginator\n              totalCount={controller.totalItemsCount}\n              itemsPerPage={controller.itemsPerPage}\n              page={controller.page}\n              onChange={page => controller.updatePagination({ page })}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst QuerySnippetsListPage = wrapSettingsTab(\n  {\n    permission: \"create_query\",\n    title: \"Query Snippets\",\n    path: \"query_snippets\",\n    order: 5,\n  },\n  itemsList(\n    QuerySnippetsList,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest() {\n          return {};\n        },\n        getResource() {\n          return QuerySnippet.query.bind(QuerySnippet);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"trigger\", itemsPerPage: 10 })\n  )\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/query_snippets\",\n    title: \"Query Snippets\",\n    render: pageProps => <QuerySnippetsListPage {...pageProps} currentPage=\"query_snippets\" />,\n  }),\n  routeWithUserSession({\n    path: \"/query_snippets/:querySnippetId(new|[0-9]+)\",\n    title: \"Query Snippets\",\n    render: pageProps => <QuerySnippetsListPage {...pageProps} currentPage=\"query_snippets\" isNewOrEditPage />,\n  }),\n];\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty, join, get } from \"lodash\";\n\nimport Alert from \"antd/lib/alert\";\nimport Button from \"antd/lib/button\";\nimport Form from \"antd/lib/form\";\nimport Input from \"antd/lib/input\";\nimport Select from \"antd/lib/select\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\n\nimport { clientConfig } from \"@/services/auth\";\nimport recordEvent from \"@/services/recordEvent\";\nimport OrgSettings from \"@/services/organizationSettings\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\n\nconst Option = Select.Option;\n\nclass OrganizationSettings extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    settings: {},\n    formValues: {},\n    loading: true,\n    submitting: false,\n  };\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"org_settings\");\n    OrgSettings.get()\n      .then(response => {\n        const settings = get(response, \"settings\");\n        this.setState({ settings, formValues: { ...settings }, loading: false });\n      })\n      .catch(error => this.props.onError(error));\n  }\n\n  disablePasswordLoginToggle = () =>\n    !(clientConfig.googleLoginEnabled || clientConfig.ldapLoginEnabled || this.state.formValues.auth_saml_enabled);\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (!this.state.submitting) {\n      this.setState({ submitting: true });\n      OrgSettings.save(this.state.formValues)\n        .then(response => {\n          const settings = get(response, \"settings\");\n          this.setState({ settings, formValues: { ...settings } });\n        })\n        .catch(error => this.props.onError(error))\n        .finally(() => this.setState({ submitting: false }));\n    }\n  };\n\n  handleChange = (name, value) => {\n    this.setState(\n      prevState => ({ formValues: Object.assign(prevState.formValues, { [name]: value }) }),\n      () => {\n        if (this.disablePasswordLoginToggle() && !this.state.formValues.auth_password_login_enabled) {\n          this.handleChange(\"auth_password_login_enabled\", true);\n        }\n      }\n    );\n  };\n\n  renderGoogleLoginOptions() {\n    const { formValues } = this.state;\n    return (\n      <React.Fragment>\n        <h4>Google Login</h4>\n        <Form.Item label=\"Allowed Google Apps Domains\">\n          <Select\n            mode=\"tags\"\n            value={formValues.auth_google_apps_domains}\n            onChange={value => this.handleChange(\"auth_google_apps_domains\", value)}\n          />\n          {!isEmpty(formValues.auth_google_apps_domains) && (\n            <Alert\n              message={\n                <p>\n                  Any user registered with a <strong>{join(formValues.auth_google_apps_domains, \", \")}</strong> Google\n                  Apps account will be able to login. If they don{\"'\"}t have an existing user, a new user will be\n                  created and join the <strong>Default</strong> group.\n                </p>\n              }\n              className=\"m-t-15\"\n            />\n          )}\n        </Form.Item>\n      </React.Fragment>\n    );\n  }\n\n  renderSAMLOptions() {\n    const { formValues } = this.state;\n    return (\n      <React.Fragment>\n        <h4>SAML</h4>\n        <Form.Item>\n          <Checkbox\n            name=\"auth_saml_enabled\"\n            checked={formValues.auth_saml_enabled}\n            onChange={e => this.handleChange(\"auth_saml_enabled\", e.target.checked)}>\n            SAML Enabled\n          </Checkbox>\n        </Form.Item>\n        {formValues.auth_saml_enabled && (\n          <div>\n            <Form.Item label=\"SAML Metadata URL\">\n              <Input\n                value={formValues.auth_saml_metadata_url}\n                onChange={e => this.handleChange(\"auth_saml_metadata_url\", e.target.value)}\n              />\n            </Form.Item>\n            <Form.Item label=\"SAML Entity ID\">\n              <Input\n                value={formValues.auth_saml_entity_id}\n                onChange={e => this.handleChange(\"auth_saml_entity_id\", e.target.value)}\n              />\n            </Form.Item>\n            <Form.Item label=\"SAML NameID Format\">\n              <Input\n                value={formValues.auth_saml_nameid_format}\n                onChange={e => this.handleChange(\"auth_saml_nameid_format\", e.target.value)}\n              />\n            </Form.Item>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n\n  renderGeneralSettings() {\n    const { formValues } = this.state;\n    return (\n      <React.Fragment>\n        <h3 className=\"m-t-0\">General</h3>\n        <hr />\n        <Form.Item label=\"Date Format\">\n          <Select\n            value={formValues.date_format}\n            onChange={value => this.handleChange(\"date_format\", value)}\n            data-test=\"DateFormatSelect\">\n            {clientConfig.dateFormatList.map(dateFormat => (\n              <Option key={dateFormat}>{dateFormat}</Option>\n            ))}\n          </Select>\n        </Form.Item>\n        <Form.Item label=\"Time Format\">\n          <Select\n            value={formValues.time_format}\n            onChange={value => this.handleChange(\"time_format\", value)}\n            data-test=\"TimeFormatSelect\">\n            {clientConfig.timeFormatList.map(timeFormat => (\n              <Option key={timeFormat}>{timeFormat}</Option>\n            ))}\n          </Select>\n        </Form.Item>\n        <Form.Item label=\"Chart Visualization\">\n          <Checkbox\n            name=\"hide_plotly_mode_bar\"\n            checked={formValues.hide_plotly_mode_bar}\n            onChange={e => this.handleChange(\"hide_plotly_mode_bar\", e.target.checked)}>\n            Hide Plotly mode bar\n          </Checkbox>\n        </Form.Item>\n        <Form.Item label=\"Feature Flags\">\n          <Checkbox\n            name=\"feature_show_permissions_control\"\n            checked={formValues.feature_show_permissions_control}\n            onChange={e => this.handleChange(\"feature_show_permissions_control\", e.target.checked)}>\n            Enable experimental multiple owners support\n          </Checkbox>\n        </Form.Item>\n        <Form.Item>\n          <Checkbox\n            name=\"send_email_on_failed_scheduled_queries\"\n            checked={formValues.send_email_on_failed_scheduled_queries}\n            onChange={e => this.handleChange(\"send_email_on_failed_scheduled_queries\", e.target.checked)}>\n            Email query owners when scheduled queries fail\n          </Checkbox>\n        </Form.Item>\n        <Form.Item>\n          <Checkbox\n            name=\"multi_byte_search_enabled\"\n            checked={formValues.multi_byte_search_enabled}\n            onChange={e => this.handleChange(\"multi_byte_search_enabled\", e.target.checked)}>\n            Enable multi-byte (Chinese, Japanese, and Korean) search for query names and descriptions (slower)\n          </Checkbox>\n        </Form.Item>\n        <DynamicComponent name=\"BeaconConsentSetting\">\n          <Form.Item\n            label={\n              <>\n                Anonymous Usage Data Sharing <HelpTrigger type=\"USAGE_DATA_SHARING\" />\n              </>\n            }>\n            <Checkbox\n              name=\"beacon_consent\"\n              checked={formValues.beacon_consent}\n              onChange={e => this.handleChange(\"beacon_consent\", e.target.checked)}>\n              Help Redash improve by automatically sending anonymous usage data\n            </Checkbox>\n          </Form.Item>\n        </DynamicComponent>\n      </React.Fragment>\n    );\n  }\n\n  renderAuthSettings() {\n    const { settings, formValues } = this.state;\n    return (\n      <React.Fragment>\n        <h3 className=\"m-t-0\">\n          Authentication <HelpTrigger type=\"AUTHENTICATION_OPTIONS\" />\n        </h3>\n        <hr />\n        {!settings.auth_password_login_enabled && (\n          <Alert\n            message=\"Password based login is currently disabled and users will\n            be able to login only with the enabled SSO options.\"\n            type=\"warning\"\n            className=\"m-t-15 m-b-15\"\n          />\n        )}\n        <Form.Item>\n          <Checkbox\n            checked={formValues.auth_password_login_enabled}\n            disabled={this.disablePasswordLoginToggle()}\n            onChange={e => this.handleChange(\"auth_password_login_enabled\", e.target.checked)}>\n            <Tooltip\n              title={\n                this.disablePasswordLoginToggle()\n                  ? \"Password login can be disabled only if another login method is enabled.\"\n                  : null\n              }\n              placement=\"right\">\n              Password Login Enabled\n            </Tooltip>\n          </Checkbox>\n        </Form.Item>\n        {clientConfig.googleLoginEnabled && this.renderGoogleLoginOptions()}\n        {this.renderSAMLOptions()}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    const { loading, submitting } = this.state;\n    return (\n      <div className=\"row\" data-test=\"OrganizationSettings\">\n        <div className=\"col-md-offset-4 col-md-4\">\n          {loading ? (\n            <LoadingState className=\"\" />\n          ) : (\n            <Form layout=\"vertical\" onSubmit={this.handleSubmit}>\n              {this.renderGeneralSettings()}\n              {this.renderAuthSettings()}\n              <Button className=\"w-100\" type=\"primary\" htmlType=\"submit\" loading={submitting}>\n                Save\n              </Button>\n            </Form>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst OrganizationSettingsPage = wrapSettingsTab(\n  {\n    permission: \"admin\",\n    title: \"Settings\",\n    path: \"settings/organization\",\n    order: 6,\n  },\n  OrganizationSettings\n);\n\nexport default routeWithUserSession({\n  path: \"/settings/organization\",\n  title: \"Organization Settings\",\n  render: pageProps => <OrganizationSettingsPage {...pageProps} />,\n});\n","// eslint-disable-next-line import/prefer-default-export\nexport function absoluteUrl(url) {\n  const urlObj = new URL(url, window.location);\n  urlObj.protocol = window.location.protocol;\n  urlObj.host = window.location.host;\n  return urlObj.toString();\n}\n","import { isFunction, get } from \"lodash\";\nimport React from \"react\";\nimport Form from \"antd/lib/form\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport User from \"@/services/user\";\nimport notification from \"@/services/notification\";\nimport { UserProfile } from \"../proptypes\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\n\nclass ChangePasswordDialog extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPassword: { value: \"\", error: null, touched: false },\n      newPassword: { value: \"\", error: null, touched: false },\n      repeatPassword: { value: \"\", error: null, touched: false },\n      updatingPassword: false,\n    };\n  }\n\n  fieldError = (name, value) => {\n    if (value.length === 0) return \"This field is required.\";\n    if (name !== \"currentPassword\" && value.length < 6) return \"This field is too short.\";\n    if (name === \"repeatPassword\" && value !== this.state.newPassword.value) return \"Passwords don't match\";\n    return null;\n  };\n\n  validateFields = callback => {\n    const { currentPassword, newPassword, repeatPassword } = this.state;\n\n    const errors = {\n      currentPassword: this.fieldError(\"currentPassword\", currentPassword.value),\n      newPassword: this.fieldError(\"newPassword\", newPassword.value),\n      repeatPassword: this.fieldError(\"repeatPassword\", repeatPassword.value),\n    };\n\n    this.setState({\n      currentPassword: { ...currentPassword, error: errors.currentPassword },\n      newPassword: { ...newPassword, error: errors.newPassword },\n      repeatPassword: { ...repeatPassword, error: errors.repeatPassword },\n    });\n\n    if (isFunction(callback)) {\n      if (errors.currentPassword || errors.newPassword || errors.repeatPassword) {\n        callback(errors);\n      } else callback(null);\n    }\n  };\n\n  updatePassword = () => {\n    const { currentPassword, newPassword, updatingPassword } = this.state;\n\n    if (!updatingPassword) {\n      this.validateFields(err => {\n        if (!err) {\n          const userData = {\n            id: this.props.user.id,\n            old_password: currentPassword.value,\n            password: newPassword.value,\n          };\n\n          this.setState({ updatingPassword: true });\n\n          User.save(userData)\n            .then(() => {\n              notification.success(\"Saved.\");\n              this.props.dialog.close({ success: true });\n            })\n            .catch(error => {\n              notification.error(get(error, \"response.data.message\", \"Failed saving.\"));\n              this.setState({ updatingPassword: false });\n            });\n        } else {\n          this.setState(prevState => ({\n            currentPassword: { ...prevState.currentPassword, touched: true },\n            newPassword: { ...prevState.newPassword, touched: true },\n            repeatPassword: { ...prevState.repeatPassword, touched: true },\n          }));\n        }\n      });\n    }\n  };\n\n  handleChange = e => {\n    const { name, value } = e.target;\n    const { error } = this.state[name];\n\n    this.setState({ [name]: { value, error, touched: true } }, () => {\n      this.validateFields();\n    });\n  };\n\n  render() {\n    const { dialog } = this.props;\n    const { currentPassword, newPassword, repeatPassword, updatingPassword } = this.state;\n\n    const formItemProps = { className: \"m-b-10\", required: true };\n\n    const inputProps = {\n      onChange: this.handleChange,\n      onPressEnter: this.updatePassword,\n    };\n\n    return (\n      <Modal\n        {...dialog.props}\n        okButtonProps={{ loading: updatingPassword }}\n        onOk={this.updatePassword}\n        title=\"Change Password\">\n        <Form layout=\"vertical\">\n          <Form.Item\n            {...formItemProps}\n            validateStatus={currentPassword.touched && currentPassword.error ? \"error\" : null}\n            help={currentPassword.touched ? currentPassword.error : null}\n            label=\"Current Password\">\n            <Input.Password {...inputProps} name=\"currentPassword\" data-test=\"CurrentPassword\" autoFocus />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={newPassword.touched && newPassword.error ? \"error\" : null}\n            help={newPassword.touched ? newPassword.error : null}\n            label=\"New Password\">\n            <Input.Password {...inputProps} name=\"newPassword\" data-test=\"NewPassword\" />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={repeatPassword.touched && repeatPassword.error ? \"error\" : null}\n            help={repeatPassword.touched ? repeatPassword.error : null}\n            label=\"Repeat New Password\">\n            <Input.Password {...inputProps} name=\"repeatPassword\" data-test=\"RepeatPassword\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ChangePasswordDialog);\n","import React, { Fragment } from \"react\";\nimport { includes, get } from \"lodash\";\nimport Alert from \"antd/lib/alert\";\nimport Button from \"antd/lib/button\";\nimport Form from \"antd/lib/form\";\nimport Modal from \"antd/lib/modal\";\nimport Tag from \"antd/lib/tag\";\nimport User from \"@/services/user\";\nimport Group from \"@/services/group\";\nimport { currentUser } from \"@/services/auth\";\nimport { absoluteUrl } from \"@/services/utils\";\nimport { UserProfile } from \"../proptypes\";\nimport DynamicForm from \"../dynamic-form/DynamicForm\";\nimport ChangePasswordDialog from \"./ChangePasswordDialog\";\nimport InputWithCopy from \"../InputWithCopy\";\n\nexport default class UserEdit extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      groups: [],\n      loadingGroups: true,\n      regeneratingApiKey: false,\n      sendingPasswordEmail: false,\n      resendingInvitation: false,\n      togglingUser: false,\n    };\n  }\n\n  componentDidMount() {\n    Group.query().then(groups => {\n      this.setState({\n        groups: groups.map(({ id, name }) => ({ value: id, name })),\n        loadingGroups: false,\n      });\n    });\n  }\n\n  changePassword = () => {\n    ChangePasswordDialog.showModal({ user: this.props.user });\n  };\n\n  sendPasswordReset = () => {\n    this.setState({ sendingPasswordEmail: true });\n\n    User.sendPasswordReset(this.state.user)\n      .then(passwordLink => {\n        this.setState({ passwordLink });\n      })\n      .finally(() => {\n        this.setState({ sendingPasswordEmail: false });\n      });\n  };\n\n  resendInvitation = () => {\n    this.setState({ resendingInvitation: true });\n\n    User.resendInvitation(this.state.user)\n      .then(passwordLink => {\n        this.setState({ passwordLink });\n      })\n      .finally(() => {\n        this.setState({ resendingInvitation: false });\n      });\n  };\n\n  regenerateApiKey = () => {\n    const doRegenerate = () => {\n      this.setState({ regeneratingApiKey: true });\n      User.regenerateApiKey(this.state.user)\n        .then(apiKey => {\n          if (apiKey) {\n            const { user } = this.state;\n            this.setState({ user: { ...user, apiKey } });\n          }\n        })\n        .finally(() => {\n          this.setState({ regeneratingApiKey: false });\n        });\n    };\n\n    Modal.confirm({\n      title: \"Regenerate API Key\",\n      content: \"Are you sure you want to regenerate?\",\n      okText: \"Regenerate\",\n      onOk: doRegenerate,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  toggleUser = () => {\n    const { user } = this.state;\n    const toggleUser = user.isDisabled ? User.enableUser : User.disableUser;\n\n    this.setState({ togglingUser: true });\n    toggleUser(user)\n      .then(data => {\n        if (data) {\n          this.setState({ user: User.convertUserInfo(data) });\n        }\n      })\n      .finally(() => {\n        this.setState({ togglingUser: false });\n      });\n  };\n\n  saveUser = (values, successCallback, errorCallback) => {\n    const data = {\n      id: this.props.user.id,\n      ...values,\n    };\n\n    User.save(data)\n      .then(user => {\n        successCallback(\"Saved.\");\n        this.setState({ user: User.convertUserInfo(user) });\n      })\n      .catch(error => {\n        errorCallback(get(error, \"response.data.message\", \"Failed saving.\"));\n      });\n  };\n\n  renderUserInfoForm() {\n    const { user, groups, loadingGroups } = this.state;\n\n    const formFields = [\n      {\n        name: \"name\",\n        title: \"Name\",\n        type: \"text\",\n        initialValue: user.name,\n      },\n      {\n        name: \"email\",\n        title: \"Email\",\n        type: \"email\",\n        initialValue: user.email,\n      },\n      !user.isDisabled && currentUser.id !== user.id\n        ? {\n            name: \"group_ids\",\n            title: \"Groups\",\n            type: \"select\",\n            mode: \"multiple\",\n            options: groups,\n            initialValue: groups.filter(group => includes(user.groupIds, group.value)).map(group => group.value),\n            loading: loadingGroups,\n            placeholder: loadingGroups ? \"Loading...\" : \"\",\n          }\n        : {\n            name: \"group_ids\",\n            title: \"Groups\",\n            type: \"content\",\n            content: this.renderUserGroups(),\n          },\n    ].map(field => ({ readOnly: user.isDisabled, required: true, ...field }));\n\n    return <DynamicForm fields={formFields} onSubmit={this.saveUser} hideSubmitButton={user.isDisabled} />;\n  }\n\n  renderUserGroups() {\n    const { user, groups, loadingGroups } = this.state;\n\n    return loadingGroups ? (\n      \"Loading...\"\n    ) : (\n      <div data-test=\"Groups\">\n        {groups\n          .filter(group => includes(user.groupIds, group.value))\n          .map(group => (\n            <Tag className=\"m-b-5 m-r-5\" key={group.value}>\n              <a href={`groups/${group.value}`}>{group.name}</a>\n            </Tag>\n          ))}\n      </div>\n    );\n  }\n\n  renderApiKey() {\n    const { user, regeneratingApiKey } = this.state;\n\n    return (\n      <Form layout=\"vertical\">\n        <hr />\n        <Form.Item label=\"API Key\" className=\"m-b-10\">\n          <InputWithCopy id=\"apiKey\" className=\"hide-in-percy\" value={user.apiKey} data-test=\"ApiKey\" readOnly />\n        </Form.Item>\n        <Button\n          className=\"w-100\"\n          onClick={this.regenerateApiKey}\n          loading={regeneratingApiKey}\n          data-test=\"RegenerateApiKey\">\n          Regenerate\n        </Button>\n      </Form>\n    );\n  }\n\n  renderPasswordLinkAlert() {\n    const { user, passwordLink } = this.state;\n\n    return (\n      <Alert\n        message=\"Email not sent!\"\n        description={\n          <Fragment>\n            <p>\n              The mail server is not configured, please send the following link to <b>{user.name}</b>:\n            </p>\n            <InputWithCopy value={absoluteUrl(passwordLink)} readOnly />\n          </Fragment>\n        }\n        type=\"warning\"\n        className=\"m-t-20\"\n        afterClose={() => {\n          this.setState({ passwordLink: null });\n        }}\n        closable\n      />\n    );\n  }\n\n  renderResendInvitation() {\n    return (\n      <Button className=\"w-100 m-t-10\" onClick={this.resendInvitation} loading={this.state.resendingInvitation}>\n        Resend Invitation\n      </Button>\n    );\n  }\n\n  renderSendPasswordReset() {\n    const { sendingPasswordEmail } = this.state;\n\n    return (\n      <Fragment>\n        <Button className=\"w-100 m-t-10\" onClick={this.sendPasswordReset} loading={sendingPasswordEmail}>\n          Send Password Reset Email\n        </Button>\n      </Fragment>\n    );\n  }\n\n  rendertoggleUser() {\n    const { user, togglingUser } = this.state;\n\n    return user.isDisabled ? (\n      <Button className=\"w-100 m-t-10\" type=\"primary\" onClick={this.toggleUser} loading={togglingUser}>\n        Enable User\n      </Button>\n    ) : (\n      <Button className=\"w-100 m-t-10\" type=\"danger\" onClick={this.toggleUser} loading={togglingUser}>\n        Disable User\n      </Button>\n    );\n  }\n\n  render() {\n    const { user, passwordLink } = this.state;\n\n    return (\n      <div className=\"col-md-4 col-md-offset-4\">\n        <img alt=\"Profile\" src={user.profileImageUrl} className=\"profile__image\" width=\"40\" />\n        <h3 className=\"profile__h3\">{user.name}</h3>\n        <hr />\n        {this.renderUserInfoForm()}\n        {!user.isDisabled && (\n          <Fragment>\n            {this.renderApiKey()}\n            <hr />\n            <h5>Password</h5>\n            {user.id === currentUser.id && (\n              <Button className=\"w-100 m-t-10\" onClick={this.changePassword} data-test=\"ChangePassword\">\n                Change Password\n              </Button>\n            )}\n            {currentUser.isAdmin && user.id !== currentUser.id && (\n              <Fragment>\n                {user.isInvitationPending ? this.renderResendInvitation() : this.renderSendPasswordReset()}\n                {passwordLink && this.renderPasswordLinkAlert()}\n              </Fragment>\n            )}\n          </Fragment>\n        )}\n        <hr />\n        {currentUser.isAdmin && user.id !== currentUser.id && this.rendertoggleUser()}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { includes } from \"lodash\";\nimport Tag from \"antd/lib/tag\";\nimport Group from \"@/services/group\";\nimport { UserProfile } from \"../proptypes\";\n\nexport default class UserShow extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { groups: [], loadingGroups: true };\n  }\n\n  componentDidMount() {\n    Group.query().then(groups => {\n      this.setState({ groups, loadingGroups: false });\n    });\n  }\n\n  renderUserGroups() {\n    const { groupIds } = this.props.user;\n    const { groups } = this.state;\n\n    return (\n      <div>\n        {groups\n          .filter(group => includes(groupIds, group.id))\n          .map(group => (\n            <Tag className=\"m-t-5 m-r-5\" key={group.id}>\n              <a href={`groups/${group.id}`}>{group.name}</a>\n            </Tag>\n          ))}\n      </div>\n    );\n  }\n\n  render() {\n    const { name, email, profileImageUrl } = this.props.user;\n    const { loadingGroups } = this.state;\n\n    return (\n      <div className=\"col-md-4 col-md-offset-4 profile__container\">\n        <img alt=\"profile\" src={profileImageUrl} className=\"profile__image\" width=\"40\" />\n\n        <h3 className=\"profile__h3\">{name}</h3>\n\n        <hr />\n\n        <dl className=\"profile__dl\">\n          <dt>Name:</dt>\n          <dd>{name}</dd>\n          <dt>Email:</dt>\n          <dd>{email}</dd>\n          <dt>Groups:</dt>\n          <dd>{loadingGroups ? \"Loading...\" : this.renderUserGroups()}</dd>\n        </dl>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport EmailSettingsWarning from \"@/components/EmailSettingsWarning\";\nimport UserEdit from \"@/components/users/UserEdit\";\nimport UserShow from \"@/components/users/UserShow\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport User from \"@/services/user\";\nimport { currentUser } from \"@/services/auth\";\nimport \"./settings.less\";\n\nclass UserProfile extends React.Component {\n  static propTypes = {\n    userId: PropTypes.string,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    userId: null, // defaults to `currentUser.id`\n    onError: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { user: null };\n  }\n\n  componentDidMount() {\n    const userId = this.props.userId || currentUser.id;\n    User.get({ id: userId })\n      .then(user => this.setState({ user: User.convertUserInfo(user) }))\n      .catch(error => this.props.onError(error));\n  }\n\n  render() {\n    const { user } = this.state;\n    const canEdit = user && (currentUser.isAdmin || currentUser.id === user.id);\n    const UserComponent = canEdit ? UserEdit : UserShow;\n    return (\n      <React.Fragment>\n        <EmailSettingsWarning featureName=\"invite emails\" className=\"m-b-20\" adminOnly />\n        <div className=\"row\">{user ? <UserComponent user={user} /> : <LoadingState className=\"\" />}</div>\n      </React.Fragment>\n    );\n  }\n}\n\nconst UserProfilePage = wrapSettingsTab(\n  {\n    title: \"Account\",\n    path: \"users/me\",\n    order: 7,\n  },\n  UserProfile\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/users/me\",\n    title: \"Account\",\n    render: pageProps => <UserProfilePage {...pageProps} />,\n  }),\n  routeWithUserSession({\n    path: \"/users/:userId([0-9]+)\",\n    title: \"Users\",\n    render: pageProps => <UserProfilePage {...pageProps} />,\n  }),\n];\n","import React, { useState, useEffect, useMemo, useRef, useCallback } from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport Alert from \"antd/lib/alert\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport recordEvent from \"@/services/recordEvent\";\n\nfunction CreateUserDialog({ dialog }) {\n  const [error, setError] = useState(null);\n  const formRef = useRef();\n\n  useEffect(() => {\n    recordEvent(\"view\", \"page\", \"users/new\");\n  }, []);\n\n  const createUser = useCallback(() => {\n    if (formRef.current) {\n      formRef.current.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          dialog.close(values).catch(setError);\n        }\n      });\n    }\n  }, [dialog]);\n\n  const formFields = useMemo(() => {\n    const common = { required: true, props: { onPressEnter: createUser } };\n    return [\n      { ...common, name: \"name\", title: \"Name\", type: \"text\", autoFocus: true },\n      { ...common, name: \"email\", title: \"Email\", type: \"email\" },\n    ];\n  }, [createUser]);\n\n  return (\n    <Modal {...dialog.props} title=\"Create a New User\" okText=\"Create\" onOk={createUser}>\n      <DynamicForm fields={formFields} ref={formRef} hideSubmitButton />\n      {error && <Alert message={error.message} type=\"error\" showIcon />}\n    </Modal>\n  );\n}\n\nCreateUserDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n};\n\nexport default wrapDialog(CreateUserDialog);\n","import { isString, map, get, find } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Paginator from \"@/components/Paginator\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { UserPreviewCard } from \"@/components/PreviewCard\";\nimport InputWithCopy from \"@/components/InputWithCopy\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { UrlStateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport CreateUserDialog from \"@/components/users/CreateUserDialog\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport { currentUser } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport User from \"@/services/user\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport notification from \"@/services/notification\";\nimport { absoluteUrl } from \"@/services/utils\";\n\nfunction UsersListActions({ user, enableUser, disableUser, deleteUser }) {\n  if (user.id === currentUser.id) {\n    return null;\n  }\n  if (user.is_invitation_pending) {\n    return (\n      <Button type=\"danger\" className=\"w-100\" onClick={event => deleteUser(event, user)}>\n        Delete\n      </Button>\n    );\n  }\n  return user.is_disabled ? (\n    <Button type=\"primary\" className=\"w-100\" onClick={event => enableUser(event, user)}>\n      Enable\n    </Button>\n  ) : (\n    <Button className=\"w-100\" onClick={event => disableUser(event, user)}>\n      Disable\n    </Button>\n  );\n}\n\nUsersListActions.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    is_invitation_pending: PropTypes.bool,\n    is_disabled: PropTypes.bool,\n  }).isRequired,\n  enableUser: PropTypes.func.isRequired,\n  disableUser: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass UsersList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: \"active\",\n      href: \"users\",\n      title: \"Active Users\",\n    },\n    {\n      key: \"pending\",\n      href: \"users/pending\",\n      title: \"Pending Invitations\",\n    },\n    {\n      key: \"disabled\",\n      href: \"users/disabled\",\n      title: \"Disabled Users\",\n      isAvailable: () => policy.canCreateUser(),\n    },\n  ];\n\n  listColumns = [\n    Columns.custom.sortable((text, user) => <UserPreviewCard user={user} withLink />, {\n      title: \"Name\",\n      field: \"name\",\n      width: null,\n    }),\n    Columns.custom.sortable(\n      (text, user) =>\n        map(user.groups, group => (\n          <a key={\"group\" + group.id} className=\"label label-tag\" href={\"groups/\" + group.id}>\n            {group.name}\n          </a>\n        )),\n      {\n        title: \"Groups\",\n        field: \"groups\",\n      }\n    ),\n    Columns.timeAgo.sortable({\n      title: \"Joined\",\n      field: \"created_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n    Columns.timeAgo.sortable({\n      title: \"Last Active At\",\n      field: \"active_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n    Columns.custom(\n      (text, user) => (\n        <UsersListActions\n          user={user}\n          enableUser={this.enableUser}\n          disableUser={this.disableUser}\n          deleteUser={this.deleteUser}\n        />\n      ),\n      {\n        width: \"1%\",\n        isAvailable: () => policy.canCreateUser(),\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    if (this.props.controller.params.isNewUserPage) {\n      this.showCreateUserDialog();\n    }\n  }\n\n  createUser = values =>\n    User.create(values)\n      .then(user => {\n        notification.success(\"Saved.\");\n        if (user.invite_link) {\n          Modal.warning({\n            title: \"Email not sent!\",\n            content: (\n              <React.Fragment>\n                <p>\n                  The mail server is not configured, please send the following link to <b>{user.name}</b>:\n                </p>\n                <InputWithCopy value={absoluteUrl(user.invite_link)} readOnly />\n              </React.Fragment>\n            ),\n          });\n        }\n      })\n      .catch(error => {\n        const message = find([get(error, \"response.data.message\"), get(error, \"message\"), \"Failed saving.\"], isString);\n        return Promise.reject(new Error(message));\n      });\n\n  showCreateUserDialog = () => {\n    if (policy.isCreateUserEnabled()) {\n      const goToUsersList = () => {\n        if (this.props.controller.params.isNewUserPage) {\n          navigateTo(\"users\");\n        }\n      };\n      CreateUserDialog.showModal()\n        .onClose(values =>\n          this.createUser(values).then(() => {\n            this.props.controller.update();\n            goToUsersList();\n          })\n        )\n        .onDismiss(goToUsersList);\n    }\n  };\n\n  enableUser = (event, user) => User.enableUser(user).then(() => this.props.controller.update());\n\n  disableUser = (event, user) => User.disableUser(user).then(() => this.props.controller.update());\n\n  deleteUser = (event, user) => User.deleteUser(user).then(() => this.props.controller.update());\n\n  // eslint-disable-next-line class-methods-use-this\n  renderPageHeader() {\n    if (!policy.canCreateUser()) {\n      return null;\n    }\n    return (\n      <div className=\"m-b-15\">\n        <Button type=\"primary\" disabled={!policy.isCreateUserEnabled()} onClick={this.showCreateUserDialog}>\n          <i className=\"fa fa-plus m-r-5\" />\n          New User\n        </Button>\n        <DynamicComponent name=\"UsersListExtra\" />\n      </div>\n    );\n  }\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <React.Fragment>\n        {this.renderPageHeader()}\n        <Layout>\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput value={controller.searchTerm} onChange={controller.updateSearch} />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.PageSizeSelect\n              className=\"m-b-10\"\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive\" data-test=\"UserList\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  context={this.actions}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  totalCount={controller.totalItemsCount}\n                  itemsPerPage={controller.itemsPerPage}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </Layout.Content>\n        </Layout>\n      </React.Fragment>\n    );\n  }\n}\n\nconst UsersListPage = wrapSettingsTab(\n  {\n    permission: \"list_users\",\n    title: \"Users\",\n    path: \"users\",\n    isActive: path => path.startsWith(\"/users\") && path !== \"/users/me\",\n    order: 2,\n  },\n  itemsList(\n    UsersList,\n    () =>\n      new ResourceItemsSource({\n        getRequest(request, { params: { currentPage } }) {\n          switch (currentPage) {\n            case \"active\":\n              request.pending = false;\n              break;\n            case \"pending\":\n              request.pending = true;\n              break;\n            case \"disabled\":\n              request.disabled = true;\n              break;\n            // no default\n          }\n          return request;\n        },\n        getResource() {\n          return User.query.bind(User);\n        },\n      }),\n    () => new UrlStateStorage({ orderByField: \"created_at\", orderByReverse: true })\n  )\n);\n\nexport default [\n  routeWithUserSession({\n    path: \"/users/new\",\n    title: \"Users\",\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"active\" isNewUserPage />,\n  }),\n  routeWithUserSession({\n    path: \"/users\",\n    title: \"Users\",\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"active\" />,\n  }),\n  routeWithUserSession({\n    path: \"/users/pending\",\n    title: \"Pending Invitations\",\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"pending\" />,\n  }),\n  routeWithUserSession({\n    path: \"/users/disabled\",\n    title: \"Disabled Users\",\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"disabled\" />,\n  }),\n];\n","import { flatten } from \"lodash\";\n\nimport adminJobsRoutes from \"./admin/Jobs\";\nimport adminOutdatedQueriesRoutes from \"./admin/OutdatedQueries\";\nimport adminSystemStatusRoutes from \"./admin/SystemStatus\";\nimport alertRoutes from \"./alert/Alert\";\nimport alertsListRoutes from \"./alerts/AlertsList\";\nimport dashboardListRoutes from \"./dashboards/DashboardList\";\nimport dashboardRoutes from \"./dashboards/DashboardPage\";\nimport publicDashboardRoutes from \"./dashboards/PublicDashboardPage\";\nimport dataSourcesListRoutes from \"./data-sources/DataSourcesList\";\nimport editDataSourceRoutes from \"./data-sources/EditDataSource\";\nimport destinationsListRoutes from \"./destinations/DestinationsList\";\nimport editDestinationRoutes from \"./destinations/EditDestination\";\nimport groupsListRoutes from \"./groups/GroupsList\";\nimport groupsDataSourcesRoutes from \"./groups/GroupDataSources\";\nimport groupsMembersRoutes from \"./groups/GroupMembers\";\nimport homeRoutes from \"./home/Home\";\nimport querySourceRoutes from \"./queries/QuerySource\";\nimport queryViewRoutes from \"./queries/QueryView\";\nimport visualizationEmbedRoutes from \"./queries/VisualizationEmbed\";\nimport queriesListRoutes from \"./queries-list/QueriesList\";\nimport querySnippetsRoutes from \"./query-snippets/QuerySnippetsList\";\nimport organizationSettingsRoutes from \"./settings/OrganizationSettings\";\nimport userProfileRoutes from \"./users/UserProfile\";\nimport usersListRoutes from \"./users/UsersList\";\n\nexport default flatten([\n  adminJobsRoutes,\n  adminOutdatedQueriesRoutes,\n  adminSystemStatusRoutes,\n  alertRoutes,\n  alertsListRoutes,\n  dashboardListRoutes,\n  dashboardRoutes,\n  publicDashboardRoutes,\n  dataSourcesListRoutes,\n  editDataSourceRoutes,\n  destinationsListRoutes,\n  editDestinationRoutes,\n  groupsListRoutes,\n  groupsDataSourcesRoutes,\n  groupsMembersRoutes,\n  homeRoutes,\n  queriesListRoutes,\n  queryViewRoutes,\n  querySourceRoutes,\n  visualizationEmbedRoutes,\n  querySnippetsRoutes,\n  organizationSettingsRoutes,\n  usersListRoutes,\n  userProfileRoutes,\n]);\n","import { isString } from \"lodash\";\nimport navigateTo from \"./navigateTo\";\n\nexport default function handleNavigationIntent(event) {\n  let element = event.target;\n  while (element) {\n    if (element.tagName === \"A\") {\n      break;\n    }\n    element = element.parentNode;\n  }\n  if (!element || !element.hasAttribute(\"href\") || element.hasAttribute(\"download\")) {\n    return;\n  }\n\n  // Keep some default behaviour\n  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n    return;\n  }\n\n  const target = element.getAttribute(\"target\");\n  if (isString(target) && target.toLowerCase() === \"_blank\") {\n    return;\n  }\n\n  event.preventDefault();\n\n  navigateTo(element.href);\n}\n","import moment from \"moment\";\nimport * as Pace from \"pace-progress\";\nimport { isFunction } from \"lodash\";\nimport url from \"@/services/url\";\n\n// Ensure that this image will be available in assets folder\nimport \"@/assets/images/avatar.svg\";\n\n// Register visualizations\nimport \"@redash/viz/lib\";\n\nimport \"./antd-spinner\";\n\nPace.options.shouldHandlePushState = (prevUrl, newUrl) => {\n  // Show pace progress bar only if URL path changed; when query params\n  // or hash changed - ignore that history event\n  prevUrl = url.parse(prevUrl);\n  newUrl = url.parse(newUrl);\n  return prevUrl.pathname !== newUrl.pathname;\n};\n\nmoment.updateLocale(\"en\", {\n  relativeTime: {\n    future: \"%s\",\n    past: \"%s\",\n    s: \"just now\",\n    m: \"a minute ago\",\n    mm: \"%d minutes ago\",\n    h: \"an hour ago\",\n    hh: \"%d hours ago\",\n    d: \"a day ago\",\n    dd: \"%d days ago\",\n    M: \"a month ago\",\n    MM: \"%d months ago\",\n    y: \"a year ago\",\n    yy: \"%d years ago\",\n  },\n});\n\nfunction requireImages() {\n  // client/app/assets/images/<path> => /images/<path>\n  const ctx = require.context(\"@/assets/images/\", true, /\\.(png|jpe?g|gif|svg)$/);\n  ctx.keys().forEach(ctx);\n}\n\nfunction registerExtensions() {\n  const context = require.context(\"extensions\", true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  const modules = context\n    .keys()\n    .map(context)\n    .map(module => module.default);\n\n  return modules\n    .filter(isFunction)\n    .filter(f => f.init)\n    .map(f => f());\n}\n\nrequireImages();\nregisterExtensions();\n","import React from \"react\";\nimport Spin from \"antd/lib/spin\";\n\nSpin.setDefaultIndicator(<i className=\"fa fa-spinner fa-pulse\" />);\n","import notification from \"@/services/notification\";\n\nfunction addOnlineListener(notificationKey) {\n  function onlineStateHandler() {\n    notification.close(notificationKey);\n    window.removeEventListener(\"online\", onlineStateHandler);\n  }\n  window.addEventListener(\"online\", onlineStateHandler);\n}\n\nexport default {\n  init() {\n    window.addEventListener(\"offline\", () => {\n      notification.warning(\"Please check your Internet connection.\", null, {\n        key: \"connectionNotification\",\n        duration: null,\n      });\n      addOnlineListener(\"connectionNotification\");\n    });\n  },\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ApplicationArea from \"@/components/ApplicationArea\";\n\nimport \"@/config\";\n\nimport offlineListener from \"@/services/offline-listener\";\n\nReactDOM.render(<ApplicationArea />, document.getElementById(\"application-root\"), () => {\n  offlineListener.init();\n});\n","import React, { useState, useEffect } from \"react\";\nimport routes from \"@/pages\";\nimport Router from \"./Router\";\nimport handleNavigationIntent from \"./handleNavigationIntent\";\nimport ErrorMessage from \"./ErrorMessage\";\n\nexport default function ApplicationArea() {\n  const [currentRoute, setCurrentRoute] = useState(null);\n  const [unhandledError, setUnhandledError] = useState(null);\n\n  useEffect(() => {\n    if (currentRoute && currentRoute.title) {\n      document.title = currentRoute.title;\n    }\n  }, [currentRoute]);\n\n  useEffect(() => {\n    function globalErrorHandler(event) {\n      event.preventDefault();\n      setUnhandledError(event.error);\n    }\n\n    document.body.addEventListener(\"click\", handleNavigationIntent, false);\n    window.addEventListener(\"error\", globalErrorHandler, false);\n\n    return () => {\n      document.body.removeEventListener(\"click\", handleNavigationIntent, false);\n      window.removeEventListener(\"error\", globalErrorHandler, false);\n    };\n  }, []);\n\n  if (unhandledError) {\n    return <ErrorMessage error={unhandledError} />;\n  }\n\n  return <Router routes={routes} onRouteChange={setCurrentRoute} />;\n}\n","module.exports = __webpack_public_path__ + \"images/avatar.svg\";","var map = {\n\t\"./en-SG\": 436,\n\t\"./en-SG.js\": 436,\n\t\"./en-au\": 437,\n\t\"./en-au.js\": 437,\n\t\"./en-ca\": 438,\n\t\"./en-ca.js\": 438,\n\t\"./en-gb\": 439,\n\t\"./en-gb.js\": 439,\n\t\"./en-ie\": 440,\n\t\"./en-ie.js\": 440,\n\t\"./en-il\": 441,\n\t\"./en-il.js\": 441,\n\t\"./en-nz\": 442,\n\t\"./en-nz.js\": 442\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 764;"],"sourceRoot":""}